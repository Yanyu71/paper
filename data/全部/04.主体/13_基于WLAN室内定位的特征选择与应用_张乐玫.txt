第一章绪论
1.1研究背景
将移动终端作为多种移动业务的载体，而不仅仅是基础的通讯工具这种思想 最早始于20世纪90年代，随着科技的发展，以手机、笔记本电脑和pad为主的 移动设备因为方便携带和梦渐成为出行的必需品而被越来越多的开发商、运营商 和服务提供商青睐，从而研究人员在其基础上开发出许多类型的应用和服务，基 于位置的服务是其中最重要的一个大类。
基于位置的服务(LBS, Location-Based Services)是一系列利用移动设备地理 位置信息来提供服务的集合，根据服务的功能主要分为三大类：第一类为公共安 全和紧急服务，即将移动设备作为有价值的接入点，当遇到紧急情况是，该移动 设备可以提供实时的位置信息，以便公安机关等快速定位；第二类是对于企业的 服务，这一部分是包括允许公司快速进行资产追踪、现场服务调动、路线优化、 员工管理等；最后一点为顾客业务，也就是包括导航、基于位置的广告推送、找 人服务、位置查询以及与位置相关的游戏等，这一部分作为现今的主要维护点和 扩展点得到广泛的关注。基于位置服务的基础是位置信息，就这方面而言服务的 多元化、服务的质量和客户的满意度都以位置信息的质量为标准。在定位系统的 发展过程中发现，越来越多的位置信息在许多领域扮演者越来越重要的地位，特 别是应用于大型的购物中心的广告打折等信息推送、医院楼层间的室内导航、机 场的路线指引，以及大型游乐场所和博物馆等地的位置信息提供等。因此，如何 从无缝连接的角度来提供一个更高精度、更高可靠性、实时性更强的位置服务已 成为各个服务提供商、研究机构和各个大学实验室的研究重点。
众所周知，室外定位系统随着全球定位系统(GPS, Global Positioning Service) 的兴起和优化，民用的GPS定位系统在室外空旷环境中的定位精度可以达到10m 以内，该定位精度己经基本满足了人们在室外环境中的定位需求，并成为了人们 外出必不可少的一部分。而室内环境由于其复杂多变的信道特征和室内较多人 流、建筑设施等的遮挡带来的影响，使得GPS在室内环境下无法达到较高的精 度，表现出和室外环境中相匹配的性能。因此，怎样在室内环境下克服相应的困 难而使得室内定位系统的定位精度和可使用性等性能上升一级己成为当下学者 们和研究者们亟待解决的问题。
正因如此，一个更精确、更可靠、更实用的室内定位系统能够向人们提供更 优质的生活品质、更便捷的服务从而更有助于提高人们的生活质量，因而，室内
1
定位系统和相应领域的研究伴随着极大的学术挑战、广阔的商业前景和巨大的商 业价值。随着学术界和商业界对室内定位系统及相应技术的研究和发展，室内定 位技术根据系统的不同可以分为基于射频信号(RFID, Radio Frequency Identification)的室内定位系统，基于红外信号的室内定位系统，基于超宽带(UWB, Ultra-Wide Band)的室内定位系统，基于电磁信号的室内定位系统，基于蓝牙 (Bluetooth)的室内定位系统，基于全球导航卫星系统(GNSS, Global Navigation Signal System)的室内定位系统，以及基于WLAN/WiFi的室内定位系统等。比较 而言，前几种定位系统或是需要进行额外的无线信号接入点的部署，或是需要额 外特别定制整套定位设施，或是需要定位信号受周围环境的影响严重导致实际使 用中定位精度的大幅度下降，或是无线定位信号的覆盖范围有限而导致该技术无 法应用于实践，而随着Wifi热点的广泛部署和普及，网络本身已达到大规模覆 盖的程度，加之，单个Wifi接入点的覆盖范围可以达到50m,各个运营商正在 策划打造无处不在、无缝连接的WLAN系统，成本更低，应用范围更广，对基 础设施的需求更低。因此，WLAN室内定位系统无疑是最合适的室内定位系统。 另外，根据定位方式的不同，室内定位算法可以分为三角测量法和位置指纹法等。 三角测量法在技术上要求预先知道多个无线接入点的部署位置，根据位置信息运 用三角定位技术来得到使用之的位置，这种方法在室外环境中被得到广泛的应 用，包括GPS在内的许多室外定位方法在三角测量法的基础上获得了很高的使 用价值和商业价值，但三角测量法对于非视距传播(NLOS)和多径传播的情况则 无法获得更加准确的位置信息，而室内环境的信道空间正是由多径传播和非视距 传播环境所组成。而相比较而言，位置指纹法应用模式识别的原理，无需在意空 间中的信号传播路径，取而代之的是考虑平面中某点所呈现的信号强度图谱，通 过相应的算法来获得移动端的位置信息，这种方式更加实用，若选择合适的算法， 则该定位系统的刚干扰能力更强，更有利于室内大规模的部署和应用。
除此之外，室内定位未来的应用场景也十分广阔，概括下来可分为以下几类：
1.增强现实技术(AR, Augmented Reality)
增强现实技术主要采用计算机技术，将虚拟合成的数字图像，包括物体、场 景等，与现实世界的真实环境相结合，达到虚实结合，虚拟世界与真实世界实时 交互的目的，并以此达到一种超现实的感官体验。在室内定位方面，可以通过室 内位置信息，结合真实的室内基础设施，允许使用者获取对应物体的信息，将房 间的摆设布置成其他样子等。
2.校园位置服务：
校园室内位置信息结合校园的3D地图，可以提供校园中的师生和员工更加 方便的找到相应的教室、水房、食堂等场所。同时，通过辅助信息可以提供教学 楼内对应教室的课程表和空教室表，从而更有助于学生和老师等合理安排和利用 学校的资源。
3.大型博物馆的引导观光
通过移动设备对移动设备持有者的持续定位，博物馆可根据位置信息来判断 游客的位置，和周边环境，从而向游客推送相应展区的信息说明。另外，游客当 前位置信息结合博物馆的室内地图能够更快的规划出游客到达下一目标位置的 最佳路线。
4.机场、公交车站、火车站和地铁站的位置提供服务
室内定位系统可以帮助使用者在手机上标注使用者出当前位置，并指引出可 以到达目标位置的路线。
5.目标广告推送业务
这项业务己经于2010年5月20日在美国旧金山的Helsinki City Center中心 投入使用，该项目结合GloPos移动应用，虽然该应用只能运行在2G手机上， 且75%的定位精度只能达至！］ 12.5m,但这个项目的成功实施为室内定位的应用前 景打开了市场。
经过分析，对于基于WLAN室内定位系统的指纹识别算法的研究必将伴随 着极大的使用价值、商业价值和学术价值。
1.2国内外研究现状
自美国联邦通信委员会(FCC, Federal Communication Commission)颁布 E-911 条例，要求移动运营商向移动设备用户提供基于位置的服务以来，位置服务因此 逐渐走入人们的视野，如今巳成为当下的热点话题，而基于WLAN的室内定位 技术的研究最早可追溯到20世纪90年代在美国兴起的热点地图应用，该应用允 许人们在地图上标注无线热点位置，后来该技术便发展成为定位技术。
根据对已有室内定位技术的研究，之前的学者己在很多方面对室内定位技术 的研究和发展做出了贡献⑴⑵，已有许多文献对当下的定位技术做过简要的调査 报告。例如2007年的文献⑶将室内定位算法分为三大类：三角测量法，像室内 外定位系统常用的有AOA、TOA和TDOA等：场景分析法，又分为概率性算法 和确定性算法，这一类的具体算法包括K-NN、SVM和神经■网络(NN, Neural Network)等；邻近分析法，代表这种方法的定位系统包括使用发送器的单一身份 验证(ID)来确定移动端位置的RFID算法等。文献囲和文献［习从概念上描述定位系 统的定位、各个定位算法及评价不同定位算法的指标等。概括而言，在LBS的 推动下，位置信息已成为当下研究人员关注和研究的热点，在一个相对精确位置 信息的基础上，各个运营商和服务提供商才能提供更多、更好、更优质、更富有 创新性和创造力的产品，从而用户各方面的体验才能有所提高和保障。
然而，现阶段室内定位系统仍然面临许多挑战，概括总结如下几点：
定位性能方面。主要考虑室内定位的精确度、定位系统可覆盖到的范围和定 位时延。
成本及定位复杂度方面。室内定位成本和复杂性主要表现在是否需要额外的 硬件设施，系统的容错能力、系统的可靠性和人员成本等。
安全性方面。主要理解为定位结果只有相对有权限的人才能获取和显示。这 点需要保护用户的隐私和用户数据传播过程中的安全性。
实用性方面。由于室内环境信道特征复杂，多径传播、反射、衍射、人员物 体的遮挡随处可见，因此一个好的定位系统应该在研究的过程中考虑到是否能够 在实际环境下使用，并且在实施的过程中，系统的性能方面差异不能过大。
1.3论文的创新点及限制条件
1.3.1论文的创新点
论文根据己有的研究成果，建立了一整套室内定位系统和研究方案，并最终 在定位终端和服务器上得以开发和实现，定位步骤大致为先使用在手机终端 .Android平台上开发出的手机应用收集周围环境下的对应信号接入点的MAC地 址和对应的RSS接受信号强度，并将这些信息发送给实验室的服务器，有服务 器计算对应的位置传送给手机终端，最终将结果显示在手机屏幕上。
在研究的过程中，论文所做的工作主要有以下几点：
1.指纹库的收集过程。在收集数据样本的阶段，有两种釆集方式，一种是 在区域的中心固定点一次性采集数据，另一种是在区域内均匀采集数 据。在实验过程中以上两种方式均有使用。
2.其次，该论文基于模式识别机器学习算法展开，对机器学习算法在定位 方面的性能进行了详细描述和比较。
3.在当前已使用的机器学习算法的基础上引入提升算法。
4.引入特征选择算法在减小噪音，提取最有价值的信号接入点，从而达到 降低训练复杂度，缩短训练时间，提高定位精度的目的。
1.3.2论文的限制条件
在对论文中描述的室内定位系统及相应算法的仿真阶段，有以下几点限制条 件需要注意和改善：
首先，该系统的设计和测试均是以北京邮电大学第三教学楼内第六层的平面 及639室进行规划和设计的，未考虑到其他楼层，即3D模型的定位效果和定位 情况。
其次，因为室内定位系统的设计和实施仍然是一项耗费时间的工作，因此， 在实验的过程中，对于模型的训练周期前后只经历了半年的时间，但半年内定位 模型的准确性几乎不变。
另外，对于考虑到不同的移动装置的组件来自不同的生产厂家，由不同的材 质构成，对相同接入点在同以地理位置接收到的信号强度也会存在不同，设备的 异构性不可避免，但在论文中并未加以考虑，而是使用的IBM同一批出厂的测 试手机进行的数据收集和仿真测试。
1.4本文的主要内容及章节安排
论文第一章从宏观角度介绍了室内定位的研究背景和意义，即课题研究的依 据，指出了室内定位的商业前景和学术价值。并且根据国内外的资料，总结了室 内定位的起源和发展，指出了现阶段室内定位系统和算法所面临的一些问题。本 章第三节总结了正片论文的创新点，同时指出了实验背景下的一些限制条件和需 要改进的方面。本章最后一节就论文的总体架构做出了说明。
论文的第二章就室内定位相关技术，即理论依据做出了详细的说明。第一节 从室内定位系统的角度介绍了不同定位系统的原理，主要依据的定位算法的角度 来分析各个系统间的优缺点，并给出了实例说明。涉及到的定位系统包括GPS 卫星定位系统、红外定位系统、传感器定位系统、蓝牙定位系统和WLAN/WiFi 定位系统。第二节从定位算法的角度详细介绍了不同定位算法的原理和试用场 景。本章最后一节就前两节的内容作出了总结和梳理。
论文第三章节具体介绍了基于WLAN/WiFi室内定位系统，指纹测量技术背 景下的具体算法，简要介绍了模式识别、机器学习的理论研究背景，并对相应的 算法具体展开说明，包括使用某种算法的前提假设、使用条件和使用中的注意事 项等。其中第三章第五节为现阶段室-内定位方法中新使用的定位算法，从实验结 果数据显示，虽然该算法在最初使用时并未表现出优势，但当引入适当的特征选 择算法后，性能将明显提升。
论文第四章和第五章是该项目的主要创新点。第四章将机器学习领域的提升 算法引入室内定位中，结合第五章的特征选择算法，既提升了定位算法的精度， 又减少了实时定位的时延。论文第五章从室内定位给算法的数据处理入手，对数 据中的噪声进行处理，对样本数据维度进行压缩，从而达到缩短模型训练时间、 降低模型复杂度、提高室内定位模型容错能力和泛化能力的目的。第四章提到的 特征选择算法最早来源于对文本数据的处理,在文本挖掘领域该算法背的到广泛 的应用，而在室内定位系统的研究中却少有提及，因此，特征选择算法的应用可 以说对该领域提出了新的研究方向，不仅仅是定位精度的提高，更是从交叉领域 的方面考虑的突破。
论文第六章从项目实施的角度具体介绍室内定位系统的部署方案和定位方 案，并给出了实验性能测试结果和实验结果分析评估。首先从实验环境搭建、测 试环境选择和实验数据收集的角度进行逐一介绍；接着从实验过程和结果的角度 给出分析，并将结果与传统的室内定位结论进行比较。
论文第七章进行全文的总结，并给出了下一步实验的展望，对之后的研究提 出了可供参考的研究思路。
第二章室内定位技术
根据第一章的描述，无线移动端或持有者的位置信息可以为许多领域提供帮 助，例如在网络规划阶段提升无线网络的性能⑹，网络适应口，和负载均衡同等。 室内无线定位系统(IPS, Indoor Positioning System)仅考虑例如房屋内的室内环 境。本章首先依据信号类型的不同对室内定位系统进行划分，其次介绍了现阶段 室内定位的主要算法，在本章末尾对第二章进行小结。
2.1室内定位系统
根据文献〔9］的描述，无线定位系统的定义是在一个例如医院、体育馆、学校 等物理环境中，能够不间断地、实时地提供某物或某人的位置信息的系统。.现阶 段的主要室内定位系统根据信号类型的不同可以分为以下几类。
2.1.1 GPS卫星定位系统
GPS, Global Positioning System技术的定位基础是时间，依靠环绕在地球轨 道周围的卫星携带的同步且稳定的原子时钟，空间中卫星的位置也需要被精确检 测。GPS卫星向地面持续发送载有当前时间戳和位置信息的数据，地面的GPS 接收器接收这些数据，并通过求解一定的方程组来获得接收器当前的位置信息。 该方程组含有4个未知数，因此，接收装置至少需要接收来自不同方位的四个卫 星信号组成4个方程组，从而获得当前位置和接收器与卫星的时间差(其中三组 方程用来计算当前位置，最后一组方程用来计算时间差)。从定位算法上来讲， GPS定位系统釆用的是三边定位法,飞行时间(TOF, Time ofFight)辅助TOA(Time of Arrival)算法，依据三个球面所形成的交点确定位置。
随着时代的发展，GPS模块的成本已不再高昂，各个移政端模块在出厂时便 自动嵌入了 GPS芯片，同时，目前，地球上方已有24颗GPS定位卫星，持续 向全球发射卫星信号，这使得室外环境下无处不在并保证精度的定位己经成为可 能。分析可知GPS定位的必要条件是信号传播路径需要视距传播，而室内环境 中因为有建筑物和人流的遮挡，传播信号也会受到房屋、墙壁等的衰减和散射， 因此，室内环境中并不能仅通过GPS卫星来实现定位，这时便诞生了 A-GPS室 内定位系统，即Assisted GPS。
A-GPS定位系统通过结合蜂窝基站数据，结合传统的GPS卫星算法，另外 还需要有着较高功率的辅助服务器同时接入网络。整个定位流程分为两个阶段： 测量阶段和计算阶段。在测量阶段中，移动端（主要指手机）用户从移动服务提供 商获取数据和参考时间，而不是直接从地球卫星获取，接入网络中的辅助服务器 需要持续的从卫星获得日志数据（主要指卫星的日历信息），这个过程大大节省了 从卫星下载日历数据的时间，通常需要12.5分钟。当手机接收到GPS原始信号 后，测量阶段结束，定位进入计算阶段。手机解调GPS定位信号，根据方程获 得手机到卫星的伪距，并将该信息上传到服务器，服务器根据伪距和辅助信息对 GPS信息进行处理，估算手机真实位置再传送回移动端。
A-GPS得益于美国联邦通信委员会提出的E-911服务，要求运营商向移动用 户提供位置信息服务。因此，运营商在建立基站的同时会加入GPS的辅助模块。 与传统的GPS定位相比较，A-GPS能提供范围更广、更省电、速度更快的定位 服务，理想的误差范围在10公尺以内。
经过定位过程的分析可知，A-GPS在定位过程中需要与网络的多次传输来 获得所需数据，这回大量占用运营商的空中资源；另外，A-GPS业务需要在特 殊定制的手机上才能开通，且GPS服务耗电量大，会加速减少电池的寿命；在 很多接收信号受限条件下，如高温环境、高建筑物内，A-GPS的对定位会花费 更多的额外时间。
2.1.2-红外定位系统
红外定位系统（IR, Infrared）利用物体释放的红外信号，计算发送端与接收端 之间的距离，从而得到绝对的位置估计。由于电视、打印机、手机、PDA等很 多设备均能发送红外信号，因此，红外定位系统成为最常见的室内定位系统之一。 Active Badge室内定位系统是20世纪90年代有剑桥的AT&T实验室开发出的基 于红外定位系统的室内定位装置。Active Badge通过漫反射红外技术，在一幢大 楼内的各个房间安置一个或多个红外信号接收器，而每个需要定位的人员手上都 有一个带有唯一标识的红外发射器，当发射器向距离最近的红外接收器发送红外 信号后，该接受器将会把探测到的唯一标识发送到中心服务器，中心服务器根据 接收器的位置和唯一标识符定位出该人员的绝对位置。该项目的定位精度可以达 '到一个房间的大小，这取决于房间的尺寸和红外发射端传播的距离。
红外定位系统存在很多优点。首先，因为红外线的覆盖范围较小，因此若合 理的布置红外接收装置和中心系统，那么定位精度相对于其他室内定位系统较 高。其次，不论是红外接收装置还是红外发射装置，它们的尺寸相对较小，重量 较轻，便于携带，也便于室内环境的部署而不会造成视觉上的影响。另外，红外 定位的系统架构较为简单，不需要消耗额外时间来安装和维护。最后，红外装置
的价格合理，开发商不需要投入过大的成本。
但同时，红外定位系统亦存在许多缺陷。红外线的覆盖范围较小，只能达到 几米，这就表示在相对较大的场所需要设置多个红外接收装置，这无疑提高了定 位成本。除此之外，红外接收装置需要使用特殊的电缆连接，而这种电缆却并不 廉价，考虑到若要在大楼内的每一个角落都能达到定位的目的，则该大楼内的每 个房间至少需要安装一个红外接收装置，因此，这种开销很大的特殊的电缆并不 能为开发商节省开支。另外，红外信号受到日光灯和阳光的影响较大，在有日光 或等照射的角落，红外定位系统的性能将会受到标。再者，红外信号的传播极 易受到各种因素的干扰，例如衣物和人群等，如果使用者将红外接收装置放在衣 服口袋里或大衣下面，那么红外发射器发出的红外信号则无法被红外接收器正常 接收，从而红外室内定位系统将无法正常工作。
2.1.3射频识别定位系统
无线射频识别系统(RFID)的系统组成包括数据管理系统、阅读器(reader)和标 签(tag)组成，其形式根据标签是否自供电源主要分为两种，即主动和被动两种形 式。不论哪种网络系统，对定位信息的处理都是有阅读器决定，阅读器在一定区 域内发送电磁场，同时触发磁场内的标签向其发送定位数据。不同之处在于，在 被动的网络系统中，定位标志并不自带电源，利用阅读器发出的磁场能量自动被 触发。而在主动的网络系统中，标签自带电源电池，能够发送信号强度信息，从 而阅读器可以使用一系列的定位算法来进行无线定位。
基于无线射频识别的室内定位技术已经被应用与较为复杂的室内环境中，例 如医院、办公室等。对于被动的射频识别系统而言，因为电子标签并不自带电池, 因此定位范围相对较小，但标签体积较小，价格较便宜，且不需要经常维护，因 此额外的维护费用低，同时节能，因而使用寿命相对较长，但另一方面，被动的 电子标签能提供的数据有限，不能提供信号强度信息，因此，定位方式比较单一, 定位精度较低。相比较而言，自带电池的电子标签可以提供信号强度信息，识别 距离较长，能达到几十甚至上百米，阅读器通过使用信号强度结合一定的算法， 例如ToF(TimeofFight)等，能够提供更精确的定位。但由于主动的电子标签需要 电池供电，因此使用寿命相对较短，尺寸相对较大。就整个射频识别室内定位系 统而言，该绝对定位技术需要大量的基础设施建设，也需要额外的人力物力来对 设施进行安装和长期的维护。
2.1.4超宽带定］立系统
超宽带(UWB, Ultra Wide Band)技术是利用脉冲信号进行高速无线数据传输 的短距离通信技术。根据超宽带的定位，相对带宽大于0.2或在传输过程中带宽 大于500MHz的通信系统成为UWB系统。超宽带系统通过度量从一系列固定点 指向移动标签的阈值和角度，并通过多边度量算法和多角度度量算法来获取移动 端的位置信息。整个定位过程类似于GPS卫星定位系统，但不同的是卫星信号 在室内环境下容易受到干扰，从而影响定位的精确度，而超宽带信号的穿透能力 和抗多径能力较强，因此更适用于室内定位环境。剑桥大学AT&T实验室发布的 Ubisense系统就是使用超宽带技术的定位系统，系统主要由3部分组成：传感器、 电子标识和软件平台。同时Ubisense使用TDOA和AOA算法相结合，定位精度 高达10cm。
与传统的窄带系统相比，超宽带信号使用的频谱范围从3.1GHz到10.6GHz, 宽度达7.5GHz,因此超宽带技术的空间容量大；UWB系统的辐射频谱低，不易 被截取和发现，因此具有较高的安全性；UWB严格限制发射功率来进行，也不 需要调制解调技术，因此定位成本低，系统功耗低，基础设施复杂度低；另外， UWB信号具有较强的穿透力，且信号抗多径效果好，能够提供较高的定位精度。
除了以上所总结的各项优点，超宽带系统用于定位不可避免的存在缺点。用 超宽带进行定位之前需要规划和建设额外的定位设施，且定位成本随着定位范围 的增大而增长。这使得UWB系统只适用于小范围的室内定位环境。
2.1.5蓝牙定位系统
蓝牙(Bluetooth)是电子设备之间进行无线通信的另一种手段，蓝牙信号的传 播频率在2.402GHz到2.480GHz之间，传播距离分为三类，分别是5m, 10m和 100mo现在市场上最常见的传播距离在10-20m之间，也就是第二类。现在许多 电脑、手机等移动设备都安装有蓝牙模块，使用这些蓝牙模块定位其精度最优可 达到2m。蓝牙设备间的相互通信建立在MAC协议的基础上，在定位网络中形 成一种称之为主/从(master/slaves)模式的定位方式，即接入单一网络中国的一台 蓝牙设备为主机，其它的蓝牙设备为从属机，一台主设备最多可同时连接7台从 设备，一台从设备最多可同时连接2台主设备。蓝牙定位算法采用RSSI(Received Signal Strength Indication),根据接收到的信号强度信息转化成距离来确定从属机 的位置。苹果公司在2013年发布的iBeacons就是基于蓝牙的定位方案。
蓝牙信号定位有很多优势。就安全性来说，蓝牙设备在通信前需要进行密码 配对，只有配对成功的设备之间才能互相通信，这增加了数据传输的安全性。成
10
本方面，随着科技水平的提高，蓝牙模块价格低廉，模块也能做到低功耗。
就缺点而言，蓝牙设备组成的网络最多只能容纳8个蓝牙设备同时接入，如 果需要更多的设备同时接入，则需要额外技术将多个网络连在一起。蓝牙的通信 速率也非常有限，在网络流向较大时会遇到数据传输瓶颈，这点上，蓝牙网络不 如WLAN和WiFio虽然蓝牙定位技术在一定条件下可以达到2-3m的精度，但 计算位置的延时需要20s的时间，蓝牙信号传播的带宽范围混杂WiFi等多种其 他信号，因此，定位性能并不稳定。
现在很多已有的蓝牙定位技术并不是单纯的蓝牙定位，而是结合了其它的虞 位技术。向iBeacons采用了基站的辅助定位手段，通过网络基站传输数据，从 而加快定位速度。
2.1.6 WiFi无线定位系统
基于WLAN的室内定位系统利用室内环境中的无线接入*(AP, Access Point) 发射WiFi信号，并通过手机、电脑等移动设备接收信号，结合对应的算法从而 达到定位的目的。微软早期推出的RADAR室内循迹系藐就是基于WLAN网络 进行定位的典型代表。RADAR系统使用接收信号强度和信噪比信息，结合三角 定位法为使用者提供2D的绝对定位信息。该系统经过测量，50%的定位精确度 可以达到5m以内。其它现阶段已有的基于WLAN的室内定位系统或多或少都 结合了其它的硬件设备，例如传感器、指南针等，因而在测量时可以达到较高的 精度。COMPASS就是利用了罗盘来提供使用者的方向信息，从而提高定位的精 确度。但经过其他硬件设施或软件设施只能达到辅助定位的目的，对结果位置信 息的修正需要建立在WiFi系统得到原始定位结果的基础上。因此，如何利用 WiFi信号达到更高的精度也是亟待解决的问题。
虽然基于WLAN的定位系统并不能达到UWB系统的定位精度，WiFi信号 由于受到传播频率的限制而无法做到高穿透性、抗多径、抗干扰的目的，但WiFi 接收模块时下已成为各个移动设备所不可缺少的模块，联通、移动等运营商为实 现无处不在的网络而计划建立大量的WiFi接入点(AP, Access Point),可以预计未 来不论是在室内环境下还是在室外环境下，空间环境被WiFi覆盖的，因此WiFi 定位的物理成本几乎为零。此外，根据现阶段WiFi定位算法的研究，许多算法 在实际定位中操作简单，也能被很好地运作。对于用户而言，WiFi室内定位系 统的客户端通常操作简单，用户体验较好，操作方便，不需额外提供定位标志等 多余设备。
另一方面，对WLAN系统而言，无线信号的频率为2.5GHz,而人体构成中， 50%以上的组成成分是水，因此，人体可以吸收部分AP发射的无线信号，导致
11
对于某点不同时间，不同人群经过所接收到的AP可能有所不同，而相同AP对 应的接收信号强度也有可能不同，这无疑增加了定位的难度。除此之外，室内建 筑物的遮挡等也会带来多径传播(Multipath Propagation)和非视距传播(NLOS, None-Light of Sight)等信道问题，这使得传统的定位算法，像AOA、TOA、TDOA 等无法正常高效的应用于室内定位环境中。此外，在系统的前期准备阶段也需要 大量的数据来进行训练和测试。因此，对Wifi室内定位系统的研究仍需要继续。
2.2室内定位主要方法
根据对室内定位技术的调研，现阶段的研究最多的室内定位算法主要分为四 类：多边定位法，包括TOA、TDOA等技术；三角定位法,包括AOA等技术； 近场通信算法，包括部分射频识别定位算法和cell ID定位法；以及场景分析法， 主要有基于模式识别的指纹法。下文将对常见算法做逐一介绍。
2.2.1 TOA三角测量法
TOA, Time of Arrival方法通过测量信号的传播时间来计算出距离。具体来 说，TOA需要知道信号有发射端传播到接收端的传播时间，再根据公式：
d c^toa	'	(2-1)
其中，d代表最终移动端距发送端的距离，c代表光速,虽然在不同介质中 信号传播的速率不通过，在室内定位信号大多情况下在空气中传播，因此这里用 光速表示信号的传播速率，琨表示信号从发送端到接收端经过的时间。
TOA定位方法依靠发射端之间精确的时针同步，对于射频信号而言，1纳秒 的时针同步误差会导致最终结果差距30cm。对于基站定位来说，下行链路的定 位如果采用TOA算法，基站向手机发送的是方波脉冲，不统计站的脉冲信号不 同，不同脉冲信号之间相关性为0,在接收端，手机端存储不同基站的脉冲信号, 并用存储的脉冲信号与接收的脉冲信号做相关，当信号到达时，手机会检测到相 关结果为1的脉冲信号。当遇到非视距传播(NLOS)的情况，由于经过折射，计 算出的预测距离会远于实际距离，当遇到多径传播的情况，.手机会检测到多个相 关结果接近1的脉冲信号，因此很难判断出哪个峰值对应鬲信号是主信号，那些 是经过折射、衍射过后的信号。
12


图2-1 TOA三角定位法
根据上述描述，TOA算法的优点是算法简单，容易理解；缺点首先需要发 送端与接收端严格的时针同步，这需要极大的成本开销，而实际上这种精确同步 也很难做到；另外？ TOA计算所需要的视距传播条件在真实场景下也无法达到。 因此，该算法并不适用于室内定位系统。
2.2.2 TDOA测量法
TDOA, Time Difference of Arrival算法是TOA算法的改进，该方法通过多 个基站发送给接收端的时间差来计算位置信息。与TOA利用三个圆在理想状态 下交于一点确定某一位置或三个圆相交确定某一区域不同,TDOA最终从图中来 看是至少三个基站两两组成一组，每组数据能做出一个双曲线，再根据两组双曲 线之间的交点确定移动端的确定位置，三组双曲面，至少4个信号发送端可以在 3D定位中确定移动端的位置。双曲面的公式定义如下：
4 丿=yl(xi-x) + (yi-y) + (zi-z) - ^(xJ-x) + (y.-y) + (z.-z)	(2-2)
其中，妇代表信号发送端i和信号发送端j得到的双曲面公式，(x,y,z)代表 发送端在三维空间中的位置坐标。
这一定位过程虽然不要求接收端与发送端精确的时间同步，但取而代之的是
13


图2-2 TDOA定位算法.
需要所有信号发送端之间进行精确的时钟同步，只有如此，才能确定两个发送端 之间从发送信号到信号传输过程中的时间差，这对于卫星定位系统比较容易实 现，因为卫星的时针每天都需要校正以保持精确同步，但对于其他的室内定位系 统，各个信号发送端之间的同步并不好达到，特别是针对WLAN系统的AP来 说，这种情况需要特殊定制，这样便失去了 WLAN室内定位系统几乎不需要成 本的优势。除此之外，移动信号接收端需要知道各个发送端的精确位置，如此一 来，移动端需要额外存储，或通过中心服务器获得各个基站的位置坐标或地图， 从而也增加了定位的成本。其他方面，TDOA与TOA算法相似，也需要视距传 播环境才能达到较高的精确率。
2.2.3 AOA角度测量法
AOA, Angle of Arrival角度测量定位方法，有些文献中也称其为DOA, Direction of Arrival方位定位法，其耳标位置的确定是通过一系列节点上集成的 天线阵列获得的角度信息，间接计算出目标位置。
根据图2-3所示，发射端发射信号与天线阵列水平面之间的夹角可由下列公 式进行计算:
0 i = tan~[ —~— +% .	(2-3)
,J	3-玉•丿
14


图2-3 AOA角度定位算法
其中，蚯表示计算出的角度，tanT代表第四象限的反正切运算，⑶ 表示噪声， 计算方式通常用零均值的高斯随机变量表示。
AOA算法至少需要两个参考节点，即带有天线阵列的信号发射点，并由此 计算出两个角度值，在2D平面上便可根据这两个角度引出的两条射线的交点目 标点。
AOA定位算法的优势在于所需要的定位参考点的数量较少，在二维场景下 仅需要两个参考点，在三维场景下需要三个参考点即可确定目标点的位置，并且 各个参考点之间，或参考点与目标节点之间并不需要达到时间的同步。
AOA的缺点也是显而易见的，由于定位的基础设施在于天线阵列，因此，
AOA定位需要相对较复杂、较大型的硬件支持；当移动端远离天线阵列时，参 考点发射的无线信号随着距离的增加而衰减；另一方面，AOA对于定位角度的 要求比较苛刻，而在复杂的室内场景下，由于阴影效应、多径传播、反射、衍射 等的影响，发射信号无法直接到达接收端，由此，使用AOA测量的结果并不能 达到很高的精度。
2.2.4基于RSS的定位测量算法
RSS, Received Signal Strength,该定位方法利用接收信号强度作为主要定位 依据，计算信号发送端与接收端之间的距离。图2-4表示了三种不同信号接入点 AP在同意参考点的接收信号强度分布。其中API和AP2离参考点较近，AP3 距离参考点较远，从图中可以看出当AP距离参考点越近，接收信号强度波动范 围也较小，信号强度值在某一区域内较为稳定，这正是位置指纹法的基础。图 2-5表示距离某一 AP的距离增大时伴随着的接收信号强度值的变化。红色的点 表示据目标AP某一距离处接收信号强度RSS均值，蓝色长方形表示波动范围。 从图中大致可看出随距离的增大，接收信号强度值呈现下降趋势。
15




8qp)
100
200	300
采样点
400	500
















图24不同信号接入点在同一参考点的指纟文图谱，即接收信号强度分布



图2.5不同信号接入点在同一参考点的指纹图谱，即接收信号强度分布
aqp)
16




















基于RSS的位置指纹定位算法可以在接收信号强度的基础上，利用三角测 量算法或三边测量技术确定目标点的位置；也可以使用路径损耗模型，根据接收 信号的衰减程度来估算目标点的位置；还可以利用模式识别的方式，采用机器学 习的一系列算法，将位置信息看做一系列分类问题来处理。接收信号强度与接收 端和移动端之间的关系根据文献可用公式表示：
耳=乌-10"log 仁当境］+ %	(2-4)
I %丿
其中，与代表接收信号功率大小，単位为dBm；弓为发射端发送功率在距离喜 好接入点AP为％时大小，单位为dBm； “为道路损耗系数，大小通常在2到6 之间；i/(x,.,x7.)=||x,.-Xy. ||^示改点到X丿点的欧氏距离；表示均值为零，方差 为K的高斯随机变量，即可表示为吃满足N(o,月).基于上述公式，己知发射与 接收功率的情况下，接收端位置的无偏估计可以由下式推知
iop
-書=d°10无e %如㈣	(2-5)
理论上来说，根据以上公式可以同过获得的接收功率和已知的发射功率、路 损因子来获得当前移动端的位置，然而，室内环境的复杂多变导致信道特征非视 距传播、人流干扰、物体阻碍和多径传播等，因此，根据上述的方程无法直接获 得移动端的位置。
RSS的优点是成本低，无需额外的基础硬件设施或其他辅助设施，一些算法 也不需要获得AP的位置信息。针对无法套用公式的问题，可以采用fingerprinting 算法，釆用该模式识别的理论来解决。另外，与以上论文中所提到的室内定位算 法相比，基于RSS的指纹识别室内定位算法实现起来更加简便易行，既不需要 对基础设施建设的特殊要求，也不需要视距传播等苛刻的前提条件，现阶段对 RSS的研究也有很多资料作为辅助。因此，基于RSS的模式识别室内定位算法 具有良好的研究前景。
2.3本章小结
本章主要就现阶段研究中所涉及的室内定位系统和室内定位常用算法做了 简要介绍，并分析了各个系统和算法之间的优缺点，表1就不同定位系统做大致 总结如下。
至于不同的室内定位算法而言，TOA、TDOA和AOA均需要视距传播的环 境才能达到较好的定位精度，因此，这三种给定位算法试用于室外空旷的环境下 或是在室内环境下穿透能力较强，抗干扰能力较好的无线信号。因此，相比较而 言，基于RSS的场景分析法，特别是指纹识别算法在环境限制方面存在较大的
17

表2-1室内定位系统性能比较
系统名称
• - ' ■ . •	成本(额外硬件 等基础设爾	定位精度	　安全性	限制
(A-)GPS卫星定
位系统	较高	10m	不安全	适用于LOS环境，室内环 境需要辅助其他定位方式
红外定位系统	较高	与房间大小 有关	不安全	易受可见光干扰，需要额 外部署设施
射频识别定位系
统	较高	平均定位精 度5m	不安全	需要额外的基础设施且需 定期维护
超宽带定位系统	低	最有情况下 可达到10 cm	安全	需要额外硬件设施建设
蓝牙定位系统	低	最佳情况下
达 2-3m	不安全	延时时间长，不稳定
WLAN/WiFi"无 线定位系统	几乎为零	平均定位精
确率达10m 以内	不安全	传统定位算法需要LOS环 境，要提高场景分析法的 准确率需要传感器等辅助 设施
优势，指纹识别算法建立在模式识别理论的基础上，定位过程中只考虑移动端周 围的信号所呈现的状态，并不需寒知道无线接入点的确切位置，而对环境也没有 要求，适合于实际使用的需要。
18
第三章基于位置指纹的室内定位算法
前两章介绍了现阶段常见的室内定位算法和室内定位系统，并从成本、定位 精度、安全性和其它限制方面对各个算法和系统做岀比较分析。论文最终采用的 是基于RSS定位测量算法中的位置指纹算法。因此，本章首先介绍位置指纹算 法的信号映射模型及室内定位的流程，论文后面章节相关算法的理论推导均基于 该模型。其次本章将对WiFi室内定位系统的传统定位算法做详细介绍。
3.1位置指纹模型
在给出室内定位位置指纹算法模型之前，需要明确基于WLAN系统的位置 指纹法定位流程的两个步骤，离线训练阶段和在线预测阶段，如图3-1所示，传 统的离线定位阶段将收集到的各个参考点的接收信号强度[11](RSS, Received Signal Strength)经过简单的数据清洗阶段后，直接使用一定的定位算法进行模型 训练，同时，在线阶段将采集到的数据放入预测模型得到最终的定位结果。




文献〔⑵提到机器学习算法可以从混乱的数据中寻找到规律，这些混乱的数据 在室内定位领域可以理解为从不同参考点接收到的RSS信号强度。机器学习中
19 的分类算法是监督学习算法的一种，它采用一系列训练数据来训练模型，然后用 得到的模型预测新输入的数据，位置指纹法就属于机器学习算法中的监督学习类
.• - .	• • . •
别。
确定室内环境的平面图之后，首先需要将室内平面分成一小块一小块的区 域，并将每个区域中心点的坐标作为该个区域的标志。则第j个区域的无线映射 可以表示为：
(Xi，Pj),i = l,...,N,XKRM	@1)
其中，X,•表示第z•个区域的特征向量，R•表示第i个区域中心点的坐标值。 在指纹识别法中，从不同AP接收到的信号强度值被当做不同类别的特征向量。 向量X,.可以被表示成下式
X, = {x。,xi2,•••,xiM J,Xy e R	(3-2)
其中，Af代表特征的维度，也就是总共能接收到了 AP的数量。后面章节所 介绍的算法都基于无线映射方程。
机器学习算法中的监督算法分为两步，训练和预测。分萎算法属于监督算法, 因此，在使用模型预测之前，需要对样本数据进行训练。训练数据集定位为
7 = {0"|),02羽),...,0',如)}，又3暗	(3-3)
其中X]=任1，知,...,如},改wR为特.征向量，H表示某一类别实例。输入特 征向量与输出类别的关系可以定义为
C"(X),XeR”	(3-4)
其中，c={r必,.."zXpkR"表示类别向量，类别数为Z, _/■(•)代表输 入数据到正确输出向量的映射准则，即假设函数。
3.2 K近邻算法
K近邻算法是分类的基本算法。根据己给出的距离矩阵和定义的准则，找出 距离最近的前k个点坐标，并通过这k个点决定出最终的位置。分类准则可以做 如下定义：
p = arg max X F(p = Pi),i = 1,2,N;j = 1,2,,M	(3-5)
p' X冲*(x)
其中，定义F(p = Pi)当且仅当p = Pi，否则值为F(・) = 0。七(x)表示包含所 有最近邻k个点的集合。
室内定位K近邻算法的步骤如图3-2所示。
20
初始化生成样本训练数据集T,并将数据样本存入数据库； 离线阶段：
1.定义K近邻算法距离计算准则L,输入K值及距离误差阈值e ；
在线阶段：
1.将定位数据生成向量；
2.从数据库中取对应样本，与定位数据按照距离计算公式求得距离；
3.根据距离大小由小到大排列，取前臣小于距离误差阈值£的样本;
4.依据“举手表决”法求得位置参痈标注作为最终的位置坐标。
图3-2室内定位k近邻算法定位步骤
3.2.1最近邻算法
根据上述描述，当K近邻的K值为1的时候，该算法称为最近邻算法。此 时，计算结果只需要从数据库中计算出目标参考点与数据库中相对应点距离最近 的点，并将该该点坐标输出，则最终过的定位结果可近似定义为该点坐标。
距离计算准则有多种，其中一系列距离用与表示，成为明科夫斯基距离 (Minkowski Distance),公式定义如下：
Lp(X“Xj) = f支R -电r丫 / Z1	(3-6)
I阵1	)
当p = l时，距离被称为曼哈顿距离(Manhattan Distance),此时，公式定 义如下：
=	-标 I	(3-7)
当＞ =2时，乙户距离被称为欧氏距离(Euclidean Distance),此时，公式定义 如下：	一
(M	2、成
A(X"X/.)= £岛-境	(3-8)
51	)
当p = co时，乙p距离被称为切比雪夫距离(Chebyshev Distance),此时，公式 定义如下：
厶(X,.,%) = max\xik -标|	(3-9)
另外一种常用的距离公式是马氏距离(Mahalanobis Distance),向量X,与X}
21
的距离定义为:
L =J(X,・—.. .	(3-10)
其中，S为向量X,与X,的协方差矩阵，定义如下：
s =硏(X, - E(Xj))(Xj - E(X/)}	(3-11)
当各个向量之间相互独立，即协方差矩阵为单位矩阵时，马氏距离等价于欧 氏距离。
3.2.2加权K近邻算法
一般的K近邻(K-NearestNeighbor)算法按照最短距离选出前K个参考点后， 根据“举手表决，啲方式选择最终的参考点坐标当做移动端的坐标。加权K近邻 (Weighted K-Nearest Neighbor)有所不同，在用相同的法则选出前K个距离最短的 参考点后，这K个参考点并不是同等重要，每个参考点前需要乘以系数，这个 系数即为权值(Weight),输出结果定义如下:
P _ y EiPi
,=1乙=i与
其中，®表示预测结果，曷表示第i个参考点的能量，定义为可・=||X,・||2,相对应的
权值定义为：	　　　　吧.=寸湛，i = l,2,...,K	(3-13)
j/j

无论是一般的K近邻算法还是加权K近邻算法，K值得选择都是十分关键 的因素，不同的K值会影响结果的精确度，同时，K值也代表着模型的复杂度。 当K值较小时，这意味着训练模型较为复杂，训练结果必须在较小的邻域中进 行选择，也就是说，只有极为接近移动端点的参考点才有参考的价值，一旦这些 参考点中存在一定数量的噪声信号，这时的估计误差将会被放大。反之，若K 值较大，意味着训练模型较为简单，当K值等价于训练样本数时，对邻域的选 择范围扩展到所有样本参考点，这时估计误差会减小，因为样本中的噪声毕竟是 少数。
3.3室内定位决策树算法
决策树算法【"I实质上可以看做是一系列的if-then准则。室内定位决策树的 离线阶段过程主要包括三部分：移动接入点的选择、决策树的构建和决策树的剪 枝过程。最终，一棵决策树会包含一系列中间节点和许多叶子节点，对于二叉树
22
而言，中间节点通常会将当前落到节点中的数据样本分为两部分，具体数据的划 分方式需要根据对应的特征和对应的准则，这两部分数据一部分落到左节点，另 一部分落到该节点的有节点，左右节点上的数据在经过相同的准则寻找合适的特 征将数据进一步分离。就一棵树而言，叶子节点的数量一般与参考点的类别并不 相等，通常会大于参考点的数量。我们在空间中可以把每一个中间节点当作一次 空间的划分，对于非线性的样本分布而言，一次划分并不足以将一种类别的样本 数据与其他类别的样本数据分离，因此，可能需要多次划分过程。
构建一棵树的过程是按照自顶向下的方法构建，开始时防君样本均在根节点 中，而后再根据一定的特征选择算法将各个样本往下细分。树的剪枝过程与建树 过程恰好相反，自底向上进行剪枝。
若编程实现一棵决策树算法，对一批固定样本来说，构建树的停止条件有很 多种，当叶子节点的样本数量小于某一规定阈值时，当前的节点可以当作叶子节 点，不必往下继续分割；当当前节点错分样本的误差小于某一规定阈值时，当前 节点可以停止分割；当在某一节点处存在于该节点的特征己用尽，则通过举手表 决的形式选择该节点的标志参考点；当树的深度达到一定高度值时，当前节点可 不须在分；当某一节点钟的样本均属于同一类时，算法可以停止。
室内定位决策树算法的具体实现步骤如图3-3所示。
初始化生成样本训练数据集£特征集合A；
离线阶段：
1.设置算法循环次数从决策树深度飾叶子节点个数〃，定义决策树中特征选择算法， 增益、信息增益比或基尼指数等，根据特征选择算法设置误差阈值e 0;
for n=l to N,
2.根据决策树的特征选择算法计算，选择使得误差率e最小的对应接入点；
3.根据所选接入点及样本出现数值选择合适的阈值，生成节点；
end if e < e o , or if树深>=g or if叶子节点个数〉〃 else
4.从特征集合中除去已选特征，循环继续。
图3-3室内定位决策树算法实现步骤
决策树算法的优势在于：
1.树模型可以用可视化的方式实现，也就是说内部的模型形成方式可以直 观的观察到，这样利于模型的理解和解读；
2,不需要过多的训练数据，但训练数据需要尽量包含不同的移动接入点， 且移动参考点的划分应尽量合理,不能过疏，也不能过密；
23
3.在定位过程中可以讲信号接收强度的大小作为定位基准，也可以用1和 0来标注有或没有某个移动接入点信息。
另一方面，决策树算法同样存在许多缺点：
1.首先，树的形成过程并不是全局最优化的，最优化问题在这里属于NP- 困难问题，因此，大部分的树模型算法使用的是例如贪婪算法的启发式 算法；
2.当一棵树在模型训练阶段设定的树的深度过大、分支过多或者参考点釆 样接收到的移动接入点过多时，树模型很容易产生过拟合现象从而降低 实际的在线定位性能；
3.存在一些树模型无法解释的问题，比如异或、奇偶校验等问题。
室内定位常用的决策树算法有三种：C4.5决策树、ID3决策树和CART决策 树。对于一棵决策树而言，每个节点的特征选择过程极为重要，这关系到整棵树 性能的好坏。不同的特征选择算法将在下一章节进行详细的描述和比较。
3.3.1 C4.5/ID3
对不同树的定义主要基于构建树时所用的特征选择算法的差异。ID3树模型 所用的特征选择算法基于信息增益(IG Information Gain),而C4.5所使用的特征 选择算法为信息增益比。
在决策树中，每个节点对应某一非分类别属性的特征，节点的每一个分支对 应满足该特征的某一范围区间或该特征的某一确定值。叶子节点表示从根节点开 始，经过满足某一系列特征条件的路径之后，得到的类别属性值。
ID3算法是Ross Quinlan最早使用的用来建立决策树的方法。建树过程首先 将所有的样本点放在一个节点中，这个节点为根节点。在算法的每一次迭代中， 需要扩展每个节点时，算法会遍历所有未使用过的特征的集合，同时就每一个特 征计算它的嫡值或信息增益值，选择最小的嫡值或最大的信息增益值所对应的特 征作为该节点的特征(值)。然后，节点中的样本按照选择的特征或特征值进行划 分，按条件分别进入节点的左右孩子节点。算法如此循环直到遇到终止条件。
按这种方式建立的ID3树存在很多缺点：
1.ID3并不能保证全局最仇解，只能得到局部最优解；
2.ID3的构建算法属于贪婪算法，先选择最有利于分类的特征；
3.信息增益算法的计算有时依赖于特征出现的频率，特别是对于样本分布 不清的时候，该算法选择的特征更倾向于样本数量多的样本包含的特 征，但这些特征未必是最有利于分类的特征；
4.ID3是但决策树模型，也就是说，ID3在选择特征时只考虑了单一特征的
24
单一数值点，而忽略了多个特征之间的联系；
5.该树模型抗噪声能力差"这要求样本数据需要精心挑选，尽量避免冗余 数据的同时需要尽可能包含各个方面特征。
Ross Quinlan之后再ID3的基础上派生出C4.5算法。C4.5算法的特征选择 方式为信息增益比(IGR, Infbrmation Gain Ratio)。针对ID3, C4.5做出了如下改 进：
1.通过不等式阈值选择的方式,C4.5对连续特征和离散特征均能进行处理, 若遇到连续的特征值，C4.5先对其进行离散化处理；
2.对于丢失的特征值，C4.5不会进行处理；
3.在建树过程结束后,C4.5会进行决策树的剪枝操作以防止模型的过拟合。
C4.5也存在一些缺点：在构件树模型的过程中，需要对特征值和节点中的 数据进行逐一扫描，若数据量十分大时，训练时间会加长；另外，若样本数据有 很多噪声，树模型的建造也容易过拟合。
具体的信息增益和信息增益比算法请见4.1节。
3.3.2 CART 树
CART (Classification And Regression Tree)树釆用的是二分递归分割技术，最 早是由Berkeley和Stanford的统计学家在1984年发表的分类器。CART的建树 过程和C4.5、ID3相似，不同的是CART树在每个节点挑选特征的时候所用过的 特征选择算法为基尼不纯度(Gini Impurity),该算法的具体介绍见4.4节。
CART树最重要的过程除了特征选择外，就是剪枝过程。当样本数据分类过 细时，数据样本中的噪声和异常值(outlier)会对模型的构建和树的形状产生影响， 使得训练所得到的模型对于新的接收数据预测的准确率远远小于训练时数据的 准确率，此时的树模型被称为过拟合状态。另外，在实际操作中，很难确定阈值 的大小或根据上述的停止条件在建树的过程中及时停止树的生长，因为所得到的 训练样本并能足以包含所有的问题，这被称为“水平效应”。剪枝就是减去冗余不 可靠的分支，这样也会使得较快速的分类。
CART的剪枝采用的最小化全局损失函数的方法，自底向上，将多余的分支 用叶子节点替代来进行剪枝。损失函数是叶子节点数量和误差率的函数，最小化 目标函数通常定义如下：
min egpEe(./),X)-err(T,X)	(3 ⑷
t ^leaves(T)| - Reaves (prune(T, r))|
其中，T表示己经建好的决策树集合，。表示验证是否需要剪枝的子树，X
25

表示样本集合，prune（T,t）表示已被剪枝的树集合，err（T,X）表示定义在数据 集X上的树T的全局误差率，err^prune（T,t）,X^表示定义在数据集X上的减去子 树[之后的树的全局误差率，，eaves（T）|表示叶子节点的个数,\leaves（prune（T,ty）\ 表示剪枝后的叶子节点的个数。对树的剪枝所用的数据应该是非训练集中的数 据。
3.4朴素贝叶斯算法
要说明朴素贝叶斯算法（Naive Bayes Algorithm）,首先我们需要了解贝叶斯准 则（Bayes5Theorem）0贝叶斯准则表示事物发生的可能性，准则的公式定义如下:
P(B\A)P(A)
P(B)
其中，尸（3*0	地4）表示集合蓝的先验概率，P㈤表示集合B的先验概率,
PQIIB）表示发生8出现的情况下发生4的后验概率，P（BIA）表示条件概率。通常情 况下，集合B的先验概率不能直接得到，但可以根据全概率公式获得：
P(B)= P(B\A)P(A)+ P(B I A)P(A)	(3-16)
其中，月表示集合A的补集。
在室内定位系统中，公式应表示如下:

其中，X = {xl,xi,...,xu},xi^R表示接收端接收到的特征向量。贝叶斯定理 将原来根据获得的特征向量对应参考点后验概率的过程转化为根据已有的参考
点信息求解最大后验概率的过程，用数学语言描述为:

由于当样本确定时，分母为确定值，因此，原方程等价于求解 argmaxp, P（X | Pj）P（p» ,符合其条件的参数点0为输岀参考点。
在亀际情况下，高维的特征分布的联合概率求解较为复杂，因此贝叶斯定理 涉及大量计算而使实际求解无法达到。朴素贝叶斯算法在此基础上假设各个特征 互相独立，因此，特征的条件概率可写为特征相乘的形式，即
P（X\pJ） = Y]P（xk\pJ）P（pJ）	（3-19）
k
其中，k = l,2,...,M,x3R。此时，朴素贝叶斯算法的完整形式为:
26

(3-20)
(3-21)
在建立训练模型的时候，每个训练数据的后验概率均会提前计算好存放在数 据库库中，在进入预测过程时，当手机移动端收集到周围环境的WiFi接入点接 收信号强度并形成特征向量后，手机端或服务器会将根据朴素贝叶斯公式计算出 符合相应规则的参考点坐标。有时为了解决分母为零的情况，会引入极小实数兀 尸(职)=理繇麥，心	(3-)
来防止被除数为零的情况。3的求解可以根据贝叶斯估计获得。
朴素贝叶斯定位算法的算法实现具体步骤如图3-4所示。
初始化生成样本训练数据集买
离线阶段：
1.根据某一接入点出现与否计算某一参考点下该接入点出现的条件概率
P (xk | pj),并将计算结果存入数据库；	.
2.计算样本中参考点出现的先验概率P；
3.根据步骤1和2得到的结果计算特征出现的条件概率P(X|pj),并将结果存入 数据库；
在线阶段：
1.将移动端接收的数据生成特征向量形式，根据离线阶段步骤1得到的结果获 得每一接入点出现的条件概率；
2.将计算好的接入点条件概率计算特征向量的条件概率；
3.将步骤2的计算结果与离线阶段步骤3的结果比对，找出相差最小的条件概 率对应的参考点作为定位参考点。
图3~4室内定位朴素贝叶斯算法实现步骤
朴素贝叶斯算法的优点是易于实现且在大多数情况下可以达到较好的性能。 但朴素贝叶斯算法是基于强假设得到的，在实际运算中大部分情况下特征之间不 可能会绝对的独立。
27

3.5支持向量机
支持向量机四[33〕(svm, Support Vector Machine)是一种二类分类模型，在很 多领域被广泛使用网[35][36][37],它通过最大化特征空间中各类别之间的距离来达 到分类最优的目的。支持向量机的类别主要分为三种：线性可分支持向量机、线 性不可分支持向量机和非线性支持向量机。使用这三种支持向量机的前提需要预 估出样本的大致分布情况，再根据样本的分布而选择合适的支持向量机模型。
3.5.1线性可分支持向量机
线性可分支持向量机主要适用于线性可分的样本分布情况，使用硬间隔最大 化寻找分类超平面，使其满足最大化分离不同类别的样本空间，类别间的间隔越 大，泛化误差率越小。
定义样本空间为从特征空间X^={xn,xi2,...,xiM},Xij^R到位置参考点集合 尸=3"2,…，Pz}，Pi = 05)；x,，3 eR 的映射：
(&月)盘=1,...0,不€砂	(3-23)
其中，JW为特征维度，Z为参考点个数。需要寻找的线性分类超平面公式如 下：
■X + b = O,weRM,beR	(3-24)
式中.表示点乘符号，w表示超平面的法向量，動为直线的截距。
因为支持向量机的本质为二分类分类器，因此这里先假设样本参考点类别数 为二，定义类别集= {0.1],此时分类边界的向量应落在直线wT-X + b = l和直 线wr-X + b = -l±.,也就是说类别为0的边界向量落在直线wT-X + b = -l±.而 类别为1的边界向量落在直线yvT-X + b = l上，且这两条直线之间不应存在样本, 此时其它样本应满足Pi(wT-X + b-)>l,落在直线上的边界向量被称为支持向量。
此时硬间隔最大化即为使这两条直线之间的间距占的值最大。为了将目标函数
H
构造成凸函数形式求得全局最优解，目标函数和转化为:


argmi%
b
FT
argminwb|||w||2
(3-25)
28





s.0 ( w' • X + 5)21, r e P\	(3-26)
求解上述公式满足静态的 KKT(stationary Karush-Kuhn-Tucker condition)条 件，属于求解凸优化问题，可以用二次规划的方式求解。KKT条件有三个发明 者，Harold W. Kuhn, Albert W. Tucker 和 William Karush 的名字命名，用于求解 限制为不等式的非线性目标函数的优化过程。KKT条件的标准形式为： max f (x)	.
s.t.gl (x)< O,hj (x) = 0
其中，f(-)表示目标函数，如i =	…为一系列不等式限制条件，
为…,"EZ为一系列等式限制条件。因此，求解线性可分支持向量机目标 函数的过程与求解KKT条件的过程相同，需要引入拉格朗日乘子(Lagrange multipliers)。，并将原问题转化为求解目标函数：

其中，犀表示样本个数，且a>0o求解上述公式对#和b求导，并令导数为零 可得：
N	1 M
W =方iPi%,b = —yy； X—Pi	(3-29)
j=1	“ i=l
将解得的W和3带入2(w,Z>,a)得：.
外	N 1
L(a) =客L盐工叩呻：Xj	(3-30)
01 Z ij
且满足角芝1曲Pf =。。
根据上述过程即可解出满足条件的最大距离分类超平面 w」X + b = (),ww_RM,BwR。由于支持向量机的输岀属于确定值1或0,因此当 输入新的预测数据时，判别函数需将y/-X+b的结果通过符号函数，因此，最 终的判别函数表示为：
_/(X)= sigf .X + 5)	(3-31)
当/Q0 >0时判别为类1，当/■") < 0时判别为类0o
3.5.2线性不可分支持向量机
线性不可分支持向量机的引入是为了解决非线性可分,但样本分布又近似线
29 性可分的本分类问题，通过使样本间的软间隔最大化来获得分类超平面。该分类 器引入非负松弛变量気用来衡量错分样本的程度，同时使得样本满足公式：
—	(3-32)
此时，最小化目标函数可表示为：
宜卽血心為事宥+弓&,	(3-33)
S・t.Pi (w・Xj +b) N1-&,	(3-34)
專 0,心	(3-35)
引入拉格朗如对偶之后的：
argminw b m紧匕(w,缶四 /?)
fi 2 m	r	*1"] (3-36
=argminw b max i^lMI +c£& -E% [a W 'x+")T+4j-jX爲 r
a,p iz	i=i i=i	i=i j
其中，«^>Oo
最终的判别函数仍然是f(X) = sign(wT-X + b),引入松弛因子的目的是为了 使得错分样本到分类边界超平面的和达到最小，同时°称为调和因子，用于权衡 分类最大间隔和最小错误率，当^较大时，分类超平面的求解优化过程将重点关 注错分样本的惩罚，反之，当。值较小时，求解最优化过程将更关注最大化分离 样本类别。
3.5.3非线性支持向量机
当样本的分布既不满足线性可分的要求，也不满足非线性可分的要求时，需 要将样本通过变换从低维的特征空间映射到高位的特征空间，使其在高纬度特征 空间中呈现出线性可分或近似线性可分的状态，再用对应的线性可分支持向量机 或线性不可分支持向量机的方式在高位空间求解。这种求磐方式为非线性支持向 量机的求解方式，样本从地位空间到高维空间的映商•称作核函数(Kernel Function) o
3.4.1节中提到最终的目标函数可表示为：
N 1
六(a) =	--^ajPiPjXiXJ	(3-37)
N1 Z i,j
若令映射函数为爭e，即XjF(x> 则上述目标函数可表示为：
30
N	1
以勺印必(X“XJ	(3-38)
2=1	2 ij
其中，K(X”匕)=°(Xj) • °(Xj.)成为核函数。
初始化生成样本训练数据集7;
离线阶段：
1.根据样本数据的分布估计是否需要使用核函数，若使用和函数需预先设置核函数的 种类及对应参数大小；
2.定义误差率为eo,循环数为"初始化各个接入点权值周定义代价函数力仰；
for n=l to N,
3.若需要核函数，先将数据经过核函数映射；
4. 求出代价函数方及对应定位误差率£ ;
end if e < e o,
else
5.更新接入点各个权值分布的循环继续；
6.生成定位模型f(X)。
图3-5室内定位支持向量机算法实现步骤
常用的核函数有两种，分别定义如下：
1.多项式核函数(Polynomial Kernel Function (poly))
K(Xj,Xj = (X，X/+l)'	(3-39)
其中，d为指数，当■= 1时为线性支持向量机
2.高斯核函数(Gaussian Radial Basis Function (rbf))
K(X“Xj) = exp(--X；)	(3-40)
其中，y表示方差的倒数。
N
非线性支持向量机的最终判别模型为/(X) = sign也apK(X,Xj) + b)。 室内定位支持向量机算法的实现步骤如图3-5所宗：
表3-1室内定位算法性能比较
算法名称	鲁棒性及容错能 力	预测效率	训练复杂度	　　　精度
K-近邻	取决于样本分布	低	　　　　　低	取决于K值 的选取
朴素贝叶 斯	较弱	高	　　　　　低	　　　较低
决策树	取决于样本分布	高	较低，但需要控制 停止条件	取决于样本 分布
支持向量 机	较强	线性较高	较高	　　　较高
31
3.6本章小结
本章重点介绍了基于WLAN的指纹分析算法的主要分类算法，包括K-近邻 算法、决策树算法、支持向量计算法和提升算法。
算法相关性能比较如表3-1所示：
32
第四章提升算法在室内定位中的应用
提升算法(BoostingAlgorithm)是机器学习算法的一种，最初主要应用于文本 分类及图像处理问题中，本章将提升算法引入室内定位领域，介绍了提升算法的 原理和应用。该提升算法以传统的室内定位决策树算法为基础，将多棵决策树模 型进行级联，同时在训练过程中动态调整每棵决策树及训练样本的权值，从而达 到最大限度降低定位错误率的目的。在介绍提升算法之前，本章首先介绍了两个 基本概念：元启发式算法和弱分类器。
4.1启发式算法
启发式算法(Heuristics),它通常是受到自然界的一些现象的启发而形成的一 系列理论方法，用来解决一系列复杂事件的优化问题，常用在计算机科学和组合 优化领域，其目的是为了能够设计出一种在合理时间范围内获得最优解或接近最 优解的解决方案。虽然，启发式算法获得的结果并不一定是最好的，但启发式算 法可以在相对较短的运行时间内获得切实可用的结果，而这种优势在解决一些 NP困难问题，例如常见的旅行商问题时显得尤为重要。在启发式算法中，一般 通用的算法称为元启发式算法(Mataheuristics)。
启发式算法是根据自然规律获得算法，例如通过观察模拟人脑神经元通过电 流刺激传播信号的和学习的一系列过程而得到的神经网络算法(Neural Network),通过模拟统计物理中固体物质结晶过程而形成的模拟退火算法 (Simulated Annealing Algorithm)等，因此寻找一个较为系统的理论基础相当困难
使用启发式算法的前提，或是在使用启发式算法之前需要考虑的问题主要 有：
1.最优解问题。通常一个问题的解决方法有很多种，此时需要考虑是否需 要获得最优解，若最优解非常重要则不建议使用启发式算法。
2.解的完整性。当一个问题的解不止一个时，启发式算法不一定能够找出 所有的解，.但却能够以较快的速度找到较为优化的解。
3.精确率和准确率的问题。由于启发式算法获得的解不一定是最优的，因 此获得的训练模型的准确率也不一定是最高的。
4.运行时间。许多问题虽然可以理论推导出最优解，但通过递归或最优化 的方式获得最优解的代价却是很大的，可能要求大量的计算及内存及大 量的训练时间，相比较而言，启发式算法却更符合实际应用，而且最终
33
的训练结果并不一定比最优结果差很多。
5,参数设置。启发式算法并不是问题具体型的，对应相同的问题，可能许 多启发式算法都可以使用，如何组合优化各个启发式算法是需要经过考 虑的。另外，初始参数的设置和迭代的停止条件也会影响算法的性能。
4.2弱分类器
弱分类器(weak learner)的基本定义是，在连续随机猜测某一时间结果的基础 上，某种分类器的性能只比随机猜测结果的性能好一点，例如对二分类器而言， 分类正确率略大于50%,则该分类器被称为弱分类器。
常用的弱分类器是一个决策树根节点，被称为“决策树桩”(tree stump)。样本 通过该分类器定义的是否存在某一特征，或通过判断大于还是小于某一特征一个 固定值来确定该样本应该被分到根节点的左孩子还是右孩子。
4.3基于提升算法的室内定位算法
当下的许多分类问题会遇到被称为“维度灾难”的情况，即因为特征种类、或 某个特征属性的可能值有很多选择而造成的分类算法收敛速度慢甚至无法收敛 的情况。这同样会影响算法的性能和训练模型的泛化能力。神经网络算法和支持 向量机等算法在训练的过程中都需要考虑样本中出现的每一种特征和每一个特 征值，因此，当遇到维度灾难，这些算法的性能会大大降低，而提升算法最早就 是为了解决这种问题而出现的算法。提升算法通过只选取少量的特征来达到优化 训练过程，从而达到算法收敛较快的目的。
在文本和图像处理领域提升算法中最常用的是AdaBoost, Adaptive Boosting,直译为适应性增强算法的简称，最早由Freund在1990年提出，当时 称为 Boost-by-majority algorithm, 1995 年，Freund 和 Schapire 提出了 AdaBoost 算法和名称，两年之后的1997年Schapire和Singer发行了通用版本的AdaBoost, 直到2001年AdaBoost算法在人脸识别领域取得的成果才使该算法得到广泛的关 注。本文将提升算法引入室内定位模型，生成基于室内定位的提升算法模型。
室内定位提升算法建立在CART决策树的基础上，将重新调整权值后的数据 样本重复通过相同的决策树模型，在每次定位结果的基础上增大错分样本的权值 而减小正确定位样本的权值，从而不断强化模型对错误定位样本及对应接入点的 关注，最后将各个决策树模型乘以对应权值相加而获得最终的定位模型。
假设决策树定位模型可表示为％(X,.)，Y =｛匀,七,...,吒肩,％ cA ,每棵级联的 决策树的权值可表示为貽琦ER,则最终的室内定位提升算法训练模型可表示成:
34
，T	、
f(X)= sign 京AX)	(4-1)
\	>
其中，T表示训练器的数量。
给定样本数据集7 = {(X］，W，(X2，P2)，・“，(Xn，Pn)}A 索“，定义经过决策 树定位之后样本的误判概率为勻=F(4(X/)H0),初始化每个样本的权值分布为 40丿)=号,丿=1,...0景，提升算法的训练过程简述如下：
1.调整第士棵决策树模型的输 出样本分布为
Dzi(X/) =坚立■expl-aphAXj)),其中，耳为正态分布常量。
Z
2.将样本输入到第土棵决策树模型中进行定位，同时使加入权重的定位错误 率达到最小：
九=argminhjeH£j = £已(*•)［月。4(羽)］	(4'2)
3.若定位结果满足停止条件，如气等，则停止训练，得到最终的室内定 位提升算法模型为
(T	\
f(X)= sign £%4(X)	(4-3)
\ i=l	丿
4.若不满足停止条件则调整每个样本的权值％为％亏m(芝) >恥然后再 跳到第一步继续优化。
提升算法的训练步骤如图4-1所示。
提升算法的优势：
1.易于实施；
2.对高维特征的处理釆用选取部分特征的方式，避免了“维度灾难"问题；
3.算法收敛速度快，可以达到相对较好的性能。
室内定位提升算法那同样有很多缺陷：
1.对噪声样本和异常值较为敏感，可能会产生过拟合现象；
2.缺少系统的理论背景的支持。
35
初始化生成样本训练数据集7,样本权值分布为DO(X)；
离线阶段：
1.设置决策树深度痂叶子节点个数也决策树棵树
for n=l to K,
2.将样本数据输入生成第n棵决策树模型加停；
3.根据输出定位结果计算错误率e ,并依据定位错误率调整第n个决策树的权值a ；
end if e <0. 5
else
4.样本权值分布Dn,循环继续；
5.生成定位模型f(X)o
图4-1室内定位提升算法训练步骤	’
4.4提升算法在室内定位中的应用
在位置指纹法中，没个参考点可以看做不同的类别，室内定位提升算法通过• 收集的数据集将不同参考点的特征作为位置指纹，训练时单个弱分类模型采用决 策树模型，第一棵树的训练过程依照决策树算法，之后，加大错误定位的数据集 的权重同时降低定位正确的数据集的权重，进入不同的决策树训练过程进行训 练，继续上述过程直到样本的错误率小于某一阈值。预测阶段，移动端检测的数 据集通过训练好的模型，得到的结果即为最终定位结果。
4.5本章小结
本章将提升算法引入传统的室内定位系统中，在了解提升算法之前首先介绍了 启发式算法和弱分类器这两个基本概念，其后，将提升算法引入室内定位领域， 构造出室内定位提升算法，并对算法的原理和算法流程做出介绍，最后就室内定 位提升算法的优缺点进行总结归纳。
36
第五章室内定位特征选择算法研究
.■ ■ ■ - ■.-
在基于WiFi的室内定位系统中，移动端通过收集各个无线接入点的MAC 地址及相应的RSS属性值作为分类算法的特征。但在很多室内环境下，收集到 的特征存在大量噪声和冗余，若此时将这些特征不加处理直接送入服务器进行模 型训练不仅增加训练的时间成本，也会引起模型的过拟合现象而影响模型的实际 的预测能力。因此，论文引入特征选择算法，先对提取的特征进行选择和压缩， 再通过费类算法进行训练。
本章各小节对不同的特征选择算法进行说明，并在本章末尾对各个算法进行 比较。
5.1特征选择
与特征选择(Feature Selection)相对应的是特征提取(Feature Extraction),它们 的不同之处在于后者是从纷繁复杂的文本或图像等提取出有价值的特征并将其 转换为相应的数字特征用于机器学习算法中，而前者重点在于研究这些数字化的 特征如何更加合理的使用与相应算法中。论文的研究重点在如何将已获得的数字 化特征转化为更有利于分类的特征进行使用，也就是特征选择算法。
一个好的特征选择算法应该具备以下几点：
1.对于树模型而言，一个好的特征选择算法会使树的深度尽量小；
2.一个好的特征选择算法应该是启发式的，也就是说该算法选出的特征对 于构造“纯粹，啲树有帮助；
3.一个有效的特征选择算法有利于有效地压缩特征数量，且具有较大的信 息量；
4.较好的去除冗余属性；
•	5.增强模型的解读能力，缩短训练时间，加速模型训练过程中的收敛等。
5.2信息增益算法
信息增益°8】(IG Information Gain)特征选择算法基于炳的概念。信息嫡的定 义如下：
N
H(X) = - J/7 ) loSP (xi)	(5-1)
i=l
37

其中，汉*£）表示事件％发生的概率。信息炳反映的是变量的不确定性。信息 增益的定义如下：
IG（p,X）= H（p）-H（p\X）	（5-2）
其中，£歸P（p旱。表示类别的炳，在定位中表示参考点的信息 炳，通常在样本空间确定时，该值为确定值。H（p\X）表示特征X存在的情况 下，分类的不确定性，也就是在存在特征%的情况下对改变类别的信息炳的不确 定性所做出的贡献，具体定义如下
H （冲Q = P（x）H（p\x） + P（x）H（p | x）
z	z	（5-3）
=尸（*）£尸（，,闵1。酬（，切）+尸（力£尸（，区）1。叶（0号）
i=l	f=l
其中，P。）表示特征X出现的概率，pfelr）表示特征X存在时，样本属于以参考 点的条件概率，相对应的P（对表示特征X不出现的概率。信息增益的大小表明特 征X对改变分类不确定性做出的贡献，贡献越大，信息增益值越大，说明该特 征越有助于确定分类。
单纯的信息增益算法有个缺点，当训练样本各个分类的分布不均匀时，某些 特征的重要性会增大，原因在于某一类样本的数量所占比例增大而导致条件炳增 大。另一种情况，假设当某一特征在每一类中均有出现，且每一类中的之都不同， 那么按照值来计算的该特征的信息增益值将会很大，但这种特征并不能对预测起 到更积极的作用，应该尽量避免选择这种特征。因此，在信息增益的基础上便引 入了信息增益比网的概念（IGR, Information Gain Ratio）□
对于某一特征而言，该特征在样本中的炳值定义为：
H 仗 IX）=-救（R | X）logP（Pi | X}	（5-4）
也就是样本中出现某一具体特征的条件嫡。信息增益比的公式如下:

在这种情况下，当某一特征分布范围较广且对分类没有太大帮助时，或者样 本分布不均匀会导致某一特征被过分高估时，信息增益比的算法便可以起到一定 的作用。决策树算法中的ID3和C4.5算法分别是根据信息增益和信息增益比的 方式选取特征，具体的实现办法请参见第3.2节。
38
5.3基尼指数特征提取算法
基尼不纯度(Gini Impurity)定义为：
M
G 顽(X)= l-»；	(5-6)
i=l
.其中，K为参考点的类别数，气.为样本中属于类i的概率。当从一组已知的 样本集合中根据类别范围对数据进行随机标注时，基尼不纯度表示这些数据被不 正确标注的概率。由公式可知，数据越纯净，畧J坦的值越接近1,基尼不纯度 的大小越接近零。
基尼指数(Gini index)的定义建立在基尼不纯度之上，常用于决策树中CART 树的特征选择过程：
Ginix (X)=^-Gini(Xi) + ^Gini(X2)	(5-7)
X	X
其中，珞i = L2表示根据特征x分离的两部分数据，X表示所有样本集合。 则基尼不纯度的减小可定义为：
LGini (x) = Gini(X)— Ginix (^)	' (5-8)
根据公式，基尼不纯度减少得越多，也就是AGmiCd越大，越有利于样本分 类。
5.4 PCA主成分分析算法
PCA(Principle Components Analysis)主成分分析算法是一种十分常见的线性 几何和统计学技术，常被用于神经学、人脸识别和图像压缩等应用领域，也是一 种从混乱的高维空间数据集合中寻找数据呈现模式和相关性的有效手段。
在空间中定义不同的坐标系来映射同一组数据，则这组数据在不同坐标系上 呈现出的分布模式、方差、均值等不都相同。通常情况下在信息处理的过程中存 在两个主要问题，一个是•信息中的噪声，这点通常釆用信噪比(SM?, Signal-to-Noise Ratio)来衡量。
SNR=^^	(5-9)
其中,明时。表示信号的方差，嘔函表示噪声的方差，的值越大，说明数 据越纯净，噪声越少，相反，海的值越小，说明数据中包含的噪声越大，越不 利于后续对数据的使用，应该尽快去噪。另一个是数据中的冗余，就是指数据中 包含的多余的信息，通常可以用协方差矩阵表示。解决这两个问题才能获得具有
39
更高利用价值的数据。由于许多数据集在收集特征的时候并不清楚哪些是需要的 特征而哪些是多余的噪声干扰或可有可无的特征，因此，通过坐标系的转换有助 于在一定程度上区分各个特征的重要性。主成分分析算法就是在此想法的基础上 进一步提取主要成分。
PCA理论基于一个直线性的强假设，从而原始数据被限制于两点：第一是 原始数据的映射只可能基于某几种可能数据基底；其二是数据呈连续性分布。虽 然真实情况下数据集合之间的关系大多并不呈现线性相关，但在大量数据集的情 况下，用线性情况可以作为非线性一个良好的近似。因此，PCA在表述的过程 中将数据看做在极坐标系下的线性组合。另外，PCA同样假设方差较大的数据 特征较其他特征重要，同时，均值和方差足以衡量的数据分布和特征的分布。
假设数据集X为MxiV维矩阵，X的自协方差矩阵可以表示为，
N	_	_
£(不_乂)(不_入)「
var(X)= 	—	 (5-10)
N-\
PX^Y	(5-11)
其中，维线性变换矩阵，丫为数据集X经过P线性变换后的MXJV维矩 阵，也可以代表原数据集在新数据坐标系下的投影矩阵或原数据集经过数据集拉 伸、压缩、旋转后的矩阵。
假设X的每一列为一组数据，用工况-表示，则不同列之间的协方差 表示为
<jy ={x.Xj)	(5-12)
则員自身的协方差矩阵可以表示为
1 t
Sx =——XXT	(5-13)
n-1
在公第i行第j列的元素环场表示澀第i组数据与第j组数据的协方差，为零表示这 两组数据线性不相关。&是维度为MxM维对称矩阵，其对角线元素表示每组数 据的方差。该矩阵表示了中所有数据对之间的线性相关性。假设$¥=六叱表示
1 数据集犬经过变换后的新数据集V,则V的数据特征应尽量满足出对角线之外矩阵 &的其他值趋向于零，即对角化同时会对角线上的元素需从大到小排列。
根据上述条件，新数据集y的协方差矩阵与可以表示为
SY =-~YYT =-^(PX)[PX>f =-^P[XXT^PT =-^PAPt (5-14) 其中，对称矩阵德=刀筋，因此，矩阵A可表示为幽玲，其中D为对角矩阵， 嚣是诚的特征向量组成的矩阵。令E = PL则
40
SY =—P(PtDP\Pt	(5-15)
n-\ v 7
又甲为正交矩阵，因此广，=尹，上式可改写为
SY =—P(p-lDP}P~l =—D	(5-16)
n-\ ' f n-1
PCA的计算过程总结概括如图5-1所示：
离线训练阶段：
初始化样本训练数据集T,转换为矩阵X,具体步骤为：



在线定位阶段：
1.将移动端收集到		2.用存储的矩阵P将X
的数据集转换成矩	—	变换为新数据集Y输入
阵X		定位模型
图5-1室内定位主成分分析法步骤
另一方面，PCA存在一些限制条件：
1.PCA对于数据呈线性相关的强假设并不符合大部分的数据分布特性，因 此，使用PCA的到的新的数据分布只能在一定程度上近似达到去噪和 去除冗余的目的；
2.PCA假设使用均值和方差这两种统计学特征足以表示数据的概率分布， 只有高斯分布满足这个条件，因此，其他的分布都会弱化PCA的结果。 也正是在这个号虽假设条件下，信噪比及协方差矩阵才能完全表示数据的 噪声和冗余。但是根据中心极限定理，在数据量充分的情况下，大部分 数据分布都呈现高斯分布特性。
PCA的另一假设条件是在协方差矩阵中，大的方差值对应重要的特征。 数据特征的主成分之间相互正交。这种假设使得PCA的求解过程可以依赖
41

线性几何的降解方法（SVD分解）。
5.5 LDA线性判别分析
LDA（Linear Discriminant Analysis）线性判别分析，也称作Fisher线性判别 （FLD, Fisher's Linear Discriminant）,是统计学习、模式识别和机器学习邻域的常 想算法，常用来寻找区分两类或更多分类的特征的线性组合。
一与PCA类似，LDA同样基于数据样本呈现正态分布，以及各个特征之间具 有的相关性为线性相关性的假设。然而，PCA在去除特征线性相关性的同时， 并没有考虑数据之间的类别关系，而LDA考虑的更多是不同，其处理过程的最 终目的是为了寻找最大类间距离、最小类内距离且彼此之间不相关的特征。
假设训练数据集为…*，& E It*,其中号=£ R, p/Z表示对应参考点标志。LDA线性判别分析假设資（芯|卩=应）呈现均值方差分 别为的正态分布，其中從而数据样本的总均值定义为 卩=幸零•号。此时，类间离散度可定义为
Z
Sb=*3-—-卩V
1=1
类间离散度可理解为每个类别对总体的偏离程度。对应的，类内离散度定义为

类内离散度可理解为每个样本与每一类别的离散程度的总和。
之后引入Fisher判别准则
切，^ （月一〃）（月一＞）亳	帰评
听W） -江£顷（zM f）「厂g
令矩阵證=乎「3-心,表示向量3_闵在低维空间超平面上的投影，则 乎T。--研乎=A矽可以看做投影距离的平方。同理，分母可以看做类内距 离投影的平方和。因此，Fisher判别矩阵可解读为求解一个新的样本空间，在该 空间中使类间距离之和与类内距离之和的比值最大，即使类间距离尽量大而类内 距离尽量小，用数学公式表示为
(5-20)
由式5-20可知要求&非奇异，因此在解上式之前通常需要使用PCA方法降 维。对式5-19利用求导解得的方程式应满足
42
(/s*) sb(p = (<pTSb<p) Sw(p	(5-21)
式5-21括号内的部分为常数，而方程只需关心方向，因此上式可写为
(p*ocS；&	(5-22)
则，$禮=；1^寧解得的特征向量组成矩阵即为所求矩阵。因此，解得的矩阵 的秩小于跚*耳的秩，即小于类别的个数减一，r-i,因此，解得的特征向量的 个数不会超iiT-io
LDA的局限性：
1.数据根据LDA投影后最多只能保留分类个数减一维特征，那么对于那些 特征维数较多且分类个数少的数据集可能导致特征压缩过大，数据信息 损失过大的情况；
2.LDA也是基于数据特征呈现高斯分布的假设条件下进行推导得出的结 论，若对于非高斯分布的数据这种特征压缩方式并不适用；
'3.对于有方差而非均值来区分的数据集合LDA方式也无法处理。
5.6本章总结
本章中所提到的特征选择算法从特征处理上来讲分为两类，一类是在原始特 征的基础上去除冗余的特征而不改变原始特征，另一类是将特征经过矩阵的变换 运算映射到低维的空间中从而达到特征选择和压缩的目的，这种情况下原始的特 征在低维空间被改变。据此分类，信息增益、信息增益比及基尼指数均属于第一 种类别的特征选择算法，而LDA和PCA属于第二种需要改变原始特征投影的特 征压缩算法。
就信息增益、信息增益比和基尼指数三种特征选择算法比较，虽然在一定情 况下这三种方法都能达到较好的准确率，但信息增益和基尼指数算法对多值特征 的分类样本是有偏的，当样本数量很大时，基尼指数的算法的树模型训练时间长, 且它更倾向于数量等同的分类和基于提升纯度的角度进行分类。这三种算法常用 -于决策树中的特征选择，它们属于分类算法的一部分，同分类算法一起使用，而 后两种算法常用于数据分类前的数据处理。LDA同PCA相比较，LDA在类内离 散度矩阵非满纸的情况下需要先进行PCA特征选择，再进一步筛选特征。但LDA 最终选择的特征维数只能不大于类别数减一，这有时会导致特征过分压缩。
43




























































44


第六章定位性能测试及结论分析
本章主要针对前两章介绍的定位算法及特征选择算法设计搭建了一套完整 的实验平台，并在该平台上对算法进行测试仿真，将实验结果数据用表格的形式 表现出来，在6.3节中对实验结果进行分析。
6.1实验方案设计
本文首先在室内定位离线阶段就传统的各个室内定位算法进行仿真，并在传 统的室内定位算法的离线阶段引入PCA或LDA特征选择算法，同时釆用提升算 法替代传统的室内定位算法，而在线阶段的服务器部分在接收到移动端发送过的 数据之后首先经过PCA或LDA特征变换，再通过己存储的训练模型进行预测。 加入特征选择的室内定位算法系统框图如图6-1所示。
图6-2是整个定位系统结构的简化图，大致流程可以概括为，手机等移动设 备采集收集信号，并将数据通过WLAN网络传送给中央服务器，有服务器来进 行集中处理，包括数据清洗、特征选择、定位建模、预测数据等操作，再将定位 好的目标节点信息显示在服务器的地图上，从而完成训练和预测定位过程。
数据的收集有两种釆集方式。第一种是在每个规定好的cell内某一点进行集 中釆集，通常选择cell的中心点；另一种方式是通过人持有手机移动端，并在 cell内进行移动釆集信号，并且使采集到的信号在cell内尽量做到均匀分布。实 验中主要釆用的是第一种方式，且釆集信号的过程中将手机放在桌子上进行釆 集,这样可以避免信号收集的过程中手持移动端的人员干扰而使定位算法性能分 析引入额外因素。
6.2实验环境
论文实验的物理环境选择在北京邮电大学教三楼6层639室及6层楼道内。 局域网为北京邮电大学内部教育网。实验时将实验室的平面分为32个长为2.7m, 宽为2.4m的cell,粒度为6.48m2o走廊被分为241个区域，设置了 41个参考点， 没个参考点之间相距3.6m。实验室内参考点的设置如图6-3所示，用绿色圆点标 注。另外定义了 6个预测参考点，它们与原定的参考点间有一定的距离。预测点 在图中用红色实心方块标注。走廊平面的信号釆集和布点情况见图6-3所示。走
45

特征选择室内定位算法
离线阶段	室内定位区 域划分	——	数据采集	—	数据处理	J PCA或LDA特 征选择算法 | 1	传统室内是 -H位算法或提 升算法	1
1
1
—	1
—1



图6-2 定位系统结构图
廊之间的间隔较为分散，因为走廊环境下的AP点不易改变，且除了上下课时走 廊中的人流量较大外，走廊的信号分布较为稳定。图6-4给出了 6层平面图以及 参考点采集区域，楼道内的信号采集策略釆用的是每个cell内均匀采集样本点，
46
图中的三角形大致表示的是每个cell的中心位置。

图6-3教学楼639室采点分布
每个参考点总共采集500组数据，采集间隔为Is。


图6-4 3号教学楼6层平面图采点分布
3号教学楼楼道内的采样点用实心三角形表示，639室内的釆样点用实心圆 形表示。
实验所适用的硬件设备移动端采用的是IBM生产的5台相同的测试机，型 号为MFLD_GI。空间中总共收集到177各不同的AP地址。另外，两台型号为 E14118的Sony笔记本电脑作为服务器进行信号处理、模型训练、参数选择和性 能评估，所用的系统为Ubuntu 12.04,编程语言为shell和python2.7。
47
6.3实验结果及结论
63.1实验结果
论文第四章第五章所提到的算法均在实际环境中进行了仿真。其中，表6-1
给出了使用特征选择算法之前各个定位算法的定位精度、模型训练时间及定位时
延的比较结果，表6-2是使用PCA降维到80维特征之后各个算法的比较，表&3
给出使用LDA算法进行特征选择降维到29维之后的算法性能比较结果，表6-4
为交叉验证阶段针对AdaBoost算法中单个树的深度对算法精度的影响，表6-5、
6-6为AdaBoost算法中弱分类器数量对算法精度的影响，表6-7及6-8分别给出
表6-1教3楼639室内使用特征选择算法之前各算法之间的精度及耗时比较
Method	　　　Accuracy(%)			　　Time(s)
<=3m	<=5m	　　<=10m	　　Train time	　　Predict time
NN	　　　32.9700	85.4223	　　99.8463 .	　　0.5550	　　0.4646
4NN	　　　34.9677	82.9677	　　99.6129	　'0.5547	　　0.4374
W5NN	　　　37.7688	85.6183	　　99.1935	　　0.4372	　　0.4587
Naive Bayes	　　　35.1572	70.5882	　　96.7168	　　1.7452	　　0.2178
SVC with linear	　　　36.6083	79.0040	　　98.9233	　　2.2831	　　0.1004
kernel
Linear SVC	　　　29.4872	66.6667	　　83.3333	　　25.5390	　　0.0015
SVC with	　　　23.9428	62.6984	　　87.8307	　　74.6986	　　0.5288
rbf kernel
SVC with	　　　39.3768	65.9211	　　99.7368	　　2.3069	　　0.1013
poly kernel
Decision	　　　25.9722	65.0	　　82.2222	　　0.6513	　　0.0071
Cart Tree
Decision	　　　28.6863	69.5710	　　90.6166	　　0.6453	　　0.0047
ID3 Tree
AdaBoost(
100 layers )	　　　42.06	78.29	　　99.59	　　57.8773	　　0.3173

48
K近邻算法和加权K近邻算法中不同K值对定位精度的影响，表6-9表示特征 压缩维度对不同核函数的支持向量机的影响。
从表6-1中对不同定位算法的不同性能比较可以观察到在不使用特征选择算 法之前K近邻算法对测试数据的预测精确度最高，线性SVM算法的定位精确度 次之。然而，在实际预测时，SVM算法的预测时延远远短于K近邻算法，若单 就预测时间进行比较，线性的SVM算法的预测效率仅次于效率最高的决策树算 法，有时，SVM的预测效率甚至会高于决策树算法。若比较训练时间，K近邻 算法的时间却好于SVM算法。因ikE「藤了精确度的比较，实际在线情况下的程 表6-2 教3楼639室内使用PCA特征选择算法各算法之间的精度及耗时比较
Method	　　　Accuracyf%)			　　　Ume(s)
(with PCA,	　　　<=3m	<=5m	　　<=10m	　　Train time	　　Predict time
shrinking to 80
dimensions)
NN	　　　30.9091	77.4026	　　93.1169	　　　0.05087	　　0.004191
4NN	•35.3180	71.9892	　　94.1813	　　　0.0409	　　0.002380
W5NN	　　　42.4204	79.6178	　　94.9045	　　　0.04142	　　0.002514
Naive Bayes	　　　27.2260	56.3871	　　79.4839	0.0279	　　　0.002122
SVC with	　　　24.1565	65.0472	　　97.0310	　　　1.8276	　　0.000586
linear kernel
Linear SVC	　　　31.5519	70.7953	　　93.6115	　　　2.5199	　　0.00089
SVC with	　　　23.2819	63.6746	　　96.4937	　　　4.4858	　　0.001224
rbf kernel
SVC with	40.6210	63.6481	　　92.3674	　　　5.8540	　　0.001203
poly kernel
Decision	40.0826	72.4518	　　95.1791	1.0928	　　0.000078
Cart Tree
Decision	46.0154	83.5476	　　98.2005	　　　6.2524	　　0.000058
ID3 Tree
AdaBoost(
100 layers )	48.1431	90.9216	　　99.8624	　　　50.9625	　　0.002166
序预测时间同样也是评估一个室内定位算法的重要方面。当很多使用者同时接入 定位服务器网络时，网络需要有控制并发状况的能力，而预测时间相对较短的算

49

法更有利于实际使用。
表6-3教3楼639室内使用LDA特征选择算法客算法之间的精度及耗时比较
Method (with
LDA, shrinking to
80 dimensions)	　　　Accuracy(%)			　　Time(s)
<=3m	<=5m	　　<=10m	　　Train time	　　Predict time
NN	　　　24.9686	70.0125	　　96.1104	　　0.01674	　　0.00523
4NN	　　　22.3419	72.5437	　　99.8654	　　0.01662	　　0.001559
W5NN	　　　16.0996	70.4188	　　99.8691	　　0.01645	　　0.000643
Naive Bayes	　　　18.7331	74.3935	　　94.3396	　　0.01139	　　0.001347
SVC with	　　　27.2487	69.5767	　　96.8254	　　0.3219	　　0,000235
linear kernel
Linear SVC	　　　21.6438	56.3014	　　86.9863	　　83.4667	　　0.000150
SVC with rbf	　　　20.3779	60.4588	　　78.6774	　　14.2821	　　0.001864
kernel
SVC with	　　　24.4696	75.1061	　　98.0198	　　0.2696	　　0.000564
poly kernel
Decision Cart	　　　25.2161	61.9597	　　93.0836	　　0.6136	　　0.000229
Tree
Decision ID3	　　　12.3944	58.5732	　　96.1972	　　2.0149	　　0.000235
Tree
AdaBoost(
100 layers)	　　　21.0174	67.7376	　　98.6613	　　46.8160	　　0.002164
通过表6-2和表6-3结果比较，结论显示经过特征选择过程处理之后的数据
除了缩短模型的训练时间外,	也可以增强模型的鲁棒性和泛化能力，降低模型的
复杂度。
走廊的仿真情况较室内环境好很多，主要原因在于走廊的新到环境没有室内 有多种设施人流的干扰，新到环境较为稳定。
表6-4 AdaBoost算法决策树深度对定位精度的影响比较(%)
算法	2	4	　　　　6	　　8
无压缩	21.04	55.66	　　　92.11	96.42
Pca(50%)	44.49	79.39	　　　94.95	99.42
Ida	37.21	83.71	　　　94.07	97.80
50
从表6-4可以看出，随着单个二叉决策树深度的增加，无论是经过特征选择 算法还是未经过特征选择筛选的算法定位精度都呈现提高的趋势，但是当单个决 策树的深度进一步增加时，有于决策树本身的特点，训练时间更长，模型更加复 杂，更容易出现过拟合。因此，单一决策树的深度需要实验折衷选择。
表6-5深度为8时提升算法弱分类器个数对定位精度的影响(％)
^^stimator
法	X.	10	15	20	25	30	35	40	45
无压缩	　96.86	　98.04	98.89	99.29	　99.29	9934	　99.50	　99.72
Pca(50%)	　98.30	99.01	98.89	99.13	　99.01	99.06	　99.36	　99.46
Ida	97.73	98.06	98.25	98.44	98.58	98.61	98.80	　98.70
表6-5表示当单一決策树的深度设定为8时，决策树的棵树的变化对定位精 度的影响。由表中可以看出，虽然定位精度相差不大，偶尔呈现波动的状态，但 是总体变化趋势仍然是随着决策树棵树的增加，定位精度对应提高。但由下表 6-6可知过多的决策树棵树同样会影响定位精度，实际运算时，弱分类器的个数 也是需要实验调整的重要参数。
表6-6深度为4时提升算法弱分类器个数对定位精度的影响(％)
、timator	50	70	90	　　no	　　130	　　　150	　　170	　　190
无压缩	71.31 81.77	85.71	　90.79	88.48	　　82.41	　　88.90	　86.59
Pca(50%)	90.86 93.48	• 94.40	　94.59	94.05	　　94.83	　　95.44	　95.40
Lda	94.21 93.55	93.84	　95.14	96.29	　　96.48	　　95.82	　97.12
表6-7 K近邻算法定位精度与引入特征选择算法之后的定位精度比较(%)
1	2	　　　3		　4	5	　　　6
K-vahie
算法\
无压缩		　　99.97	98.00	85.00		88.00	81.00	　　81.00
Pea		　　99.74	99.74	99.73		99.70	99.52	　　99.57
Lda		　　99.62	99.62	99.39		99.33	99.29	　　99.25
•在K近邻算法中，当K值为1时为最近邻算法。由上表可知虽然使用特征 选择算法之后，K近邻算法的定位精度并没有明显改善，但PCA算法却在原来 的基础上只保留了 10%相对重要的特征，而LDA算法也在原来特征的基础上压 缩至29维特征，虽然减少了大部分特征，但定位精度却没有明显降低，因此说 明特征选择算法的优势。结合6-8表的加权k近邻算法比较，可知压缩之后的定 位算法更加稳定。
对于支持向量机定位算法，使用特征选择算法之后与K近邻算法使用特征 选择之后的结果相类似，在不大幅度的降低定位精度的前提下使用特征选择算法
51
表6-8加权K近邻算法定位精度与引入特征选择算法
之后的定位精度比较(%)
章	　　　1	2	3	4	5	6
无压缩
Pea
Lda	　　99.97	98.00	85.00	88.00	81.00	81.00
99.74	99.74	99.73	99.70	99.52	99.57
99.62	99.62	99.39	99.33	99.29	99.25
可以简化定位模型，提高实时定位能力，缩短定位时长，甚至可以提高定位精度。

表6-9支持向量机算法定位精度与引入特征选择算法
之后的定位精度比较(%)
特征维数	无压缩	保留80%	保留50%	保留］0%	LDA保留29 维
LinearSVC	　　　99.74	99.62	　　98.98	80,52	　　　96.17
SVC	　　　99.88	99.91	　　99.79	97.47	　　　99.65
Rbf	　　　6035	53.67	　　49.63	50.91	　　　54.66
Poly	　　　99.88	99.86	　　99.86	99.50	　　　99.74
6.3.2分析及结论

定位系统的性能可以从安全和隐私、成本、定位精度和限制等方面来进行评 估。而定位算法的分析可以从鲁棒性和容错、预测效率、复杂性和定位精度等方 面进行分析。
定位系统已在论文2.3节进行了系统的分析，根据上一节的数据结果比较， 本节主要从定位算法的角度进行分析：
1.K-近邻算法：近邻算法中K值的算法对算法的精确度和模型的复杂度都 有重要的影响。K值可以直接被看做是训练模型的复杂性。K值较小意 味着模型较复杂，也就是说预测时需要从较小的邻域确定目标参考点。 反之，K值较大意味着模型相对较简单，预测是需要从更大的邻域范围 寻找目标参考点。由于K近邻算法的预测需要遍历数据库中的样本，因 此，当数据库很大时，算法的预测效率较低，训练模型的成本较低，模 型复杂度较低，而定位精度和泛化能力取决于K值的选取。因此在数据 量大的实际情况中不建议贏用。
2.朴素贝叶斯：该算法属于概率性算法，最终的输出结果的意义是该预测 特征集合属于某个特定参考点的概率大小，而论文中所提到的替他算法 均为确定性算法，输出为某一确定参考点的标志。朴素贝叶斯算法由于 是基于较强的条件独立性假设而在实际使用中模型的定位相较于其他 算法较低。算法的容错能力相对较差，预测效率也和数据库中的数据量
52
有关，因此大数据量时预测效率较低。
3.决策树算法：论文介绍了三种决策树算法，这三种决策树算法的区别在 于特征选择算法不同。该算法的训练过程在每一次特征选择的时候均需 要遍历一边所有样本的所有特征和每一特征的所有数值。因此，决策树 算法的训练效率较低，但生成的模型复杂度较低，预测效率基于一系列 i*hen条件判断，因此预测效率很高，由于决策树很容易出现过拟合的 问题，因此，若对决策树合理剪枝且样本覆盖较全面时会提高预测精度。
4.支持向量机算法：支持向量机算法通过引入核函数的方式解决了分布呈 现非线性分布数据的分类问题，但不同的核函数均需要进行参数选择， 因此，参数选择从一定程度上决定了定位的精度。另外，支持向量机只 与分布在分类边界的样本数据有关，而与其他数据的分布情况关系并不 大，因此，SVM算法的鲁棒性和容错能力一般较强。且通过一定的优 化算法，支持向量机的训练过程可以较快速的收敛。另外，虽然支持向 量机模型的预测效率比不上决策树算法，但SVM模型只需要记录预测 函数的对应参数，因此预测效率较高，特别是线性支持向量机的预测效 率更高。而SVM的定位精度也相对较高。SVM算法的另一个优点是可 以再一定程度上避免维度灾难，且在样本容量较小的情况下也可以得到 较好的效果。
5.提升算法AdaBoost：提升算法通过将多个弱分类器乘以权值并级联的形 式，用启发式的算法增强了模型对错分样本的关注度,提高了算法的泛 化能力。提升算法也可以非线性分布的样本进行分类，但不同与支持向 量机算法的是，后者对不同核函数的使用导致最终的分类超平面呈现核 函数类型的分布，而AdaBoot却可以模拟任何形状的分类平面。由于提 升算法是建立在决策树桩这种弱分类器基础上的算法，因此，该算法也 具有决策树的一系列优点，即预测效率较高等。
6.LDA特征选择算法分析:LDA算法的优势是在模型的训练阶段同时考虑 到类内间距和类间距离。LDA有时需建立在PCA算法的基础上先进行 特征压缩，然后再根据类别信息进行进一步特征压缩。虽然该算法属于 监督性算法，考虑到类别之间的差异，但LDA最终的压缩维数小于类 别种类数，因此，对于有些需要高维特征进行决策的数据集合，往往压 缩维数过高导致信息损失严重反而不利于分类。
7.PCA特征选择算法分析：主成分是指较大的特征向量所对应的特征 值，该算法考虑去除数据特征之间的线性相关性，从而更有利于找出同 类和不同类别的样本，达到降低特征空间维度，防止维度灾难的目的。
53
该方法不仅适用于图像处理，在很多领域均可应用来提取样本的主成 分。对于超高维的情况可以釆用SVD分解来求出举证的特征值和特征 向量。这种方法适用于信号内有用信息能量大于噪声，但若是信号的噪 声大于有用信息的情况下，该方法保留的主成分很可能是噪声。
54
第七章总结与展望
7.1总结
本文首先从宏观角度介绍了常见的室内定位系统，并通过分析得出基于 WLAN的室内定位系统拥有研究价值和商业前景。之后就基于指纹识别的各个 机器学习算法做出了介绍，并将其与三角测量和三边测量算法相比较，得出指纹 法拥有的一系列优势，最主要的是使用与实际环境的特点在教学楼内进行了测 试。论文首次在室内定位邻域引入提升算法，并分析出提升算法的优势和缺陷。 另外，由于实际釆集的样本中存在很多噪声样本和异常值，因此，首先对数据进 行清理是必要的。除了在釆集数据之后对都是指的处理，本文引入了特征选择算 法去噪和压缩特征，这样做的目的即避免了“维度灾难”，同时去除了不重要和多 余的特征，从而达到增强模型鲁棒性和泛化能力、降低训练成本、缩短训练时间 的目的。在实验的过程中发现，PCA主成分分析算法配合AdaBoost使用，既避 免了过拟合的问题，也使提升算法最大程度的发挥了它的优势，且在一定程度上 提高了定位精度。
7.2下一步研究展望
虽然本文的算法使定位精度得到了提升，但基于RSS的指纹定位法仍存在 许多问题：
1.首先是前期样本准备的阶段仍然需要额外人力的投入，且随着时间的推 移，随着AP的老化或周围环境的改变会影响相同参考点的指纹图谱， 这使得隔段时间需要重新训练模型，因此如何进一步减少人力的投入和 训练周期是下一步需要研究的课题；
2.另外，由于不同的硬件设备在同意参考点处的指纹图谱均不相同，也就 是说不同手机移动端存在异构性，如何解决硬件之间的异构问题也应成 为下一步研究的课题。
55




























































56


参考文献
[1]Wu Hong, Chen Yao, Xiang Kun,et aLA novel location algorithm based on hybrid positioning system combining DTMB with satellite navigation signals[J].The Journal of New Industrialization, 2012, 2 (4)： 37-43.
[2]路正，王晓艳.基于无线传感器网络的室内停车场定位系统[J].软件,2012,33
(10):67・70・
[3]Harrington P. Machine Learning in Action[M]. Manning Publications Co., 2012: 30-40.
[4]Hightower J, Borriello G A survey and taxonomy of location systems fbr ubiquitous computingfJ]. IEEE computer, 2001, 34(8): 57-66.
[5]Pahlavan K, Li X, Makela J P. Indoor geolocation science and technology [J]. Communications Magazine, IEEE, 2002, 40(2): 112-118.
[6]Wu C L, Fu L C, Lian F L. WLAN location determination in e-home via support vector classification[C]//Networking, sensing and control, 2004 IEEE international conference on. IEEE, 2004, 2: 1026-1031.
[7]M. Dru and S. Saada, ''Location-based mobile services: The essentials", Alcatel Telecommunications Review, 2001? pp. 71-76.
[8]S. Bush, "A Simple Metric for Ad Hoc Network Adaptation”, IEEE J. Select. Areas Commun., vol. 23, no. 12, December 2005, pp. 2272-2287.
[9]E. Yanmaz and O. K. Tonguz, "Location dependent Dynamic Load balancing”, Proc. IEEE Global Telecommunications Conference, 2005.
[101 Bekkelien A, Deri az M, Marchand-Maillet S. Bluetooth indoor positioningfJ]. Master's thesis, University of Geneva, 2012.
[11]Mautz R. Indoor positioning technologies[D]. HabiL ETH Zurich, 2012, 2012.
[12]Li B, Salter J, Dempster A G, et al. Indoor positioning techniques based on wireless LAN[C]//LAN, First IEEE International Conference on Wireless Broadband and Ultra Wideband Communications. 2006.
[13]陈艳琴.基于SVM的文字商标检测[J].软件，2013,34 (1)： 149-151.
[14]Zeimpekis V, Giaglis G M, Lekakos G A taxonomy of indoor and outdoor positioning techniques for mobile location services[J]. ACM SIGecom Exchanges 2002, 3(4): 19-27.
[15]Peng L, Han J, Meng W, et al. Research on radio-map construction in indoor WLAN positioning system[C]//Pervasive Computing Signal Processing and
一 Applications (PCSPA), 2010 First International Conference on. IEEE, 2010: 1073-1077.
[16]Grossmann U, Schauch M, Hakobyan S. RSSI based WLAN indoor positioning with personal digital assistants[C]//Intelligent Data Acquisition and Advanced Computing Systems: Technology and Applications, 2007. IDAACS 2007. 4th IEEE Workshop on. IEEE, 2007: 653-656.
[17]Raitohaiju M, Fadjukoff T, Ali-Loytty S, et al. Using unlocated fingerprints in generation of WLAN maps fbr indoor positioning[C]//Position Location and Navigation Symposium (PLANS), 2012 IEEE/ION. IEEE, 2012: 576-583.
[18]Vbssiek M, Wiebking L, Gulden P, et al. Wireless local positioning]〕], Microwave
57
Magazine, IEEE, 2003, 4(4): 77-86.
[19]Wu C H, Su W H, Ho Y W. A study on GPS GDOP approximation using support-vector machines[J]. Instrumentation and Measurement, IEEE Transactions on, 2011, 60(1): 137-145.
[20]Hao P Y, Wu C Y. GPS GDOP approximation using support vector regression algorithm with parametric insensitive model [C]//Machine Learning and Cybernetics (ICMLC), 2012 International Conference on. IEEE, 2012, 1: 315-320.
[21]Zhang J, Zhuo Y, Zhao_Y Mobile location based on SVM in MIMO communication systems[C]//Infbrmation Networking and Automation (ICINA), 2010 International Conference on. IEEE, 2010, 2: V2-360-V2-363.
[22]Brunato M, Battiti R. Statistical learning theory for location fingerprinting in wireless LANs[J]. Computer Networks, 2005, 47(6): 825-845.
[23]Melkonyan A, Yalamanchili S, Akopian D, et al. Integrity monitoring and thresholding-based WLAN indoor positioning algorithm for mobile devices[C]//System of Systems Engineering (SoSE), 2011 6th International Conference on. IEEE, 2011: 191-196
[24]Akopian D, Melkonyan A, Yalamanchili S, et al. Integrity monitoring and mobile implementation aspects of WLAN positioning[C]//System Science and Engineering (ICSSE), 2011 International Conference on. IEEE, 2011: 688-693
[25]Brunato M, Battiti R. Statistical learning theory for location fingerprinting in wireless LANs[J]. Computer Networks, 2005, 47(6): 825-845
[26]Limin L, Lin M, Yubin X, et aL Application of multi-cluster-center based filtering in WLAN indoor positioning[C]//Communications and Networking in China (CHINACOM), 2011 6th International ICST Conference on. IEEE, 2011: 438-441
[27]Friedman, Jerome; Hastie, Trevor; Tibshirani, Robert (1998). nAdditive Logistic Regression: A Statistical View of Boosting”.
[28]Xiang Z, Song S, Chen J, et al. A wireless LAN-based indoor positioning technology [J]. IBM Journal of research and development, 2004, 48(5.6): 617-626.
[29]Gholami M R. Positioning algorithms for wireless sensor networks [J]. 2011.
[30]HE Kai, PANG Peng-fei, GE Jing-xiang.A Texture Classification Method by Combining Statistical Geometrical Features with Support Vector Machines[J].The Journal of New Industrialization, 2011,1 (3 )： 20-25.
[31]吴虹，陈瑶，向坤，等.地面数字电视广播和导航卫星信号混合定位系统中的 新型定位算法卩].新型工业化，2012, 2 (4)： 37-43.
[32]Palm G. Novelty, Information and Surprise[M]. Springer Berlin Heidelberg, 2012:141-158.
[33]Xiao xiao, Xu Qihua.A Comparative Research on the Classification and Regression Based on SVM and BP [J].The Journal of New Industrialization,
58
2014, 4 (5)： 48-53.
[34]肖晓，徐启华.基于SVM与BP的分类与回归比较研究[J].新型工业化， 2014, 4 (5)： 48-53.
[35]何凯，庞鹏飞，葛静祥.一种SGF和SVM相结合的纹理分类方法[J].新型工 业化，2011,1 (3)： 20-25.
[36]HE Lin, RUAN Weitong, ZHANG Mei,et al. Survey on Hyperspectral Imagery Classification with Support Vector Machine[J].The Journal of New Industrialization, 2012, 2(1): 46-51.
[37]Gu Y Lo A, Niemegeers I. A survey of indoor positioning systems for wireless personal networks[J]. Communications Surveys & Tutorials, IEEE, 2009, 11(1): 13-32.
[38]GM. Djuknic and R.E. Richton, "Geo-location and assisted GPS", IEEE Computer, vol. 34, no. 2, pp.123 -125 2001.
[39]Mori, T., & Sasaki, T. (2002). Information gain ratio meets maximal marginal relevance 一 A method of summarization for multiple documents. In Proceedings ofNTCIR workshop 3 meeting - Part V: Text summarization challenge 2 (TSC2) (pp, 25-32).
[40]Kushki A, Plataniotis K N, Venetsanopoulos A N. Kernel-based positioning in wireless local area networks[J]. Mobile Computing, IEEE Transactions on, 2007, 6(6): 689-705.
[41]陈英,马仲兵,黄敏优化的C4.5决策树算法[J].软件,2013, 34 (2)： 61-64.
59




























































60



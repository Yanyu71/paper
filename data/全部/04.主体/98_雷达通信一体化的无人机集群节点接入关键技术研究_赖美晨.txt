第一章绪论
1.1研究背景及其意义
无人机具有灵活性好、成本低、鲁棒性强等特点⑴，近年来在军事和民用场 景中的应用愈加广泛。在民用场景中，无人机被灵活地用于救灾［2】、农林植保作 业9、货物运输⑷、监测［5〕等工作中。在军事场景中，无人机在战场侦察、监视、 边防巡逻、定位打击〔6】等多种军事行动中发挥重要作用。
无人机在执行任务的过程中往往需要多架无人机协作，甚至需要组建无人机 网络。无人机间的合作可以完成一些单无人机系统难以执行的任务，无人机网络 相比于单无人机系统而言，具有可靠性高、效率高、扩展性好、抗毁性强等特点。 随着传感器、无线接口、电池、全球定位系统等技术的快速部署，无人机的组网 技术受到越来越广泛的关注⑺。无人机网络不依赖于基础设施，通过动态拓扑构 建、路由协议等技术就可以实现无人机间的通信互连。例如在灾难场景下，当通 信基础设施崩溃或者在短时间内难以安装基础设施时，无人机网络可以用来提供 一个易于部署和自我配置的网络。
无人机飞行自组织网络是移动自组织网络的一种特殊形式【％与其他形式的 自主网络相比，例如与车载自主网络相比，无人机自组网在节点移动性、节点密 度、拓扑变化情况、移动性模式、无线传播、功耗、计算能力和定位等方面具有 不同的特点［9】。由于这些不同的特点，无人机自组网和车载自组织的通信挑战也 不同，这就需要提出、设计和测试适合于无人机自组网的通信协议。
MAC协议对于无人机网络是非常重要的，因为它决定了无人机在信道资源 上传输数据包的规则，使多个用户能够高效共享有限的信道资源。Xie等人在文 献［10］中证实了合适高效的MAC协议不仅可以增加接收到的有效负载，而且可 以保证网络中良好的服务质量(Quality of Service, QoS)=然而无人机网络的特殊 性使多址接入技术的设计充满挑战。目前无人机自组网的多址接入协议还没有统 一的标准，研究无人机有效通信机制仍然是一个具有挑战性的课题［⑴。
而随着无人机应用愈加广泛，无人机飞行活动数量显著增加，根据美国联邦 航空管理局的统计，截至11月，2020年已经注册了 170万架无人机【12】。此外， 根据2020年的中国民用航空工作会议报告，2020年有超过39.2万人次登记无人 机，超过125万小时商用无人机飞行活动，全球民用无人机2019年市场规模达 到90亿美元【囚。无人机的大量应用使无人机的防撞技术受到了学术界和工业界
1
的广泛关注。
目前无人机的防撞技术面临着诸多挑战。无人机飞行环境恶劣，周围有大量 树木、山岭、建筑物等障碍物，在飞行的过程中容易受到风湍流的影响。无人机 遥控器故障或遥控器与无人机之间的无线通信链路不稳定等原因，也可能导致无 人机遥控器无法正常工作，无人机难以及时准确地避开障碍物，因此需要设计合 理的防碰撞与路径规划算法保障无人机的飞行安全。
雷达通信一体化技术由于其在设备成本和尺寸、频谱使用、系统性能等诸多 好处，受到了广泛的关注。Sturm在文献［14］中指出，在智能交通等应用中，向 市场推出一个联合提供通信和雷达功能的系统要比仅提供节点间通信功能的系 统更加容易，因此雷达通信一体化是一项非常有发展前景的技术。雷达和通信一 体化模式可以实现雷达和通信系统互不干扰甚至可以互相促进，有许多应用将受 益于一体化系统的可用性。Feng等人总结了雷达通信一体化技术相关的应用［⑴， 在这些应用中雷达和通信将从彼此共享信息中获益。
基于以上的研究背景、发展趋势和技术挑战，本文在雷达通信一体化场景下 针对无人机网络的特点设计多址接入协议和防碰撞技术，旨在构建安全、低时延、 高吞吐量的无人机网络。
1.2研究现状
1.2.1多址接入协议的研究现状


MAC协议的设计将直接影响到无人机集群的容量3】，无人机自组网的多址 接入协议按照接入方式可以分为竞争类、非竞争类和混合式的多址接入协议。
ALOHA协议和载波监听多点接入/碰撞避免(Carrier Sense Multiple Access with Collision Avoidance, CSMA/CA)协议是最为经典的竞争类的多址接入协议。 时隙ALOHA(Slotted-ALOHA, S-ALOHA)协议是ALOHA协议的变体，无人机在 每一个时隙中竞争接入通信，文献［17］中提出了一种基于S-ALOHA协议的无人 机自组网的动态多址协议(DTDMA-MAC),结合无线模块设计无人机网络，利用 主节点管理无人机的存储和时间同步问题。DTDMA-MAC有较高的信道利用率, 但是对无人机的移动性考虑不足，不适用于拓扑变化迅速的无人机网络。分布式 协调功能(Distributed Coordination Function, DCF)是基于 802.11 CSMA/CA 的一项 重要技术【7］,这一类协议通过控制帧协商和相关退避策略解决了隐藏终端问题。 文献［18］提出了一种面向位置的定向多址接入协议(LODMAC),这是针对于无 人机自组网设计的基于802.11DCF的MAC协议，LODMAC利用定向通信消除
2 了不对称问题，使用两个收发器提高网络容量和最小化网络延迟。LODMAC在 无人机数目较小的时候有较好的性能，但是随着节点数目增加，冲突变大，节点 需要进行退避和重传，系统的吞吐量和时延性能不能得到保障。竞争类的多址接 入协议想要应用于无人机网络中需要解决反复握手开销问题、“暴露终端”问题， 并且在密集网络中需要有更加高效的冲突处理机制。
固定分配的多址接入协议使用预留的信道传输数据，消除了无人机之间的接 入冲突。Liu等人针对三维无人机自组网在文献［19］中提出了基于时分多址(Time Division Multiple Access, TDMA)的时延容忍多址接入协议(UD-MAC)。Ho等人 在文献［20］提出了一种基于码分多址(Code Division Multiple Access, CDMA)的优 先帧选择MAC协议(PFSC-MAC),协议中传感器被分配不同的优先级，并且基 于优先级分配成不同的组，再通过CDMA协议进行通信。尽管固定分配的多址 接入协议免于节点间的接入竞争，但是在节点没有传输需求的时候仍然需要为其 分配资源，资源利用率不高。
混合类的多址接入协议结合了竞争类多址接入协议和固定分配的多址接入 协议的优点，改善了单一多址接入协议的缺陷。在文献［21］中，Zhang等人提出 了一种基于TDMA和CSMA/CA的无人机自组网混合式容错同步协议(FS-MAC), 利用Q学习算法选择当前状态最合适的协议，在TDMA和CSMA/CA之间进行 切换，利用容错机制确定无人机MAC切换过程。FS-MAC协议由于能够自适应 切换MAC协议，在吞吐量方面有很大的提升，但是算法较为复杂，通信时间可 能随着无人机数量的增加而增加，并且比较难建立真实的无人机通信模型。在文 献［22］中，Song等人提出了无人机实时多址接入协议(UR-MAC), UR-MAC根据 所携带的数据包的优先级分配不同的协议，携带普通数据的低优先级无人机节点 通过TDMA协议接入，携带紧急数据的高优先级无人机节点使用TDMA和 CSMA协议，可以争用分配给其它无人机的时隙。UR-MAC可以在一定程度上 避免无人机间的碰撞，但是需要计算基于复杂碰撞避免运动的争用窗口。在文献
［23］中，Say等人提出了基于碰撞协调的MAC协议(CC-MAC),混合使用TDMA 和CSMA协议避免主从无人机节点之间接入碰撞。在文献［24］中，Zhou等人将 无人机进行分簇，提出一种动态分配的调度型MAC协议(SDC-MAC),簇头节点 间采用频分多址(Frequency Division Multiplexing Access, FDMA)的方式进行通信, 簇内节点采用TDMA协议接入信道，SDC-MAC适用于有中心或者局部有中心 的网络结构。
随着节点数目增大，单信道中节点的接入竞争变得更加激烈，多址接入协议 性能变差，采用多信道机制可以改善网络的性能"J网络中的相邻节点可以通过 接入不同的信道在同一时刻传输。在车载自组网的相关研究表明，多信道MAC
3 协议可以支持不同的QoS〔26］。因此，合适的多信道MAC协议的设计对改善网络 的性能有着重要的意义。
在多信道MAC协议中，节点通常侦听同一个信道的使用情况，在这个信道 上进行信道协商，主要分为三大类：公共控制时期类、公共跳频序列类和公共控 制信道类［25］。
公共控制时期技术不分配专用的控制信道，将时间分为控制时期和数据传输 时期，在控制时期用数据信道充当临时控制信道，典型的协议有单网卡多信道 MAC协议(MMAC)〔271和多信道接入协议(MAP)［28］。此外，Wu等在文献［2刃中提 出了无人机网络多信道MAC协议(FM-MAC),通过无人机的运动预测严重的链 路中断，并且为安全和业务分组提供不同的QoS保证，可以提供相对可靠的数 据传输。但是FM-MAC控制信息与数据信息时分复用，节点的竞争接入和安全 数据包传输占用额外的资源开销。总体而言，公共控制时期技术的一大缺点就是 控制信息和数据信息不能同时传输，节点有数据包发送需求时首先需要等待控制 时期的到来，协商成功后的数据传输还需要等待数据传输时期的到来，因此数据 包传输时延相对比较大。文献［30］针对公共控制时期MAC协议的缺点提出了一 种自适应信道划分MAC协议(ACD-MAC),根据无人机数目和携带的业务负载 动态调整控制信道和业务信道的长度，降低系统传输时延，但是需要借助高空平 台(High Altitude Platform, HAP)估计无人机的数目,HAP和无人机之间需要保持 精准的同步。
公共跳频序列技术采用了跳频技术，所有节点在可用信道上以相同序列跳频, 节点有发送需求时，在当前信道与目的节点联系，典型协议有单跳预约多址协议 (HRMA)W】。这种方法减少了信道间干扰造成的数据包传输错误，但是信道频繁 的切换会产生额外能量消耗。针对无人机网络，Feng等人基于认知无线电设计 T多信道机会预留的MAC协议(CogMOR-MAC)P2］, CogMOR-MAC在进行数据 传输之前，利用多信道机会预约机制完成资源预留，减少无人机节点接入冲突和 等待时间，但是CogMOR-MAC协议中使用的频谱感知方法不是很实用，并且没 有对交会失败的情况进行处理。
公共控制信道技术将信道分为一条控制信道和多条数据信道，节点通过控制 信道协商信道分配信息，采用这一类技术的典型协议有DCA协议El、基于预约 的信道选择协议(RBCS)等国〕。此外，Due Ngoc在文献［35］中提出了一种无人机 节点的定向收发的多信道MAC协议(MMAC-DA), MMAC-DA协议利用公共控 制信道协商控制信息，支持多信道和定向天线，但是MMAC-DA协议不能满足 安全信息包的传输需求。公共控制信道协商的方式相比其它两种多信道技术有较 小的数据包发送时延，但是需要额外分配控制信道，并且控制信道可能成为整个
4
系统传输的瓶颈。
基于以上研究现状，无人机集群多址接入协议设计中存在的主要难点有：
1) 无人机节点的高速运动导致拓扑结构高动态变化，这些要求无人机网络 的多接入技术具有灵活性，能够适应网络拓扑的变化。
2) 在无人机集群的多址接入协议中，节点随时可能入网和出网，如何控制 节点的接入，如何设计控制信息与数据信息的传输直接影响到系统的性能。
3) 频谱资源稀缺，无人机网络新节点的接入将带来新的资源需求，多址技 术应保证尽量减少带宽资源的浪费。
4) 无人机待传输的数据包类型具有多样性，多址接入协议的设计应当能够 满足不同的业务需求。

雷达模块与通信模块通常作为两个独立的模块进行设计和开发，然而随着技 术的发展这两个模块有着越来越相似的结构和系统组成，并且无线通信对中高频 的利用带来更多可用资源，通信带宽的增大使得这两个模块联合设计成为可能。 当前干扰抑制、预编码和波束成形等技术的发展允许雷达和通信系统共享频谱, 有助于缓解频谱资源稀缺问题。在传统独立的雷达与通信系统中，雷达与通信互 为干扰源，而一体化的雷达与通信系统解决了干扰问题，并且能够相互促进，雷 达可以为通信提供帮助，加速动态网络的邻居发现、提供更精确的信道估计和波 束对准，通信可以帮助雷达组网，融合多雷达的传感器信息〔⑷。
目前，雷达通信一体化主要的研究方向集中于雷达与通信共享资源的形式、 一体化波形、雷达通信分离技术等的设计。雷达通信一体化波形的设计大致从两 种思路出发：利用通信波形执行探测任务，例如正交频分复用(Orthogonal Frequency Division Multiplexing, OFDM)波形网和利用雷达波形承载通信信号， 例如线性调频(Linear Frequency Modulation, LFM)波形〔％】。Bliss 等人在文献［37］ 中提出雷达通信一体化的多址接收机，称为多信道多用户接收机(MCMUR),利 用自适应空间自由度和时间自由度分离接收机到的通信信号、雷达回波和干扰信 号。Gutierrez等人在文献［38］中提出一种多输入、单输出的雷达通信一体化多址 系统架构，系统由雷达、通信发射机和联合多址接收机组成，它允许在相同的空 间、时间和频率连续范围内同时解码通信信息和雷达回波。
当前对雷达通信一体化下的MAC协议的研究还比较少。文献［39］提出了一 种服务于智能车队的雷达通信一体化的多址接入协议，但是协议不太适用于无人 机，估计竞争节点数的方法在拓扑变化剧烈的无人机网络中可能不太准确。文献 ［40］提出一种基于S-ALOHA的雷达通信一体化MAC协议，利用雷达波束对准 的概率估计竞争节点的数目，动态设置帧长。一体化下的S-ALOHA协议虽然与
5
S-ALOHA相比吞吐量性能得到了改善，但是在节点数目较大的时候冲突仍然比 较大，系统吞吐量性能较差，最大归一化吞吐量不超过40%。Ma等人在文献［41］ 中提出了一种适用于车联网的一体化MAC协议，利用定向通信在空间上实现复 用提升了网络的性能，但是没有解决“暴露终端”的问题，并且节点在控制信道 以竞争的形式接入，在节点数目大时接入冲突仍然比较大，并且无人机网络拓扑 更加复杂，车联网和无人机网络的业务需求也有一些差异，该协议不能直接用于 无人机网络。
本文针对无人机网络的特性设计多信道的一体化多址接入协议，所提出的多 址接入协议需要保证无人机安全高效的组网，满足无人机的业务需求同时保证无 人机的飞行安全。
1.2.2无人机防碰撞系统的研究现状
在介绍无人机相关的防碰撞研究现状之前，本文首先对现有的飞行控制法规 进行概述。由于无人机的飞行环境恶劣，控制信号不稳定，无人机与障碍物发生 碰撞的概率很大。无人机飞行控制法规的制定是为了规范无人机的飞行活动、降 低无人机之间航路冲突的概率以及禁止无人机在危险区域的飞行行为，从根源出 发降低碰撞的概率。
对于无人机飞行区域的管理，中国民用航空局在文献［42］中规划了无人机的 飞行空域，并根据小型和轻型无人机的特点规定了飞行空域的水平和垂直范围。 还建立了隔离空域，将无人机飞行活动与飞机隔离开来。但对通过安全认证的中 大型无人机、不超过安全高度的轻型无人机、具有可靠监控和维修能力的小型无 人机，不划分隔离空域。美国联邦航空局颁布的《联邦航空条例》第107条规定 了美国民用小型无人机的飞行范围，并提出小型无人机的飞行活动必须保持在运 营商的视线之内。
对于无人机的监管，中国民用航空局于2016年颁布的文献［43］对无人机的 飞行空间和飞行条件提出了要求，防止其影响民用航空。2019年颁布的《民用轻 型和小型无人机飞行动态数据管理规定》提出需要对空域内的轻型无人机、小型 无人机和植保无人机进行监控，要求它们实时传输包括飞行持续时间、位置、速 度、轨迹等动态数据〔44】。美国联邦航空局于2019年12月发布的《无人机系统远 程识别规则草案》提出无人机在飞行过程中需要向第三方系统提供订单号、位置 等信息以确保飞行安全［切。
在飞机或有人驾驶的飞行器上，飞行员可以直接观察到障碍物或者借助自动 相关监视-广播系统(Automatic Dependent Surveillance-Broadcast system, ADS-B) 或者交通避碰系统(Traffic Collision Avoidance System, TCAS)等预警系统来了解
6 周围目标的位置和运动速度，而无人机上没有飞行员，不能单纯依靠预警系统进 行防碰撞，无人机必须配备完整的防碰撞系统实现自主防碰撞。近年来研究人员 一直在致力于开发一种有效的无人机感知和规避技术。无人机自主防碰撞系统可 以分为感知、预测、防碰撞三大模块〔呦，无人机通过感知模块周围环境信息获取 障碍物的身份和位置信息用于碰撞预测，当预测到可能发生碰撞，无人机需要碰 撞避免和重新路径规划以避免碰撞。下文将从这三大模块出发，对无人机的防碰 撞技术的研究现状进行阐述。
无人机障碍物感知方法可以分为合作式和非合作式两大类。合作是指所有成 员彼此合作、交流和共享信息，共享飞行区域的态势信息，装备合作式感知设备 的无人机可以利用通信获取合作目标的状态信息。
合作式的障碍物感知系统在飞机上得到了广泛的应用，近年来逐渐应用到无 人机上，合作式的防撞系统主要有三种：TCAS、ADS-B和飞行警报系统(Flight Alarm,FLARM)o TCAS和ADS-B通常用于大中型无人机，而FLARM用于小型 无人机。
TCAS是适用于中大型无人机的感知系统，该系统的功能是向邻居无人机发 送询问信号，获取高度、航向等数据〔例。TCAS系统发现存在潜在威胁时可以发 出垂直机动指令，引导无人机脱离危险。与TCAS相比，ADS-B的位置报告是 自动广播的，无人机之间无需查询即可接收和处理接近无人机的位置报告，ADS- B监控技术在我国民航领域得到了广泛的应用，ADS-B中广播的主要信息是四 维位置信息、标识信息等【伺。FLARM是一种适用于小型无人机的交通感知技术， FLARM可以把预测的轨迹编码发送给附近的所有无人机跑。
无人机通过合作式感知系统可以获取系统中其它成员的全面信息，实现无人 机间信息共享，当障碍物为无人机时，可以通过协同障碍物感知来获取障碍物信 息方法，但是当障碍物是树、山、建筑物等时，只能通过非合作方式获取障碍物 信息。
如今视觉检测技术已广泛应用于无人机感知系统，通常将其与数字图像处理 算法集成在一起以实现无人机避撞。然而，视觉检测需要良好的视觉环境，黑暗、 恶劣的天气或反射性表面都可能会给视觉系统带来挑战。与视觉检测相比，非视 觉检测具有很大的优势，它可以忽略黑暗或者恶劣条件的影响，非视觉检测可以 被分为主动和被动类型。被动型包括红外、热成像、电光等，这些传感器不会自 行发送信号，而是收集来自物体的信号，被动型传感器收集的信号通常包含更多 的噪声；主动型包括雷达，激光和声纳，它们通过发送信号来感知障碍物。
雷达能提供精确的距离和方向，并且不论环境如何，它都是稳定的。因此，
7 在主动传感器中，雷达被广泛应用于无人机的障碍物检测中。文献［50］设计了一 种基于多输入多输LB(Multiple Input Multiple Ouput, MIMO)的雷达系统，该系统 有良好的角度检测精度和较大的检测范围。文献［51］提出了一种雷达设计方案， 在无人机最大速度440km/h,最小探测距离2.8km的条件下，雷达的成功探测概 率大于90%o在业界，大疆推出了运用于农业上避障系统，该系统包含新的飞行 控制器和雷达传感系统，系统装备的避障雷达能够在1.5米至30米范围内探测 无人机后方或前方的障碍物QI。目前雷达不仅具有高精度，高分辨率的优势，还 可以通过建立通信链路来实现信息的传输和与其他雷达的交互，这也是未来无人 机感知系统的趋势，为雷达通信一体化技术提供了前景。

碰撞预测是防碰撞过程的第二步。无人机对感知得到的信息进行处理，预测 是否会发生碰撞，并根据预测结果判断是否需要碰撞避免。无人机碰撞预测的方 法主要有最坏情况近似方法和检测滤波法等。
(1) 最坏情况近似方法
利用最坏情况近似方法，无人机可以预测最坏情况下的碰撞情况，使碰撞避 免方法更加有效。文献［53］计算了障碍物的在不同条件下的碰撞概率得到最坏的 碰撞情况，在此基础上规划路径。最坏情况近似方法由于评估所有可能的目标轨 迹需要花费时间，与其他碰撞检测算法相比，该算法较为精准但是效率较低。
(2) 检测滤波法
估计滤波器如卡尔曼滤波器(KalmanFilter, KF),扩展卡尔曼滤波器(Extended Kalman Filter, EKF)通过处理无人机的位置、速度等先验知识，预测无人机的碰 撞情况。文献［54］在两架无人机相遇时的场景下，采用KF估计对方的运动状态 和飞行轨迹。为了估计无人机和障碍物的位置，文献［55］将通信接收信号强度用 于EKF中，优化由噪声或路径损耗引起的估计不准确的问题。文献［56］应用EKF 算法预测移动障碍物的轨迹，利用EKF减小由风阻等外界干扰引起的预测误差。 滤波器算法常常被用作短期碰撞预测的程序。

为了确保任务期间不发生碰撞，一些研究将无人机放置在不同的飞行平台上 El。然而这种方法只是权宜之计，随着无人机的应用渗透到各行各业，无人机在 未来所要飞行的环境更加复杂多变，因此研究自主的路径规划方法是非常重要的。 目前国内外对路径规划方法的研究较多，可分为经典方法和启发式方法。
1、经典算法
经典路径规划方法利用或改进了图论、几何等传统方法，在无人机的碰撞避 免中起着重要作用。
8
(1) 几何方法
几何算法利用无人机与障碍物之间的相对运动几何关系进行碰撞避免，是一 种有效的空中避碰方法。
碰撞锥算法是一种典型的几何算法。碰撞锥算法将碰撞区域简化为球体或圆 柱，以无人机为顶点作碰撞区域的切线形成锥体，通过对相对位置和相对速度的 分析，得出最佳的避让策略。文献［58］在障碍物周围生成了一个球形风险区域。 通过已知速度方向，计算出方向与切线的夹角，选择最小夹角方向转弯，实现了 及时避碰。
几何中的Dubins曲线是指连接两点的最短曲线，Dubins曲线算法及其改进 算法在路径规划中得到了广泛的应用。文献［5刃使用Dubins曲线算法得到了无 人机到障碍物多边形的所有Dubins曲线,并使用Dijkstra算法得到了最短路径， 这是考虑二维路径规划问题的一个好方法。文献［60］将Dubins曲线算法应用于 地面避障，扩展了路径算法的使用范围。Dubins曲线算法的缺点是只能应用于静 态目标，面对动态障碍物时，很难找到合适的切入点。
(2) 图论方法
图论方法有Voronoi图算法、Laguerre图算法等，这种方法将空间划分为网 格图，再遍历空间寻找从起点到目标点的最佳路径。
Voronoi图是由相邻点的垂直平分线形成的多边形构成的，于是Voronoi图 搜索算法是以Voronoi图为飞行路径，然后用Dijkstra等算法搜索其中最短的路 径的算法。Voronoi图搜索算法在机器人中得到了广泛的应用，近年来在无人机 的路径规划中得到了应用。Voronoi图算法的缺点是Voronoi图的建立和平滑需 要占用大量时间。
Laguerre图的直线不是由垂直平分线的多边形构成的，而是由碰撞区域的圆 形范围决定的，每一条线穿过圆形范围的空间，形成Laguerre图的多边形。文献 ［61］在执行飞行任务之前使用了 Laguerre算法来规划飞行路径。Laguerre图算法 应用于路径规划中，可以做到及时、准确。然而，当碰撞区域相互相交时，由于 没有剩余的空间，该算法将无法工作，这是Laguerre图算法的一个局限性。
(3) 人工势场算法
人工势场算法假设无人机在虚拟力场下运动，在力场的引导下，无人机避开 障碍物，接近目标点。由于该算法易于应用，广泛应用于机器人的碰撞避免中， 也可以用在无人机上。文献［62］使用高斯混合模型建立障碍物模型，然后将人工 势场算法应用于无人机的碰撞避免中。然而，人工势场算法存在一个很大的缺点， 即在复杂环境下，无人机容易陷入局部极小问题，并且人工势场算法比较难在两 个障碍物间找到路径，容易掉入陷阱。
9
(4) 快速搜索树算法
快速搜索树(Rapid-exploration Random Tree, RRT)算法是一种基于随机抽样 的路径规划算法，通过感知信息扩展节点，最终找到一条从起点到终点的路径。 RRT算法能够应用在各个维度、各种约束的路径搜索中，原理简单，非常适用于 具有威胁区域和动态约束的无人机路径规划问题中。
尽管RRT算法有很多优点，但是仍然存在一些不足，例如收敛速度慢，由 于在狭窄的路径中比较难找到路径，生成的路径不满足无人机飞行限制。为此， 学者们基于RRT算法提出许多RRT算法的变体，对RRT算法进行改进，例如 双向 RRT 算法(Bi-Directional RRT)^］、任意时间 RRT 算法(Anytime RRT)t64\ RRT*算法这些算法提高了 RRT算法的收敛速度。针对于无人机路径规划， 文献［66］在RRT算法中引入势函数信息，让路径搜索朝着势函数的前进方向进 行，提高RRT算法搜索的效率。文献［67］根据航向角的变化率，对传统RRT算 法规划的路径进行了优化。文献［68］使用RRT算法生成多个无人飞行器的路径， 在无人机检测到其它无人机或动态障碍物时重新规划路径避免碰撞。
2、启发式算法
与按固定步骤求解问题的系统方法相比，启发式算法根据历史经验获得合适 的策略。启发式算法可以在一定的约束条件下找到满足条件的近似最优解，但比 较难估计求解的路径与最优解之间的距离。启发式避碰算法包括神经网络算法、 遗传算法、蚁群算法等。
(1) 神经网络算法
神经网络算法可以处理不同类型的输入，如GPS位置信息、图像信息等， 然后输出无人机的下一步运动决策。文献［6刃提出了一种基于人工神经网络的路 径规划算法。该网络直接对无人机视觉系统的图像进行处理，并应用反向传播算 法得到当前位置(前、右、左等)的最佳控制指令。文献［70］提出一种路径规划 算法，使用广义模糊竞争神经网络来评价路径。神经网络算法的一大优点是通过 自学习规划路径可以避开了将感知空间映射到行为空间这一难题,但是神经网络 比较难获得典型的样本，不同网络的训练速度也有所差异。
(2) 遗传算法
遗传算法是一种智能优化算法，主要用于求解优化问题。遗传算法将问题的 解编码到染色体中评价染色体的适应度，并将适应度高的染色体保留到下一代。 重复这个过程，直到得到所需的解决方案。文献［71］首先用Bellman-Ford算法解 决给定区域内多个兴趣点的溢出问题，然后用遗传算法寻找最优路径。文献［72］ 将无人机路径规划问题定义为多目标优化问题，提出一种新的多基因结构来描述 路径，采用自适应微分多目标优化算法寻找无人机避障和满足飞行限制的最优解。
10
遗传算法用于路径规划可以寻找满足无人机避障和飞行限制的解，但是遗传算法 有可能出现过早停滞等问题，并且遗传算子等参数需要依靠经验进行设置。
(3) 蚁群算法
蚁群算法是一种模拟蚂蚁寻找路径的算法，当得到一条较好的路径时，系统 会发出一个正反馈信号，引导系统到达最优路径。文献［73］提出了一种基于蚁群 算法的无人机在山区环境中的避障方法。文献［74］在传统蚁群算法的状态转移过 程中引入了引导因子，然后利用再激发学习机制更新路径上的信息素，这两种改 进大大提高了算法的收敛速度和收敛能力。蚁群算法可以求解路径问题、调度问 题等，但是蚁群算法也存在一些缺点，例如在个体都选择同一路径的情况下，无 法展开进一步的空间搜索，无法得到最优解。
1.3研究内容
本文的研究内容分为两大块：感知通信一体化下的多址接入协议和无人机集 群防碰撞技术，两个研究内容的联系如图1-1所示，共同保障了无人机高效、安 全的组网。


无人机飞行自组网络
图1-1研究内容
研究内容一是感知通信一体化下的多址接入协议，首先基于感知通信一体化 的研究背景，选择了合适的雷达通信一体化复用模式，在多址接入协议中对一体 化模式和雷达模式进行调度。然后针对无人机自主网络的高拓扑变化性、部署范 围大和节点数量大的特点提出了基于预留机制的多信道模型，设计了信道复用模
11
式，改进了控制信道中节点的接入方式，并且根据网络中无人机预约情况动态改 变帧的长度。此外为无人机执行任务过程中传输的不同的数据包类型分配不同的 优先级，并且设计了数据包的结构。最后分析了多址接入协议的吞吐量和时延等 指标，并且验证了所提岀的控制信道接入方式更难达到控制信道的瓶颈。
研究内容二是无人机自主防碰撞算法，针对无人机在三维动态障碍物环境中 的碰撞问题提出了先躲避后路径重新规划的办法防止路径规划不及时造成的碰 撞避免失败。无人机间通过多址接入协议调度雷达与通信的工作方式，利用一体 化信号的探测、目标识别和共享碰撞信息。此外，利用扩展卡尔曼滤波器融合雷 达与通信信息，从而得到更小的轨迹预测误差，通过仿真分析轨迹预测误差对最 小反应距离的影响。而后提出了一种先碰撞避免后路径重新规划算法，充分利用 历史路径规划信息进行路径重新规划，并且无人机间可以通过通信共享碰撞信息, 规划无冲突路径。最后仿真验证算法的有效性及其和传统路径重新规划算法进行 了比较。
1.4文章的结构
本文后续章节安排如下：
第二章介绍节点接入的关键技术，提供后续工作的理论基础。
第三章对感知通信一体化的多址接入协议展开研究，首先对无人机网络的系 统模型进行描述，将无人机网络链路分为空对空(Air to Air, A2A)链路和空地(Air to Ground, A2G)链路，并提出一种信道复用的模式。之后针对A2A链路提出了 一种基于预留机制的多址接入协议，改进了控制信道中的节点接入模式，对节点 接入、预约传输和数据传输等过程进行设计，最后分析了协议的性能指标并且通 过仿真验证协议的性能。
第四章对无人机防碰撞技术进行研究，首先提出一体化的感知模式，然后利 用扩展卡尔曼滤波器融合雷达与通信信息，并且融合多无人机的感知信息以获取 更小的预测误差，通过仿真说明了预测误差对最小反应距离的影响。最后针对由 于路径规划不及时可能造成的碰撞避免失败的问题，采取了先碰撞避免后路径重 新规划的方法脱离危险，并且提出多无人机路径重新规划算法，仿真验证了算法 的可行性。
第五章是对全文的总结和对多址接入技术和无人机防碰撞技术未来研究工 作的展望。
12
第二章无人机节点接入关键技术
2.1多址接入协议
多址接入协议就是一种资源管理与分配的机制，使多个用户能够高效共享有 限的信道资源，它的主要工作是解决多用户同时接入信道时的信息碰撞问题。从 通信协议的分层结构看，多址技术属于数据链路层的子层，位于数据链路层的逻 辑控制层之下，物理层之上，逻辑控制层为用户提供到邻居用户的“链路”，而 MAC协议的主要功能在于协调多个用户调度信道资源，尽可能减少用户接入信 道的冲突，保证用户间保持连通性⑺］。
随着节点数目增大，节点接入信道的竞争变得激烈，多接入协议的性能变差， 使用多信道机制可以改善网络的性能，节点通过接入不同的信道避免冲突，接入 方式更加灵活。多信道模型下的自组网因其组网效率和抗干扰能力，具有广泛的 前景。多信道机制不仅用于自组网中，在WiFi标准中也得到了应用，例如802.1 la 协议和802」lb协议"I,而802.1 In协议在多信道机制基础上增加了信道聚合技 术，支持20MHz和40MHz的信道带宽⑺】，多信道技术为高效率、大带宽的雷 达通信一体化MAC协议的设计提供了新的途径。
第一章中对无人机多址接入协议的现有研究分析得出，由于无人机的高动态 拓扑变化及其无中心的自组织网络结构，目前已有的标准协议并不适用于无人机 自组网，并且如何设计一体化下无人机有效的通信机制、如何提升无人机吞吐量 和接入效率等性能、如何满足不同业务数据包传输需求仍然是一个具有挑战性的 课题。而采用多信道机制可以改善系统的新能，因此本文将基于多信道机制设计 雷达通信一体化的多址接入方法，下面先对多信道技术进行介绍。
2.1.1多信道的多址接入协议分类
多信道MAC协议主要分为三大类：公共控制时期类、公共跳频序列类和公 共控制信道类。多信道MAC协议的总结如表2-1所示，公共控制时期类的MAC 协议不需要分配专门的控制信道，但是控制信息和数据信息分两个时段传输，时 延较大。公共跳频序列类MAC协议也不需要分配专门的控制信道，且减少了信 道间干扰造成的数据包传输错误，但是信道频繁的切换会产生额外能量消耗。公 共控制信道类协议需要额外分配控制信道，在带宽较充足的情况下控制信道可能 成为系统传输的瓶颈，但是相对前两类协议有较小的数据包发送时延，并且能够
13

解决“隐藏终端”问题和“聋音”问题，因此本文采取了公共控制信道类的多信 道模型。
表2-1三类多信道MAC协议的对比
多信道MAC
协议
优点
缺点
典型的协议
公共控制时期
类
不需要分配专门
的控制信道
控制信息和数据信息 不能同时传输，时延 较大
MMAC[27] MAP [28] FM-MAC〔29] ACD-MAC[30]
公共跳频序列
类
不需要分配专门 的控制信道，信 道间干扰较小
信道频繁的切换会产 生额外能量消耗
HRMA[3,]
CogMOR- MAC[32]
公共控制信道 类
有较小的数据包 发送时延，解决 了 “隐藏终端” 问题和“聋音” 问题
需要额外分配控制信 道，在带宽较充足时 控制信道可能成为系 统传输的瓶颈
DCA[33] RBCS[34] MMAC-DA[35]
2.1.2基于公共控制信道的多址接入协议
基于公共控制信道的多址接入协议将信道分为一条控制信道和多条数据信 道，在此类协议中节点需要配置一个控制接口、一个或者多个数据接口，其中控 制接口负责控制信道中相关协商信息和广播信息的收发，数据接口负责数据信道 中的数据信息收发，节点根据控制接口中协商的信道信息，切换到相应的数据接 口进行数据收发［7®。
在控制信道中，节点通过握手协商数据传输所占用的信道资源，并且通过广 播与接收广播去更新周边节点的信道使用情况，协商完成之后节点在对应的信道 资源进行数据传输。由于节点的接入过程都是在空闲信道上进行协商，当有大量 节点需要接入时控制信道中容易造成拥塞，影响系统的整体性能。相对于公共控 制时期的多址接入协议和公共跳频序列类的多址接入协议，基于公共控制信道的 多址接入协议在控制信道中协商信道分配策略，接入过程更加单一，如果能够缓
14 解控制信道的瓶颈问题，基于控制信道的多址接入协议在时延、协商效率等方面 将带来比较大的优势。

DCA协议是典型的基于公共控制信道的多信道多址接入协议，DCA协议按 照节点数据发送情况按需进行信道分配，在控制信道中基于802.11 DCF机制协 商信道，当监听到数据信道上有空闲时，发送节点首先在控制信道中竞争式地向 目的节点发送请求发送(Request To Send, RTS)数据包告知自己可用的信道，目的 节点成功接收到RTS信息后回复清除发送(ClearTo Send, CTS)数据包，选择自己 可用的信道，发送节点再发送预留(Reserve,RES)信息包进行确认。发送节点和目 的节点间通过三次握手协商传输的信道，如果发生冲突则进行退避。DCA协议 的工作流程如图2-1所示"I：


DCA协议按照节点接入需求按需分配信道资源，协议接入方式简单有效。 文献［81］将DCA协议用于自组网中，自组网中的节点可以通过DCA协议竞争接 入网络。但是DCA协议有着公共控制信道的多信道多址接入协议相同的缺点， 有着大量节点接入时候在控制信道中容易造成拥塞，即使数据信道资源非常充足, 常常由于控制信道瓶颈问题使得系统的吞吐量和时延等性能受到制约。基于以上 分析，本文改进DCA协议的节点接入方式，将缓解控制瓶颈问题、提升系统性 能作为接入方法设计的目标。
2.2无人机防碰撞技术
无人机的防撞技术至关重要，保障了无人机的飞行安全。有人驾驶的飞机通 常配备了探测与规避系统用于探测空域中的其它飞机，及时发现潜在的威胁，人 和设备都起着至关重要的作用［佝。而对于无人机而言，没有飞行员可以操作避障,
15
无人机必须依赖完全自主的感知避障系统，这使得感知避障系统的开发具有挑战 性。
2.2.1防碰撞系统结构
一个完整的无人机自主避障系统由感知模块、预测模块、决策模块和无人机 飞行控制系统构成。其中感知模块通过传感器设备采集目标的信息，这些信息将 用于预测无人机与目标之间是否可能发生碰撞。当预测到碰撞时，防碰撞决策模 块将重新规划路径，寻找一条满足约束的路径，在紧急情况下将输出相应的控制 信号，驱动发动机和操纵面做出相应的避障动作。防碰撞系统的简单示意图如图 2-2所示。


2.2.2防碰撞相关技术介绍

估计滤波器如卡尔曼滤波器、扩展卡尔曼滤波器等常被用作碰撞预测的程序。 其中扩展卡尔曼滤波器是一种最小均方误差估计方法，利用一阶泰勒级数对非线 性系统进行线性化［82】。扩展卡尔曼滤波器具有良好的轨迹预测能力，可以实现最 优轨迹预测，基于上一次预测的偏差和此次输入量不断进行迭代，最终实现收敛 的这样一个过程，工作流程图如图2-3所示。
16


扩展卡尔曼滤波包括两个重要的向量：状态向量X*)和测量向量Z伉)状态 向量用来描述系统动态行为，测量向量代表了某一时刻的测量值。扩展卡尔曼滤 波器使用过程方程和测量方程对状态进行预测，将状态向量滤波值X(幻经由卡 尔曼滤波器估计的值计表示为沁)。假设/(・)是动态模型函数，方(・)是测量模 型函数，/(・)根据k-1状态估计计算时间步长k中的状态，恥)根据预测状态计 算预测测量。状态向量和测量向量有以下表达式1蹈：



Z(k) = h(X{k},k) + Rk
其中Q4和殆分别是过程噪声和测量噪声，并且有Qk-x ~ N(0, of J、
Rk-i ~	。
将/(・)和方(・)对左仇)进行一阶泰勒级数展开，用F(£-1)表示/(•)的雅可

则式(4-1)和式(4-2)可以转换为血］:
X(E) = F(上一 1)X(* — 1) + O£|+<I\T	(2-3)
17
Z(k) = H(k)X(k) + b：	(2-4)
其中①-为外作用项。
关于扩展卡尔曼滤波器算法的详细介绍读者可以参阅文献[82],主要有状态 预测和状态更新两大步骤[82〕：
(1) 状态预测：
用k-1时刻的状态估计k时刻的状态：
X{k\k-\) = F(k\k-\)X{k-\\k-\)	(2-5)
预测误差协方差矩阵：
P(k\k-}} = F{k\k-\)P(k-\\k-\}FT (k\k-\) + Qk	(2-6)
(2) 状态更新：
更新观测向量：
更引—1)=日(引上_1)龙伙比_1)	Q_7)
计算滤波增益：
K(k) = P{k\k-i)HT (k^H{k)P{k\k-\)Hr ©) + &「	(2-8)
更新状态向量：
X(k\k) = X(k\k-\)+K{k-)[z{k)-Z{k\k-\)]	(2_刃
更新协方差矩阵：
P{k\k) = P{k\k-\)-K(k)H(k)P{k\k-\)	(2-10)

无人机的飞行环境复杂多变，在飞行过程中会随机遇到各种情况，因此防碰 撞算法需要灵活应变适应不同的环境，不仅需要躲避静态障碍物还需要绕开动态 障碍物和其它无人机。无人机通常不仅仅局限在一个平面上飞行，需要扩展到三 维空间。RRT算法是一种基于概率采样的搜索方法，通过在规划空间随机采样不 断往安全区域延伸，从而寻找到一条从起点到目标点的路径。RRT算法不需要建 模，非常适合用来解决在三维动态障碍物环境下具有复杂约束的无人机路径规划 问题。
RRT算法通过釆样和增加叶节点数量来生成随机扩展树最终找到一条 从起点到终点的路径，主要步骤包括：构造采样点，找到根节点和扩展节点。假 设初始点和目标点分别为乙和ZG，可以用集合S保存RRT树的节点信息，起点 是RRT树的第一个顶点，将起点乙添加到集合S中。首先RRT搜索树从乙出
18
发，随机生成采样点Z®d，然后在集合S中搜索距离Z”a”d最近的节点Z”e”。在 此基础上，在乙^”与乙如孑的连线上取预先设定的最小检测步长所在的点Z”和。 当Z”酗和Z”边之间的区域没有威胁时，把Z”帥加入到集合S中，可知此时Z”e” 为Z”刑的父节点。如果Z”旳和Z”。"之间存在威胁则重新生成Z®d。重复上述 步骤，直到集合S中存在一个叶子节点到达终点ZG的距离小于使用预定义的最 小检测步长I。最后，从终点ZG出发，找到每个节点的父节点直至起点，依次连 接每个节点，生成从乙到ZG的路径。至此，对于给定的初始状态构造了一棵具 有M个节点的快速探索随机树。
RRT算法的简单示意图如下：

图2-4 RRT算法简单示意图

RRT*算法的过程大体上和RRT算法相同，在RRT算法的基础上增加邻域 最近父节点计算和为邻域节点重新布线两个步骤寻找代价更小的路径，因此可以 获得比RRT算法更优的路径。
RRT*算法生成Z”帥节点之前的步骤与RRT算法完全相同，与RRT算法不 同的是，在生成节点Z”羽之后不会立刻与乙如连接起来，将以Z”刑为圆心，以 预定义的半径作圆作为Z”旳的邻域，寻找在邻域范围内到Z”刊路径代价最小的 节点Znearest •并且需要保证乙帥与的连线中不存在威胁，如图2-5所示。 寻找到Z应帕之后，连接Z和Znearest，Znearest即为Znew的父节点。而后比较 Z”和的邻域中的各点的路径代价与通过Z”旳到达该点的路径代价大小，如果通 过Z”刊到达当前点的路径代价更小，则删去与原父节点之间的连线，将乙”申作 为当前节点新的父节点，重新布线，如图2-6所示。
19


RRT*算法常作为一种基本方法与其他方法相结合以获得更好的性能。本文 将利用雷达和通信信息为RRT*算法提供有效的信息，借助一体化信号识别动态 障碍物和无人机，并且融合感知和通信信息进行碰撞预测确定冲突区域，进行路 径重新规划。
20
第三章雷达通信一体化的无人机集群节点接入技术研究
雷达通信一体化在设备成本、尺寸和系统性能等方面都有显著的优势，将是 未来的研究趋势［⑷。目前该领域对波形、雷达通信分离等技术研究已经在火热地 进行中，但对于一体化下MAC协议的研究还比较欠缺。Ma等人在文献［41］中提 出了一种适用于车联网的雷达通信一体化MAC协议，但是没有解决暴露终端问 题，在节点数目大时接入冲突较大，性能容易受到控制信道的制约。此外，车联 网和无人机网络虽然有着相似之处，仍然存在着一些区别。首先，无人机高速运 动，拓扑变化快。其次，车联网的场景是二维的场景，车辆通常沿着道路行驶， 在进行设计时可以只考虑运动方向前后的车辆，而无人机通常是三维运动的，防 碰撞的场景更为复杂。第三，目前车联网中的传输的数据包主要是携带有车辆位 置信息或者危险警示等安全相关的数据包，而无人机携带任务特殊，所携带的数 据包分为安全相关的数据包、和业务数据包，无人机的MAC协议需要适应不同 数据包传输需求。最后，车联网有路边的设施，而无人机自组网完全不依赖各类 设施。
基于以上的分析，本文改进文献［41］的MAC协议并借鉴DCA协议的多信 道模型，改进控制信道的协商模式，提出一种基于信道预留机制的一体化MAC 协议，减小无人机节点的接入冲突，并且根据预约的情况动态设置帧的长度，此 外为安全数据包设置了高优先级，以满足安全数据包的低时延需求。
3.1系统模型
无人机执行任务的过程中首先需求考虑自身的安全问题，由于无人机飞行环 境的复杂性和不确定性，在雷达通信一体化MAC协议的设计中必须考虑到雷达 的探测功能不能受到影响，因此需要选用合适的雷达通信复用模式和合理的调度 模式实现安全通信与高效的数据传输。下面将对雷达通信的复用模式与系统链路 展开介绍。
3.1.1雷达通信的复用模式
雷达通信的复用模式分为时分、频分、空分和波形一体化这几种形式。雷达 与通信在时分复用的形式下分时段进行探测与数据传输，可以保证雷达与通信信 号互不干扰，但是不能保证雷达的连续探测。频分复用模式的优点是雷达与通信 信号互不干扰，并且雷达可以持续探测，但是需要给雷达分配单独的频段。在空
21
间复用的模式下，雷达与通信工作在不同的波束上，但是不能保证完全的空间隔 离，雷达与通信之间可能互相干扰。雷达通信波形一体化的模式不再额外地为雷 达分配一段探测频段，在波形层面上形成一个信号，但是这种复用模式雷达的扫 描方向必须和通信方向保持一致。如果能够合理地调度雷达与通信的工作，保证 这两个系统能够正常运行，雷达通信波形一体化将在成本、频谱资源等许多方面 体现出优势。
基于以上的分析，本文将基于雷达通信波形一体化的模式研究MAC协议。 在雷达通信波形一体化模式下根据通信信号分为雷达(Radar, R)模式和雷达通信 一体化(Radar Communication,RC濮式西。在R模式下雷达可以全方位地扫描周 边环境，在RC模式下雷达与通信同时工作，雷达的扫描方向和通信方向一致。 区别于传统的雷达通信系统级的交互方式，在雷达通信一体化下，MAC协议将 控制R模式和RC模式的切换，从而调度雷达和通信的工作。
3.1.2系统链路
在军事侦察和监视等场景中，无人机的飞行安全问题是需要考虑的首要问题, 因此本文将系统的链路分为A2A链路与A2G链路，如图3-1所示。其中，A2A 链路传输无人机任务相关的业务数据包和安全相关的数据包，并且需要满足这两 种数据包的不同数据传输需求。A2G链路类似于控制与无负载通信(Control and Non-Payload Communication, CNPC)A2G链路，与地面控制站进行数据交互，为 无人机飞行安全提供双重保障。

■地面控制站	无人机 	►传输路径

图系统链路图
22


借鉴经典DCA协议，本文将A2A链路分为一个控制信道与多个数据信道。 对于无人机分布式网络而言，控制信道可以起到调度无人机通信、分配资源的作 用，控制信道中传输相关的预约信息、确认信息和系统的广播信息。而数据信道 中传输无人机执行任务过程中产生的数据包，具体可以分为任务数据包和安全信 息包。无人机节点在控制信道预约完成之后，将在对应的数据信道上进行数据传 输。针对多信道多址接入协议的设计，本文做了以下两点假设：
1, 所有的信道都运行在理想状态下，系统的丢包仅由数据包碰撞产生。
2、	无人机节点工作在全双工模式。

CNPC链路对于确保所有无人机系统的安全运行至关重要。高可靠性、低延 迟和安全的双向通信必须得到这些链路的支持，以便在无人机之间以及无人机和 地面控制站之间交换安全关键信息⑴］。CNPC主要大致可分为三类：地面系统对 无人机的指挥与控制、无人机到地面的飞机状态报告及其无人机之间的感知和回 避信息。目前有两个频段依据分配给CNPC链路：L波段(960-977 MHz)和C波 段(5030-5091 MHz)"】。在本文中我们保留CNPCA2G链路，在一体化的模式下 不再设置单独的CNPC A2A链路，取而代之的是在数据信道中传输雷达通信一 体化信号进行跟踪和预测。无人机的安全信息需要在极短的时间内进行传输。因 此本文给无人机的紧急信息包赋予高优先级，无人机一旦预测到存在碰撞的风险, 将发送紧急信息包，并以高优先级抢占时隙资源，保证紧急数据包的低时延传输 需求。
3.2信道复用方式
如图3-2所示，每一帧的开头首先进入探测阶段扫描周边环境的情况并且更 新邻居表，而后对各节点进行同步设置。本文的通信链路分为A2G链路和A2A 链路。A2G链路以上下行的方式定期与地面进行数据传输。在下行阶段，无人机 以时分复用的形式依次向地面控制站发送自身的位置和速度信息，地面控制站将 汇总无人机相关安全信息；在上行阶段，各无人机以频分复用的形式接收来自地 面的指令和控制信息。
23


图3-2信道复用方式示意图

无人机A2A链路中的信道分为控制信道和数据信道，其中控制信道用于信 道上时隙的预约，控制无人机的信息传输，这里的时隙指代某一信道和时间所对 应的资源格。在经典DCA协议中，节点首先侦听信道的空闲状态，侦听到空闲 时在控制信道中与目的节点协商通信信道，这种竞争接入的方式在节点数目大的 时候冲突较大，需要不断地进行退避和重传，并且容易由于控制信道竞争接入瓶 颈影响到数据传输的效率。因此本文采用了基于预留机制的控制信道协商方式, 假设每一架无人机都有自己的身份标识(Identification, ID),无人机将按照自身的 ID大小依次在控制信道中进行预约。预约成功之后，在预约的信道上定向传输 数据包，如果信道队列中没有需要等待传输的数据包，节点可以直接开始传输的 过程。在此过程中可以使用波束复用同时进行多个数据包的传输以提高网络的性 能。
在数据信道中，无人机传输的数据包按照紧急程度被分为紧急信息数据包和 业务数据包，并且都将以雷达通信一体化信号的形式进行传输，在通信的过程中 同时保持着对网内无人机的探测。在固定帧长的协议中，时间被划分为固定长度 的时间帧，在节点数目变化迅速的场景中灵活性欠佳，比较容易造成浪费，因此 协议采用动态帧长以适应节点数目的动态变化。节点按照ID顺序预约成功之后， 将广播告知其它节点信道占用的情况，预约阶段结束之后可以得知节点的信道预 约情况，动态设置帧的长度。
3.3数据包格式
在控制信道中，无人机节点主要传输相关的控制信息，包含了 RTS数据包
24
和CTS数据包和广播CTS (Broadcast CTS, BCTS)数据包。控制信道中用于协商 收发节点选用的信道信息的数据包格式和DCA协议［7®中用于协商信道信息的数 据包格式类似，但是增添了无人机的GPS信息并且所选用的信道资源信息中增 添了波束信息。
RTS数据包格式如图3-3⑻所示，RTS数据包中包含：包头、发送节点GPS 信息、数据包大小、发送节点可用的信道和时隙，发送节点可用的波束和帧校验 序列(Frame Check Sequence, FCS)。
CTS数据包作为RTS的回复信息，回复接收节点GPS信息、选择通信的信 道和时隙及其选择的波束，数据包格式如图3-3(b)所示。CTS数据包中包含：包 头、选择通信的信道和时隙，选择的波束和FCS。
而BCTS数据包和CTS数据包包含相同的信道资源选择信息，BCTS数据 包的主要作用是将相关的预约信息广播给周围节点，告知资源占用情况，数据包 格式如图3-3(c)所示。

(a) RTS数据包结构



(b) CTS数据包结构



(c) BCTS数据包结构 图3-3控制数据包结构

25

在数据信道中，无人机节点以一体化的形式定向传输业务相关的数据包和紧 急数据包。紧急数据包是在无人机预测到存在碰撞危险时产生，紧急数据包对时 延的容忍性低，需要保证其低时延和可靠传输。而对普通的任务数据包而言，对 吞吐量要求更高，对时延有一定的容忍性。因此本文为不同类型的数据包提供不 同的服务，为安全信息包设置高优先级，为任务数据包设置普通优先级，保障对 紧急情况的及时处理，高优先级的数据包可以争夺低优先级数据包传输的信道资 源。采用这种方法能够处理由于预约时隙被固定分配时，紧急信息无法及时传输 问题。
业务数据包和紧急数据包中都包含包头部、GPS信息、数据包优先级和数据 包类型，紧急数据包中额外添加了碰撞状态信息，此外业务数据包和紧急数据包 传输的信息不一样，业务数据包传输无人机执行的任务相关的业务信息，而紧急 数据包中传输安全相关的信息。业务数据包的格式如图3-4(a)所示，紧急数据包 的格式如图3-4(b)所示。
包头部 GPS 优先级数据包类型	数据信息	FCS

帧控制持续时间发送方ID	接收方ID


(a)业务数据包结构
包头部
GPS
优先级
数据包类型
碰撞状态
数据信息
FCS
(b)紧急数据包结构
图3-4业务信道中的数据包结构

3.4 A2A链路中基于预留机制的MAC协议
网络中的跳数指在信息传输过程中需要经过几个节点的转发，由于两跳之外 的无人机可以进行时隙复用，本文对两跳内的节点的接入过程进行阐述。两跳内 的无人机节点如果同时接入同一个信道的相同时隙，会发生碰撞，本文为无人机 网络设计了固定分配的方法进行时隙预约，下面将从节点接入到数据传输的各个 阶段对协议进行描述。
26

3.4.1探测阶段
无人机网络和普通的传感器网络相比拓扑结构高速变化，飞行环境也有很大 的不确定性，因此需要在第一帧进行邻居发现，而后在每一帧中需要预留出一段 探测的时间进行扫描和邻居表维护。在雷达的辅助下，通过通信握手可以发现邻 居无人机。邻居发现的详细过程读者可以参阅文献［80］o在邻居发现过程中，为 了避免冲突，无人机以一定的概率处于发送和接收状态，每架无人机都有独特的 ID标识，处于发送状态的无人机向邻居无人机发送hello包进行握手，hello包中 包含了自身ID、位置、速度、加速度及其所处网络等信息。处于接收状态的无人 机接收到hello包后回复hello包，更新邻居表，完成一次邻居发现。
当无人机网络结束探测过程后，各个无人机将广播自身的邻居表信息。广播 的邻居表信息中主要包含了无人机的ID、位置、速度、加速度及其所处网络信 息。经过一轮广播之后，无人机掌握两跳以内的无人机的信息，更新自己的邻居 表。每一帧都有一段邻居表维护的过程，以适应无人机高速变化的网络，不断更 新无人机网络拓扑结构。广播的邻居表数据包如图3-5所示。

图3-5邻居表数据包格式

3.4.2预约和数据传输阶段
在接收邻居广播之后，无人机网络更新邻居表信息和拓扑结构，可以得到无 人机网络节点的数目N,则在控制信道中预留N个时隙给每一个无人机节点进 行预约。无人机根据ID的大小依次在控制信道的时隙进行预约。两跳范围之外 的节点可以进行信道复用，因此本文考虑两跳节点的情况。
本文的信道资源分配以接收节点选择的方式进行分配，无人机节点如果有发 送需求，按照ID大小依次在控制信道中向目的节点发送RTS数据包，告知发送 节点自己可用的信道、时隙资源以及在信道和时隙资源下可用的波束。目的节点 接收到RTS数据包之后根据发送节点的可用资源和自己的可用资源选择相应的 信道、时隙资源和波束，回复CTS数据包。发送节点成功接收CTS数据包之后 将把预约信息广播出去，即广播BCTS数据包。控制信道上一次成功的预约过程 如图3-6所示，协商的过程和DCA协议中节点在控制信道的协商过程〔76］相似，
27

不过改进了竞争接入的方式，以预约的机制无冲突接入，并且在收发节点协商的 内容中增添了波束等信息。



节点预约成功后在预约的时隙中定向传输数据包，数据信道中的数据包将以 雷达通信一体化信号的形式进行传输。为了解决雷达的扫描方向只能朝向通信方 向导致的无人机飞行不安全问题，本文设置了合理的信道使用策略。当节点得知 两跳内邻居的数目N小于数据信道数目时，每个节点可以通过预约获得一条信 道的使用权，如图3-7(a)所示，预约完成后节点将在预约的信道中向待发送节点 定向发送一体化信号，此时处于RC模式，信息传输完毕之后切换回R模式进行 雷达探测。当节点两跳内邻居的数目大于信道的数目时候，接收节点选择一个可 传输的时隙，预约成功之后，将在预留的时隙切换到相应的数据接口中进行定向 通信。为了保证无人机在复杂环境中的飞行安全，将业务数据包切割成小数据包 且补充包头部等信息进行传输，目的是通过传输小数据包的形式使帧的长度保持 在较小的值，近似认为无人机保持着对周边环境的全方位探测，信道使用策略如 图3-7(b)所示。
数据信道N

(a)两跳邻居数目小于信道数目时候的信道使用策略
28


为了避免雷达回波对通信的干扰,在数据传输完毕后需要保留一段雷达回波 间隔，在本文中设置雷达回波间隔为雷达向可探测的最大距离处的障碍物发送波 束到接收到回波的时间。在经过一个雷达回波间隔和一个短帧间间隔(SIFS, Short Interframe Space)之后，接收节点开始反馈确认信号(Acknowledgement, ACK)o值 得注意的是，雷达回波发射的距离是通信信号的两倍，雷达回波信号比通信信号 弱，引入雷达回波间隔也避免了雷达信号湮没在接收节点的确认信号中。在本文 的协议中节点接收雷达回波信号时也不会与其它节点发送信号相叠加，解调雷达 信号时候受到的干扰仅有噪声干扰，因此也可以保障雷达的探测性能。其中，雷 达的分辨率性能与系统的带宽B成反比，并且有dm=CHB, C为光速。为 了保障雷达处于相对较高的分辨率，信道的带宽不能太小，例如系统至少需要保 障10m的雷达距离分辨率，信道的带宽需要15MHzo为了适应802.11n协议旳 中相关设置，我们将每条信道的带宽设置为20MHz,保障雷达的正常探测能力。
当所有的无人机完成时隙预约之后，可以知道完成所有数据包传输所需要的 最长时间，动态设置一帧的长度，传输完成后进入探测和邻居表维护阶段，继续 下一帧的传输过程。通过这种预约机制保障无人机在邻居节点变化迅速的情况下, 系统的性能也能够处于相对稳定的状态。
3.4.3节点接入过程
工作流程图如图3-8所示，假设无人机网络中节点A和节点B、节点C和
29

节点D之间有数据包发送需求，节点A将在自己的预约时隙到来之时在控制信 道向节点B发送RTS请求，告知节点B数据包的大小和自己可用的信道、时隙 和波束。节点B成功接收RTS数据包之后查看自己的两跳邻居的信道占用情况， 从无人机A可用的信道资源中选择自己的可用于传输的信道资源，向节点A回 复CTS数据包。当无人机A成功接收到CTS数据包之后广播BCTS包，将预约 信息广播出去。周边节点监听到BCTS数据包之后更新自己的两跳邻居占用情 况，至此完成一次预约的过程，随后无人机A在预约的信道资源上进行数据传 输。可以把一次RTS-CTS-BCTS的数据包传输看成一个预约时隙，节点C在节 点A结束预约时隙之后向节点D发起预约申请，预约成功之后也将在对应的预 约信道上进行数据传输。

图3-8节点接入过程示意图

3.5理论性能分析
本文采用基于预留机制的多信道MAC协议进行数据传输，预约的过程中不 会产生冲突，本节对吞吐量、时延等性能进行分析。为了便于分析，在性能分析 中没有使用波束复用，因此得到的是基于预留机制的MAC协议最坏情况下的性 能，并将此最坏情况下的性能与DCA协议进行比较。
3.5.1系统吞吐量
吞吐量的定义是单位时间内端对端传输的数据包的大小，表达式为©I：
(3-1)
其中E［鬥为单位时间内成功传输的有效数据包长度，兀为单位时间长度。
公共控制信道类的多信道MAC协议的一个缺点是当系统带宽比较大的时
30
候，系统的性能可能会受到控制信道饱和的制约，根据信道的饱和情况，分为控 制信道为瓶颈与数据信道为瓶颈两种情况〔76〕。在控制信道达到饱和的情况下，控 制信道中完成一次信道协商，对应在数据信道中进行一次数据传输，而在数据信 道达到饱和的情况下，控制信道还有能力完成数据预约，但数据信道中没有空闲 发更多的包。
DCA协议是典型的公共控制信道类的多信道MAC协议，在控制信道为瓶 颈时，在控制信道完成一次成功协商对应在数据信道中进行一次数据传输，因此 DCA协议在控制信道为瓶颈时的吞吐量为〔⑷：
S_E[P] PSE[P]
T PsTs+PNa + PcTc
其中E[P]为一个时隙中传输的数据包长度，仪是成功传输概率、厲是空闲概率、 ＜是碰撞概率。而7；为成功传输数据包需要占用信道的时间(包含了非有效载 荷的传输时间)、b为空闲时隙的长度、7；为碰撞时间。
在数据信道为瓶颈时，数据信道满负荷地用于数据传输，但是数据信道中除 了传输有效载荷信息，还需要传输额外的一些信息，例如物理层包头、MAC层 包头等，因此DCA协议在数据信道为瓶颈时的吞吐量为0〕：
S = NdBdr)=
Bd
其中4为数据信道的传输效率、Nd为数据信道的数目、Bd为物理信道速率、L(P) 为数据包包长、7；为额外的时间损耗。
由于DCA协议的吞吐量受到控制信道和数据信道双重制约，DCA协议的吞 吐量最终表示为固】：

而在基于预留机制的动态多信道MAC协议中，节点按照ID大小依次预约 而后在预约的信道和时隙中进行传输，不存在碰撞的情况。因此，控制信道为瓶 颈时系统的吞吐量为：
(D亠
Pwq
其中77为一次预约协商的时间、为预约接入的节点数目和协议中为两跳节
点预留的时隙数目的比值、为在一次数据传输的时间内平均传输的预约数据
31


N,g
N
rwo _hop
其中，N—表示协议中为两跳节点预留的时隙数目、为在数据信道中一次 数据包成功传输需要占用的时间（包含了非有效载荷的传输时间）、而［A］表示 取大于A的最小整数。
当系统处于饱和状态时，即每个节点的发送队列不为空时，Prlslcls=l,此时 系统的饱和吞吐量为：
(3-8)
与DCA协议相比，基于预留机制的多信道协议中的节点在预约时隙到来时 就能发送预约请求，当数据信道饱和时，控制信道中还有预约能力，但数据信道 中没有空闲发更多的包。因此，在数据信道为瓶颈时系统的吞吐量为：
(3-9)
其中N,畑””"表示为数据信道的数目。
因此系统在饱和状态下的吞吐量可以表示为:



3.5.2业务数据包时延
数据包的时延指数据包从产生到成功传输的时间。在基于预留机制的多信道 MAC协议中，节点i业务数据包的时延乙妙主要由几部分组成：节点从产生到 成功预约的时延乙”、预约数据包传输的时延7；心血°、节点预约成功后等待传输 的时延7；爲、数据包传输的时延町辺，即：

无人机节点携带的数据包的到达服从泊松分布，而无人机节点只有在自己 ID对应的预留时隙中申请传输的信道和时间。在基于预留机制的动态多信道 MAC协议中，预约时延为：
:岭. （3-⑵
32
其中人表示为动态帧长。 预约数据包传输时延为预约数据包长度和传输速率的比值：
T	— 'res
2 res data 一 厂》
- C


表3-1仿真参数设置
参数
参数值设置
参数
参数值设置
物理层包头LpHY
192bit;
ACK数据包大小
112bit;
MAC层包头L册c
224bit;
短帧间间隔SIFS
10us;
RTS数据包大小
192bit;
分布式协调帧间间隔DIFS
50us;
CTS数据包大小
192bit;
时隙长度SlotTime
20us;
BCTS数据包大小
192bit;
平均数据包大小EP
lOOOByte;
仿真结果如图3-9所示，可以看出随着接入节点数目的增大，系统的吞吐量 增大，当接入节点的数目达到预留的时隙的数目时，只能等待下一次接入，因此 系统的吞吐量不再增大。仿真结果还可以看出由于受到控制信道的瓶颈制约，在 节点接入数目还没有达到最大预留时隙的时候系统就达到饱和状态，因此在不同 预留时隙数目下，系统达到饱和时候的吞吐量相等。而固定接入节点数目，在两 跳节点数目较小的场景下，节点的接入数目与两跳节点的比值较大，也就是节点 的接入数目与预留时隙数目的比值较大，意味着更少的预留时隙被浪费，因此在 两跳节点数目较小的场景下，系统随着接入节点数目的增加更快达到饱和状态。
20

0 	■	'	'	'	'
0	10	20	30	40	50	60
节点的数目（个）

图3-9呑吐量与接入节点数目的关系
3.6.2信道数目对吞吐it的影响
下面固定每条信道的带宽，仿真不同的信道数目下，节点的数目对系统饱和
34

吞吐量的影响。仿真设置控制信道和每条数据信道的物理层速率都为10W/5, 其它的仿真参数如表3-1所示。仿真结果如图3-10所示，其中横坐标代表系统 中的节点数目，纵坐标代表系统饱和吞吐量。
45
40
35
30
25
岔
15
10
仿真结果可以看出随着信道数目的增大，信道的饱和吞吐量也增大，当数据 信道达到某一个值的时候系统饱和吞吐量达到最大，继续增大信道数目时饱和吞 吐量不再增大。图中信道数目等于6和信道数目等于8的时候系统的饱和吞吐量 相等。这是因为当信道数目小的时候，数据包的传输速度受到系统带宽的制约, 增大信道的数目系统的带宽变大，因此饱和吞吐量能够增大。而随着信道数目继 续增大，受到控制信道的限制，增大系统总带宽系统的饱和吞吐量不再增大。
35


图3-11不同信道数目下，节点数目与平均呑吐量关系
图3-11比较了不同信道数目对系统平均吞吐量的影响。仿真结果可以看出， 随着信道数目继续增大，额外的信道带宽分配使平均信道吞吐量降低，当信道数 目较大时，平均信道吞吐量下降更加明显。这是因为随着信道数目的增大，总吞 吐量受到控制信道的制约不会一直增大,此时平均分配到每个信道的业务量下降, 使得平均吞吐量下降。
3.6.3系统时延
图3-12对比了不同的信道数目下无人机业务数据包的时延与节点数目的关 系，横坐标代表节点的数目，纵坐标代表时延。仿真设置控制信道和数据信道的 物理层速率都为lOW/s,其它的仿真参数如表3-1所示。仿真结果可以看出， 随着节点数目的增大，无人机业务数据包时延增大。而随着信道数目增大，系统 带宽增大，无人机的时延减小，当信道数目增大到一定值的时候，受到控制信道 的制约，仍然需要等待在控制信道的预约接入，不会继续减小。
36


3.6.4紧急信息包时延
图3-13是紧急信息包的时延曲线，仿真设置安全信息包的大小为256Byteo 横坐标代表时延、纵坐标代表安全信息包的时延。安全信息包具有高优先级，不 需要等待业务数据包的传输，因此时延比较小。仿真结果表明系统的安全信息包 的时延保持在较小值，在安全信息包数目小于8的时候，时延小于1ms。


3.6.5比较基于预留机制的MAC协议与DCA协议
本文对饱和状态下的基于预留机制的MAC协议和DCA协议的性能进行比 较。仿真设置基于预留机制的MAC协议与DCA协议的控制信道和每条数据信 道的物理层速率都为10W/5,基于预留机制的MAC协议的其余参数设置参照 表3-1进行设置，而DCA协议的其余仿真参数依据文献［81］中DCA协议的参数 设置，如表3-2所示。
表3-2 DCA协议的仿真参数设置
参数含义
参数值设置
参数含义
参数值设置
物理层包头厶阳y
192bit;
最大重传次数阶次m
3；
MAC层包头厶加
224bit;
短帧间间隔SIFS
10us;
RTS数据包大小
192bit;
分布式协调帧间间隔DIFS
50us;
CTS数据包大小
192bit;
错误帧间间隔EIFS
364us
RES数据包大小
192bit;
时隙长度SlotTime
20us;
ACK数据包大小
112bit;
空闲时隙的长度b
20us;
竞争窗口 W
32;
数据包大小EP
lOOOByte;
图3-14仿真了在不同的信道数目条件下两种协议的饱和吞吐量，仿真结果 可以看出，基于预留机制的MAC协议在节点数目较大的时候饱和吞吐量高于 DCA协议的饱和吞吐量，并且基于预留机制的MAC协议更难达到控制信道饱 和状态。这是因为DCA协议在控制信道中以竞争的形式接入，当节点数目增大 到某个值的时候，节点间的竞争加大，碰撞概率增大，控制信道更快达到饱和状 态，而基于预留机制的MAC协议在节点数目较大时在控制信道中仍然不会发生 冲突，仍然可以保持在较大的吞吐量。
38


图3-15对比了 DCA协议和基于预留机制的MAC协议随着信道数目增大饱 和吞吐量的变化情况。仿真设置接入节点始终保持在有数据包发送的状态，所携 带的数据包的大小为固定长度，比较DCA协议和基于预留机制的MAC协议的 性能。仿真结果可以看出基于预留机制的MAC协议与DCA协议相比，饱和吞 吐量的上限更高。这是因为DCA协议在节点数目较大的时候在控制信道的冲突 较大,节点更难接入控制信道中，而基于预留机制的MAC协议在控制信道中预 约接入，和DCA协议相比在节点数目较大的情况下仍然可以在控制信道有秩序 接入，不容易出现拥塞，系统更难达到控制信道的瓶颈，因此可以达到较高的饱 和吞吐量上限。


下面比较基于预留机制的MAC协议和DCA协议的接入效率。统计两跳节 点从第一帧开始成功获得时隙的次数，即累计接入次数，并以此作为接入效率的 指标。为了简化仿真，仿真中设置每个节点平均一帧有一次数据包发送的需求, 仿真比较两跳节点数目N分别为5, 15, 25时两种机制的累计接入次数。

仿真结果如图3-16所示，可以看出当两跳节点数目较小时，基于预留机制 的MAC协议的累计接入次数略微小于DCA协议，但是在两跳节点数目较大的 情况下，基于预留机制的MAC协议的优势显现了出来。这是因为在两跳节点数 目较小时，节点竞争接入的冲突较小，此时DCA协议有较好的性能，而基于预 留机制的MAC协议的节点接入是按照ID顺序固定分配资源的，需要等待自己 的接入时隙的到达才能开始预约时隙，因此DCA协议的接入效率略微高一些。 而在两跳节点数目较大时，DCA协议的冲突加剧，导致接入效率不再增加，而 基于预留机制的MAC协议的节点仍然有序接入，接入效率可以保持在较高的水 平，因此基于预留机制的MAC协议的节点接入效率高于DCA协议。
3.7本章小结
本章研究了无人机网络的多址接入协议。首先对雷达通信一体化的复用形式 进行分析，确定了雷达通信波形一体化的模式。为了保障雷达正常的工作，设计 了合适的雷达与通信的工作模式，并且引入雷达保护间隔解决雷达回波对通信的 干扰问题。而后在雷达通信一体化的基础上提出一种基于预留机制的多信道多址 接入协议，改进了控制信道的节点接入的方式，并且根据网络中无人机预约的情
40 况动态改变帧的长度。之后将无人机传输的数据包分为业务数据表和紧急数据包, 对数据包格式进行设计。最后分析了多址接入协议的性能，仿真对比了所提出协 议与经典DCA协议在吞吐量和接入效率等性能上的提升，并且验证了所提出的 控制信道接入方法能够缓解大量节点接入导致控制信道的拥塞问题。
41





























































42


第四章无人机集群防碰撞技术
在上一章的研究中，无人机的雷达与通信的工作模式和组网规则被确定，本 章在此基础上研究无人机集群的防碰撞技术。无人机间通过信息交换可以更好地 对环境中的威胁进行探测，在一架无人机发现威胁到无人机网络的目标时，可以 紧急告知网络中其它无人机，使无人机网络免于攻击。因此，本文从无人机集群 的角度岀发去考虑无人机间的防碰撞，对无人机节点收发紧急信息和感知、预测 和防碰撞过程进行设计，利用感知和通信信息融合提高预测精度缩短最小反应距 离并且提出一种基于历史信息的路径重新规划算法。当预测到碰撞时，无人机将 先进行碰撞避免，再重新规划路径，避免因为路径重新规划时间过长碰撞避免失 败。
4.1系统模型
假设场景中有N架无人机在执行任务，无人机在飞行之前了解规划区域的 环境，将初步生成一条路径。但是无人机在飞行的途中可能会随机出现动态障碍 物，无人机还需要躲避环境中所有的障碍物和其它的无人机。雷达和通信的工作 模式依据第三章的设计由MAC协议进行调度，无人机可以通过一体化信号探测 和识别环境中的障碍物和未入网的无人机。其中，一体化信号中雷达感知的范围 小于通信的范围，即雷达在超过某一距离之后就收不到回波，但是还能与在相同 距离的无人机通信，场景图如图4-1所示。

■ 地面控制站	无人机	"/八一体化信号
连通路径	-“》传输路径	K转弯路径
图4・1场景图

43

4.2无人机集群防碰撞过程
无人机自主防碰撞系统分为感知、预测、防碰撞三大模块。感知模块将探测 的数据发送到碰撞检测模块，碰撞检测模块根据从传感器接收到的数据判断是否 会发生碰撞，而碰撞避免模块的功能是在碰撞检测模块检测到障碍物的情况下， 为无人机制定决策避免碰撞。一个有效的碰撞避免模块可以在无人机碰撞前完成 决策的制定，下文将详细介绍各个模块的工作流程。
4.2.1 _体化题
感知过程是无人机防碰撞的第一步，无人机首先需要发现环境中存在的危险, 才能进行碰撞避免。无人机感知的障碍物主要有已经在无人机网络中的无人机、 未入网的无人机和障碍物。在波形一体化的模式下，雷达和通信可以共用频谱资 源，在探测的同时发射感知数据，不需要等待雷达检测完成才开始发送通信信息， 可以对普通障碍物和未入网的无人机进行探测识别。
网络中的无人机在使用一体化信号通信的过程中保持定向探测并且A2G链 路也将周期性地广播自身和邻居节点的位置与飞行状态。而障碍物和未入网的无 人机的飞行状态是未知的，因此主要的难点是躲避环境中未入网的无人机和普通 障碍物，一体化探测的过程如图4-2所示。

(a)探测到障碍物场景示意图



(b)探测到无人机场景示意图 图4-2 一体化探测的过程

为了减少探测过程中一体化信号的收发碰撞，在探测阶段所有的无人机将以 一定的概率处于发送和接收的状态。无人机A首先处于RC模式向周边发送一 体化信号形式的Hello包，对周边环境进行扫描。如果目标是障碍物只会收到一
44
个雷达回波，如图4-2（a）所示。如果目标是无人机并且处于接收状态成功接收到 了一体化信号，将回复一体化信号，如图4-2（b）所示，无人机A收到无人机B的 一体化信号如果预测到没有碰撞将回复ACK确认信号，三次握手完成后即建立 了通信连接，完成一次邻居发现的过程。如果预测到两无人机之间有碰撞的危险, 无人机A将给无人机B发送紧急数据包，无人机A将在紧急数据包中标注碰撞 状态并且告知对方避障措施，两无人机之后将按照数据包中的决策信息执行防碰 撞措施。
4.2.2碰撞预测
估计滤波器如卡尔曼滤波器、扩展卡尔曼滤波器等常被用作碰撞预测的程序。 在本文中，通信范围大于雷达扫描范围，无人机间的碰撞预测在雷达探测范围以 内可以通过一体化探测获取运动状态信息和观测信息并且利用拓展卡尔曼滤波 器进行信息融合预测目标的轨迹从而预测碰撞，而在雷达探测范围之外只能通过 通信共享轨迹信息，预测是否存在冲突。
无人机通过一体化信号感知可以得知对方是普通障碍物还是无人机，并且可 以利用扩展卡尔曼滤波器融合从一体化信号得到的信息对目标的轨迹进行预测， 当预测到存在碰撞的危险，立即给对方发紧急数据包协商决策。扩展卡尔曼滤波 器融合信息的过程如图4-3所示。当无人机A收到目标发送的一体化信号回复， 识别到目标是无人机B,此时利用一体化探测获得的信息代入卡尔曼滤波器中， 利用通信预测值和雷达观测值对状态进行更新。在k时刻，无人机A通过雷达 探测无人机B的观测向量可以表示为：

其中Q伙）代表k时刻雷达探测到的无人机A和无人机B之间的距离，a伙）代 表k时刻无人机A到无人机B的偏航角，0伙）代表k时刻无人机A到无人机B 的俯仰角。
假设无人机A在k时刻的位置信息为/（血⑹必⑹忆。⑷）则无人机B的观 测向量转为直角坐标下的向量也可以表示为：

而无人机B在k时刻的状态向量可以表示为:
X ⑷=[x(k),y(k\ z(k), vx (k), vy(k), v: (k), ax(k\a”), a:(k)]'
45
其中x(約、丁伙)、Z住)代表无人机B在直角坐标系中的横坐标、纵坐标和竖坐 标，V,約、Vy⑹、Vz⑹代表速度在三维坐标轴上的分量，色伙)、ay(k),乞伙) 代表加速度在三维坐标轴上的分量。
无人机A通过B的一体化信号可以获取B的运动状态信息，初始化协方差 矩阵初始值、过程噪声协方差矩阵和雷达的观测噪声协方差矩阵是己知的，无人 机A可以利用式(2-5)至(2-10)对无人机B的轨迹进行预测，一旦预测到存在碰撞 的危险，无人机将给对方发送紧急数据包，协商决策。

图4・3无人机碰撞预测流程图
无人机集群合作防碰撞一方面可以融合通信和感知信息对障碍物轨迹预测,
46

另一方面可以共享目标观测数据，以达到更高的预测精度。而多无人机信息融合 的方法可以分为测量数据融合方法和状态向量融合方法［跖。针对目标非线性运 动的场景，本文采用测量数据融合的方式，无人机之间先融合雷达探测信息作为 观测信息再用扩展卡尔曼滤波器进行预测，预测过程如图4-4所示。
传感器1
传感器2
传感器2
传感器N
图4-4多传感器信息融合过程血】
4.2.3碰撞避免策略
在完成感知和预测之后，无人机在发现威胁时需要制定防碰撞的决策。无人 机间的防碰撞，在紧急状况下想要避免与对方的碰撞，可以协商多种碰撞避免策 略，例如一架无人机减速另一架无人机以最大角速度进行躲避，或者都以最大转 向角速度进行躲避。在一架无人机以最大角速度躲避，另一架无人机保持原路径 不变减速的策略下一架无人机可以不需要重新规划路径，但是在两无人机相向飞 行等情况下可能难以脱离险境;两架无人机都以最大角速度进行躲避的方式可以 避免这种问题，但是两架无人机都得偏离航线飞行，偏离航线之后还需要重新规 划路径。
不同的无人机外形和无人机的尺寸会影响碰撞模型»本文以无人机外接球作 为无人机的碰撞模型，外接球的半径即为碰撞模型的等效半径用R表示。假设两 无人机的碰撞模型半径为出和妁，轨迹预测误差为$，则两无人机不发生碰撞 需要保持的最小安全距离为：
“AB =RA + 心 + 了	（4-4）
由于无人机制动系统有一定的反应时间，还有无人机的运动约束等限制在采 取避障措施之后并不能马上脱离险境，因此需要计算无人机的最小反应距离，无 人机必须在达到最小反应距离前采取规避措施。假设无人机A和无人机B的起 始位置分别为屛,ZJ和巩血必忆2）,无人机A和无人机B的飞行速度分
47

别为X和匚，并且在短时间内飞行速度保持相对稳定。〃分别为两无人机 的飞行航向角，0为两无人机间的观测角，无人机间成功通信的时延为几，无人 机收到信息后的系统处理时间均为7；。
则两无人机的初始距离2为：
D。=	—兀）2 +（乙一乙）2 + （Z厂 Z2）2	（4_5）
两架无人机发生冲突时可以近似看成飞行在同一个平面上，以无人机A和 无人机B在XOY平面上发生冲突为例，经过系统反应时间7；后，无人机A和 无人机B之间的横向距离为：
^X = Docos0-Vi(Ts+T!)cosa-V2(Tsc+Ts )cos0
无人机A和无人机B的纵向距离为：
△Y = 2 sin&-% （： + 7；） sin a+耳（戛+0 sin 〃
则经过系统反应时间7；后，两无人机的距离为：
=VAX2+AK2
即:
姑相芯莎莎怎齐屈师蔽烦莎i茶莎而7 （4-9） 在式（4-刃中，必为两无人机的初始距离，其余值都是固定值。


如果两无人都以最大转向角速度紧急躲避，并且无人机最大旋转角速度为r, 如图4-5所示，则在执行躲避措施过程中，两无人机的实时横向距离为：
r y	v	1 [v	v
hx(t) = i\X		 sin yt cos a - - (1- cos 幷)sin a		 sin y/cos/?-—(1- cos yt) sin 0
(4-10)
两无人机的实时纵向距离为:
hy(t) = AY-
(4-11)
两无人机的实时距离为:
(4-12)
如果其中一架无人以最大转向角速度紧急躲避，另一架无人机保持方向不变
做减速运动,如图4-6所示。

假设在0<r</]时段，无人机B的加速度从0匀速增加到a,无人机B在此 时刻做变加速的减速运动，当无人机B的加速度增大到a之后不再增加，无人机 B做匀减速直线运动，直到右时刻速度减为0。则无人机B在/时刻的位移可以 表示为：
49

6右
化厶一上牢)+化一丄他)(/——丄	t}<t<t2	(4-13)
则在执行躲避措施过程中，两无人机的实时横向距离4(/)和纵向距离％(/) 分别为：




—sin//sina+—(1-cosyr) cos a +s(/)sin 0 y	Y	」
两无人机的实时距离为:
”a)=血2(0+的2(/)
针对不同的碰撞避免策略，令W) = 0,对式(4-16)进行求导求解无人机间的 最小距离。假设满足上式的时间表示为则对应无人机间最小距离为力亿)。当 两无人机的最小距离大于最小安全距离，可以成功避免无人机间的碰撞。当 h(tr)^RA+RB时，两无人机处于刚好碰撞避免的临界状态，联合两式：
WJ=0
"Or )=心 + 心 + 7
由式(4-5)至式(4-17)的计算过程可知，方程组中仅有两无人机的初始距离2 和两无人机距离最小的时刻一是未知的，由此可以求得两无人机都以转向的形式 进行躲避时并且能够躲避成功的无人机间的最小距离对应的时间—和初始反应距 离必，此时的初始反应距离即为最小反应距离。
无人机与动态障碍物的碰撞避免过程与无人机间的碰撞避免过程类似，只是 动态障碍物不做躲避措施，无人机可以以最大转向角速度躲避障碍物，假设动态 障碍物的碰撞模型半径为心加，障碍物的轨迹预测误差为/，则无人机A与动 态障碍物的最小安全距离为：
dAB=RA+Robs+C	件 18)
考虑特殊的情况，障碍物的运动为匀速直线运动，在执行躲避措施过程中， 无人机与障碍物的实时横向距离/(/)和纵向距离％⑴可以表示为：
hx(t) = AZ- —sin//cos cr—— cossin a -sohx(t)cos fl (4-19) U	Y	)'
r v	v	]
h (t) = AK - — sin yf sin a+—(1 - cos y/) cos a +s 伽(/)sin0	(4-20)
Lr	Y	」’
其中为障碍物的运动位移，按照式(4-16)和(4-17)可以计算无人机与障碍物间 最小反应距离。
4.2.4仿真实验
表4-1仿真参数设置
参数
参数值设置
参数
参数值设置
目标起始位置
(100 w, 100m,50/?7)
无人机最大旋转角
速度
150。/$
目标速度
(10m / s, 10m / s，3m / s)
航向方向长度'a
2m
目标加速度
(lm/ s2,-3m/ s2,\m/s2)
展翼长度*
3 Am
无人机飞行速度
26m/s
高度'
2 m
下面仿真扩展卡尔曼滤波器融合雷达和通信信息对轨迹进行预测的效果，仿 真参数如表4-1所示，假设场景中目标在做转弯运动，目标在三维直角坐标系下 起始位置为(100w,100w,50w),速度为(10刃/s,10刃/s,3»i/s),加速度为 (\mls\-3mlsWmls2)。仿真设置扩展卡尔曼滤波器的协方差矩阵初始值为
00,100,100,1,1,1,0.1,0丄0.1), 过 程噪声 协方差 矩阵为 diag(\,\X 0.01,0.01,0.01,0.0001,0.0001,0.0001),雷达的观测噪声协方差矩阵为 力ag(l00,0.0012,0.0012),其中diag(x)代表对角线上的元素为X的对角矩阵。假 设无人机相向飞行，参考大疆无人机的飞行参数［删，假设无人机飞行速度为26/w/s, 无人机的最大旋转角速度卩为150°/5 o假设无人机的航向方向长度厶、展翼长度 h和高度(分别为2m、3.1加和2加。仿真的采样周期为0.1S,采样100次。
对于目标的真实轨迹的估计，雷达误差和扩展卡尔曼滤波器的预测误差如图 4-7所示，仿真结果可以看出扩展卡尔曼滤波器能够较好估计目标的轨迹，实现 较小的预测误差。多无人机预测的效果如图4-8所示，仿真结果可以看出多无人 机信息融合下的卡尔曼滤波器预测误差总体比单无人机的预测误差要小，因此可 以得出在该场景下多无人机探测信息融合相比单无人机探测可以减少预测误差。
51


雷达通信信息融合能够较好估计目标的轨迹，实现更小的预测误差，接下来 仿真探究预测精度和无人机间紧急通信时间等因素对最小反应距离的影响。预测 误差对最小反应距离的影响如图4-9(a)所示，仿真中固定无人机间紧急通信时延 为0.01s,得到最小反应距离与预测误差的关系曲线，该曲线也代表着无人机的 安全区域分界线，可以看出无人机的轨迹预测误差越小，所需要保留的最小反应 距离也越短，对逃离危险区域越有利。因此雷达与通信信息融合可以缩短轨迹预 测误差进而缩短最小反应距离，对防碰撞有一定积极的意义。图4-9(b)改变了无 人机的紧急通信时延和预测误差，得到这两个因素对最小反应距离的影响，由仿 真图可以看出无人机的轨迹预测误差和无人机间的通信时延影响着无人机间的
52
最小反应距离，并且无人机的轨迹预测误差和无人机间的通信时延越小，需要留 出的最小反应距离越小。
55

4.3路径规划算法
在场景中，无人机被用于执行一些侦察和监视任务，该任务的主要目标之一 是生成无冲突路径。路径通常可以由一组无人机必须依次访问的点来描述，路径 规划问题就是在满足无人机飞行环境的各种环境约束和物理约束前提下，根据路 径点的不同生成无冲突路径。在三维复杂的动态障碍物环境中，防碰撞算法复杂 度、时延等将大大提升，因此在设计无人机的防碰撞方法的时候需要在满足无人
53

机的飞行限制下能够在未知的环境中灵活应变，当飞行环境发生变化，能够快速 重新规划新的路径。
有关路径规划的许多研究正在进行中，例如图论方法、人工势场法、遗传算 法、蚁群优化算法等，这些算法的优缺点在1.2.2.3小节中进行了介绍。RRT算 法因其在解决包含威胁区和动态约束的路径规划问题上的适应性而受到越来越 多学者的关注，该算法利用传感器采集的数据搜索规划空间，不需要对节点的扩 展进行预处理，并且可以保证在可行路径搜索概率意义上的完备性［判。学者们通 过改变规则或引入优化方法设计了许多RRT算法的变体，改善了 RRT算法的性 能⑻〕。其中RRT*算法是一种典型的RRT算法的变体，RRT*算法在RRT算法的 基础上增加邻域最近父节点计算和为邻域节点重新布线两个步骤，与RRT算法 相比可以获得更优的路径。RRT*算法也常作为一种基本方法，在某些情况下可 以与其他方法相结合以获得更好的性能。文献［86］基于RRT*生成无人机飞行路 径，并提出一种最终路径平滑和修正的方法，减少了无人机的飞行能耗。文献［87］ 提出了 3D-InformedRRT*算法，利用运动相机提供无人机实时飞行环境信息，使 无人机能在复杂的3D障碍物环境中躲避障碍物。文献［88］提出一种改进的RRT* 算法，在路径搜索过程中直接删剪不符合无人机飞行约束的树枝，减少冲突检查 的次数，并且引入D* Lite算法解决了 3D动态障碍物环境下的路径规划问题。
当前的路径规划算法对多无人机在三维动态障碍物环境协作路径规划的研 究较少，并且没有考虑到由于路径规划不及时可能造成的碰撞避免失败的问题。 文献［68］虽然提出了多无人机路径规划算法，但是不适用于三维环境中，并且仅 把其它无人机当作动态障碍物处理，没有充分利用通信协作帮助无人机集群防碰 撞。文献［87］和文献［88］虽然提出适用于3D障碍物环境中的路径规划算法，但是 没有考虑多无人机共存的场景。因此本文利用雷达和通信信息为RRT*算法提供 有效的信息，借助一体化信号识别动态障碍物和无人机，并且融合感知和通信信 息进行碰撞预测确定冲突区域，无人机在达到最小反应距离之前采取避障措施， 再进行路径重新规划，在此过程中利用历史无冲突路径探测信息，避免重复探测。
4.3.1基于RRT*算法的无人机集群路径重新规划算法

在场景中，无人机在执行任务前已经对规划空间的地图有一定的了解并且规 划好了一条从起点飞往目标点的路径，但是飞行的过程中可能会遇到动态障碍物 和其它无人机。假设起始点为ps(X.w”,儿如,)，目标点为4 (xgoa/,yg<>al,zgoal), 无人机的飞行轨迹可以由一连串时刻的点表示，第i个轨迹点可以表示为
,则从起点到终点的轨迹可以表示为：
54
Path = {(x,j, z J,心 start, start +1,…,goal}	(他］)
假设无人机的等效半径为&“，无人机在飞行过程中通过一体化探测可以识 别周边环境中的障碍物和无人机，并且根据探测的环境信息预测冲突。无人机在 感知过程建立动态障碍物球体模型，得到动态障碍物的等效半径为利用扩 展卡尔曼滤波器融合观测信息和障碍物的运动方程测的信息，估计动态障碍物在 t时刻的位置为：
= (xo4.t (0) (4-22)
无人机通过扩展卡尔曼滤波器预测的动态障碍物轨迹信息，并将动态障碍物 更新到在规划空间的地图中。通过判断无人机飞行轨迹点和轨迹点上的任意一点 P川Path与动态障碍物的最小距离是否大于最小安全距离，预测是否会与之发 生碰撞。如果预测t时刻与动态障碍物的距离小于最小安全距离，判断为将发生 碰撞，存在路径冲突时有：
(4-23)
其中D咏为最小安全距离。
将扩展卡尔曼滤波器预测的动态障碍物轨迹加入规划区域的地图中，假设预 测到冲突的路径区域为加呢碗” ={(x,^„z,),/ = v,v + l,---w}，修剪去除冲突的 路径部分。无人机在到达最小反应距离之前必须执行碰撞避免策略，碰撞避免后 的位置为0 (wj,则以O(xc,yc,zc)为起点，寻找到达终点的路径，对路径 进行重新规划。在路径重新规划过程中充分利用上一次路径规划的搜索结果和扩 展卡尔曼滤波器预测的障碍物轨迹信息辅助生成新路径。用集合START = { }和 End = { }分别装起点和终点相关的点集。路径重新搜索开始的时候往集合 中装入起始点0,即START = {{xc,yc,Zc)},往集合E加中装入删剪后仍 然和终点连通的路径点，EP End = ^xJ,yJ,zJ^j = w+\,w+2,---,goal^。根据 RRT* 算法生成新节点加入集合START中，循环这个过程。当存在P;START , P^EEND,使得隊”-爲』＜•认为完成一次路径重新规划，重新规划后的路 径能躲避普通障碍物和动态障碍物。路径重新规划的简单示意图如下：



(e)重置起点，借助历史信息路径重新规划
图4-10路径重新规划
56


无人机集群在动态障碍物环境中的碰撞避免和路径规划算法分为雷达探测 范围之外无人机路径共享和雷达探测范围之内的防碰撞，没有成功握手的无人机 间可以把对方当作是特殊的动态障碍物处理。假设无人机从各自的起点开始朝着 目标点飞行执行任务，无人机在飞行的过程中利用RRT*算法找到起点到终点的 路径。无人机的一体化探测根据目标的响应，可以识别对方是无人机还是普通障 碍物，如果对方是无人机，在一体化探测的过程中也完成了握手通信。
在雷达探测范围之外，无人机间可以通过通信信号共享飞行路径信息，在生 成路径的过程中将参考其它无人机的飞行路径信息，躲避障碍物的同时也需要保 障无人机间的路径没有冲突。如果发现已经规划好的路径和其它无人机存在路径 冲突，预测冲突的区域，修剪RRT树，在完成删减的路径上重新规划路径，保 留原来有效的探测信息。对于动态障碍物或者尚未成功通信的无人机，无人机不 能通过远距离通信共享轨迹信息，无人机在飞行过程中可以通过一体化信号进行 感知，利用扩展卡尔曼滤波器对动态障碍物进行预测，为了避免路径重新规划不 及时而造成的碰撞避免失败问题，首先对动态障碍物进行碰撞避免再进行路径重 新规划。
具体流程如下：

图4-11无人机集群信息共享的方式
57

4.3.2仿真实验 4.3.2.1实验环境
表4-2仿真实验环境
处理器
Intel(R) Core (TM) i5-5200U CPU @

操作系统
64 位 Windows 10 Pro
基带RAM
8GB
仿真软件
MATLAB R2020a
为了验证算法的有效性，本文在MATLAB R2020a ±进行仿真实验，实验使 用的笔记本的处理器是Intel(R) Core(TM) i5-5200U CPU @ 2.20GHZ,操作系统 是64位Windows 10 Pro,基带RAM为8GB,仿真实验环境如表4-2所示。

表4-3仿真参数设置
参数
参数值设置
参数
参数值设置
静态障碍物个数
5个
无人机起始点
张”(10,10,10)
静态障碍物半径范围
[20,30]
无人机目标点
^(290,250,75)
静态障碍物高度范围
[0,80]
无人机的飞行速
度
V = 26m/s
动态障碍物等效球半径

无人机最大旋转
角速度
y = 150°/s
仿真使用一体化探测信息辅助的RRT*算法为无人机在三维动态障碍物环境 生成一条安全的路径。仿真参数如表4-3所示，假设规划空间为 {(X,y,z)|0 < x <300,0 < ^ < 300,0 < z < 100},在规划空间中随机生成了五个静态 障碍物，静态障碍物的半径范围为［20,30］,静态障碍物的高度范围为［0,80］。 在规划空间中探测到动态障碍物等效球半径为12.5m,利用扩展卡尔曼滤波器预 测动态障碍物的运动轨迹。无人机的起始点和目标点坐标分布设为 张”(10,10,10),汕(290,250,75)。假设无人机的最大飞行速度为V = 26m/s,最 大旋转角速度/ = 150°/s［83b不考虑风速的影响，对路径规划方法进行了仿真, 仿真结果如图4-12(a)和4-12(b)所示。
58


(b)预测飞行路径与动态障碍物发生冲突
图4-12路径重新规划
仿真利用RRT*算法首次生成的从起点到终点的飞行路径，在图4-12(a)中扩
展卡尔曼滤波器预测到与动态障碍物不发生冲突，无人机保持原路径飞行。在4-
59
12(b)中，无人机预测到轨迹与动态障碍物发生冲突，首先进行紧急制动躲避动态 障碍物，然后以碰撞避免后的位置为新的起点通过路径重新规划算法生成新的路 径，仿真结果可以看出修正后的路径能够很好地躲避动态障碍物。
下面仿真经典的RRT*算法和改进后的路径重新规划算法路径重新规划的时 延，如图4・13所示，横坐标代表了第几次仿真，纵坐标代表时延。
200
180
160
140
120
100
80
60
40
20
0
0	5	10	15	25	30	40	45	50
仿真次数
图4-13时延曲线
仿真结果表明改进后的路径重新规划算法可以减小路径重新规划的时延，并 且和经典的RRT*算法时延方差更为稳定，这是因为改进后的路径重新规划算法 利用了原来的路径探索信息，去除了反复探测的过程，找到与终点连通的点就可 以结束算法，更容易在短时间内找到一条新的路径躲避动态障碍物。

下面仿真多无人机路径规划，仿真中设置了三架无人机，无人机A的初始 点坐标为(10,150,10),目标点坐标为(290,250,65) o无人机B的初始点坐标为 (10,200,35),目标点坐标为(265,290,85) 0无人机C的初始点坐标为(150,10,35) 目标点坐标为(265,200,60)。实验目标是规划多无人机从初始点到目标点的有效 路径。图4-14显示了该算法在三维环境下的路径规划。仿真结果表明无人机能 够成功躲避动态障碍物并且生成与其它无人机不冲突的飞行路径,保障了无人机 集群的飞行安全。
60


4.4本章小结
本章对无人机集群的防碰撞技术进行研究。首先在无人机网络中使用一体化 信号进行探测与目标识别，然后利用扩展卡尔曼滤波器融合雷达与通信信息实现 更低的轨迹预测误差，并且发挥多无人机协作探测优势融合多传感器的信息获取 更高的预测精度。而后仿真验证了预测误差的减少可以缩短最小反应距离，在一 定程度上增大了碰撞避免成功的机率。最后针对当前的无人机防碰撞算法没有考 虑到由于路径规划不及时可能造成的碰撞避免失败的问题，采取了先碰撞避免后 路径重新规划的方法脱离危险，并且提出了多无人机路径重新规划算法，充分利 用历史路径规划信息进行路径规划，仿真验证了算法的可行性，与普通的路径规 划算法相比所提出的算法缩短了路径规划的时间。
61





























































62


第五章总结与展望
5.1论文工作总结
本文对感知通信一体化下的无人机快速节点接入和防碰撞技术展开了研究， 以下是对本文主要工作的总结。
第一，本文研究了无人机MAC协议，选择了雷达通信波形一体化的复用形 式，并且在MAC协议中合理调度雷达和通信的工作，解决了雷达通信波形一体 化带来的缺点，包括雷达的扫描方向只能朝向通信方向导致的无人机飞行不安全 问题、雷达回波干扰问题。在此基础上，针对无人机网络高动态性、部署范围大、 节点数量大等特点本文提出一种基于预留机制的多信道MAC协议减少无人机在 控制信道的接入冲突，并且设计了相应的信道复用模式和相关数据包格式。进而， 为了保障无人机安全信息的及时传输，将数据包分为业务数据包和紧急数据包， 并且为紧急数据包赋予更高优先级，高优先级数据包可以争夺低优先级数据包的 传输时隙。最后分析了所提出协议的吞吐量和时延性能，仿真验证了协议在吞吐 量和节点接入效率等性能上的提升，并且有大量节点接入时更难达到控制信道瓶 颈。
第二，本文研究了三维动态障碍物环境下的无人机自主防碰撞算法，对无人 机网络的感知、预测和防碰撞过程进行研究。本文首先利用一体化信号进行探测， 而后基于扩展卡尔曼滤波器融合雷达与通信信息对目标的轨迹进行预测，通过仿 真得出雷达通信信息融合能够更好地预测轨迹，实现更高的预测精度，从而缩短 最小反应距离。之后针对当前的无人机防碰撞算法没有考虑到由于路径规划不及 时可能造成的碰撞避免失败的问题，采取了先碰撞避免后路径重新规划的方法脱 离危险，并提出了一种路径重新规划算法，将扩展卡尔曼滤波器预测的动态障碍 物轨迹加入规划区域的地图中，充分利用历史路径规划的信息进行路径重新规划, 并且无人机间共享路径规划的结果。最后仿真验证了路径重新规划算法的可行性 并且对比分析了路径重新规划的时延。
5.2未来研究工作展望
本文虽然对感知通信一体化下的无人机快速节点接入和防碰撞两项技术展 开了研究，但是研究的深度还不够，后续可以进一步在以下几方面进行研究。
第一，虽然本文基于感知通信一体化对无人机网络的多址接入技术展开了研
63
究，但是多址接入协议与5G等新技术的结合还不够充分。未来应当紧跟新技术 的发展，灵活运用新技术实现更加高效可靠的组网。而如何将新技术运用于无人 机组网中，仍然是后续研究工作中需要关注的问题。
第二，本文利用无人机间信息共享实现了在三维动态障碍物环境中的多无人 机防碰撞，但是对无人机协同规划路径时怎样实现全局最优的研究还不够充分, 后续可以对路径规划算法进行改进，设计无人机无冲突航线时考虑全局最优。
64
参考文献
[1] Zheng B, Li Y, Cheng W, et al. A multi-channel load awareness-based MAC
protocol for flying ad hoc networks [A].	// 2019 IEEE 19th International
Conference on Communication Technology (ICCT)[C], Xi'an, China: IEEE, 2019: 379-384.
[2] Arafat M Y, Moh S. Location-Aided Delay Tolerant Routing Protocol in UAV Networks for Post-Disaster OperationfJ]. IEEE Access, 201 & 6:59891-59906.
[3] Lottes P, Khanna R, Pfeifer J9 et al. UAV-based crop and weed classification for smart farming[A]. // 2017 IEEE International Conference on Robotics and Automation (ICRA)[C]? Singapore: IEEE, 2017: 3024-3031.
[4] Gatteschi V, Lamberti F, Paravati G, et al. New Frontiers of Delivery Services Using Drones: A Prototype System Exploiting a Quadcopter for Autonomous Drug Shipments[A]. // 2015 IEEE 39th Annual Computer Software and Applications Conference (COMPSAC)[C], Taiwan: IEEE, 2015: 920-927.
[5] Lin Z, Liu H H T, Wotton M. Kalman Filter-Based Large-Scale Wildfire Monitoring With a System of UAVs[J]. IEEE Transactions on Industrial Electronics, 2018, 66(1)11.
[6] 沈陶然，桑隽永.国外无人机装备发展现状及典型作战模式综述[J].新型工 业化,201 & 8(05): 94-97.
[7] Arafat M X Poudel S, Moh S. Medium Access Control Protocols for Flying Ad Hoc Networks: A Review[J]. IEEE Sensors Journal, 2020, 21(4):4097-4121.
[8] Bekmezci I, Sahingoz O K, Temel S. Flying ad-hoc networks (FANETs): a survey [J]. Ad Hoc Networks, 2013, 11(3):1254-1270.
[9] Hayat S, Yanmaz E, Muzaffar R. Survey on Unmanned Aerial Vehicle Networks for Civil Applications: A Communications Viewpoint [J], IEEE Communications Surveys & Tutorials, 2016, 18(4):1-1.
[10] Xie H, Boukerche A, Pazzi R W. A Novel Collision Probability based Adaptive
Contention Windows Adjustment for QoS Fairness on Ad Hoc Wireless Networks [A].	//	2012 IEEE Global Communications Conference
(GLOBECOM)[C], Anaheim, CA, USA: IEEE, 2012: 5488-5493.
[11] Zeng Y, Zhang R, Lim T J. Wireless Communications with Unmanned Aerial Vehicles: Opportunities and Challenges [J]. IEEE Communications Magazine,
65
2016, 54(5):36-42.
[12] FAA. UAS by the Numbers. [EB/OL]. https: //www.foa.gov/uas/resources/by the numbers/.
[13] CAAC. China Civil Aviation Working Conference held in 2020. [R/OL]. http://www.caac.gov.cii/ZTZL/RDZT/2020QGMHGZHY/2020TPXW/202001/t2 0200107 200213.html.
[14] Sturm C, Wiesbeck W. Waveform Design and Signal Processing Aspects for Fusion of Wireless Communications and Radar Sensing[J]. Proceedings of the IEEE, 2011, 99(7):1236-1259.
[15] Feng Z, Fang Z5 Wei Z, et al. Joint Radar and Communication: A Survey [J]. China Communications, 2020, 17(1): 1-27.
[16] Zheng Z, Sangaiah A K, Wang T. Adaptive Communication Protocols in Flying Ad Hoc Network[J]. IEEE Communications Magazine, 2018, 56(1):136-142.
[17] Zhang Z, Wang Y, Yao Y, et al. Implementation of UAVs communication network based on dynamic TDMA MAC protocol [A]. // 2010 3rd International Conference on Advanced Computer Theory and Engineering (ICACTE)[C], Chengdu, China: IEEE, 2010: V6-551-V6-554.
[18] Temel S? Bekmezci I. LODMAC: Location oriented directional MAC protocol for FANETs[J]. Computer Networks, 2015, 83:76-84.
[19] Liu X, Wei Z, Feng Z, et al. UD-MAC: Delay tolerant multiple access control protocol for unmanned aerial vehicle networks]A]. // 2017 IEEE 28th Annual International Symposium on Personal, Indoor, and Mobile Radio Communications (PIMRC)[C]? Montreal, QC? Canada: IEEE, 2017: 1-6.
[20] Ho T D, Park J, Shimamoto S. Novel multiple access scheme for wireless sensor network employing unmanned aerial vehicle]A]. // Digital Avionics Systems Conference (DASC)[C], Salt Lake City, UT, USA: IEEE, 2010: 5.C.5-1 - 5.C.5-8.
[21] Zhang M, Dong C, Huang Y. FS-MAC: An Adaptive MAC Protocol with Fault- tolerant Synchronous Switching for FANETs[J]. IEEE Access, 2019, 7: 8060280613.
[22] Song X O. Dynamic MAC Protocol Designed for UAV Collision Avoidance System [A]. // Conference on Complex, Intelligent, and Software Intensive Systems. SpringerfC], Matsue, Japan: Springer, 2018: 489-498.
[23] Say S, Inata H, Shimamoto S. A hybrid collision coordination-based multiple access scheme for super dense aerial sensor networks [A]. // Wireless
66
Communications and Networking Conference[C]? Doha, Qatar: IEEE, 2016: !・6・
[24] 周伟.分簇无线传感器网络动态时隙分配MAC协议[J].电子科技，2017, 30(9):126-129.
[25] 石春，邓正杰，何书前.无线自适应接入机制及OPNET仿真[M].北京：国防 工业出版社,2013:44.
[26] Booysen M J, Zeadally S. Van Rooyen G J. Performance comparison of media access control protocols for vehicular ad hoc networks[J]. let Networks, 2012,1(1): 10-19.
[27] So J, Vaidya N.H. Multi-channel MAC for ad hoc networks: handling multichannel hidden teiminals using a single transceiver [A]. // Proceedings of the MOBIHOC Conference[C], Roppongi, Japan: ACM? 2004: 222-233.
[28] Chen J, Sheu S T, Yang C A. A new multichannel access protocol for IEEE 802.11 ad hoc wireless LANs[A], // Proceedings of the PIMRC ConferencefC], Beijing, China: IEEE,2003: 2291-2296.
[29] Wu G, Dong C, Li A, et al. FM-MAC: A multichannel MAC protocol for FANETs with directional antenna[A]. // Global Communications Conference (GLOBECOM)[C]?Abu Dhabi, United Arab Emirates: IEEE, 2018: 1-7.
[30] Ruan Y, Zhang Y, Li Y, et aL An adaptive channel division MAC protocol for high dynamic UAV networks [J]. IEEE Sensors Journal, 2020, 20(16): 9528-9539.
[31] Tang Z Y, Garcia-Luna-Aceves J J. Hop reservation multiple access (HRMA) for multichannel packet radio networks[A]. // Proceedings 7th International Conference on Computer Communications and Networks[C], Lafayette, LA, USA: IEEE, 1998: 388-395.
[32] Feng P, Bai Y, Huang J, et al. CogMOR-MAC: A cognitive multi-channel opportunistic reservation MAC for multi-UAVs ad hoc networks[J]. Computer Communications, 2019, 136: 30-42.
[33] Wu S.L, Lin C Y, Tseng Y C, et al. A new multi-channel MAC protocol with on- demand channel assignment for multi-hop mobile ad hoc networks [A]. // Proceedings of the I-SPAN conference[C]? Dallas, TX, USA: IEEE, 2000: 232237.
[34] Jain N, Das S R, Nasipuri A. A multichannel csma mac protocol with receiverbased channel selection for multihop wireless networks[A]. // Proceedings of the 9th International Conference on Computer Communications and Networks (IC3N)[C], Scottsdale, AZ, USA: IEEE, 2001:432-439.
67
[35] Dang D N M, Le T H T, Kang H S, et al. Multi-channel MAC protocol with Directional Antennas in wireless ad hoc networks [A]. // 2015 International Conference on Information Networking (ICOIN)[CJ, Cambodia: IEEE, 2015: 8186.
[36] 李清玉.基于共用波形的探测通信一体化关键技术研究[D].北京：清华大学, 2019.
[37] Bliss D W. Multiple-Channel Multiple-User Receiver for Joint Radar and Communications Systems[AJ. // 2018 52nd Asilomar Conference on Signals, Systems, and Computers[C]5 Pacific Grove, CA, USA: IEEE, 201& 1031-1035.
[38] Gutierrez R M, Yu H, Chiriyath A R, et al. Joint Sensing and Communications Multiple-Access System Design and Experimental Characterization[A]. // 2019 IEEE Aerospace ConferencefC], Big Sky, MT, USA: IEEE, 2019: 1 •&
[39] 刘宁昕，彭来献，徐任晖.智能车队雷达通信一体化系统组网MAC协议[J]・ 军事通信技术,2016, 37(4): 50-54.
[40] 刘欣怡.高动态环境下无人机传感器网络组网协议关键技术研究[D].北京： 北京邮电大学,2019.
[41] Ma H, Wei Z, Zhang J, et al. Three-dimensional multiple access method for joint radar and communication enabled V2X network[A]. // 2019 IEEE International Conference on Signal, Information and Data Processing (ICSIDP)[C]5 Chongqing, China: IEEE, 2019: 1-5.
[42] CAAC・ Measures for air traffic management of civil unmanned aerial vehicle
system.	[R/OL],
http://www.caac.gov.cn/XXGK/XXGK/GFXWJ/201610/P020161008345668760 913.pdf
[43] CAAC. Administrative Measures for Air Traffic Management of Civilian UAV
Systems.	[R/OL].
http://www.caac.gov.cn/XXGK/XXGK/GFXWJ/201610/t20161008 40016.html.
[44] CAAC. Regulation on Dynamic Data Management of Light and Small Civil UAV
flight.	[R/OL].
http://www.caac.gov.cn/XXGK/XXGK/TZTG/2019H/P02019112035295714825 5.pdf.
[45] FA A.	Suggested rules for UAV remote identification. [EB/OL].
https://www.81uav.cn/uav-news/202001/01/68345.html
[46] Yu X，Zhang Y. Sense and avoid technologies with applications to unmanned
68
aircraft systems: Review and prospects [J]. Progress in Aerospace Sciences, 2015, 74:152-166.
[47] Williamson T, Spencer N A, Development and operation of the Traffic Williamson, T, Spencer, et al. Development and operation of the Traffic Alert and Collision Avoidance System (TCAS)[J], Proceedings of the IEEE，1989, 77: 1735-1744.
[48] Valovage E. Enhanced ADS-B Research [J]. Aerospace & Electronic Systems Magazine IEEE, 2006, 22(5): 35・3&
[49] Marques M, Brum A, Antunes S, et al. Sense and Avoid Implementation in a Small Unmanned Aerial VehiclefA]. // 2018 13th APCA International Conference on Automatic Control and Soft Computing (CONTROLO)[C], Ponta Delgada, Portugal: IEEE, 201& 395-400,
[50] Kemkemian S, Nouvel-Fiani M, Cornic P, et al. A MIMO radar for Sense and Avoid function: A fully static solution for UAV[A]. // 11-th International Radar Symposium[C], Vilnius, Lithuania: IEEE, 2010: 1-4.
[51] Kwag Y K? Choi M S, Jung C H, et al. Collision Avoidance Radar for UAV[A]. // 2006 CIE International Conference on RadarfC], Shanghai, China: IEEE, 2006: 14.
[52] DJI. Agriculture Solution Packge 2.0. [EB/OL]. https://www.dji.com/uk/agriculture-solutio n・v2/.
[53] Dogancay K. UAV Path Planning for Passive Emitter Localization[J]. IEEE Transactions on Aerospace Electronic Systems, 2012, 48(2): 1150-1166.
[54] Ille M? Namerikawa T. Collision avoidance between multi-UAV-systems considering formation control using MPC[A]. // 2017 IEEE International Conference on Advanced Intelligent Mechatronics[C], Munich, Germany: IEEE, 2017: 651-656.
[55] Luo C, Mcclean S I, Parr G, et al. UAV Position Estimation and Collision Avoidance Using the Extended Kalman Filter[J]. IEEE Transactions on Vehicular Technology, 2013, 62(6): 2749-2762.
[56] Wei R, Zhang Q, Xu Z, et al. UAVs' autonomous collision avoidance in urban space*[A]. // 2018 IEEE CSAA Guidance, Navigation and Control Conference (GNCC)[C], Xiamen, China: IEEE, 2018: 1-6.
[57] Chaumette S, Laplace R, Mazel C, et al. CARUS, an operational retasking application for a swarm of autonomous UAVs: First return on experience [A]. // Military Communications Conference. IEEE[C], Baltimore, MD? USA: IEEE,
69
2012: 2003-2010.
[58] Ha, Bui, Hong. Nonlinear Control for Autonomous Trajectory Tracking while Considering Collision Avoidance of UAVs Based on Geometric Relations [J], Energies, 2019, 12(8): 1551.
[59] Yang C, Liu L, Wu J. Path planning algorithm for small UAV based on dubins path[A], // 2016 IEEE/CSAA International Conference on Aircraft Utility Systems (AUS)[CJ, Beijing, China: IEEE? 2016 :1144-1148.
[60] Kikutis R, Stankunas J? Darius R, et al. Adaptation of Dubins Paths for UAV Ground Obstacle Avoidance When Using a Low Cost On-Board GNSS Sensor[J]. Sensors, 2017, 17(10):2223.
[61] Xu Z F? Wei R, Zhou K, et al. Laguerre Graph self-optimize path planning algorithm for UAVs in irregular obstacle environment [A]. // 2016 IEEE Chinese Guidance, Navigation and Control Conference (CGNCC)[C], Nanjing, China: IEEE? 2016: 1076-1079.
[62] Mok J, Lee Y, Ko S, et al. Gaussian・mixture based potential field approach for UAV collision avoidance [A]. // 2017 56th Annual Conference of the Society of Instrument and Control Engineers of Japan (SICE)[C]? Kanazawa, Japan: IEEE, 2017: 1316-1319.
[63] Lavalle S M, Kuffner J. Rapidly-Exploring Random Trees: Progress and Prospects [J], Algorithmic and computational robotics: New directions, 2000: 293308.
[64] Ferguson D, Stentz A. Anytime rrts[A]. // IEEE/RSJ International Conference on Intelligent Robots and Systems[C]3 Beijing, China: IEEE, 2006: 5369—5375.
[65] Wang X, Li X, Guan Y, et al. Bidirectional Potential Guided RRT* for Motion Planning[J], IEEE Access, 2019, 7: 95046-95057.
[66] Zhang D; Xu Y; Yao X. An Improved Path Planning Algorithm for Unmanned Aerial Vehicle Based on RRT-Connect[A]. // 2018 37th Chinese Control Conference (CCC)[C]? Wuhan, China: IEEE, 201 & 4854-4858.
[67] Li Y, Han W5 Zhang Y, et al. A method of UAV path planning based on an improved RRT algorithm]A]. 〃 2018 IEEE CSAA Guidance, Navigation and Control Conference (GNCC)[C], Xiamen, China: IEEE, 201 & 1-5.
[68] Zu W, Fan G, Gao Y, et al. Multi-UAVs Cooperative Path Planning Method based on Improved RRT Algorithm[A]. // 2018 IEEE International Conference on Mechatronics and Automation (ICMA)[C]? Changchun, China: IEEE, 2018: 1563
70
1567.
[69] Kurdi M M, Dadykin A K, Elzein I, et al. Proposed system of artificial Neural Network for positioning and navigation of UAV-UGV[A]. // Electric Electronics, Computer Science, Biomedical Engineerings Meeting[C], Istanbul, Turkey: IEEE, 2018:1-6.
[70] Liang X, Wang H? Li D, et al. Three-dimensional path planning for unmanned aerial vehicles based on fluid flow[A], // 2014 IEEE Aerospace Conference[C], Big Sky, MT, USA: IEEE, 2014: 1-13.
[71] Mufti S, Roberge V, Tarbouchi M. A GPU Accelerated Path Planner for Multiple Unmanned Aerial Vehicles[A]. // 2019 IEEE Canadian Conference of Electrical and Computer Engineering (CCECE)[C], Edmonton, AB, Canada: IEEE,2019: 14.
[72] Liu Y, Lv R, Guan X, et al. Path planning for unmanned aerial vehicle under geofencing and minimum safe separation constraints [A]. // 2016 12th World Congress on Intelligent Control and Automation (WCICA)[C]5 Guilin, China: IEEE, 2016: 28-31.
[73] Ma Z5 Gong H, Wang X. An UAV Path Planning Method in Complex Mountainous Area Based on a New Improved Ant Colony Algorithm[A]. // 2019 International Conference on Artificial Intelligence and Advanced Manufacturing (AIAM)[C], Dublin, Ireland: IEEE, 2019: 125-129.
[74] Zhang W, Zhang B. Improvement of UAV Track Trajectory Algorithm Based on Ant Colony Algorithm [A]. // 2019 International Conference on Intelligent Transportation[C], Changsha, China: IEEE, 2019: 28-31.
[75] 李建东，盛敏.通信网络基础[M]・北京：高等教育出版社,2004.
[76] 赵海涛，张少杰，李佳迅，等.无线自组织网络多信道动态接入技术[M].北 京：科学岀版社,2018.
[77] IEEE Std 802.11n. Part 11: Wireless LAN Medium Access Control (MAC) andPhysical Layer (PHY) specifications Amendment 5: Enhancements for HigherThroughput [S]. 2009.
[78] 刘少华.基于OFDM技术的雷达通信共享信号设计研究[D].四川：电子科 技大学,2014.
[79] Sun, Ruoyu, Matolak, et al. Unmanned Aircraft Systems Air-Ground Channel Characterization for Future Applications [J]. IEEE Vehicular Technology Magazine, 2015, 10(2): 79-85.
71
[80] Wei Z, Han C, Qiu C, et al. Radar Assisted Fast Neighbor Discovery for Wireless Ad Hoc Networks[J], IEEE Access, 2019, 7: 176514-176524.
[81] 周树桥，袁睿翕.DCA协议的饱和吞吐量分析与最优带宽分配[J]・清华大学 学报(自然科学版),2012, 052(001): 31-35.
[82] 金学波，苏婷立.多传感器信息融合估计理论及其在智能制造中的应用[M]. 武汉：华中科技大学出版社,201&
[83] DJI. Technical parameters of inspire2 [EB/OL]. https://www.dji.com/cn/inspire- 2/infb #specs.
[84] YIN G Y, ZHOU S L, WU Q P. Efficient path planning algorithm in three dimensions for UAV[J]. Journal of Northwestern Polytechnical University. Computer Communications, 2016: 30-42.
[85] Chen L? Mantegh I, He T, et al. Fuzzy Kinodynamic RRT: A Dynamic Path Planning and Obstacle Avoidance Method[A]. // 2020 International Conference on Unmanned Aircraft Systems (ICUAS)[C]? Athens, Greece: IEEE, 2020: 188-195.
[86] Mechali O, Xu L, Wei M, et al. A Rectified RRT* with Efficient Obstacles Avoidance Method for UAV in 3D Environment]A]. // 2019 IEEE 9th Annual International Conference on CYBER Technology in Automation, Control, and Intelligent Systems (CYBER)[C]? Suzhou, China: IEEE, 2019: 480-485・
[87] Meng J, Pawar V M, Kay S, et al. UAV Path Planning System Based on 3D Informed RRT* for Dynamic Obstacle Avoidance [A]. // 2018 IEEE International Conference on Robotics and Biomimetics (ROBIO)[C]? Kuala Lumpur, Malaysia: IEEE, 201& 1653-165&
[88] Liu Y, Zhang W, Shi J, et al. A path planning method based on improved RRT*[A]. // Proceedings of 2014 IEEE Chinese Guidance, Navigation and Control Conference[C]5 Yantai, China: IEEE, 2014: 564-567.
72

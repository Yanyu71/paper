第一章结论
1.1.	研究背景
随着Web2.0的不断发展，越来越多的用户乐于在购物网站(如亚马逊、天 猫、京东商城等)、点评类网站(如大众点评网、epinion.com等)以及社交类网 站(如fhcebook、人人网、新浪微博等)上以文字的形式，发布对相关产品、服 务、品牌或企业的评价。根据点评类网站大众点评网的相关数据显示，截至2013 年第四季度大众点评网的点评数量已超过3000万条。那么，这一巨大的评论量 究竟对企业意味着什么呢？众所周知，对于企业而言，用户每产生一次购买行为 都会为企业带来一定的利润，会给企业带来一定的直接价值，而用户每产生一次 评论行为是否同样会为企业带来一定的影响与价值呢？……
目前研究者对于评论行为产生的影响主要从两个方面来进行考虑，这其中既 包括评论对用户的决策产生影响，也包括其对企业销量产生的影响。其中，针对 在线评论对用户决策影响情况，研究者Chevalier和Mayzlin(2006)认为评论的情 感会对用户决策产生影响，且极端负面情感的评论比极端正面情感的评论对用户 购买影响要大口】；陈落蕾(2008)发现网络口碑对消费者的购买决策有重大影响 ⑵；翟丽孔(2011)在对网店在线评论研究中发现在线评论数量越多、评论强度 越大对消费者购买意愿影响越大⑶；JosephB. (2012)发现评论的效价、对他人 评论的赞同程度以及评论等级三因素会对用户决策产生影响。而针对在线评论对 企业销量产生的影响【电，Chen等(2004)在对Amazon.com的书籍销售分析时发 现用户评论量会影响产品销量以Dhar和Chang (2009)则发现用户创作内容会 对产品的销量产生影响⑹。综上所述，用户的在线评论会影响用户的决策以及企 业的销售量，这会给企业带来间接的价值。
综上所述，对于客户的购买行为和评论行为为企业带来的价值问题，其中一种 重要的解决方法就是计算客户终身价值(Customer Lifetime Wue, CLV)。对于 客户终身价值，我们可以简单地把它理解为一名客户未来在与企业保持交易关系 中所贡献的所有利润的现值。因此合理地建立起一套科学的客户终身价值评价、 计算方法，就能够使企业能够更高效、定量化地认识和管理客户资源。
对于客户终身价值建模的研究我们可以追溯到上世纪90年代初，并且该研 究随着关系营销的兴起而逐渐受到研究者的关注。目前在该领域已有很多研究成 果，不同的研究者对于客户终身价值的定义均有所不同，在这其中一些研究者将 客户终身价值分为直接价值和间接价值，其中直接价值体现在当前购买产生的价
值，间接价值体现在评论产生的价值。
但是由于Web2.0时代的独特性，消费者的评论行为和购买行为会相互影响 相互作用，用户产生购买行为后会发布评论；反过来，发布评论的消费者也容易 对网站产生更大的粘性，产生购买行为。但是通过文献的查找，我们并未发现有 研究者将这种相互作用引入客户终身价值计算中。
鉴于此，本文决定从消费者的评论行为入手，研究点综合考虑购买行为和评 论行为及其相互影响的客户终身价值建模。
1.2.	研究意义
本文的理论意义主要为：丰富建模方法和多种模型综合运用。
关于“丰富建模方法”。正如研究背景中所说，现阶段研究者在客户终身价 值研究方面并未考虑评论行为和购买行为的这种相互影响关系，只是独立的看待 购买所产生的价值和评论所产生的价值。事实上，这种相互影响在当今的互联网 时代已经越来越密不可分，企业也越来越不能忽视这一作用的存在。但由于目前 可供参考借鉴的相关建模方法较少，如果本文能从该研究点出发，成功完成模型 的建立，并在实证环节取得良好的拟合和预测效果，那么就能够证明本文综合考 虑评论行为和购买行为的建模方法存在一定的可行性，也能够为日后的研究者提 供一个可扩展的方向，这是本文的一大重要贡献。
关于“多种模型综合运用本文分别从群体层面和个体层面分别进行客户 终身价值的研究。本文在建模方面不仅仅依靠传统的客户终身价值计算方法，还 进一步扩展了 RFM模型，并采用K-Means聚类分析方法进行客户细分。同时利 用计量经济学中的Logit回归分析模型对购买行为和评论行为的相互影响进行分 析并分别建立购买流失和评论流失的预测模型，同时依据计量模型中找到的关键 变量作为协变量改进Pareto/NBD模型，提高购买次数和评论次数的预测准确性。 最终运用Gamma-Gamma模型进行购买金额的预测。综上所述，在本文中多种 模型的综合运用成为本文的另一大贡献。
本文的实践意义主要包括两点：更准确的价值度量和更多样的决策支持。
关于“更准确的价值度量由于本文将评论行为引入客户终身价值模型中， 并且综合考虑了购买行为和评论行为的相互影响关系。本文由于先采用计量经济 学的方法找到可改进的关键变量，使得在后续进行Pareto/NBD模型协变量改进 上更有针对性，从而保证了模型的准确性与适应性，并且最后还通过分析结果证 明了模型的有用性。
关于“更多样的决策支持”。以往，传统的客户终身价值研究主要为企业回
答三个问题：（1）客户未来会购买多少？（2）客户什么时候会流失？（3）客户 的价值将如何变化？为了研究评论行为的影响，我们向模型中添加了代表评论行 为的协变量以此来发现评论行为和购买行为之间的相互作用对于客户终身价值 的影响。此外，本文还采用K-means聚类分析的方法识别出了区别于以往的口 碑价值用户，从而从定性角度和定量角度均研究了评论行为对客户终身价值的影 响，并最终帮助大众点评网更加科学合理的进行用户管理。
1.3.	研究内容
本文的研究内容主要分为以下五个部分：群体层面下的基于RFM模型的 客户终身价值研究、个体层面下的客户购买次数建模、客户消费金额建模、客户 评论次数建模以及改进的客户终身价值建模。
本文对于客户终身价值的研究主要分为两个方面，即群体层面的客户终身价 值和个体层面的客户终身价值。由于传统的RFM模型主要分析用户群的客户终 身价值，因此本文首先在传统RFM模型的基础上，提出基于评论行为的RFMP 模型，并且将RFM模型和RFMP模型进行融合，计算出群体层面的客户终身价 值，并发现为考虑评论行为的客户终身价值与考虑评论行为的客户终身价值之间 的差异。随后，为了进一步发现评论行为的影响，本文又利用K-Means聚类分 析方法进行客户细分，识别真正高价值用户和口碑用户。
在个体层面的客户终身价值计算中，本文主要分为三个研究内容：客户购买 次数预测、评论次数预测和购买金额预测。针对客户购买次数预测，本文首先利 用Logit计量经济学模型进行因素分析，将影响购买流失行为的关键变量作为协 变量引入Pareto/NBD模型中，并进行了实证研究。针对客户评论次数预测，本 文同样利用Logit计量经济学模型进行因素分析，并将影响评论流失行为的关键 变量作为协变量引入Pareto/NBD模型中，也同样进行了实证研究。最后针对购 买金额预测，本文沿用了经典的Gamma-Gamma模型，同样在完成客户消费金 额建模之后，本文对该子模型进行了实证。
在进行客户终身价值计算时，本文首先将购买次数预测模型和购买金额预测 模型代入公式中计算出购买价值，而评论价值由于本文并未对其评论贡献值进行 预测，因此仅提出了研究思路。
1.4.	研究方法
本文是一篇以数学建模为主的论文，在研究方法的选择上，本文主要采用了 概率模型（Probability mo加D法、RFM模型、计量经济学模型这三种方法进行
研究。在之后的文献综述部分，本文会对当前较为流行的六种客户终身价值建模 方法进行综述，而概率模型法、RFM模型方法和计量经济学模型方法正是其中 的三种。
对于概率模型法的理解，最直观的就是在模型的各项假设中对各类概率分布 进行描述与刻画。下面简单阐述概率模型法的建模原理：概率模型认为现实所观 测到的行为都被看作是潜在随机过程的表征，而这些随机过程是由潜在行为特质 所控制，并且在个体之间存在差异［7］。如图1-1所示，客户的交易记录（包括过 去已经发生的和未来将要发生的）是和客户潜在行为特质（用©表示）相关的函 数，即，asf = /（6）,且力加% = /（6）。但是由于8没有办法直接观测获得，再次 我们只能假设8在不同客户之间的异质性服怂某种概率伯布，然后通过历史数据 拟合，再依据贝叶斯理论推断出6的估计值°,最后将。代入原函数即可实现未 来交易记录的预测。
历史数据
未来行为
I i
1---潜在特质但）
概率模型方法
历史数据）―>	未来行为f（0）
图1-1概率模型法原理
1.5.	研究成果
本文的研究成果主要包括两项：模型成果和管理建议成果。
在模型成果中，本研究在建立各预测模型的过程中，创造性的改进了 RFM 模型、构建了预测购买流失行为和评论流失行为的Logit回归分析模型、将协变 量引入并改进了传统的Pareto/NBD模型。在这当中，由于其中一个模型的结论 发生变化，都会使得接下来的其他模型推导过程产生变化，也会使得整个客户终 生价值模型的推导过程会相应的发生变化。事实上，各个模型的改进都是环环相 扣的，由上一个模型的结论才能够继续对下一个模型进行推导和改进。而本文成 功滴完成了各个模型的分析与推导，并且取得了很好的实证效果，不得不说这是 一项非常有价值的研究成果。
而在管理建议成果中，本文定量化地发现了口碑价值消费者的存在，并且为
企业实际的客户管理提供了切实的管理建议。
1.6.	论文结构
根据研究内容所述，本文主体章节安排如下：
第二章为文献综述，介绍与客户终生价值相关的定义、计算公式及建模方法； Gamma-Gamma模型；客户细分方法和影响客户流失行为影响因素；第三章为从 群体层面进行客户终生价值计算，通过传统的RFM模型和创新提出的RFMP模 型进行基于评论行为的客户终生价值计算，这也是本文的一个创新点之一；第四 章、第五章和第六章则是从个体层面进行客户终生价值计算，其中第四章进行 Logit计量经济学建模，分析影响客户购买行为的因素并对客户购买次数进行预 测；第五章同样进行Logit计量经济学建模，分析影响客户评论行为的因素并对 客户评论次数进行预测；第六章沿用了经典的Gamma-Gamma模型，进行客户 购买金额的预测，并且计算出个体层面的客户终生价值；第七章为总结和讨论， 指出本文的主要贡献、不足以及未来的研究方向。
整篇论文以建模为主线，逻辑较为清晰，论文结构图如图1-2所示，论文撰 写内容框架如图1-3所示：
研究背景问题的提出
国内外文献综述
基于RFM模型的客户终 身价值研究
基于评论行为的客户购 买次数预测
基于购买行为的客户评 论次数预测
I
客户消费金额及终身价 值改进
结论及展望
图1-2论文章节结构示意图
5
图1-3论文内容撰写示意图
1.7.	研究工具
在本文撰写的过程中，主要使用了 EXCEL2010、STATA 12.0和Matlab：
(1)	EXCEL是目前世界上最基本的数据处理软件，本文主要运用EXCEL 对原始数据进行初步的加工、数据清洗与处理以及在实证中的权重确定、 Gamma-Gamma模型计算等分析；
(2)	STATA是世界上流行的统计分析软件，它在计量经济学回归分析方面 有很强的处理能力，本文主要运用STATA进行影响因素和预测模型的分析与验 证；
(3)	Matlab是用于进行仿真分析的软件，它不仅仅具有非常强的数学计算 能力，同时也能够进行文字处理、可成像的建模仿真以及实时控制等功能［8］。 本文主要运用Matlab对模型中的参数进行估计，并进行客户活跃度、交易次数、 评论次数的计算。
6
第二章文献综述
2.1.	文献综述框架
在本章中，主要对客户终身价值建模过程中所涉及到的主要内容，包括相关 的概念、理论及方法等，进行文献综述。图2-1所示为本文将要综述的各部分内 容及相互关系。
常用分析方法
，一
建模方法
Gamma-
Gamma模型
图2-1文献综述框架图
从图2-1可以看出，本章的文献综述主要分为两大部分，一部分是客户终身 价值的相关研究，包括其对客户终身价值的定义和通用计算公式；另一部分包括 具体的建模方法，分别综述了常用的六种客户终身价值建模方法和消费金额所涉 及到的Gamma-Gamma模型。
2.2.	客户终身价值
2.2.1.	CLV 定义
现阶段，不同的研究者对客户终身价值的定义会略有差别。从宽泛的角度讲， 客户终身价值(CLV)分为两个维度，即以客户为价值感受主体和以企业为价值 感受主体。其中，以客户为价值感受主体是指客户是价值感受的主体，即认为顾 客价值是顾客自己所认识到的价值，称之为顾客的认知价值。而以企业为价值感 受主体，也即顾客对企业的价值，可以理解为每个购买者在未来可能为企业带来 的收益总和，称为顾客终身价值(customer lifetime value)o
针对以企业为价值感受主体这一维度，有很多研究者针对客户终身价值进行 了更进一步的定义，即“一名客户未来在与企业保持交易关系中所贡献的所有利
润的现值”⑶。但是该定义在不同的文献中会略有差异。例如，Dwyer （1997） 将其定义为一名客户为企业创造的预期收益（例如，毛利润）减去企业为此付出 的成本（例如，服务和沟通的直接成本）的现值口"Kumar, Ramani和Bohling （2004）将其定义为一名客户在其整个生命周期中为企业贡献的累计现金流的总 和，其中，贴现率采用加权的平均资本成本“ 1 Berger和Nasr （1998）引用了 Kotler和Armstrong （1996）关于盈利客户的定义口力：“一个人、一个家庭或者一 家企业为企业创造的营业收入超过企业为此付出的成本（包括获取成本、销售成 本和服务成本等）一定金额数量”，他们指出这部分超出的金额数量就是客户终 身价值。
通过分析各个定义之间的差异，我们可以看到Dwyer （1997）认为一个客户 的预期收益可以广义的理解为，既包括了直接收益（客户贡献的直接收入），也 包括了间接收益（如口碑效应等）。并且该定义只考虑预期的收益与成本，而忽 略了过去的因素（如客户获取成本、已实现的客户收入等）；Kumar, Ramani和 Bohling（2004）则重点关注客户现金流、忽略了成本因素；Berger和Nasr （1998） 则考虑了成本因素（包括客户的获取成本）。
基于此，本文的客户终身价值定义是在Dwyer对CLV界定的基础上发展定 义的，即认为客户终身价值可以广义的理解为一个客户未来在与企业保持交易关 系中所贡献的直接收益和间接收益。关于这个定义，有三点特征需要说明。第一， 只考虑收益因素，不考虑成本因素。这主要是由于本文在实证方面未获取到与成 本相关的数据，但是由于样本中涉及到的消费者都是互联网用户，企业向每名消 费者所付出的成本差异不会太大，因此这种仅考虑收益因素而计算得到的客户终 身价值仍有很好的参考性。第二，只考虑客户未来的预期收益，而不考虑已经实 现的客户收入。这主要是由于一方面计算已实现的客户收入无需建立预测模型， 且实施过程中无难度；另一方面消费者的未来预期收益会存在较大的不确定性， 这使得企业会对此方面更加关注。第三，既考虑直接收益（即购买产生的价值）， 同时考虑间接收益（即评论产生的价值）。
2.2.2.	CLV计算公式
通用的客户终身价值计算公式可以表示为【闾：
CLV = t^^-AC.	公式（孙
/=0 （1 十 I）
其中，P,表示在r时刻一名客户所付的金额，C,表示在r时刻服务该名客户 的直接成本，i表示企业的资本成本或者折现率，乙表示在，时刻该名客户的重复
购买概率或者保持“存活”的概率，ZC表示获取成本，T表示计算客户终生价 值的时间范围。
在这个通用的计算公式基础之上，学者们又不断对其进行了变化和改进。 Jung和Euih。Suh(2004)提出基于客户当前价值、潜在价值和客户忠诚的三维模 型，该模型具体如下所示口叱
CLY=%(t,Xl + d)Nr + %1公式(2-2)
E(i) = l/Rhg(i)	公式(2-3)
客户忠诚=1- Pc1nm	公式(2-4)
式中，力为选择分析的服务客户i的时间周期；Nj为服务客户i总时间周期 数；d为贴现率；E①为服务客户i时间周期数的期望值；/9)为在时间周期I内 客户i的历史利润贡献口句；四⑷为在时间周期匕内客户i未来利润贡献；B(3为 在时间周期亳内客户i潜在价值；Pchurn为客户i的流失率。
在这之后，赵骅、夏秀兰(2005)在此基础上进行了改进，认为客户终身价 值与购买价值和口碑效应价值有关，具体改进公式如下【⑹：
国二联⑺“严+k：炉喘驾	公式(⑸
L=o	1产毛+1 U十
或写成CLV产Ri+kiRz	公式(2-6)
其中ki为口碑效应参数，R1为客户i的过去利润贡献，R2为未来利润贡献 [16] O
而范琳琳(2010)结合Pareto/NBD和BG/NBD模型将客户终身价值定义为 [17J62.
(3山=边际利润x次交易金额x预期交易次数的贴现值(DET)
其中，预期交易次数的贴现值(DET)可以由下式得到〔⑺62：
E[Y(t)|X = x,tx,T]-E[Y(t-1)|X = x,tx,T]	、工.八
DET---------砌--------- 公式(2个
其中分子表示t时间内客户的交易次数，d为贴现率口小2。
结合本文采用的客户终身价值的定义，我们采用的客户终身价值计算公式为: (：卬=直接收益+间接收益=边际利润x次交易金额x预期交易次数的贴 现值(DET) +边际利润x次评论贡献x预期评论次数的贴现值(DET)公式(2-8)
本文将在第六章对其进行具体阐述。
2.2.3.	CLV建财法
客户终身价值的计算从本质上说是计算一种现值，计算公式相对来说较容易 理解与实施。而其真正的难点主要是在于如何获得所需的数据。由于所需的数据
9
涉及到消费者未来的购买次数、购买金额等详细信息，而这些交易行为的数据还 未发生，因此只能通过建模来进行预测。
为解决该问题，不同的研究者采用了不同的方法进行研究，这其中有一些建 模方法由于其良好的预测效果和可实施性，被本研究领域的其他研究者广泛地认 可和接受。这其中，常见建模方法主要有六种：RFM模型、概率模型、计量经 济学模型、持久性模型、计算机科学模型、扩散/增长模型等。下面本文将分别 对每种方法进行简要阐述。
2.2.3.1.	RFM 模型
RFM模型是在直销领域中非常经典的一个模型，它的主要作用是用于识别 不同的客户价值，以此来帮助企业准确的确定所要营销的目标客户。该模型主要 划分为三个维度，即最近一次购买时间（Recency）、购买频率（Frequency）和 购买金额（Monetary）,这也正是RFM模型名字的由来［18］。Hughes （2005）指 出，在这三个维度之中，对客户响应率最敏感的为“最近一次购买时间（R）”， 其次为“购买频率（F）”，最后才是“购买金额（M）”，因此在评判客户价值时， 会对这三个维度设定不同权值口叱事实上，本文的第三章就主要利用了 RFM, 完成了群体层面上的客户终身价值建模。
2.2.3.2.	概率模型
在第一章的“研究方法”中，本文已经对概率模型法基本原理进行了简要说 明，在此处本文将更深入地解释该方法是如何应用于各类概率分布以完成模型假 设的。
目前，对于客户行为的预测，较为经典的概率模型包括：Pareto/NBD模型、 BG/NBD模型、BG/BB模型等，这些模型通常从五个方面对客户的行为进行假 设，具体包括：个体客户的购买行为服从某分布；个体客户的流失行为服从某分 布；不同客户间购买率/概率的异质性服从某分布；不同客户间流失率/概率的异 质性服从某分布;个体客户的购买率/概率和流失率/概率之间服从某分布。其中， 假设一和假设二是关于个体行为，假设三和假设四是关于群体异质性，假设五是 关于两种行为间的相关性⑶,
对于消费金额的预测，较为经典的概率模型包括：Noimal-Nonnal模型、 Gamma-Gamma模型等，这些模型主要从两方面对消费金额进行假设，即个体客 户每次消费金额服从某分布；不同客户间的消费金额均值服从某分布。假设思路 与客户行为预测模型基本一致，即先对个体用户特征进行假设，再对群体用户特 征进行假设。
10
2.2.3.3.计量经济学模型
许多计量经济学模型内在原理与概率模型的内在原理是一样的。这类研究往 往分别会对客户获取、保留和扩展进行建模，然后再通过合并计算得到客户终身 价值。
客户获取是指新客户的初次购买。对于该领域的研究重点关注的是新客户购 买决策的影响因素。客户获取的基本模型通常是一个Logit模型或Probit模型12叫
客户保留是指一名客户“存活”或者重复购买的概率。模型主要分为两类： 第一类模型认为客户属于“永久性流失"(lost-fbr-good)型，通常使用风险模型 (hazard model)来预测客户流失概率。而对风险模型又可进一步可细分为加速 失效时间模型(accelerated failure time, AFT)囱和比例风险模型(proportional hazard model, PHM产1。第二类模型认为客户属于“间歇性购买”(always a share) 型，通常使用迁移模型或者马尔科夫模型［2纥
客户扩展是指一名客户在各时刻为企业创造的利润。该利润既取决于客户过 去的购买行为，也取决于企业促进客户的交叉销售以及向上销售。客户扩展模型 也分为两类：直接对利润进行建模12刀和间接对交叉购买进行建模12叫
2.2.3.4.持久性模型
与计量经济学模型计算客户终身价值相似，持久性模型(persistencemodel) 同样侧重于从客户行为不同阶段(如客户获取、客户保留和客户扩展等)出发进 行建模。当拥有足够长的时间序列数据时，这些不同阶段可以被看作是一个动力 系统中的组成部分。在多变量时间序列分析中，如向量自回归(VAR)模型、单 位根检验理论和协整检验理论等，可用于研究一个变量(如客户获取竞争、客户 服务提升)对系统中其它变量的影响，这种方法被称为持久性模型。在客户终身 价值建模中，持久性模型用于研究广告、产品质量及折扣对客户资产的影响［3°］, 以及不同客户获取途径对客户终身价值高低的影响卬〕。
持久性模型的优势在于它能较好地对客户终身价值的长期表现进行度量。值 得一提的是，它可以对长期客户资产发展中各影响机制的相对重要性进行量化, 包括客户选择、获取方法、口碑传播等。但是目前该方法在客户终身价值建模中 使用频率较低，部分原因是因为它对数据的要求比较高。
2.2.3.5.	计算机科学模型
对于营销学领域中的研究，研究者往往会建立结构化的参数模型，例如上文 提到的Logit模型和风险模型等。这些模型有相应的理论支撑且较容易解释。但
11
是相反的，计算机科学领域中的研究则更侧重于强调预测效果。常用方法包括: 投影寻踪模型、神经网络模型、决策树模型和基于样条的模型（例如，广义相加 模型（GAM）、多元自适应回归样条（MARS）、分类和回归树（CART）和支持 向量机（SVM ））等即1。
在客户终身价值建模领域，计算机科学模型更适合用于研究客户流失行为。 使用该种模型的情况通常是由于研究对象具有非常多的变量，但是数据的稀疏性 会增大估计偏差，导致传统参数和非参数模型不能很好的胜任。因此为了克服出 现的这些困难，Hastie和Tibshirani （1990）提出了广义相加模型，这其中因变 量的均值是通过一个非线性、非参数的联结函数依赖于预测因子的。而另外的一 种方法则是多元自适应回归样条（MARS）,它是一个非参数回归过程，是利用 数据估计出具有断点的多个分段线性回归［3汽
但是该种方法在客户终身价值建模中所受到的关注程度目前较低，这主要因 为对于营销学领域的研究特别强调参数设置和可解释性。但随着企业内部信息技 术的不断提高，在能够获得越来越多的消费者数据后，该种方法是值得进一步探 索的。
2.2.3.6.	扩散/地长模型
客户终身价值是对个体客户长期的盈利能力的反映，它可以帮助企业进行客 户的选择、细分以及定位。但这仅仅是聚焦于个体层面，如果将企业所有的客户 终身价值进行累加，就可从群体层面来观测当前企业所拥有的客户资源状态。考 虑到这一点，一些研究者提出了 "客户资产"（customer equity, CE）这一概念， 即企业现有和未来客户的终身价值总和13刃。
要计算客户资产，首先就是要预测出企业未来客户数量，而扩散/增长模型 就是其实现的途径之一。使用该方法时，研究者首先要建立模型以完成客户数量 预测，并且允许在模型中加入营销组合协变量，以达到提升预测效果的目的，然 后再建立模型，以完成对客户资产的预测口旬。
2.3.	Gamma-Gamma 模型
在具体介绍Gamma-Gamma模型之前，本文首先对Gamma-Gamma模型的 基础 Normal-Normal 模型进行一个概述。Normal-Normal 模型是由 Schmittlein 和Peterson于1994年提出的，是对Pareto/NBD模型的一个扩展，即通过增加客 户消费金额模型，最终完成了客户终身价值模型的构建。Normal-Normal模型的 假设分为两个：第一，个体客户的消费金额服从正态分布；第二，不同客户消费 金额均值服从正态分布冲7。
12
虽然该模型取得了比较力量的预测效果,但是后续研究者也指出了其存在一 些不足：在个体客户层面上，服从正态分布的变量其取值可为负数，但在现实生 活中，消费金额是必须大于或等于零的；而在群体客户层面上，实际数据显示不 同的客户消费金额均值分布往往是呈现右偏的，也就是说绝大部分的客户消费金 额均值都处于较低水平，只有一小部分的客户能够承担高额消费，而正态分布是 无法准确刻画实际特征的。
针对上述不足，Colombo和Jiang在1999年提出了 Gamma-Gamma模型。 它分别将Normal-Normal模型假设中的两个正态分布替换为了伽玛分布，不仅提 高了模型的预测效果，也保证了模型能够真实的反映实际情况特征。
使用Gamma-Gamma模型的另一个优势就是模型易于推导。Fader, Hardie 和Lee (2005)就指出，若仅是为了克服Normal-Normal模型的两个不足，同样 可以尝试使用Lognonnal-Lognonnal模型，但因为对数正态分布的卷积没有闭式 表达式，无法得到关于个体客户的消费金额均值分布闭式表达式。但是 Gamma-Gamma模型不存在这一问题，因此被广泛采用。
2.4.	本章总结
本章按照一开始给出的文献综述框架，对客户终身价值建模中所涉及到的主要知 识领域进行了文献综述O经过对文献的梳理和归纳，我们为本文的讲究打好基础。 在研究方法上，我们明确了在后文会使用到的客户终身价值计算公式、建模方法 以及可借鉴的原始模型(RFM模型、Logit计量模型、Pareto/NBD模型和 Gamma-Gamma模型)。在研究意义上，我们认识到了所研究的基于评论行为的 客户终身价值具有前沿性和必要性。
第三章 基于RFM模型的客户终身价值研究
本章节从群体层面进行客户终身价值的计算，将客户终生价值分为购买价值 和评论价值,其中购买价值采用传统的RFM模型进行度量;评论价值采用RFMP 模型进行度量。最后，利用K-Means聚类分析进行客户分类，识别真正高价值 客户，具体分析框架如下图所示：
群体层面
RFM模型J
购买价值	评论价值
K-means 用
户聚类分析
图3-1第三章整体分析框架
3.1.	基于RFM模型的客户终身价值分析
3.1.1.	基于评论行为的RFMP模型
通过上文对火尸”模型的文献梳理可以发现大多数研究者仍聚焦于传统购买 行为、改进针对购买行为的R尸N模型，但也已出现研究者将评论行为与RN模 型进行结合，提出了针对线上意见领袖识别的改进方法：蔡淑琴、马玉涛和王瑞 (2011)提出了 RFMS模型，将及定义为最近一次评论距现在时间的天数，尸定义 为一段时间内发表评一论的次数，例定义为一段时间内认为评论有用的人数，同 时引入了情感变量(S),代表评论中情感词的总数，用以进行意见领袖的识别135】 然而该模型的侧重点主要集中于研究网络社区单个用户的评论影响力，对用户影 响力评价的主体为其他用户。而本文对用户评论行为贡献的评价主体为企业，即 从企业的角度对单个用户单次发表评论的贡献大小进行衡量。
综上所述，本文提出了基于用户评论行为的RFA"模型：其中尺为最近评论 时间，表示顾客最近一次的评论时间和分析时间点间隔的天数，若该值较小，则
14
表明消费者在短期内刚有过评论行为；尸为评论频率，表示一段时间内顾客评论 产品或服务的次数。一般来说，顾客评论的频率越高，这类顾客越忠诚，其产生 的价值就越大；M为评论总贡献值，企业对于单个用户单次评论均会进行贡献 值打分，因此〃表示一段时间内用户发表的评论内容所获得的贡献值大小；尸为 评论正向占比，表示一段时间内用户发表的正向评论数占该用户发表评论数的百 分比。
对于各变量对于客户终身价值的影响大小，Hughes认为用加模型计算客 户终身价值时，三个指标是一样重要的，因此给何模型中的三个指标赋予相 同的权重。但该方法存在很大的缺陷，对于客户终身价值大小相同的顾客，他们 的购买行为可能存大巨大的差异，因此Miglautsch认为对于不同的变量应该赋予 不同的权重［3纥同样的，本文认为各指标对于客户终身价值的影响是存在差异 的，因此对各个指标赋予不同的权重，具体的麻陟模型如下所示(％、4、%和 d分别代表正、F、"和尸的权重)：
麻Me0mmem)=1氏+dF+y.M+伪尸	公式(3-1)
3.1.2.	基于RFM模型的客户终身价值
对于电商企业而言，用户的购买行为和评论行为均会对其带来价值，因此在 考虑电子商务企业的客户终身价值时，应该共同考虑顾客的购买行为和评论行为。 针对用户的购买行为，本文采用传统的模型，即认为R'为最近评论时间，表 示顾客最近一次的购买时间和分析时间点间隔的天数；F'为购买频率，表示一段 时间内顾客购买产品或服务的次数；M'为购买总金额，表示一段时间内用户购买 的总金额，具体的模型如下所示(。②、以和右分别代表R'、尸、"的权重)
网必加＞ =a2H+fl2F' + y2M'	公式(3-2)
最终，基于用户在线评论行为的客户终身价值计算模型如下所示(其中苞、
%分别代表购买价值哂和评论价值的权重在Mew)).
阳7M =2、电%buy) + 杼Mconwew)	公式(3- 3)
3.1.3.	确定权或方法
对于权重的确定通常有两种方法，即主观方法和客观方法。而传统的主观方 法大多采用层次分析法、专家咨询方法，这些方法带有很强的主观色彩，精确度 较差；而传统的客观方法则包括神经网络、主成分分析法和燧值法等，能够利用 客观数据得到较符合实际的权重。因此，本文采用客观方法中的嫡值法确定客户
15
终身价值模型中各指标的权重，具体步骤如下：
第一步：标准化处理
由于各指标的量纲、数量级均有差异，所以为消除因量纲不同对评价结果的 影响，本文采用藤"版"方法对各指标进行标准化处理。其中，若所用指标的值 越大越好，则采用公式3-4进行标准化处理；若所用的指标的值越小越好，则采 用公式3-5进行标准化处理：



公式(3-4)
工…一 4 Y _	10ax 」
叼一
公式(3・5)
其中为勺第/项指标值，Xg为第/项指标的最大值，X*为第/项指标的最 小值，%为标准化值。
第二步：计算比重矩阵
通过标准化处理的数据计算第1项指标下第i个用户的比重% ,即
y 产 qJjo/G)
乙=因	公式(3-6)
由此，可以建立数据的比重矩丫 =仇)-(加为用户的个数，”为指标的个数)
第三步：计算信息熠值和信息效用值d
根据第二步所得的比重力，可以得到第/项指标的信息熠值勺，具体公式如 下所示：
号="2军即为	公式⑶7)
其中，K为常数，K=l/lnm (公式3-8)
而某项指标的信息效用价值取决于该指标的信息隔与与1之间的差值，信息 效用值越大，对评价的重要性就越大，权重也就越大。因此信息效用值"产1一与( 公式3-9) ©
第四步：计算指标权重
最终，得到第/项指标的权重W，为：
%
Wj =——
2/j	公式(3-10)
16
3.2.	实证研究
3.2.1.	数据来源
本研究后续分析过程中所采用的数据来源与大众点评网(Dianpin.com)。大 众点评网于2003年4月成立于上海。大众点评是中国领先的本地生活信息及交 易平台，也是全球最早建立的独立第三方消费点评网站。大众点评不仅为用户提 供商户信息、消费点评及消费优惠等信息服务，同时亦提供团购、餐厅预订、外 卖及电子会员卡等020 (Online To Offline)交易服务。目前，已有研究者利用 大众点评网上的评论数据进行研究(蔡淑琴、马玉涛等，2013),因此网站数据 的稳定性和可靠性是可以被认可的。
数据的取样过程如下：首先随机选取4000名注册时间为2009年1月1日至 2010年12月31的大众点评网用户，提取这4000名用户从2011年1月1日至 2013年11月30日所产生的评论行为和团购行为数据，具体情况如图3-2所示。 由于4000名用户中有些用户的数据有缺失，例如未填写性别、年龄等，因此本 文对提取的数据进行了缺失值的处理，最终采用2486名用户共计79573条数据 来进行客户终身价值的分析。其中，由于大众点评网用户每发生一次评论点评网 均对该次评论进行贡献值打分，因此本文能够获取到点评网用户的总评论贡献值。 具体数据如表3-1——表3-3所示。
201012	201312
V 用户评论行为—
200901	用户团购行为
观察月份 ----------------------:一二…；-
用户确定期	用户数据提取期
图3-2数据提取示意图 表3-1用户确定
Number	UserID	用户性别	gender	用户年龄	用户贡献值	用户注册时间
a1	-9.21315E+18	女	0	39	74	2009-2-2
a2	-9.20816E+18	女	0	21	52	2010-5-9
a3	-9.20117E+18	女	0	27	58	2010-5-27
a4	-9.19597E+18	女	0	24	60	2010-10-5
a5	-9.1914E+18	男	1	25	48	2010-12-17
a6	-9.17458E+18	女	0	37	60	2010-11-17
a7	-9.17165E+18	女	0	28	74	2010-9-8
a8	-9.16852E+18	女	0	29	19	2009-6-15
a9	-9.16683E+18	女	0	25	54	2010-6-14

表3-2用户团购数据
Number	UserID	团购时间	团购名称	团购产品ID	产品类别	总金额
a1	-9.21315E+18	2011-6-14	上海菜主题餐厅	2675	美食	158
a1	-9.21315E+18	2011-7-27	苏浙汇代金券	3642	美食	600
a1	-9.21315E+18	2011-8-29	吴记老锅底麻辣火 锅	4803	美食	168
a1	-9.21315E+18	2011-9-2	Baskin Robbins	5006	美食	108
a1	-9.21315E+18	2011-9-3	Baskin Robbins	5006	美食	72
a1	-9.21315E+18	2011-9-4	陌生人火锅餐厅	5014	美食	192
•										••••••	••••••
a6	-9.17458E+18	2011-9-30	波司登保暖九分裤	6297	购物	39
a6	-9.17458E+18	2011-10-12	我的相册冲印套餐	6822	生活服务	9.9
a6	-9.17458E+18	2011-10-26	瑞莱新侨食品	7559	美食	14
a6	-9.17458E+18	2011-12-13	海飞丝洗发水	10577	购物	69

表3-3用户点评数据
Number	UserID	评论时间	评论打分	正负性	评论字数	贡献值	店铺ID	评论类别
a1	-9.21315E+18	2013-10-25	4	1	31	2	2495818	美食
a2	-9.20816E+18	2012-2-4	4	1	67	2	4017151	美食
a3	-9.20117E+18	2012-9-21	1	0	120	3	6004768	美食
a4	-9.19597E+18	2013-5-19	5	1	95	2	5427555	结婚
a4	-9.19597E+18	2013-11-24	1	0	175	3	13848092	丽人
a5	-9.1914E+18	2012-3-3	5	1	76	2	3521644	美食
a5	-9.1914E+18	2012-3-4	4	1	0	2	4547293	美食
a5	-9.1914E+18	2012-3-4	4	1	0	2	3202081	美食
a5	-9.1914E+18	2013-6-2	4	1	103	3	2515834	美食
a5	-9.1914E+18	2013-7-6	4	1	33	2	5282905	美食
a6	-9.17458E+18	2012-8-20	1	0	42	2	6022693	购物
a7	-9.17165E+18	2011-4-21	5	1	210	4	4116708	结婚
a7	-9.17165E+18	2011-4-29	5	1	106	3	2666827	结婚
a7	-9.17165E+18	2013-11-8	5	1	35	2	2643451	美食
对于样本的数据基本描述如表3-4所示。通过该表可以看出，在年龄方面大 众点评网用户的平均年龄约为27岁，标准差为7.736,这说明所选数据集中大多 数用户均在3 0岁以下，属于年轻群体；在性别方面，28%的用户为男性用户（男 性=1,女，性=0）。这在一定程度上反映出大众点评网的用户群体趋于年轻化且 女性用户居多；在贡献值方面，单个用户的最小贡献值为负数，这说明该用户进 行不当点评等不合规操作较多，使得整体贡献值为负数。
18
表34大众点评网用户数据基本描述
变量	观测	平均值	标准差	最小值	最大值
性别	2486	0.201	0.401	0	1
年龄	2486	27.572	7.736	0	112
贡献值	2486	99.419	140.910	-565	3044
购买R'	2486	93.723	161.373	0	1048
购买P	2486	21.182	28.862	1	735
购买M'	2486	2610.72	4304.26	1	1156Q7
评论R	2486	330.461	357.180	0	1066
评论F	2486	10.826	30.336	0	743
评论M	2486	26.818	79.256	0	2030
评论P	2486	0.611	0.384	0	1
3.2.2.分析结果及相应策略
3.2.2.	].如梃
(1)RFM模型权重确定
将大众点评网相关购买数据进行处理后得到如表3-5所示的RFM模型涉及 数据：
表3-5大众点评网用户购买行为数据
UserID	R,	F,	M
-9213153443210380000	1	735	115609
-9208160704539290000	57	6	346
-9201172142885370000	18	7	755
-9195973989819230000	48	13	1209.4

9214700843847040000	2	117	7408.6
采用嫡值法进行三个指标的权重确定，通过公式3-6一—公式3-10分别得到 了标准化矩阵、如表3-6所示的三个指标的信息端值和如表3-7所示的指标权重， 最终得到最近一次购买时间/的权重为0.016,购买次数F的权重为0.485,购买 总金额的权重为0.499o
表3-6大众点评网用户购买行为指标信息溺值
购买一	购买F’	购买“
E	0.997579	0.92694773	0.924967528
表3-7大众点评网用户购买行为指标权重
权重	购买R'	购买F'	购买M'
d	0.002	0.073	0.075
W	0.016	0.485	0.499
(2) RFMP模型权重确定
19
同样的，将大众点评网相关购买评论进行处理后得到如表3-8所示的RFMP 模型涉及数据：
表3-8大众点评网用户评论行为数据
UserID	R	F	M	p
-9213153443210380000	36	1	2	1
-9208160704539290000	665	1	2	1
-9195973989819230000	6	2	5	0.5
-9191396655170640000	148	5	11	1

9214700843847040000	4	111	282	0.25
采用熠值法进行三个指标的权重确定，通过公式3-6一一公式3-10分别得到 标准化矩阵、如表3-9所示的四个指标的信息端值和表3-10所示的指标权重， 最终得到最近一次评论时间R的权重为0.054,评论次数尸的权重为0.418,评论 总贡献值M对应的权重为0.436,评论正向占比尸对应的权重为0.092o
表3-9大众点评网用户评论行为指标信息埔值
评论R	评论尸	评论〃	评论尸
E	0.977	0.827	0.820	0.962
表3-10大众点评网用户评论行为指标权重
权重	评论R	评论F	评论M	评论尸
d	0.023	0.173	0.180	0.038
w	0.054	0.418	0.436	0.092
同样的，可以得到麻Mg和麻盟一。对应的权重为0.52和0.48。最终，本 文得到基于用户在线评论行为的客户终身价值计算公式如下所示：
如 =0.53 *建皿+0.48*的九鹏矶	公式(3-11)
其中，仅考虑购买行为ra”模型计算公式为：
RFM^y = 0.01 *2? + 0.485* /+0.499*〃’	公式(3-12)
仅考虑评论行为的的"模型计算公式为：
杼Me™。=0Q54*R + 0.418*F+0.436*M+0.092*P	公式(3-13)
3.2.2.2.	基于RFM模型的客户终身价值计算
采用模型进行传统客户终身价值计算的方法仅仅考虑用户的购买行为。 因此，本文首先不考虑用户的评论行为，仅以用户的购买行为来计算客户终身价 值，部分数据结果如表3-11所示，其中客户价值1代表未对“、尸和〃’进行标 准化处理得到的客户终身价值，客户价值2表示利用公式3-4和3-5进行Max-Min 指标标准化处理后得到的客户终身价值。
20
表3-11仅考虑购买行为的客户终身价值
编号	购买R	购买厂	购买力	客户价值1	标准化后的客 户价值2
1	25	6	1095.9	550.17	0.024
2	29	18	8666	4333.53	0.064
3	76	25	5019.4	2518.02	0.052
4	17	2	293	147.44	0.018
5	90	3	601	302.79	0.019
6	58	10	1441.9	725.28	0.027
7	172	5	444.1	226.78	0.018
8	132	3	265	135.81	0.016
9	225	8	1443	727.54	0.023
10	4	17	1302.1	658.05	0.032
11	155	11	706.9	360.56	0.023
12	306	4	124.6	69.00	0.014
13	0	81	8250.71	4156.39	0.104
14	485	3	367	192.34	0.012
15	72	3	326	165.28	0.018
16	3	10	1149.8	578.65	0.027
17	6	7	896.2	450.70	0.024
综合考虑用户的购买行为和评论行为得到的基于用户在线评论行为的客户 终身价值如表3-12所示，其中客户价值3代表未对R、F、也和「进行标准化 处理得到的客户终身价值，客户价值4表示利用公式3-4和公式3-5进行Max-Min 指标标准化处理后得到的客户终身价值。
表3-12基于用户在线评论行为的客户终身价值
编	购买 R	购买 F	购买例	评论 R	评论 F	评论 M	评论 P	客户价值 3	标准化后的客户 价值4
1	25	6	1095.9	243	1	2	1	293.06	0.077
2	29	18	8666	1066	0	0	0	2281.07	0.033
3	76	25	5019.4	57	8	19	0.6	1316.45	0.083
4	17	2	293	1066	0	0	0	104.30	0.009
5	90	3	601	21	34	82 .	0.8	182.02	0.088
6	58	10	1441.9	215	1	2	1	383.39	0.080
7	172	5	444.1	15	2	4	1	119.60	0.080
8	132	3	265	1066	0	0	0	98.25	0.009
9	225	8	1443	1066	0	0	0	405.95	0.012
10	4	17	1302.1	75	1	2	1	344.79	0.085
11	155	11	706.9	18	75	160	0.8	236.53	0.108
12	306	4	124.6	873	1	2	1	59.16	0.057
13	0	81	8250.71	5	13	27	1	2169.77	0.131
21
14	485	3	367	871	1	2	0	123.22	0.011
15	72	3	326	264	7	16	0.7	97.58	0.064
16	3	10	1149.8	3	5	13	0.8	304.75	0.078
17	6	7	896.2	35	3	6	0.7	237.15	0.068
最后，将不考虑评论行为得到的客户终身价值与综合考虑用户的购买行为和 评论行为的客户终身价值进行对比，结果如表3-12所示。其中，Hankl表示客户 价值2对应的排名，心麟2表示客户价值4对应的排名。
最终通过两个客户终身价值的对比可以发现当考虑用户的评论行为后，用户 的客户终身价值出现了变化，其中判断用户为高价值用户的标准为用户排名在前 1000名，中价值用户的标准为用户排名在前2000,低价值用户的标准为用户排 名在前3000,具体如表3-13所示：
表3-13客户终身价值对比
购买行为	高	中	低
评论行为+购买行为
高	663	304	33
中	260	456	284
低	77	240	169
通过表3-13可以看出：有663名在仅考虑购买行为时为高价值用户，而在 综合考虑评论行为和购买行为之后仍然为高价值用户；有260名在仅考虑购买行 为时为高价值用户，而在综合考虑评论行为和购买行为之后为中价值用户；有 77名在仅考虑购买行为时为高价值用户，而在综合考虑评论行为和购买行为之 后为低价值用户。这其中两次判断出现差异的用户人数为337人，由此对其采取 的用户策略也会相应产生变化。
而对于仅考虑购买行为判断为中价值的用户中，有304名用户在综合考虑其 行为后价值未发生变化，有456名用户变化为中价值用户，有240名用户变化为 低价值用户。这其中两次判断出现差异的用户人数为544人。
最后，对于仅考虑购买行为判断为低价值的用户中，有169名用户在综合考 虑其行为后价值未发生变化，有33名低价值用户转化为高价值用户，有284名 用户变化为中价值用户。这其中两次判断出现差异的用户人数为317人。
综上所述，在分析了仅考虑购买行为计算的客户终身价值与综合考虑用户购 买行为和评论行为计算的客户终身价值后发现，有1198人的价值判断出现了差 异0这说明大众点评网已经不能仅仅依靠用户的购买行为来衡量客户的终身价值, 而应该综合考虑用户的评论行为和购买行为，使其更加合理的对用户行为进行判 断。
同时，为了更进一步的说明考虑评论行为后的客户情况以及相关管理建议， 本文接下来采取K-Means聚类分析法进行客户细分。
22
3.2.2.3.	用户聚类分析
K-触加聚类分析是用户群细分的一种常用方法。其主要思想为从样本中 随机选取后个聚类中心，再根据欧氏距离把每个点分配到最接近其均值的聚类中, 然后计算被分配到每个聚类的点的均值向量，并作为新的中心进行递归，最终得 到聚类结果。而极端异常点的存在会使得聚类的准确度大大降低。因此本文首先 对指标进行描述性统计，发现购买总金额和评论总贡献值存在极端偏大值(图 3-3表示以购买总金额为例的极端值)，这些极端值的存在会导致在进行K-聚类分析时存在较大误差，因此我们首先将极端数值进行删除处理，最终保留了 2481名用户的数据。
12600000 ▲ 20COOOO
I-oi8 J 02000.00 -960008 ^§8 ,780008 420W8 -C60008 .§8.8 ■540008
J^§08 ,4200000 ,s§8 -3000000
&OOO8 Jis
Jis
Ls
购买M
图3-3购买金额的极端值
通过客户终身价值的分析发现用户的评论行为对用户价值的识别产生影响, 那么对于企业而言哪些用户才是真正的高价值用户？本文综合考虑用户的购买 行为和评论行为，对大众点评网2481名用户进行聚类分析。用户群聚类的个数 一般依据指标个数划分，本文中应根据7个指标将用户细分为128 (27)类，但 聚类数过多会导致用户群划分过于分散，因此本文将用户聚类数确定为32 (25) 类，即将用户的购买行为看成一体。随后，通过分析32个客户细分群的行为数 据，基于不同用户群的行为特征最终将大众点评网用户归为四类，具体四类用户 群行为数据如表3-14所示。
表3-14四类用户群各指标数据描述一中位数
类别	个数	R	F,	M'	R	F	M	p
I	130	20	29	2825.95	20	75.5	188.5	0.69
II	405	202	5	605	1066	0	0	0
III	1042	28	15	1763.1	127	3	6	0.76
IV	908	817	2	133	91	18	41	0.68
23
表3-15四类用户群客户价值情况
类别	平均购买价值	平均评论价值	用户类型
I	1624	150	高价值用户
II	645	47	低价值用户
III	1365	22	传统用户
IV	135	75	口碑用户
将第I类用户定义为高价值用户，其具体行为特征为：能够经常在网站上进 行团购且购买金额较大，同时这类用户的评论积极性也处于较高水平，能够较频 繁的在网站上发布正向评论且这些评论的贡献值均较大。通过表12可以看出第 I类用户的平均购买价值为1624,平均评论价值为150,这在四类用户中是价值 最大的。由此可以看出这些用户对网站的忠诚度极高，他们与企业的关系处在稳 定期，但是这类客户的发展潜力较低，他们能给企业带来的收益已经达到最大， 利润上升的空间已经很小。因此对于这类客户，大众点评网应尽量维持与他们的 关系，防止他们流向竞争对手，因为他们带给企业的收益是企业现金流的重要组 成部分。但同时对于这类客户企业也无需在他们身上投入过多的资源。例如，可 以适当减少在他们身上的广告投放量，无需频繁的发送促销邮件。
将第n类用户定义为低价值用户，其具体行为特征为：网站使用率低，既很 少发生团购行为也很少发生评论行为，且其对网站的金额贡献和评论贡献都相对 较低。通过表12可以看出第II类用户的平均购买价值为645,平均评论价值为 47,两类价值均处于较低水平。由此可以看出这类客户对网站的忠诚度很低，随 时都有流失的可能。同时由于他们的发展潜力较低，因此应具体分析导致这类客 户不活跃的原因。若客户是由于网站的服务质量或产品质量而流失，尽管该客户 的发展潜力不高，在未来不能给企业带来太多的利润，但企业仍应该花精力去处 理客户的负面评价，防止他们将对产品、网站的负面评价传递给更多的人，从而 使企业的潜在客户流失。
将第m类用户定义为传统用户，其具体行为特征为：客户的团购次数较少但 对网站的金额贡献较大;但是这些用户不善于发表评论，评论次数以及评论的贡 献值都较低。通过表12可以看出第m类用户的平均购买价值为1365,平均评论 价值为22。这类用户是传统的购买型用户，他们能够为企业带来较大的收益， 但是由于这类用户不善于发表自己的看法、表达自己对产品或服务的看法，无法 产生较多的评论价值、促进企业潜在客户的增加。因此，针对这类用户，企业需 要制定一些鼓励发表评论的激励措施，例如评论贡献值可以冲抵金额。
将第W类用户定义为口碑用户，其具体行为特征为：客户不经常参加网站的 团购活动且购买金额较少，但是这些用户非常乐于与他人分享自己对所体验的产 品或服务的观点和看法，经常在网站上发表评论。这类用户的平均购买价值为
24
135,平均评论价值为75,这种评论价值在四类用户中排名第二。这类用户是在 Web2.0时代产生的口碑型用户，尽管他们对企业的消费贡献较低，但是他们对 网站仍有较强的依赖性，能够经常性的在网站上发表观点和看法，对企业潜在客 户的影响较大。因此，针对这类用户，企业需要重点分析用户购买行为不强的原 因，考虑网站的营销策略以及产品的定位是否符合此类客户的需求，推荐一对一 的团购项目刺激用户的购买行为。
3.3.	本章总结
本章从群体层面将用户自身的点评行为和购买行为结合起来，基于传统的 RFM模型提出了更加全面的客户终身价值计算方法。并利用客观数据指标权重 确定方法——嫡值法确定了各指标的权重；随后，通过实证研究进行了仅考虑用 户购买行为的客户终身价值计算和综合考虑购买行为和点评行为的客户终身价 值计算，并就两种客户价值进行了对比分析，发现仅以用户的购买行为来判断客 户终身价值这种传统方法在Web2.0时代已有一定的局限性，用户的评论行为会 对客户终身价值的判断产生影响；最后，为了找到企业的真正高价值用户，本文 采用K-means聚类分析方法对大众点评网用户进行了用户群划分，将网站的用 户细分为4类，并将每类用户群所产生的平均购买价值和平均评论价值进行对比, 将大众点评网涉及的用户划分为高价值用户、低价值用户、传统用户和口碑用户， 提出了相应的管理建议。
第四章基于评论行为的客户购买次数预测
本章节从个体层面进行客户终身价值的计算，首先对购买价值进行计算。第 一步先构建Logit回归分析模型进行影响客户购买流失的影响因素并利用Logit 模型进行客户购买流失行为预测；第二步将找到的关键变量作为协变量引入 Pareto/NBD模型中，改进客户的购买次数预测。具体分析框架如下图所示：
购买价值
购买次 数预测
回归模型找到重 点因素
Pareto/NBD 改进 预测次数
图4-1第四章整体分析框架
4.1.	Logit回归模型预测客户购买流失
4.1.1.	Logit回归模型概念框架
消费者当前期的行为表现会间接反映出消费者下一阶段的购买可能性大小， 作为判断消费者下一阶段是否会产生购买流失的重要依据。消费者的评论行为会 潜在的增加用户的粘性。大众点评网在创立之初就是依靠海量的用户评论来增加 用户粘性，继而在2010年推出了团购业务，这些海量的用户群体帮助大众点评 网在短时间内打开了其在一线城市上的团购业务，快速抢占了团购市场的有力地 位。目前已有研究者从两个方面来考虑影响消费者购买流失行为的因素，分别为 消费者自身因素和消费者当前购买行为：
针对用户自身因素，已有研究者考虑人口统计学特征对用户购买流失行为的 影响，将其引入用户购买流失的预测模型中，例如朱帮助、张秋菊(2010)在进 行用户购买行为预测时引入了客户性别、客户年龄、婚否、教育程度、年收入这 五个人口统计学特征因素13刀；王志君(2013)将用户类别、用户职业作为关键属 性引入用户流失预测模型中网】；曹国、许娟、沈利香(2012)利用RFM模型和
26
人口统计变量建立了多维商业银行客户流失预测模型，发现性别、年龄均对客户 流失具有显著影响［39］；任剑锋、张新祥(2012)将客户年龄、客户性别、年收入 引入客户购买流失预测模型中
针对用户前期购买行为，已有研究者考虑了 RFM模型所涉及的指标以及其 他购买行为特征对用户购买流失行为的影响，将其引入用户购买流失的预测模型 中，例如王志君(2013)在研究影响用户购买流失行为时考虑了 RFM模型所涉 及的三项指标口叫即总购买金额、总购买频次以及最晚购买时间，同时也考虑了 其他购买行为特征诸如用户基础积分、分阶段购买金额及数量等；曹国、许娟、 沈利香(2012)采用最近购买时间间隔、交易总金额和交易频率来预测用户购买 流失阳】；任剑锋，张新祥(2012)将购买金额、重复购买次数、白天购买次数、 晚上购买次数引入流失模型中14°】；朱帮助、张秋菊(2010)等将重复购买次数、 最后购买时间、购买金额、白天购买次数、晚上购买次数、深夜购买次数引入流 失模型中［37］。表4/表示的为整理后的用户购买流失行为影响因素：
表4-1用户购买流失行为的影响因素
维度	影响因素
用户自身因素	用户性别	用户职业	用户类别
用户年龄	婚否
用户收入	教育程度
用户前期购买行 为	购买总金额	白天购买次数	客户信用得分
重复购买次数	晚上购买次数	工作时间段购买 次数
购买总次数	深夜购买次数	最后购买时间
第一次购买时间
本文在此基础上引入消费者的当前评论行为，重点研究消费者自身评论行为 是否会对用户的购买流失产生影响以及是否能够提高用户购买流失的预测准确 性。因此，本文提出的概念模型框架如图4-2所示，其中消费者当前的购买行为 和当前评论行为为自变量，消费者下一阶段的购买流失行为为因变量，消费者自 身因素为控制变量：
自变量	因变量
图4-2概念模型
27
4.1.2.	Logit回归模型国立
4.1.2.1.	基本模型
为了了解消费者当前购买行为、消费者当前评论行为和消费者自身因素对用 户下一阶段的购买流失行为影响，建立更加精准的流失预测模型，本文建立了基 于用户购买流失行为的Logit回归分析模型，采用大众点评网的数据(Dianpin.com) 进行分析和研究。
本文的模型是为了着重研究消费者的评论行为是否会影响其下一阶段的购 买流失行为，以便更精确的预测用户购买流失，因此，本文所建立模型的因变量 是消费者的购买流失行为，该变量只有流失和未流失两种情况，可分别用1和0 来表示，是一种二值变量(binary variable)；该模型的自变量包含了消费者当前阶 段的购买行为和当前评论行为，控制变量为用户自身因素。基于此，本文建立的 模型是一种二值响应模型(binary response model)□根据对计量经济学中建立二值 响应模型的几种方法以及对类似研究文献中所采用模型的参考，本文选择了 Logit 模型作为模型建立的基本形式。
Logit模型的基本形式是：
打=以7	公式(4-1)
♦=比(六)=4=/+员Xt	公式(4-2)
其中，Pi代表了被测变量值为；的概率，Pi/(1-Pi)则代表了被测变量为1的 机会比率(odds ratio)。可以证实，随着Li的值从一8变化至+oo, Pi的值会从0变 化到1,且Pi和Li之间存在非线性关系，那么Pi和Xi之间也存在非线性关系， 这就满足了我们对分析模型的要求。Logit模型的以下几个特点使其能够为本文 的后续分析提供较好的分析效果：(1)随着Li的值从一8变化至+oo, Pi的值会从0 变化到1; (2)虽然Li是Xi的线性函数，但概率本身Pi与Xi之间存在的是一种 非线性关系；(3)模型可以根据应用的需求增加变量或回归元的数量。
消费者购买流失模型是用于对消费者购买流失进行影响因素分析及预测的 模型。该模型的因变量为用户下一阶段的消费者流失情况(CMeQ。该模型的 自变量包括了消费者当前购买行为以及消费者当前评论行为，消费者的自身因素 为模型的控制变量。由于消费者的流失行为是一个二分变量(仅有流失：1和未 流失：0两个状态)，因此本文采用Logit回归模型进行分析。消费者的购买流失 预测模型的基础公式为：
Churnlt =	公式(4-3)
Lit = yPurchaseit^ + 8Commentit^ + pUseri + £tt^	公式(4-4)
其中，Chur而代表用户i在下一阶段的流失概率，是一个二分变量；
28
Purchase^ 是用户i在当前期的购买行为信息，例如购买金额、购买次数等； CorrnneMg］是用户i在当前期的评论行为信息，例如评论次数，评论累计贡献 等；User.作为控制变量是用户i的基本信息，例如用户的性别、年龄等，该信息 可以在大众点评网点评平台上提取。伉匕6是三类自变量的系数，sijt则是随机 误差项，它代表了因变量所受到的模型中所未能表示出来的潜在影响，它满足 的假设。
4.1.2.2.	模型变■设计及统计
本章节的数据同样来源于在线评论网站大众点评网：随机选取了在2011年1 月1日至2011年6月30日期间产生团购行为的消费者,提取了这些消费者在2011 年1月1日至2011年6月30日在大众点评网产生的购买行为、评论行为及人口 统计学特征数据，作为自变量；同时选取了 2011年7月1日至2011年9月30 日这些用户的团购次数，同时认为在这3个月内消费者未产生团购行为即认为产 生了购买流失，记为1;产生了团购行为即认为未产生购买流失行为，记为0。 最终，本文选定了 921名大众点评网消费者，提取了这些用户的团购数据和评论 数据。本文自变量和因变量的提取时间划分如图4-3所示：
购买数据、评论数据
购买流失。r未流失
自变量提取期
因变量提取期
图4-3自变量、因变量提取期
1、模型因变量
大众点评网为本文提供了相关数据支持，能够统计消费者在一段时间内的所 有购买记录，包括购买的次数、金额、购买店铺信息等，这使得我们对消费者的 购买流失行为的研究成为了可能。依据本章所建立的基本模型，将用户在下一阶 段(3个月)的购买流失行为作为因变量。模型因变量的列表如表4-2所示。
表4-2模型因变量描述
变量名	变量符号	变量描述
购买流失	Churriii	虚拟变量，表示消费者i在t时间内的 购买流失行为，其中未产生购买行为记 为1；产生购买行为记为0
具体的，本章节将消费者下一阶段(2011.7.1—2011.9.30)的购买流失行为 用Chur时表示，是一个虚拟变量。若用户i在t时间内产生了购买行为，则定义 Chumm的值为0；否则即认为产生了购买流失。
29
2、模型自变量
本章节将实证模型中所用到的自变量划分为了消费者当前阶段购买行为和 评论行为两个维度。模型自变量的列表如表4-3所示。
表4-3模型自变量描述
类型	变量名	变量符号	变量描述
购买行为	累计消费金额	Gmii	表示在t-1时间段内消费者i的累计消费 金额(2011.1.1 ——2011.6.30)
购买最大金额	Gm_topit,i	表示在t-1时间段内消费者i的单次消费 金额最大值(201LL1——2011.6.30)
购买次数	Gfin	表示在t-1时间段内消费者i的累计购买 次数(2011.1.1——2011.6.30)
最后购买时间	G」asttimeM	表示在t-1时间段内消费者i的最后一次 购买时间距分析节点的间隔天数(2011.1.1 —2011.6.30)
第一次购买时间		表示在t-1时间段内消费者i的第一次购 买时间距分析节点的间隔天数(2011.1.1— —2011.6.30)
工作时间段购买次数	G_worktimeit.i	表示在t-1时间段内消费者i的在周一到 周五上午9点到下午5点的总购买次数 (2011.1.1——2011.6.30)
凌晨购买次数	G_midnightjt.]	表示在t-1时间段内消费者i在0点-6点 的总购买次数(2011.1.1——2011.6.30)
白天购买次数	G_dayit.i	表示在t-1时间段内消费者i在8点-18点 的总购买次数(2011.1.1——2011.6.30)
晚上购买次数	G_nightit.i	表示在t-1时间段内消费者i在18点-24 点的总购买次数(2011.1.1——2011.6.30)
评论行为	累积评论贡献值	Cmin	表示在t-1时间段内消费者i的累计评论 贡献值(2011.1.1——2011.6.30)
评论最高贡献值	Cm_topjtj	表示在t-1时间段内消费者i的单次评论 最大贡献值(2011.1.1 ——2011.6.30)
评论次数	CfiM	表示在t-1时间段内消费者i的累计评论 次数(2011.1.1 ——2011.6.30)
工作时间段评论次数	C_worktim/.i	表示在t-1时间段内消费者i的在周一到 周五上午9点到下午5点的总评论次数 (2011.1.1——2011.6.30)
凌晨评论次数	C_midnightjt_i	表示在t-1时间段内消费者i在0点-6点 的总评论次数(2011.1.1——2011.6.30)
白天评论次数	C_dayin	表示在t-1时间段内消费者i在8点-18点 的总评论次数(2011.1.1——2011.6.30)
晚上评论次数	C_nightit.i	表示在t-1时间段内消费者i在18点-24 点的总评论次数(2011.1.1——2011.6.30)
30
具体的，自变量的计数周期均从2011.1.1至2011630,由大众点评网提供。 本文认为消费者的购买行为包括九个变量，分别为累计消费金额（用Gmu表示）、 购买最大金额（用Gmjopn.（表示）、购买次数（用G加表示）、最后购买时间（用 G_lasttimeit.）表示）、第一次购买时间（用G_firsttimeit.i表示）、工作时间段购买 次数（用G_worktimeiN表示）、凌晨购买次数（用G_midnightit-i表示）、白天购 买次数（用G_dayu表示）和晚上购买次数（用G_nightg表示）。
最后，本文认为消费者的评论行为包括7个变量，分别为累积评论贡献值（用 Cmm表示）、评论最高贡献值（用Cm_topit”表示）、评论次数（用Cfjt-i表示）、 工作时间段评论次数（用C_worktimeit-i表示）、凌晨评论次数（用C midnightit-i 表示）、白天评论次数（用C_dayg表示）和晚上评论次数（用C_nightg表示）。
3、模型控制变量
本章节认为实证模型中的控制变量为消费者的自身因素。模型自变量的列表 如表4-4所示。
表44模型控制变量描述
类型	变量名	变量符号	变量描述
自身因素	性别	Ages	用户i的年龄，其中女表示为0;男 表示为1
年龄	Gender1.	用户i的年龄信息
贡献值	Contribution1	用户i的整体贡献值，由点评网提供
根据大众点评网人口统计特征因素的提供情况，认为消费者自身因素包括三 个变量，即消费者的性别（用Gender表示）、年龄（用Agei表示）以及对网站的 整体贡献值（用contributioni表示）。其中用户年龄（Age）及用户性别（Gender。两个 变量的值皆来源于用户在大众点评网上所填写的个人资料；网站的整体贡献值 （contribution）来源于大众点评网对用户行为的评分值。
4,模型变量描述性统计
针对模型变量的描述性统计如表4-5所示。从变量的描述性统计中可以看出， 因变量Chum的均值为0.347,这说明有65.3%的消费者在下一阶段仍然产生了购 买行为。同时，本文所观测样本的平均年龄为28岁，标准方差为8.181,这说明 大众点评网的观测样本年龄普遍较小。本文观察样本的年龄均值为0.174,这说 明观测样本的用户女性消费者占据了绝大多数。
表4-5变量描述性统计
变量	均值	标准差	最小值	最大值	观测值
Chum	0.347	0.476	0	1	921
Gender	0.174	0.379	0	1	921
Age	28.129	8.181	0	112	921
Contribution	124,619	187.988	-271	3044	921
Gm	330.102	590.035	1	5773.8	921
Gm top	151.7732	229.059	1	2580	921
Gf	3.664	4.286	1	42	921
G lasttime	49.142	45.904	0	174	921
G firsttime	97.701	51.810	0	180	921
Gworktime	1.993	2.687	0	23	921
G day	2.457	3.057	0	29	921
Gjnight	0.733	1.388	0	18	921
G_midnight	0.733	1.388	0	18	921
Cm	9.219	31.609	0	415	921
Cm_top	1.195	1.713	0	5	921
Cf	3.483	11.592	0	183	921
C_worktime	0.691	3.798	0	53	921
C_day	1.011	5.398	0	64	921
Cnight	0.524	2.949	0	42	921
C_midnight	0.093	1.044	0	27	921
4.1.2.3.购买流失预涕模型一未考虑评论行为模型构建
本文首先提出仅考虑消费者自身因素和消费者购买行为的购买流失预测模 型。通过综合考虑电子商务客户流失各种影响因素，参考国内外电子商务客户流 失相关文献，并考虑解释变量数据的可获得性，最终确定出性别、年龄、消费者 贡献值、购买金额、最高购买金额、购买次数、最后一次购买时间、第一次购买 时间、工作时间段购买次数、白天购买次数、晚上购买次数以及凌晨购买次数12 个指标作为本文研究的待选解释变量。
Churnit =由 ag/ + p29enderi + 63comributionj +	+ Y3Gftt-i +
y4GJasttiTneu^r + 及GJirsttinie比t + y^^worktimeu-^ 4-y7Gjnidnightit^ + YQG_dayit^1 +
Y9G_nightit^ + Eijt	公式(4-5)
4.1.2.4.	购买流失预测模型■―综合考虑评论及购买行为模型构建
本文接下来引入消费者评论行为，提出综合考虑考虑消费者自身因素、消费
32
者购买行为以及消费者评论行为的购买流失预测模型。基于公式4-5涉及的变量， 进一步提出了包括累积评论贡献值、评论最高贡献值、评论次数、工作时间段评 论次数、白天评论次数、晚上评论次数、凌晨评论次数共计19个指标作为解释 变量的综合模型，具体模型如公式4-6所示：
Churnit = ^agex + ^gendert + ^Contribution^ + yiGwim +	+
YiGJasttvmeit^ + YsGjtrsttimeu^ + Y^Gjvorktimeu^ + y-jGjnidnighti^ + YaG_daylt^ + YgGjiight^ + 61cmit + SiCmjtopi^ +	+ SiCjMorktime^^ + 85C jnidnight^^ +
86C_daytt^ + S4C_nishtit_1 + £iJt	公式(4-6)
4.1.3.	模型分析结果
4.1.3.1.	模型检验
本文在构建购买流失预测模型之前，首先进行了变量间的多重共线性检验, 即通过VIF因子分析进行判断，若VIF>10,则说明变量间存在共线性。通过图 4-6可以发现购买次数、白天购买次数、白天评论次数、工作时间段评论次数、 累计评论贡献值、评论次数和工作时间段购买次数的VIF均大于10,变量间存在 共线性。因此为了消除变量间的共线性、同时得到影响消费者购买流失的核心变 量，本文采用逐步回归的方法进行变量处理与筛选，具体结果如下节所示。
表4-6V1F因子分析
Variable	VIF	1/VIF
Gfit-i	48.91	0.02
G_dayit.i	41.97	0.02
Cdayin	34.47	0.03
Cworktimejt-i	25.53	0.04
Cm%]	17.51	0.06
CfM	14.40	0.07
Gworktimejtj	13.62	0.07
G_midnightjt.)	8.44	0.12
Gnightit.i	6.52	0.15
C_nightit.i	3.69	0.27
Gmit-j	2.51	0.40
Contribution)	2.15	0.47
Glasttimeiu	1.92	0.52
G firsttimeit.]	1.89	0.53
Cmtopjt.i	1.85	0.54
Gmtop it.i	1.65	0.61
Cmidnightjt-i	1.58	0.63
Genden	1.04	0.10
Agej	1.03	0.10
33
4.1.3.2.	结果分析
（1）训练集结果分析
本文将数据集按8:2的比例对总体样本进行训练集和验证集的划分，其中训 练集有737名用户，包括产生购买流失的用户258名，未产生购买流失行为的用 户479名；验证集有184名用户，包括产生购买流失的用户62名，未产生购买 流失行为的用户122名。在进行逐步回归后具体分析结果如表4-7所示：
表上7模型结果——训练集
Chum	模型一	模型二	模型三
Gender	0.5566**(0.2186)	0.5634**(0.2194)	.5320**(0.2217)
Gm top	0.0010**(0.0004)	.0010**(0.0004)	.0010**(0.0004)
Glasttime	0.0093***(0.0020)	.0093***(0.0020)	.0089***(0.0020)
Gf	-0.3009***(0.0506)	-.3046***(0.0517)	-0.3406***(0.1468)
Cf		0.0032(0.0083)	-0.0218*(0.0169)
Cf*Gf			0.0045**(0.0089)
_cons	-0.5104***(0.2080)	-.5134***(0.2082)	-0.3817*(0.1757)
obj.	737	737	737
LR chi2(5)	142.64	142.78	147.79
Count R2	0.712	0.707	0.712
AIC	1.115	1.118	1.113
表4-7表示训练集的Logit回归模型分析结果。其中模型一表示公式4-5经过 逐步回归后的因素影响结果；模型二、模型三表示公式4-6经过逐步回归后的因 素影响结果。通过对模型一的结果进行分析发现当仅考虑消费者自身因素和当前 期购买行为时，消费者性别（氏=0.5566）、购买最高金额"2=0.001）、最后一次 购买时间（%=0-。093）以及购买次数（匕=。3009）会显著影响消费者下一阶段 的购买流失情况。
其中，消费者的最高购买金额（y2Gm_topit.^对于用户的购买流失有显著 正向的影响。这说明消费者之前的最高购买金额越高，消费者在下一阶段的购买 流失可能性也会越大。而消费者的购买次数（Gk）对于用户的购买流失有显 著负向的影响。这说明消费者之前的购买次数越多，对网站的使用黏性越大，消 费者在下一阶段的购买流失可能性就会越低。消费者最后一次购买时间 （G」as山对于用户的购买流失有显著正向的影响。这说明消费者最后一 次购买时间距分析时间点的时间间隔越长，消费者在下一阶段的购买流失可能性
34
会越大。
通过对比模型二和模型三则发现综合考虑用户自身因素、当前期购买行为和 当前期评论行为时，单纯引入消费者评论次数并不能显著的影响消费者在下一阶 段的购买流失行为，但是当引入用户购买次数和评论次数的交叉项时，消费者在 点评平台的评论次数对于下一阶段的购买流失影响就从不显著变为显著了，这说 明消费者评论次数对下一阶段购买流失的影响依赖于用户在团购平台的购买次 数。具体而言，消费者评论次数对下一阶段用户购买流失的综合影响为-0.005 (综 合影响=单独影响系数+交叉项影响系数*购买次数均值)，即评论次数越多，消费 者在下一阶段越不容易产生购买流失。这一结论很好的证明了点评平台对于团购 平台存在影响。
综上所述，本文最终构建了用户购买流失预测模型，具体如公式4-7所示：
Churnu = p^endert + y2Gm_topit_1 +	+ Y3GJasttimeit_1 + 跖。九_1 十
^2^fit-1 * fit-1 +	公式(4-7)
即用户的性别、最高购买金额、购买次数、最后一次购买时间、评论次数 以及评论次数与购买次数的交叉项会对下一阶段的消费者购买流失行为产生影 响。
(2)模型预测准确度对比
目前，在对流失预测结果进行评价最直接的方法就是利用量化了的标准来进 行评价[41],本文根据实际情况，采用与预测的命中率作为评价标准。如表4-8所 示，A表示预测流失事实上也流失的用户数；B表示预测不流失但实际上却流失 的用户数；C表示预测流失但实际上却不流失的用户量；D表示预测不流失实际 上也不流失的用户数。从表中可以看出，有两部分的数据量是预测成功的，即A 类和D类。
表4-8流失颈测评价矩阵
预测流失	预测不流失
实际流失	A	B
实际不流失	C	D
本文采用评价标准汇总的预测命中率，根据如表4-8所示的流失预测评价矩 阵，可以得到预测命中率公式为：
预测命中率=焉	公式(4-8)
基于此，本文将模型一仅考虑购买及用户自身因素的模型预测结果与模型三 综合考虑三方面因素的模型预测命中率进行对比，发现对于训练集和验证集而言, 模型三对购买流失行为预测和购买未流失行为的预测的命中率均有了提高，具体 结果如表4-9所示：
35
表4-9预测命中率对比
训多		女集		验证集
模型一		模型三		模型一		模型三
流失	未流失	流失	未流失	流失	未流失	流失	未流失
流失	138	120	140	118	30	32	33	29
未流失	99	380	97	382	27	95	29	93
预测命中 率	58.2%	76%	59.1%	76.4%	52.6%	74.8%	53.2%	76.2%
图4-4训练集命中率
图4-5验证集命中率
综上所述，通过分析可以发现消费者当前的评论行为会对该用户下一阶段的 购买行为产生影响，同时引入评论行为的用户购买流失预测命中率也有了提高。 但是由于样本数据较小，使得预测效果的提升度并不是很高。因此，本文采用十 重交叉验证的方法进行模型稳定性的验证。
36
4.1.3. 3.十重交叉验证
由于本文的数据集较小，因此采用适合小样本的十重交叉验证方法进行进一 步的模型验证［4”具体方法如下：首先将训练集中的流失样本（258名）和非流 失样本（479名）分别划分为10份，前9份每份包含74个样本，最后一份包含 71个样本；第二步分别将9份样本当做训练集，一份样本当做验证集进行logit 回归模型的建立，最终得到10个模型；第三步将这10个模型分别带入10份验 证集中，可以得到每个模型的错误率，最终求平均，得到整体训练集合的平均误 差率；同时将这10个模型带入验证集中，同样可以得到每个模型的错误率，最 终求平均后得到整体验证集的平均误差率。最终结果如表4-10所示：
表4-10十重交叉验证
训练集		验证集
模型一	模型三	模型一	模型三
⑴	错判16个 （错误率:22.5%）	错判16个 （错误率：22.5%）	错判61个 （错误率:33.2%）	错判61个 （错误率：33.2%）
(2)	错判23个 （错误率:31.1%）	错判22个 （错误率：29.7%）	错判61个 （错误率：33.2%）	错判60个 （错误率：32.6%）
(3)	错判17个 （错误率：23.0%）	错判15个 （错误率：20.3%）	错判63个 （错误率：34.2%）	错判61个 （错误率：33.2%）
(4)	错判28个 （错误率：37.8%）	错判21个 （错误率：28.4%）	错判62个 （错误率：33.7%）	错判59个 （错误率：32.1%）
(5)	错判28个 （错误率：37.8%）	错判25个 （错误率：33.8%）	错判61个 （错误率:33.2%）	错判56个 （错误率：30.4%）
(6)	错判21个 （错误率:28.4%）	错判16个 （错误率：22.5%）	错判63个 （错误率:34.2%）	错判54个 （错误率：29.3%）
(7)	错判29个 （错误率:39.2%）	错判26个 （错误率：35.1%）	错判62个 （错误率：33.7%）	错判60个 （错误率：32.6%）
(8)	错判17个 （错误率:23.0%）	错判17个 （错误率：20.3%）	错判61个 （错误率:33.2%）	错判57个 （错误率：31.0%）
(9)	错判18个 （错误率:24.3%）	错判21个 （错误率率8.4%）	错判54个 （错误率:29.3%）	错判57个 （错误率：31.0%）
(10)	错判21个 （错误率:28.4%）	错判18个 （错误率;24.3%）	错判62个 （错误率:33.7%）	错判61个 （错误率：33.2%）
平均错误率	29.55%	26.53%	33.16%	31.86%
原始错误率	29.72%	29.17%	32.07%	31.52%
通过表4-10所示，采用十重交叉验证方法分别对模型一和模型三的训练集和 验证集进行分析，得到的平均错误率均与原始错误率差距很小，说明建立的购买 流失行为预测模型具有一定的稳定性。
37
4.2.	Pareto/NBD模型预测客户购买次数
4.2.1.	Pareto/NBD 预演模型
4.2.1.1.	模型定义及基本假设
Pareto/NBD模型是由Schmittlein et al.(1987)提出，主要是用于描述非契约 客户关系情景下客户重复购买行为的模型14叫模型主要是用来以概率模型求出 预期购买次数和客户活跃度P(active)。在模型中我们假设客户未来产生的多次购 买行为的时间是任意的，客户可以很自由的实施购买行为。并且客户流失也是随 机概率事件，事先不能够知道这些客户是否流失、何时流失，所能了解到的就是 该客户在观察期内没有再次发生购买行为。运用模型Pareto/NBD模型之前，本 文首先对模型本身适用所应具备的条件做了一下分析。
Pareto/NBD模型的提出基于以下5个基本假设：
(1)客户个体重复购买交易过程可以用泊松分布描述，用人表示个体客户 的长期的重复购买率，在客户活跃的情况下，某一个体客户在时间t内发生x次 交易的概率为：	，田
P (X(T)=x|九)=吗：”,x = 0,l,2,……	公式(4-9)
(2)购买率人在不同客户中服从g (丫，a)分布，其中Y、a为分布参数。
gGMY,a)=	公式(4-10)
参数¥是描述客户间交易率差异性大小的指标，y值愈大，客户间交易率的 差异性就愈大，反之亦然。
(3)客户个体从首次购买到离开企业的时间服从流失率为口的指数分布。
F(6|Q = |ie-g	式
(4)不同客户间的流失率口服从9 (s, B)分布，其中s、6为分布参数。
邛
g(N IS, B)=	—	公式(4-12)
参数S是客户间流失率差异性大小的指标，S值愈大，客户间流失率的差异性 就愈大，反之亦然。
(5)客户购买率人和客户流失率口独立。
假设一中的建模对象是客户个体重复购买次数，即若用户在一天内的购买次 数超过一次，则重复购买次数仍按一次计算。大实证发现(MoEson, 1988)证 明Pareto/NBD模型刻画 “次数”比刻画“量”更有效囤，深层原因在于服从
38
泊松分布的事件单位时间内出现两次及其以上概率可忽略不计，因而本文选择刻 画客户个体重复购买次数。
假设三使用了经典的寿命分布——指数分布用于刻画个体户生存时长，假设 二和四分别使用伽玛分布刻画用户间行为上存在的异质性，由于伽玛分布的概率 密度曲线形状灵活多变，因而能较好体现用户间购买率和流失的差异。
4.2.1.2.	多数估计
本文采用最大似然方法进行参数估计,在全样本数据上估计Pareto/NBD模型 的参数a、B、y. so对于任意个体用户，如果客户在(0, T)内发生x次重 复购买，最后一次交易时间tx<T,则其未流失的概率为：
P (a、0、y, s|x, t , T) =^-^—-5-+(---Ao)}
P '	* r(Y) %+TF'(B+T). Y+s+x
公式(4-13) 当a时，
a-B
■E ( y+s+x. s+Ly + s + x + 1,.—)
a -	a + tx
"	(a + tjf*
(X - R 式(y+s+x,s + l,y + s + x + L ——
(a + T)f
公式(4-14)
当a VB时,
A。=
F](y+s+x,y + x,y + s + x + l,1~^) 2F1(y+s+x，y + x,y + s + x + 19~^)
(B+tJi
(p + T)Y+s+x
公式(4-15)
依据模型，本文利用目标客户的购买数据对客户的活跃度进行计算,根据计 算结果我们可以得到目标客户的活跃情况，这可以作为企业实施后续工作的参 考依据。企业可以根据客户活跃度值的大小情况，选择不同的营销策略，对客户 实现差别对待。从任意个体用户似然函数可知，模型需要估计的参数为：a、B、 y和S,而估计这些参数所需的输入数据集为(x,tx,T)。这三个变量的含义分别为: x为观察期内个体用户重复购买次数,tx为观察期内个体用户最近一次购买时间， T为观察期时长。假设本文选取的样中有N个用户，则这N个用户的似然函数 对数值总和为：
LL (a, |3, y, s) =£[ln[L(a,B,y,s|公式(4-16)
当该似然函数对数值总和取得最大值时，即可求得对应的四个参数值。
4.2.1.3.	模型预测公式
本文主要使用个体用户购买次数期望值、活跃度、购买次数的条件期望值三 项预测值，并通过这三项预测值检验模型效果，各项预测值的计算公式如下：
39
(0,t]时刻内，个体用户重复购买次数期望值的计算公式为：
E (X (t) |a,p,y,s)=辞万口一(前产]	公式(4T7)
活跃度是指观察期T时刻末用户仍冒,“存活”的概率，计算公式为：
P(8 > T| a,p,s, x,tx,T) = {] + (—)(a +Trx(p+T)» Ao}-,	公式(4-18)
用户购买次数的条件期望值是指浮看(x：tx,T)历史行为的个体用户在(T,T+t] 时刻内的购买次数期望值，计算公式为：
E(Y(t)|a,B,y,s,x,t,,T) = ^^^[l-^^' ]xP(5>T|a,p,Y,s,x,tx,T)	公式(4-19)
本文使用Matlab7.0实热模质的参数估计和个体用户购买次数期望值、活跃 度、购买次数的条件期望值的预测。
4.2.2.	Pareto/NBD 实证研究
4.2.2.1.	数据提取
本章节数据依然来源于大众点评网的数据，但重点关注的是2011年1月1 日到3月31日共90天在大众点评网上存在购买行为的用户，共涉及519名目标 用户。选取2011年1月1日至2011年6月共181天作为观察期，2011年7月1 日至9月30日共92天作为验证期。针对目标用户的id,本文在观察期中共提取 出3881条购买数据，在完成对同一用户在一天内发生的多次购买行为的处理工 作后，得到了 3458条(x, t。T)的数据集，同时将目标用户初次购买的天数定为0。 具体的建模过程如下图所示：
-	用户样本提取期	》
♦一 一 '	建模期	一	验证期	》
图4-6样本数据获取
样本包括以下数据：
x：表示个体用户在2011年1月1日至2011年6月30日共181天的重复购买次 数，单位：次。
T：表示用户初次购买时间与观察期截至时间(2011年6月30日)的间隔，单 位：天。
tx：表示在[0, T]时间段内，用户最后一次购买的时间，单位：天。
例如：对于2011年1月1日初次购买的用户，T=181。如果这名用户在观察期 内的最后一次购买行为发生在2011年1月30日，那么tx=30o
X2：表示用户在2011年7月1日至2011年9月30日重复购买的次数，单位: 次。
40
4.2.2.2.	结果分析
1、模型参数预测结果
本文使用最大似然估计法对Pareto/NBD模型进行参数估计，并选择 Matlab7.0作为参数估计及预测的工具，通过在MatlabZO编写程序，计算出样 本的参数值a, B, Y和s如下表所示：
表4-11参数估计值
参数名	a	0	Y	s
参数值	20	8.8865	0.5887	0.0001
通过计算，可以得到最大似然函数对数值总和LL为7658.8。从参数估计 结果来看，当客户处于活跃期时，意味着该网站客户的平均购买率和流失率为： (1)购买率：X =y/a=0.029
(2)流失率：P=s/|3=0.00001
从客户之间的异质性而言，Y值较小意味着用户之间的购买率差异很小；s 较小意味着流失率差异较小。
2、模型预测结果
最后将估计出的参数值连同据集(x,tx,T)代入各项预测值公式求得各项预测 值，本文在计算出(0,t］时刻内个体用户购买次数的期望值之后，在此基础上计算 出观察期和验证期共273天内所有目标用户每天的累计购买次数期望值，并将结 果与实际值进行比较。图4-7为所有目标用户每天的累计购买次数期望值与实际 的比较结果：
实际累计购买次数
Pareto/NBD 模型
图4-7累计购买次数
图4-7虚线左侧为建模期，右侧为验证期。从总体趋势来看，Pareto/NBD 模型很好的预测出了实际累计购买次数的变化趋势，取得了较好的拟合效果。而 且由图4-7可以看出，随着天数的增加，Pareto/NBD模型的预测值与实际累计购 买次数值之间的差距愈来愈小。不足之处在于Pareto/NBD模型的预测值在前期 整体略低于实际累计购买次数。
41
本文通过用户活跃度的计算公式，计算出每个目标用户的活跃度之后，在此 基础上计算出观察期内具有相同购买次数的目标用户的平均活跃度，并将结果与
购买次数	实际活跃度	Pareto/NBD 模型
0	0.34848	0.99944
1	0.61321	0.99963
2	0.68421	0.99988
3	0.78182	0.99987
4	0.75862	0.99992
5	0.91176	0.99988
6	0.88235	0.99995
7	0.92308	0.99995
8	0.875	0.99997
9	1	0.99999
10	0.88889	0.99999
11	1	0.99999
12	1	0.99995
13	1	0.99999
具体来说，由图4-8和表4-12可以看出，Pareto/NBD模型的预测结果并不 理想，随着用户重复购买次数的变化，Pareto/NBD模型对于用户活跃度的预测 值一直非常接近1,而且并不随用户重复购买次数的变化呈现出规律性的变化趋 势。而用户的实际活跃度情况则是随着购买次数的增加用户的活跃度也会相应提 高，因此对于用户活跃度的Pareto/NBD模型整体预测效果非常不理想。
在计算出购买次数的条件期望值之后，本文又在此基础上计算出建模期内具 有相同购买次数的用户在验证期内购买次数的平均值，并将结果与实际值进行比
较，如图如9：
42
5 0 5 0 5 0
2 2 11
疑第眯跌国理赛以畲
—实际验证期内用户 购买次数
——Pareto/NBD 模型
0 1 2 3 4 5 6 7 8 9 10111213
建模期用户购买次数
图4-9购买次数的条件期望图
表4-13购买次数的条件期望值
建模期内用户购买次数	实际验证期内用户购买次数	Pareto/NBD 模型
0	0.7879	0.7265
1	1.3868	1.9269
2	1.807	3.0573
3	2	4.4029
4	2.5172	5.3081
5	2.8824	6.4535
6	3.3529	7.5295
7	3.7308	8.8214
8	5.4375	9.9612
9	6.1111	10.6489
10	5	12.9202
11	5.8	11.3626
12	6.2857	12.5592
13	10	20.7258
从图4-9和表4-13可看出，Pareto/NBD模型很好地反映了实际值的变化趋 势。并且随着观察期内用户重复购买次数的不断增大，Pareto/NBD模型的预测 值与实际值同时发生了上下波动情况。不足之处在于，由表4-13可看出，除用 户在观察期内重复购买次数为0的情况之外，Pareto/NBD模型的预测值相比用 户实际购买次数的条件期望值偏大，而且随着用户在观察期内重复购买次数的不 断增大，Pareto/NBD模型的预测值与实际值之间的差距也在不断拉大，模型整 体的预测效果并不是非常理想。
通过上述结果分析发现采用Pareto/NBD模型对大众点评网用户购买行为进 行预测时，除了对用户活跃度的预测有较大的误差外，对消费者每天累计购买次 数和购买次数的条件期望的预测值均能较好的反映预测趋势，取得了相对较好的 预测效果，因此证明了该模型在进行大众点评网消费者购买行为预测时具有可行 性。但是Pareto/NBD模型仍有不足之处，具体体现在对于活跃度的预测上。因
43
此本文接下来会尝试对Pareto/NBD模型引入协变量，改进原模型。
4.2.3.	Pareto/NBD
4.2.3.1.	改进方法和原理
在具体讨论引入的协变量之前，本文先对引入协变量的方法和原理进行介绍。 根据Fader等(2007)的推导，在Pareto/NBD模型中加入协变量只需将参 数a和B作如下替换
a =。02邛(一产'1为)	公式(4-20)
6 =邛(一，’24)	公式(4-21)
Z1和Z2分别为调节用户间发文行为和流失行为异质性的协变量向量，力和 了2分别为两个协变量向量的系数向量，原模型参数I和S保持不变。
这种改进方法使用了比例危险模型(Proportional Hazards Models, PHM)的 思想，最常见的PHM,公式为：
h(t\e,Y，Zt) = /i0(t|e)exp(/z)	公式(4-22)
面⑶。)为原概率分布的危险函数，起着“基准线”的作用，Z代表对基准线 造成影响的协变量，起着调节基准线的作用，y为z的系数，决定z的影响程度。 根据这种思路，Fader等(2007)经过推导得出，只需将参数a和。作如上替换 即可成功引入协变量［4汉
4.	2. 3. 2.引入协变・
根据第四章第一节的研究结论，已经发现消费者的最高购买金额和评论次数 会对消费者的流失行为产生影响。，基于此，本文选取了目标个体用户在观察期的 总评论次数和最高购买金额两个变量作为预测用户购买行为的协变量。这两个变 量已在数据的获取阶段进行了搜集，由于它们的数值在不同用户间的差异比较大, 若直接将它们作为协变量代入到似然函数中，求极值时容易出现异常的值而导致 循环中断，因而本文在进行参数估计前使用了 Max-Min标准化方法对总评论次 数和最高购买金额这两个协变量的数据进行标准化处理。	-
为了观察各协变量对个体用户的行为规律产生的影响，本文做了以下三组实 验：
1	.假设总评论次数对流失行为影响显著，使用总评论次数作为流失行为的协变 量，即 6 = B oexp(-yitc)；
2	.假设总购买金额对流失行为影响显著，使用总购买金额作为流失行为的协变 量，即 B = B 0exp(-y2tp)。
3	.假设总评论次数和总购买金额对流失行为影响显著，使用标准化后的总评论
44
次数和总购买金额之和作为流失行为的协变量，即B = Boexp[-y2 Q+tp) ]o
其中tc和tp分别为总评论次数和最高购买金额做了 Max-Min标准化处理后 的数据，力、yz和丫3分别协变量向量的系数向量，原模型z中的参数Y和s保 持不变。实验结果发现，这三组的实验结果均比较显著地提高了原Pareto/NBD 模型的预测效果，这其中尤以第三组模型的改进结果最好。接下来，本文将分别 展示模型改进的效果。
4.2.3.3.改阚果展示
以下实证结果列举了 Pareto/NBD模型的预测结果和上一节假设中引入协变 量后模型的预测结果，并将其与实际值进行对比。三组假设涉及到“假设总评论 次数对流失行为影响显著，使用总评论次数作为流失行为的协变量”、“假设最高 购买金额对流失行为影响显著，使用最高购买金额作为流失行为的协变量”以及 “假设总评论次数和最高购买金额对流失行为影响显著，使用标准化后的总评论 次数和最高购买金额之和作为流失行为的协变量”的模型预测结果。
—实际累计购买次数
—引入总评论次数
—引入最高购买金额
——Pareto/NBD 模型
----评论次数+最高购买金额
图4-10累计购买次数预测结果
具体来说，上图为所有用户每天累计购买次数的几组实验的预测结果，虚线 左侧为建模期，右侧为验证期。从总体趋势来看，在对所有用户每天累计购买次 数进行预测时，几组的模型预测效果均比较理想，但是在前期所有实验小组的预 测模型结果相比实际每天累计购买次数均偏低，但是随着天数增加其差距逐渐减 小。同时将总评论次数和最高购买金额作为用户流失行为的协变量，引入到 Pareto/NBD模型中的预测结果也能很好的反应出用户实际每天累计购买次数的 变化趋势。综上所述，以上几组模型对于用户每天的累计购买次数的预测效果均 比较理想。
45

重复购买次数
一实际活跃度
-"Pareto/NBD 模型
—引入总评论次数
一引入最高购买金额
一总评论次数+最高购买金 额
图4-11用户活跃度
图4-11为各组实验改进的观察期内具有相同购买次数的用户的平均活跃度 值与活跃度的经验值比较结果。由上图可以看出，在“假设总评论次数和最高购 买金额对流失行为影响显著，使用标准化后的总评论次数和最高购买金额之和作 为流失行为的协变量”的实验结果不仅对原Pareto/NBD模型起到了改进作用， 而且相对于单独引入总评论次数和最高购买金额的预测值而言，也起到了一定程
度上的改进作用。虽然同时引入总评论次数和最高购买金额作为流失行为的协变 量与只将用户最高购买金额作为用户流失行为的协变量引入Pareto/NBD模型中 的模型预测结果相似，但是由上图可以明显看出引入单个协变量的模型预测数据 结果随着用户重复购买次数的变化增长比较平缓，同时引入两个协变量能更好的 反映出活跃度经验值的波动情况
5 0 5 0 5 0
2 2 11
验证期用户购买次数
实际验证期内用户购买次数
Pareto/NBD模型结果
引入最茴购买金额
引入总评论次数
总评论次数+最高购买金额
建模期用户购买次数
图4-12用户购买次数条件期望
由图4-12可看出，同时将用户总评论次数和最高购买金额作为用户流失行 为的协变量引入到Pareto/NBD模型中时，相比引入单个协变量的模型预测结果 起到了改进作用，并在很大程度上对原Pareto/NBD模型的预测结果进行了改进。
46
其中在建模期用户重复购买次数小于11时，几组模型预测结果相差不大；但是 当建模期内用户的重复购买次数大于11时，“假设最高购买金额对流失行为影响 显著，使用最高购买金额作为流失行为的协变量”的实验结果发生了较大程度的 波动，而“假设总评论次数对流失行为影响显著，使用总评论次数作为流失行为 的协变量”的模型预测结果比较理想。“假设总评论次数和最高购买金额对流失 行为影响显著，使用标准化后的总评论次数和最高购买金额之和作为流失行为的 协变量”的模型预测结果相对单独引入两个协变量的预测结果进行了调和，同时 加入两个协变量的情况很好的预测出来用户实际购买次数条件期望值的变化趋 势。但是同时引入总评论次数和最高购买金额两个协变量的模型预测结果仍有不 足之处，其整体预测结果比实际值偏低。
4.3.本章总结
本章从个体层面进行消费者购买行为的研究。首先采用Logit计量经济学模 型将用户自身的点评行为和购买行为结合起来，考虑用户的自身因素、点评行为 以及评论行为对消费者下一阶段购买流失行为的影响作用，并且发现消费者评论 次数对下一阶段购买流失的影响依赖于用户在团购平台的购买次数，当评论次数 越多时，下一阶段消费者越不容易产生购买流失，证明了点评平台对团购平台的 影响情况，进一步发现了最高购买金额和评论次数对用户购买流失行为的影响并 且更加精确的对消费者的购买流失行为进行了预测；其次以Pareto/NBD模型为 基础，对其引入协变量，提出了改进后的Pareto/NBD模型，并且发现同时引入标 准化后的“最高购买金额和总评论次数”对模型的改进效果最明显，从而更加精 确的消费者的购买次数进行预测。
47
第五章基于购买行为的客户评论次数预测
本章节继续从个体层面出发，对评论价值进行计算。第一步先构建Logit回 归分析模型进行影响客户评论流失的影响因素并利用Logit模型进行客户评论流 失行为预测；第二步将找到的关键变量作为协变量引入Pareto/NBD模型中，改 进客户的评论次数预测。具体分析框架如下图所示：
评论价值
评论次 数预测
回归模型找到重 点因素
Pareto/NBD 改进
预测次数
图5-1第五章整体分析框架
5.1.	Logit回归模型预测客户评论流失
5.1.1.	Logit回归模型概念框架
根据上一章的研究可以发现消费者的评论行为会对其自身的购买行为产生 影响。同样的，消费者自身的购买行为可能也会对其评论行为产生影响。在 Web2.0时代下，越来越多的消费者倾向于在产生购买行为后进行评价，用户产 生的购买情况越多，其发生评论行为的几率也会增加，这使得企业在进行用户评 论行为流失时能够更加全面的进行因素的考虑，进而进一步完善消费者评论流失 的预测模型。目前，还未有研究者对消费者的评论流失行为进行预测。因此，本 文延续上一章的研究研究框架，引入消费者的当前评论行为和当前购买行为，重 点研究消费者自身购买行为是否会对其评论流失行为产生影响以及以及是否能 够提高用户评论流失的预测准确性。基于此，本文提出的概念模型框架如图5-2 所示，其中消费者当前的购买行为和当前评论行为为自变量，消费者下一阶段的 评论流失行为为因变量，消费者自身因素为控制变量：
48
自变量	因变量
图5-2概念模型
5.1.2.	Logit回归模型建立
5.1.2.1.	基本模型
同样的，为了了解用户当前期的评论行为、购买行为以及其自身因素对消费 者下一阶段的评论流失行为的影响，建立更加精准的流失预测模型，本章同样建 立了基于用户评论流失行为的Logit回归分析模型，研究所需数据依旧采用大众 点评网的数据进行分析和研究。
消费者的评论流失模型主要是对消费者评论流失的影响因素进行分析及预 测的模型。该模型的因变量为用户下一阶段的消费者评论流失情况（Churnit） = 该模型的自变量包括了消费者当前购买行为以及消费者当前评论行为，控制变量 为消费者的自身因素。由于消费者的流失行为是一个二分变量（仅有流失：1和 未流失：0两个状态），因此本文采用Logit回归模型进行分析。消费者的评论流 失预测模型的基础公式为：
Churn u =	公式（5-1）
Lit = aPurchaselt^1 + fiCommenti^^ + OUser1 +	公式（5-2）
其中，Churns代表用户i在下一阶段的评论流失概率，是一个二分变量； Purchasegi是用户i在当前期的购买行为信息，例如购买金额、购买次数等； Commenti.i是用户i在当前期的评论行为信息，例如评论次数，评论累计贡献 等；Usen作为控制变量是用户i的基本信息，例如用户的性别、年龄等，该信息 可以在大众点评网点评平台上提取。a,生。是三类自变量的系数，£ijt则是随机 误差项，它代表了因变量所受到的模型中所未能表示出来的潜在影响，它满足
〜N（0,（p）的假设。
5.1.2.	2.模型变■设计及统计
本章节的数据同样来源于在线评论网站大众点评网：随机选取了在2011年 1月1日至2011年6月30日期间产生评论行为的消费者，提取了这些消费者在 2011年1月1日至2011年6月30日在大众点评网产生的评论行为、购买行为
49
及人口统计学特征数据，作为自变量；同时选取了 2011年7月1日至2011年9 月30日这些用户的评论次数，同时认为在这3个月内消费者未产生评论行为即 认为产生了评论流失，记为1；产生了评论行为即认为未产生评论流失行为，记 为0。最终，本文选定了 589名大众点评网消费者，提取了这些用户的团购数据 和评论数据。本文自变量和因变量的提取时间划分如图5-3所示：
2011.1.1
购买数据、评论数据
评论流失or未流失
自变量提取期
一—因变量提取期
图5-3自变量、因变量提取期
1、模型因变量
同样的，大众点评网也能够为本章节的研究提供数据基础，即提供消费者在 一段时间内的所有评论记录，包括评论的次数、评论的时间、每次评论的贡献值 等，这使得我们对消费者的评论流失行为的研究成为了可能。依据本章所建立的 基本模型，将用户在下一阶段(3个月)的评论流失行为作为因变量。模型因变 量的列表如表5-1所示。
表5-1模型因变量描述
变量名	变量符号	变量描述
购买流失	Chum it	虚拟变量，表示消费者i在t时间内的 评论流失行为，其中未产生评论行为记 为1；产生评论行为记为0
具体的，本章节将消费者下一阶段(2011.7.1—2011.9.30)的评论流失行为 用Chum表示，是一个虚拟变量。若用户i在t时间内产生了购买行为，则定 义Churn ”的值为0；否则即认为产生了评论流失。
2、模型自变量
本章节将实证模型中所用到的自变量划分为了消费者当前期的评论行为和 购买行为两个维度。模型自-变量的列表如表5-2所示。
50
表5-2模型自变量描述
类型	变量名	变量符号	变量描述
评论行为	累积评论贡献值		表示在t-1时间段内消费者i的累计评论 贡献值(2011.1.1——2011.6.30)
评论最高贡献值		表示在t-1时间段内消费者i的单次评论 最高贡献值(2011.1.1 ——2011.6.30)
评论次数	C加	表示在t-1时间段内消费者i的累计评论 次数(2011.1.1——2011.6.30)
平均打分	Mean_scorejt.i	表示在t-1时间段内消费者i的平均打分 (2011.1.1——2011.6.30)
最后评论时间	CJasttiweiM	表示在t-i时间段内消费者i的最后一次 评论时间距分析节点的间隔天数(2011.1.1 ——2011.6.30)
第一次评论时间		表示在t-1时间段内消费者i的第一次评 论时间距分析节点的间隔天数(2011.1.1— —2011.6.30)
工作时间段评论次 数	Cworktime >]	表示在t-1时间段内消费者i的在周一到 周五上午9点到下午5点的总评论次数 (2011.1.1——2011.6.30)
凌晨评论次数	C_midnightjt,j	表示在t-1时间段内消费者i在0点-6点 的总评论次数(2011.1.1——2011.6.30)
白天评论次数	C_day.i	表示在t-1时间段内消费者i在8点-18点 的总评论次数(2011.1.1——2011.6.30)
晚上评论次数	C_nightit.i	表示在t-1时间段内消费者i在18点-24 点的总评论次数(2011.1.1——2011.6.30)
购买行为	累计消费金额	Gmit-i	表示在t-1时间段内消费者i的累计消费 金额(2011.L1——2011.6.30)
购买最大金额		表示在t-1时间段内消费者i的购买最大 金额(2011.1.1——2011.6.30)
购买次数	G船	表示在t-1时间段内消费者i的累计购买 次数(2011.1.1 ——2011.6.30)
工作时间段购买次 数-	G_worktimeit,i	表示在t-1时间段内消费者i的在周一到 周五上午9点到下午5点的总购买次数 (2011.1.1——2011.6.30)
凌晨购买次数	G_midnightjt.i	表示在t-1时间段内消费者i在0点-6点 的总购买次数(20H. 1.1——2011.6.30)
白天购买次数	G_dayi,.,	表示在t-1时间段内消费者i在8点-18点 的总购买次数(2011.1.1——2011.6.30)
晚上购买次数	Gnightjt.,	表示在t-1时间段内消费者i在18点-24 点的总购买次数(2011.1.1——2011.6.30)
同样的，本章节的自变量计数周期为2011.1.1至2011630,由大众点评网提
51
供。本文认为消费者的评论行为包括十个变量，分别为累积评论贡献值（用CmiM 表示）、评论最高贡献值（用Cm_topz表示）、评论次数（用表示）、平均 （用Mean Scoreit-i）打分、最后评论时间（用CJasttimeiM表示）、第一次评论 时间（用C_firsttimei7表示）、工作时间段评论次数（用C_worktimeit.）表示）、凌 晨评论次数（用C_midnightit.i表示）、白天评论次数（用C_dayii表示）和晚上 评论次数（用C_nightit-i表示）。
消费者的购买行为包括7个变量，分别为累计消费金额（用Cm沁1表示）、 购买最大金额（用Cm_topm表示）、购买次数（用C£•7表示）、工作时间段购买 次数（用C_worktimej□表示）、凌晨购买次数（用C_midnightg表示）、白天购 买次数（用C_day*-i表示）和晚上购买次数（用C_nightit.i表示）。
3、模型控制变量
本章节认为实证模型中的控制变量为消费者的自身因素。模型自变量的列表 如表5-3所不。
表5-3模型控制变量描述
类型	变量名	变量符号	变量描述
自身因素	性别	Age；	用户i的年龄，其中女表示为0；男 表示为1
年龄	Genderj	用户i的年龄信息
贡献值	Contribution1	用户i的整体贡献值，由点评网提供
根据大众点评网人口统计特征因素的提供情况，认为消费者自身因素包括三 个变量，即消费者的性别（用Gender表示）、年龄（用Ag］表示）以及对网站的 整体贡献值（用contributioni表示）。其中用户年龄（Age。及用户性别（Gender。两个 变量的值皆来源于用户在大众点评网上所填写的个人资料；网站的整体贡献值 （contribution。来源于大众点评网对用户行为的评分值。
5.1.2.3.	流失预测模型--未考虑购买行为模型构建
本文首先提出仅考虑消费者自身因素和消费者评论行为的评论流失预测模 型。最终本文确定出消费者的性别、年龄、消费者贡献值、累积评论贡献值、评 论最高贡献值、评论次数、最后一次评论时间、第一次评论时间、工作时间段评 论次数、白天评论次数、晚上评论次数以及凌晨评论次数这13个指标作为本文 研究的待选解释变量。
Churn = G^aget + 029en^ert + 03Contributiont +	+ ^2Cm_topit..A 4- mCft.i +
^CJasttimeit^ + ^5C_firsttimeit^ 4- /26C-worktimeff_1 + ^Cjnidnighti^ + ii3C_dayit^ + ^Cjiighti^ + ii^MeanJcoreit^ 十方并	.	公式（5-3）
52
5.1.2.4.	购买逢失砌X~~综合考虑评论及购奖行为胭构建
本文接下来引入消费者的购买行为，提出综合考虑考虑消费者自身因素、消 费者购买行为以及消费者评论行为的评论流失预测模型。在公式5-3的基础上， 进一步提出了包括累计消费金额、购买最大金额、购买次数、工作时间段购买次 数、白天购买次数、晚上购买次数、凌晨购买次数共计20个指标作为解释变量 的综合模型，具体模型如公式5-4所示： Churnit = %aget + O2gendert + d3Contributioni +	+ ^2CmJ°Pu-i +	+
li^CJasttimei^ + n3C_firsttimeit^ + ii6C_worktimeit_t + fi7Cjnidnightit^ + /^C—day 江一i + NgC.night 江一i + n1QMean_Scoreit^ + aiGm 让 + a2Gmjopit^ +	+
a^Gj^orktimeit^ + a5 G_midnightit^ + a6Gjdayit-x + ayGjiighti^ + %	公式(5-4)
5.1.3.	模型分析结果
5.1.3.1.	模型检验
同样的，在本章节构建评论流失预测模型之前，也要对各变量间进行多重共 线性检验：若VIFW10,则说明变量间不存在共线性。通过图5-4可以发现评论 次数、白天评论次数、晚上评论次数、凌晨评论次数、工作时间段评论次数、累 计购买次数、白天购买次数、工作时间段购买次数、累积评论次数和凌晨购买次 数的VIF均大于10,变量间存在共线性。因此采用同样的方法，利用逐步回归进 行变量处理与筛选，消除变量间的共线性，同时得到影响消费者评论流失的核心 变量，具体结果如下节所示。
表5-4VIF因子分析
Variable	VIF	1/VIF	Variable	VIF	1/VIF
Cfit-i	3036.00	0.0003		9.32	0.1073
CdayiH	1491.62	0.0007	Gmtop it-i	4.34	0.2302
CnightiM	547.65	0.0018	Gnightin	4.13	0.2419
Gfit.i	44.24	0.0226	Clasttimeit-i	1.94	0.5143
G_dayit.]	34.88	0.0287	Cfirsttimejn	1.90	0.5276
CmidnightiM	31.13	0.0321	Contributionj	1.80	0.5562
Cworktimejt.i	15.63	0.0640	Cmtopit-i	1.38	0.7272
GworknightiM	14.72	0.0679	Gender；	1.08	0.9285
Cmit-i	14.46	0.0692	Age,	1.04	0.9607
G_midnightit-i	10.09	0.0991	MeanScoreiM	1.02	0.9768
5.1.3.2.	结果分析
(1)训练集结果分析
同上一章的思路相同，本章也将数据集按8:2的比例对总体样本进行训练集
53
和验证集的划分，其中训练集包括：471用户，其中评论流失的用户有278名, 未流失的用户为193名；验证集包括：118名用户，其中购买流失的用户有67名, 未流失的用户为51名。在进行逐步回归后具体分析结果如表5-5所示：
表5-5模型结果——训练集
Chum'	模型一	模型二
Lastcomment	0.012*** (0.003)	0.012*** (0.003)
Firstcomment	-0.009*** (0.003)	-0.010*** (0.003)
Cm/Cf	0.258*(0.140)	0.254* (0.144)
MeanScore	-0.188*(0.106)	-0.193* (0.108)
Gm/Gf		0.008** (0.003)
Gm top		-0.003** (0.001)
Night_g		-0.318** (0.123)
Contribution	-0.005*** (0.001)	-0.005*** (0.001)
_cons	1.241**(0.557)	1.289** (0.578)
obj.	471	471
LR chi2(5)	122.85	138.73
Count R2	0.722	0.732
AIC	1.128	1.107
表5-5表示训练集的消费者评论行为预测Logit回归模型结果分析。其中模 型一表示公式5-3经过逐步回归后的因素影响结果；模型二表示公式5-4经过逐 步回归后的因素影响结果。通过对模型一的结果进行分析发现当仅考虑消费者自 身因素和当前期评论行为时，消费者贡献值(0尸-0.005)、平均评论贡献值 (m=0.258)、最后一次评论时间(%=0.012)、第一次评论时间(为=-0.009)、和 平均打分(同=-0.188)会显著影响消费者下一阶段的评论流失情况。
其中，消费者在点评网的贡献值(eiContributioniji)对于消费者的评论流 失行为有显著的负向影响。这说明消费者在点评网的贡献值越大，其在下一阶段 的评论流失可能性越小。同样的，消费者的第一次评论时间(U3C_firsttimeitT) 和平均打分(MMean-Scoregi)与其下一阶段的评论流失行为也为显著负相关。 这说明，消费者第一次评论时间距分析时间点的距离越大，用户使用点评平台的 时间约长，其越不容易产生评论流失行为；对于用户打分情况而言，用户对店家 的平均打分值越高，代表用户对点评网店家的印象越好，越不容易产生评论流失 行为。而消费者的平均评论贡献值(gCm/Cfit_i)和最后一次评论时间 (LJlassttimegP则与消费者在下一阶段的评论流失行为有显著的正向影响。 其中，消费者的平均评论贡献值越大，说明其评论的越详细也越全面，那么用户 有可能在下一阶段不太有意愿去再次进行评论，有可能会产生评论流失行为；而
54
对于最后一次评论时间而言，消费者的最后一次评论时间距分析时间点越近，说 明其越活跃，越不容易产生评论流失行为。
通过对比模型二和模型一则发现综合考虑用户自身因素、当前期评论行为和 当前消费者的购买行为时，发现除了上述评论因素会影响用户的评论流失外，购 买行为同样会对消费者下一阶段的评论流失行为产生影响，即平均购买金额 （%（器）让-1）、最高购买金额（a2G以及夜间购买次数（a3G_nightit_i）。 其中平均购买金额与消费者下一阶段的评论流失行为呈显著正相关性。这说明， 消费者当前期平均购买金额越多，其下一阶段越有可能产生评论流失行为。而最 高购买金额和夜间购买次数均与下一阶段的评论流失行为呈显著负相关性。
综上所述，本文最终构建了用户购买流失预测模型，具体如公式5-5所示：
Churnit = Contribution! +	+ NzCJasttimeitT +
H3C_firsttimeit_i + 卜4Meaii-Scorejt-i +。1（智）让一1 + a2Gm_topit_1 +
a3G_nightit_1 4-固t	公式（5-5）
即消费者的贡献值、平均评论贡献值、最后一次评论时间、第一次评论时 间、平均打分、平均购买金额、最高购买金额以及夜间购买次数会对下阶段的评 论流失行为产生影响。
（2）模型预测准确度对比
在本节，同样采用如4.1.3所示的预测命中率来进行模型预测准确度的对比， 具体计算公式如公式4-8所示。基于此，本文将模型一仅考虑评论和消费者自身 因素的模型预测结果与模型二综合考虑三方面因素的模型预测命中率进行对比, 发现对于训练集和验证集而言，模型二对评论流失行为预测和评论未流失行为的 预测的命中率均有了提高，具体结果如表5-6所示：
表5-6预测命中率对比
训练集,				验证集
模型一		模型二		模型一		模型二
流失	未流失	流失	未流失	流失	未流失	流失	未流失
流失	238	33	239	32	66	8	66	8
未流失	98	102	92	108	25	19	19	25
预测命中 率	70.8%	75.6%	72.2%	77.1%	72.5%	70.4%	77.6%	75.8%
55
78.00%
77.00%
76.00%
75.00%
74.00%
73.00%
72.00%
71.00%
70.00%
69.00%
68.00%
67.00%
图5-4训练集命中率
80.00%
78.00%
76.00%
74.00%
72.00%
70.00%
68.00%
66.00%
图模型一 法模型二
图5・5验证集命中率
综上所述，通过分析可以发现消费者当前的购买行为会对该消费者下一阶段
的评论行为产生影响，同时引入购买行为的用户评论流失预测命中率也有了提高。 但是与上一章一样，由于样本数据较小，使得预测效果的提升度并不是特别高。 因此同样的，在接下来的章节会采用十重交叉验证的方法对模型稳定性进行验证。
5.1.3. 3.十重交叉骐证
十重交叉验证的方法具体参见4.133章节，最终我们得到求平均后整体验证 集的平均误差率，具体结果如表5-7所示：
56
表5-7十重交叉验证
训练集	验证集	训练集	验证集
模型一	模型二	模型一	模型二
(1)	错判18个 （错误率:37. 5%）	错判14个 （错误率:29. 2%）	错判36个 （错误率:30. 5%）	错判31个 （错误率：26.3%）
(2)	错判14个 （错误率:29. 8%）	错判12个 （错误率:25. 5%）	错判35个 （错误率:29. 7%）	错判32个 （错误率：27.1%）
(3)	错判7个 （错误率：14.9%）	错判7个 （错误率：14.9%）	错判35个 （错误率：29. 7%）	错判36个 （错误率:30. 5%）
(4)	错判10个 （错误率:21.3%）	错判9个 （错误率：19.1%）	错判35个 （错误率：29. 7%）	错判35个 （错误率:29.7%）
(5)	错判14个 （错误率:29. 8%）	错判16个 （错误率:34.0%）	错判35个 （错误率:29. 7%）	错判37个 （错误率:31.4%）
(7)	错判13个 （错误率：27. 7%）	错判13个 （错误率:27.7%）	错判35个 （错误率:29. 7%）	错判32个 （错误率：27. 1%）
(8)	错判16个 （错误率：34.0%）	错判15个 （错误率:31.9%）	错判29个 （错误率：24.6%）	错判29个 （错误率:24.6%）
(9)	错判15个 （错误率:31.9%）	错判14个 （错误率:29. 2%）	错判36个 （错误率：30. 5%）	错判32个 （错误率：27. 1%）
(10)	错判17个 （错误率:36. 2%）	错判15个 （错误率：31.9%）	错判33个 （错误率:30. 0%）	错判33个 （错误率：30.0%）
平均错误率	29.08%	27. 11%	29. 55%	28.35%
原始错误率	27.8%	26. 3%	27.9%	22.9%
通过表5-7所示，采用十重交叉验证方法分别对模型一和模型二训练集和验 证集进行分析，得到的平均错误率均与原始错误率差距很小，说明建立的评论行 为预测模型具有一定的稳定性。
5.2. Pareto/NBD模型预测客户评论次数
本节同样采用Pareto/NBD模型和其改进模型对客户评论次数进行预测，基 本模型思路具体参见421和423。首先，本文先进行基本Pareto/NBD模型的预 测分析。
5.2.1. Pareto/NBD 实证研究
5. 2.1.1.数据提取
同第四章一样，本章节数据依然来源于大众点评网的数据，重点关注2011 年1月1日到3月31日共90天在大众点评网上存在评论行为的用户，共获得378 名目标用户。选取2011年1月1日至2011年6月共181天作为观察期，2011年
57
7月1日至9月30日共92天作为验证期。针对目标用户的id,在完成对同一用 户在一天内发生的多次购买行为的处理工作后,得到了 1994条(x,tx,T)的数据集, 同时将目标用户初次购买的天数定为0。具体的建模过程如下图所示：
用户样本提取期---
----------
验证期
图5-6样本数据提取期
样本包括以下数据：
x：表示个体用户在2011年1月1日至2011年6月30日共181天的重复评 论次数，单位：次。
T：表示用户初次评论时间与观察期截至时间(2011年6月30日)的间隔, 单位：天。
tx：表示在［0, T］时间段内，用户最后一次评论的时间，单位：天。
X2：表示用户在2011年7月1日至2011年9月30日重复评论的次数，单 位：次。
5.2.1.2.结果分析
1、模型参数预测结果
通过Matlab7.0计算出样本的参数值a , p , 丫和s如下表所示:
表5-8参数估计值
参数名	a	P	Y	s
参数值	10.5359	13.4031	0.5364	0.2867
通过计算，可以得到最大似然函数对数值总和LL为6038。从参数估计结 果来看，当客户处于活跃期时，意味着该网站客户的平均购买率和流失率为：
(1)购买率：入=y/a=0.051
(2)流失率：U = s/p=0-0214
2、模型预测结果
本文在计算出(0R时刻内个体用户评论次数的期望值之后，在此基础上计算 出观察期和验证期共273天内所有目标用户每天的累计评论次数期望值，并将结 果与实际值进行比较。图5-7为所有目标用户每天的累计评论次数期望值与实际 的比较结果：
58
图5-7虚线左侧为建模期，右侧为验证期。从总体趋势来看，Pareto/NBD 模型的整体走势与水累计评论次数的走势相似，能较好的预测出实际累计评论次 数的变化趋势，有较好的拟合效果。而且由图5-7可以看出，随着天数的增加， Pareto/NBD模型的预测值与实际累计评论次数值之间的差距愈来愈小。不足之处 在于Pareto/NBD模型的预测值在前期整体低于实际累计评论次数。
本文通过活跃度计算公式，计算出每个目标消费者的活跃度后，计算出观察 期内具有相同评论次数的目标用户平均活跃度，并将结果与实际情况进行比较,
59
表5-9用户活跃度预测值
评论次数	实际活跃度	Pareto/NBD 模型
0	0.22	0.31
1	0.39	0.50
2	0.46	0.59
3	0.58	0.60
4	0.78	0.62
5	0.67	0.41
6	0.43	0.68
7	1.00	0.83
8	0.75	0.50
9	1.00	0.97
10	0.75	0.59
11	0.60	0.40
12	1.00	0.75
13	0.88	0.76
具体来说，通过对图5-8和表5-9的分析可以发现，Pareto/NBD模型的预测 结果较理想，随着用户重复评论次数的变化，Pareto/NBD模型对于用户活跃度的 预测值与实际值的变化趋势基本一致，且随着用户重复评论次数的变化呈现出规 律性的变化趋势，因此对于用户活跃度的Pareto/NBD模型整体预测效果较理想。
在计算出评论次数的条件期望值之后，本文又在此基础上计算出建模期内具 有相同评论次数的用户在验证期内评论次数的平均值，并将结果与实际值进行比 较，如图5-9：
42086420
111
图5-9评论次数的条件期望图
60
表5-10评论次数的条件期望值
建模期内用户购买次数	实际验证期内用户评论次数	Pareto/NBD 模型
0	0.43	0.13
1	0.82	0.61
2	0.84	1.15
3	1.21	1.57
4	2.33	1.96
5	1.44	1.43
6	1.14	2.92
7	3.43	5.08
8	3.75	2.97
9	5.00	5.54
10	4.50	4.30
11	2.80	2.91
12	4.75	5.92
13	7.28	11.68
从图5-9和表5-10可看出,Pareto/NBD模型很好地反映了实际值的变化趋势。 并且随着观察期内用户重复购买次数的不断增大，Pareto/NBD模型的预测值与实 际值同时发生了上下波动情况。但是不足之处在于，由表5-10可看出，Pareto/NBD 模型在观察期内重复购买次数超过11次后，其与实际情况的差距较之前评论次 数的差距不断拉大，最后部分的模型预测效果要高于实际值。
通过上述结果分析发现采用Pareto/NBD模型对大众点评网用户购买行为进 行预测时，对用户活跃度的预测和对消费者评论次数的条件期望的预测值均能较 好的反映预测趋势，但是对于消费者每天累计评论次数的预测情况在验证期有一 定差距但是在验证期的预测差距在逐渐缩小，整体而言Pareto/NBD取得了相对 较好的预测效果。因此也证明了该模型在对大众点评网的用户进行评论行为预测 时具有很强的适应性和可行性。但是Pareto/NBD模型仍有不足之处，具体体现 在对于消费者每天累计评论次数的预测上。因此本文接下来会尝试对Pareto/NBD 模型引入协变量，改进原模型。
5.2.2.	Pareto/NBD 改进模型
5.2.2.1.	引入协变■
根据第五章第一节的研究结论，已经发现消费者的平均购买金额和平均评论 贡献值会对消费者的评论流失行为产生影响。基于此，本文选取了目标个体用户 在观察期的平均购买金额和平均评论贡献值两个变量作为预测消费者评论行为 的协变量。由于它们的数值在不同用户间的差异比较大，因而本文在进行参数估
61
计前同样使用了 Max-Min标准化方法对平均购买金额和平均评论贡献值这两个 协变量的数据进行了标准化处理，具体处理方法如公式3-4和3-5所示。
为了观察各协变量对个体用户的行为规律产生的影响，本文做了以下三组实 验：
1	.假设平均购买金额对流失行为影响显著，使用平均购买金额作为流失行为的 协变量，即 B = B oexp(-yitc)；
2	.假设平均评论贡献值对流失行为影响显著，使用平均评论贡献值作为流失行 为的协变量，即B = B oexp(-y2tp)。
3	.假设平均购买金额和平均评论贡献值对流失行为影响显著，使用标准化后的 平均购买金额和平均评论贡献值之和作为流失行为的协变量，即B = B oexp[-y2 (tc+tp)]=
其中％和%分别为平均购买金额和平均评论贡献值做了 Max-Min标准化处 理后的数据，yI、y2和丫3分别协变量向量的系数向量，原模型z中的参数丫和 s保持不变。实验结果发现，这三组的实验结果均与原Pareto/NBD模型的预测效 果相近，这说明这两个变量对评论次数预测的改进效果并不明显。接下来，本文 将具体展示模型改进效果。
5.2.	2.2.改进效果展示
以下实证结果列举了 Pareto/NBD模型的预测结果和上一节假设中引入协变 量后模型的预测结果，并将其与实际值进行对比。三组假设涉及到“假设平均购 买金额对流失行为影响显著，使用平均购买金额作为流失行为的协变量”、“假设 平均评论贡献值对流失行为影响显著，使用平均评论贡献值作为流失行为的协变 量”以及“假设平均购买金额和平均评论贡献值对流失行为影响显著，使用标 准化后的平均购买金额和平均评论贡献值之和作为流失行为的协变量”的模型预 测结果。
I 。 6 8 ' 6Tz 寸 9 I Z Z Z Z
--实际累计评论次数
--Pareto/NBD 模型
一引入平均评论贡献值
--引入平均购买金额
― 引入平均评论贡献值+ 平均购买金额
图5-10累计评论次数预测结果
具体来说，上图为所有消费者每天累计评论次数的几组实验的预测结果，虚 线左侧为建模期，右侧为验证期。从整体趋势来看，在对所有用户每天累计评论 次数进行预测时，Pareto/NBD模型及其改进模型的预测效果差别不大。这说明 引入协变量的模型并未对用户每天的累计购买次数的预测效果起到比较理想的 改进作用。
1 n
—实际活跃度
——Pareto/NBD 模型
一引入平均评论贡献值
■—引入平均购买金额
«一 引入平均评论贡献值+平均 购买金额
图5-11用户活跃度
图5-11为各组实验改进的观察期内具有相同购买次数的用户的平均活跃度 值与活跃度的经验值比较结果。由上图同样可以看出，引入平均评论贡献值、平 均购买金额以及同时引入平均评论贡献值和平均购买金额作为流失行为的协变 量与基础Pareto/NBD模型中的模型预测结果非常相似，并且都能够很好的对真 实值进行拟合。
63
42086420
111
实际验证期内用户评论次 数
Pareto/NBD 模型
引入平均评论贡献值
引入平均购买金额
引入平均评论贡献值+平均 购买金额
图5-12用户评论次数条件期望
由图5-12可看出，引入协变量的几个模型同原Pareto/NBD模型的预测结果 非常相近，同时都能够很好的对消费者的评论次数条件期望进行拟合。但是需要 注意的是，引入协变量的改进模型并没有更好的改进其预测效果。
综上所述，可以看到Pareto/NBD模型已经能够很好的对消费者的评论次数 进行预测，虽然通过上一节的Logit分析发现“平均购买金额”和“平均评论贡 献值”会对消费者的评论流失行为产生影响，但是在对Pareto/NBD模型引入协 变量后并没有能够更加有效的改进其预测效果。分析其原因，这可能是由于 Pareto/NBD模型已经能够较好的反应出预测效果，由于样本量较小的原因，使 得引入协变量的改进模型改进效果并不明显。
5.3.	本章总结
本章继续从个体层面进行消费者评论行为的研究。首先采用Logit计量经济 学模型综合考虑用户自身的购买行为和评论行为，研究用户自身因素、购买行为 以及评论行为对消费者下一阶段评论流失行为的影响，并且发现消费者平均购买 金额对下一阶段用户评论流失的影响为显著正向影响，当平均购买金额越多时， 下一阶段消费者越容易产生评论流失，证明了团购平台对点评平台的影响情况, 并且更加精确的对消费者的评论流失行为进行了预测；其次以Pareto/NBD模型 为基础，发现Pareto/NBD对消费者的评论次数预测效果很好，证明了该模型同 样适用于对消费者的评论次数预测；继而对其引入协变量，提出了改进后的 Pareto/NBD模型，但发现并未明显改善预测效果。经过分析，其主要原因可能 是由于本文采用的样本量较小，改进效果并不十分明显。
64
第六章客户消费金额及终身价值模型改进
本章节将基于前文的研究，首先进行客户消费金额的研究，即采用 Gamma-Gamma模型进行客户消费分析。最终从个体层面出发，将消费者的购买 价值与评论价值进行综合，构建基于评论行为的客户终身价值计算模型（其中评 论价值中涉及的评论金额分析不在本文的研究范围中）。具体分析框架如下图所 示：
个体层面,
购买价值	评论价值
购买金额；购买次数 评论次数评论金额
图6-1第六章整体分析框架
6.1.	Gamma-Gamma 模型
本章节在对客户消费金额进行分析时将采用更为合理的Gamma-Gamma模 型进行分析。在下面的章节中，本文将主要从消费金额模型的假设、似然函数的 构建以及模型结果输出这三个方面对Gamma-Gamma模型进行描述。
6.1.1.	胭假设
在构建本文的消费金额模型时，本文主要基于以下三个假设：
1	. 一名消费者每次的消费金额将围绕他的消费金额均值随机波动；
2	.不同消费者的消费金额均值存在差异，但同一名消费者的消费金额均值 不随时间发生变化；
3	.二名消费者的消费金额变化与其消费过程无关。
对于一名消费者，若他在观察期间内发生了 x次交易行为，令4*2,…,z,表 示每次消费金额，那么该名消费者所观察到的消费金额均值为（参见蔡瑞的论文 “半契约情景中客户终生建模”）：
一 X
z = £zjx.
i=l	公式（6-1）
其中，Z是对消费者潜在真实消费金额均值6的估计。本章建立的消费金额
65
模型最终目的就是利用观察到的Z来推断潜在的7 ,号终表示为E（Z|z,x）。
综上所述，我们首先利用x次消费金额值推导出I的分布函数。对于《究竟 服从何种分布，先前的研窕者通常是选择正态分布或伽玛分布。在本文中，我们 最终采用的是伽马分布来进行研究，原因主要有两点：（1） 4服从正态分布时其 取值可以小于0,这与实际的情况不符；（2）正态分布是对称分布，而实际的z， 分布明显右偏。
因此，基于上文三项假设，及对马分布的假设，本文所建立的消费金额模型
假设如下：
1	. 一名消费者的消费金额均值服从伽玛分布;
g{z\px,vx) =
(W 尸
公式(6-2)
2	.不同消费者的消费金额均值异质性服从伽玛分布:
g(v|%y) =
r⑷
公式(6-3)
由于两项假设均采用了伽玛分布，因此该消费者的消费金额模型通常被称为 Gamma-Gamma 模型。
接下来，分别对公式6-2和公6-3作进一步解释。假设1是依据Z，服从伽玛 分布推导而来，当一名消费者的每次消费金额服从伽玛分布时，公式为：
vpz
g（z,|p,v） = £——.
1磔）	公式（6-4）
依据伽玛分布卷积性质，X次交易行为的消费金额总额服从即如w（px,v）。 再依据伽玛分布标度性，Z就服从gammaSavx）。
而对于假设2,由于参数v是gm2777a（P，v）中的尺度参数，因此通过令其服从 另一伽玛分布，就可实现刻画不同消费者异质性的效果。
6.1.2.	构建似然函数
基于前文的两项假设，利用X次消费金额值所推导出的任一名消费者%的分 布函数就可表示为：
66
/（^"必了㈤二斤⑺Z 1
「3）
e-皿少t/", -------dv
r(q)

z xpx/「8?"+9-】"（尸三川如 r（8）r（q）J°
_ r(px + q) z>xXxpxyq
= r(px)r(^(z+xz)^

zB(px,q) y + xz y + xz
公式(6-5)
_ 而对于每一名消费者0 = 1，在观察期内其购买次数号和消费金额均值 ），可将其样本的对数似然函数构建为：
1 一
〃(p,g,y) = £ln[/(z, | p,q,y；xj] /=)
公式(6-6)
最后，将通过最大似然函数法求得5应，乃三个参数的值。
6.1.3.	主要检出结果
（1）群体层面的消费金额
反映群体层面的消费金额输出结果是任意消费者潜在的道费金额均值分布 函数，即在不知道一名消费者具体购买次数X，和消费金额均值点的情况下，仅利 用三个估计参数（,以外就可以刻画任一名消费者的消费金额均值分布特征，表 达式为八71。应，为。
由于Zf服从gamma（P，v）分布，因此期望值为E（Z/P，v）= ? = P/。但由于 消费者间异质《性的存在，且v又服从欧谶加@尸）分布，因此任一个消费者的 消费金额均值都是围绕？波动的随机变量Z ,因此这就需要采用概率分布来对其 进行描述。
综上所述，本文将采用变量替换法推导出该分布，由于7 =皿丫），且：
A（G=?力 T（G/0T《»
公式（6-7） 所以，
于《lp,q,y） = g -ytt—
4	1（夕）
-EL
「（夕）	-	公式（6-8）
该式为逆伽玛分布函数。其中夕为形状参数，PV为尺度参数。同时，该分
67
布的均值和方差分别为:
E(Z|p,q,y) = g. q-l
公式(6-9)
var(Z|/7,") =
2 2 p y
(”1)2(4-2)・
公式(6-10)
（2）个体层面的购买行为	_
反映个体层面消费金额的输出结果为历史购买行为为（Z，、）的个体消费者的 消费金额均值的期望值，表示为这一值是在乃的基 础上，引入一位消费者具体历史购买行为的信息，得到其特有.分布，继而得到 ’的期望值。	_
利用一位消费者在其观察期户的购买次数X和消费金额均值三，推测其潜在 消费金额均值4,可表示为“皿石外。依据贝叶斯理论：
g（v|p,%疣,x）二压臀辿?
/（z»,q,7；x）
_（寸产―"二	/ r（px+g）产、'一
73)
「⑷ / r(px)r(q){r+xzy^
「(px + g)
公式(6-11)
从式6-p可以看出，v的后验分布仍为伽玛分布，形状参数为px+夕，尺度 参数为7 + xz,因此Z的期望均值为：
E(Z | p, q, y;z, x)='。'弋 px + g-]
=(上_)"+(一^)1
px + qT q~\ px + g_]
公式(6-12)
式6-12为Z的条件期望。从拆分表达式我们可以看出，它是由群体消费金 额均值期望值，（Z）和观察到的个体消费金额均值）组成的加权平均值。当观奉 到的用于计算胃的个体购买次数x越多，公式中赋予以Z）的权重就越少，赋予三 的权重就越多，反过来也是这样。
6.1.4.	实证研究
6.1.4.1.	数据提取
本节建模所需数据同样来源于大众点评网，将前6个月（2011年1月1日 至2011年6月30日）作为建模期（即使用该区间内的客户交易数据进行模型参
68
数估计），将后3个月（2011年7月1日起）作为验证期（即将估计出的参数代 入模型计算输出结果并与该区间内的实际值进行对比）。具体的建模过程如图6-2 所示。
建模期	验证期
20110630
； E（Z\p,q,r,z,x）
20110101	：	20110930
观察月份 ;------：-----:-----；-----;-1
---------V--------\
6个月
图6-2消费者消费金额建模过程
在此需要注意的两点是：（1）输入数据都是具有重复购买次数（x>°）的 消费者的历史消费数据，否则，输入数据为（°，°）,这将成为样本的噪声点影响 模型效果。（2）消费者消费金额模型包含一项重要的假设：一名消费者的消费金 额均值不随时间发生变化，所以模型的两项输出结果没有包含时间变量，也不随 时间发生变化。因此，本模型中的输出结果可以同时与建模期中以及验证期中的 实际值分别进行比较，前者说明模型对历史数据的拟合效果，后者说明对未来消 费特征的预测效果。
6.1.4.2.	结果分析
在本节中，本文将以/（z I P，q，r，x）和E（Z I p,q, y,z,x）作为判断拟合和预测 效果的标准，将Gamma-Gamma模型与实际值进行对比。首先，本文先对具有 重复购买次数的消费者消费金额数据进行描述性统计，具体如表6/所示。通过 表6-1我们可以看到，个体消费者的消费金额均值分布明显右偏，符合预期。
表6-1个体消费者的消费金额均值描述性统计
最小值	3
第一个四分位数	81.83
中位数	118.33
第三个四分位数	175.13
最大值	2677
均值	156.42
标准差	180.3
众数	194
69
通过最大似然函数法，得到了 Gamma-Gamma模型中所涉及的三个参数值
以及最大对数似然函数值，具体结果如表6-2所示。
表6-2 参数估计结果与最大对数似然函数值
p q y ll
图6-3表示的是样本消费者的消费金额均值的实际分布与模型计算分布的对 比图。可以看出模型对实际值进行了很好的拟合。但由于模型的分布函数是连续 函数，无法再使用RSS评估拟合效果，因此这里仅从两个分布的均值来比较之
间的差异，虽然方法较粗糙，但仍能在一定程度上反映出拟合效果。在均值方面,
模型计算出的均值期望为146.58元，比实际均值略低出9.84元，再一次说明模
图6-3客户消费金额均值分布（实际值vs模型）
图6-4显示的是在建模期内具有不同重复购买次数消费者的消费金额均值。 从图中可以看出，Gamma-Gamma模型达到了很好的拟合效果。由于此处只有一
个模型与实际值进行比对，因此使用RSS来衡量没有参照性，这里我们选择直 接使用表格将各值列出，并计算出不同的重复购买次数下模型高估或者低估的百 分比，如表6-3所示。通过该表我们可以看到，误差最大的是当重复购买次数为 1的情况，模型低估了 17.72%,但这仍然属于较为理想的误差范围以内。
70
300
1 2 3 4 5 6 1 8 9 10 11 12 13 14 15 16 19 21 22 23 24 25 32 35
舞实际值
霾 Gammaa-Gairana模型
图6-4建模期内不同重复购买次数的消费者消费金额均值 表6-3建模期内不同重复购买次数的消费者消费金额均值
重复购买次数	实际值	Gamma-Gamma 模型	误差
1	230.4273585	189.5983252	-17.72%
2	165.7508772	159.3027388	-3.89%
3	109.529697	117.9424395	7.68%
4	141.6801724	142.3611671	0.48%
5	127.2658824	130.0760686	2.21%
6	117.172549	120.921183	3.20%
7	109.5313187	113.6960893	3.80%
8	127.2945313	129.1568396	1.46%
9	105.3308642	109.0464625	3.53%
10	101.1555556	104.8834288	3.69%
11	173.54	171.3572185	-1.26%
12	100.6630952	103.8491259	3.17%
13	100.6107692	103.5714167	2.94%
14	173.8428571	172.0802006	-1.01%
15	121.6666667	123.036121	1.13%
16	48.45625	53.73369788	10.89%
19	69.33684211	72.85320214	5.07%
21	274.9428571	269.4909236	-1.98%
22	63.22727273	66.52916587	5.22%
23	159.026087	158.497653	-0.33%
24	83.77083333	86.04772469	2.72%
25	162.688	162.0700883	-0.38%
32	78.7625	80.62637249	2.37%
35	105.8	106.8142431	0.96%
图6-5显示的是在验证期内具有不同重复购买次数的消费者的消费金额均值。 从图中可以看出，相比于在建模期内的表现，Gamma-Gamma模型在验证期中的 预测效果稍差，系统性地高估了消费金额均值。表6-4列出了各重复购买次数下
71
的实际值与模型值，以及模型高估的百分比。从表中可以看出，误差最大的是当 重复购买次数为1的情况，模型高估了 54.84%,但是随着重复购买次数的增大， 模型高估的误差也有缩小的趋势。从整体上看，模型的预测值还是能较好地反应 不同重复购买次数间客户消费金额均值的变化趋势，所以预测效果仍然可以接受, 当然也存在一定的提升空间。
700 丁-----------------------------------------------------------------------------------
篇实际值
■ Gammaa-G amnia模型
图6-5验证期内不同重复购买次数的客户消费金额均值
表6-4验证期内不同重复购买次数的客户消费金额均值
重复购买次数	实际值	Gamma-Gamma 模型	误差
1	90.183	139.635168	54.84%
2	104.6182432	143.7636324	37.42%
3	92.04423077	127.1864808	38.18%
4	111.4226563	149.4170847	34.10%
5	89.14222222	120.2664782	34.92%
6	87	121.0037441	39.08%
7	213.4755102	160.6000406	-24.77%
8	86.42142857	104.7033445	21.15%
9	83.26666667	98.2441103	17.99%
10	124.165	128.3529817	3.37%
11	252.5409091	265.9048641	5.29%
12	102.6194444	82.38862906	-19.71%
13	123.0923077	100.4602965	-18.39%
14	640.4714286	390.939366	-38.96%
15	90.61333333	100.0733767	10.44%
16	112.0375	147.6818289	31.81%
17	175.2294118	133.1518766	-24.01%
18	68.75555556	66.52916587	-3.24%
26	148.7615385	162.0700883	8.95%
29	72.49655172	80.62637249	11.21%
72
6.2.	客户终身价值模型改进
6.2.1.	模型构建
在第二章的222节我们指出，本文的客户终身价值主要由两部分组成，包 括客户的直接价值和间接价值。其中客户的直接价值由客户的购买价值来体现, 客户的间接价值则由客户的评论价值来体现，具体如下所示：
客户终身价值=直接价值+间接价值=客户购买价值+客户评论价值
在构建客户购买价值的计算模型时，由于本研究的分析是借助于独立性假设 的，因此本文假设购买金额是独立于购买过程的。由此可以得到客户购买价值的 预测值，表达式如下：
客户购买价值=边际利润x次交易金额x预期交易次数的贴现值
其中，预期交易次数的贴现值（DET）可以由下式得到:
E[Y(t) IX = X,tx ,T]-E[Y(t -1) IX = x,',T]
5	(1+d),
(DET)
公式(6-13)
公式(6-14)
其中分子表示t时间内客户的交易次数，d为贴现率。
在确定了购买价值的计算公式后，对于DET的计算还要明确以下两个个重 要的问题：
（1）用来预测的时间域是什么？
（2）单位时间域是什么？
综上所述，购买价值的计算模型需要明确的问题有以下几点：
（1）购买价值可通过公式6-13计算得出；
（2）公式6-13中的次交易金额可通过Gamma-Gamma模型计算得到，计算 公式为公式6-12；
（3）	DET中的分子则可通过Pareto/NBD模型获得，计算公式为4-19；
（4）公式6-14中涉及到的贴现率d,预测年限n,单位时间域和边际利润 等都需要根据具体的问题来具体分析。	.
本文的研究对象为大众点评网的消费者，由于公式中的贴现率和边际利润需 要主观设定，我们这里设定为d=0.1、边际利润为0.3,企业在实践过程中可以选 取更符合实际的贴现率;预测时间取n=90天,即3个月。根据可获取的数据情况， 单位时间域选择为天。
而针对客户的评论价值，本文同样采用客户购买价值的预测公式，具体如下 所示：
客户评论价值=边际利润x次贡献值x预期评论次数的贴现值（DET）
73
这其中预期评论次数的贴现值（DET）的具体计算方法如公式6-14所示。 但是由于本文目前并未对评论的次贡献值进行研究，因此在后文的实证研究部分 仅展示客户购买价值的研究情况。
6.2.2.	相关性检^
要想顺利计算出客户终生价值，实证数据必须符合“消费者的消费金额均值 与购买次数独立”，即购买金额是独立于购买过程的。基于此，本文对实证数据 所涉及到的消费者的消费金额均值和购买次数这两个变量进行相关性检验，具体 相关性检验结果如表6-5所示。
表6-5购买次数与消费金额均值相关性检验
Correlations
购买次数	消费金额均值
购买次数	Pearson相关性	1	.081**
显著性（双侧）		.000
N	519	519
消费金额均值	Pearson相关性	-c ** .081	1
显著性（双侧）	.000
N	519	519
**.在0.01水平上（双侧）显著相关.
从表6-5可以看出，消费金额均值与购买次数的Pearson相关系数为0.08b 并且通过了显著性检验（P=0.01）,由此可判别二者是存在相关性的，但是其相 关性是极低的，因而可以视为相互独立。
6.2.3.	实证研究
根据前文的研究我们已经发现同时引入标准化后的“最高购买金额和评论次 数”作为影响流失行为的协变量，改进Pareto/NBD模型的效果最为明显。基于 此，本文将对比Pareto/NBD模型和改进的Pareto/NBD模型的改进效果，并将各 自参数和Gamma-Gamma模型参数代入公式中，具体参数估计结果如表六-6所 示：
表6-6参数估计值
Pareto/NBD 模 型	Pareto/NBD 改进 模型		Gamma-Gamma 模型
a	20	20	p	2.8815
P	8.8865	8.9613	q	3.6568
y	0.5887	0.7325	y	133.9820
s	0.0001	0.7608
LL	7658.8	7612.5	LL	-2255.5352
将上述参数分别代入公式中，最终得到了每个用户的客户终身价值-购买价
74
值。本文将用户按照验证期重复购买次数的多少进行分类，并将用户的实际价值 与预测价值（采用原始Pareto/NBD模型计算的客户购买价值1和Pareto/NBD改 进模型计算的客户购买价值2）进行了对比分析，具体对比结果如表6-7所示： 表6-7客户终身价值-购买价值均值（实际vs预测）
重复购买次数	实际值	客户购买价 值1	误差1	客户购买价值2	误差2
1	18.20803	24.88393	36.66%	19.1111	4.96%
2	44.1193	33.16364	-24.83%	30.59133	-30.66%
3	34.41138	35.66341	3.64%	32.74976	-4.83%
4	44.14648	50.58972	14.60%	46.55751	5.46%
5	56.25753	55.91616	-0.61%	51.15664	-9.07%
6	54.58886	61.0042	11.75%	58.45687	7.09%
7	77.54165	66.00419	-14.88%	61.89157	-20.18%
8	76.94885	84.97425	10.43%	82.72494	7.51%
9	92.17398	78.8119	-14.50%	78.11557	-15.25%
10	69.78627	93.35068	33.77%	91.93398	31.74%
11	143.881	133.0698	-7.51%	132.5398	-7.88%
12	97.91568	90.04013	-8.04%	86.00737	-12.16%
13	87.17333	98.57602	13.08%	97.78801	12.18%
14	83.83333	166.1048	98.14%	163.1978	94.67%
15	258.6667	198.2239	-23.37%	196.0803	-24.20%
16	44.6	68.68273	54.00%	68.43158	53.43%
19	146.5615	91.99127	-37.23%	89.69279	-38.80%
21	461.5714	369.3208	-19.99%	365.5523	-20.80%
22	68.75556	99.96259	45.39%	96.84479	40.85%
23	149.48	264.1527	76.71%	263.0025	75.94%
24	116.75	135.6882	16.22%	135.1898	15.79%
25	248.7615	283.4011	13.92%	282.1512	13.42%
32	72.49655	245.2106	238.24%	242.7789	234.88%
35	102.9923	245.0424	137.92%	243.7903	136.71%
平均误差	27.23%			22.95%
客户价值2代表的是引入协变量后计算的客户终身价值。本文首先对客户终 身价值2进行分析，从上表可以看出，误差较大的是重复购买次数为14、32和 35的消费群体。导致误差较大的原因是由于这几类用户在过去的6个月内产生 了连续高频率的购买行为，如果按照稳定的购买频率推测，他们应该在验证期中 购买较多次数。但是通过分析实证数据后发现，这几类用户在验证期内的购买次 数急剧减少，因而高估了他们消费总额均值。进一步分析其原因则发现，这三类 消费者的购买次数虽然较高，但其评论次数急剧减少，通过前文的Logit回归分 析可以发现消费者的评论次数与其下一阶段的购买流失行为呈显著负相关性，即
75
评论的次数越少，越有可能不产生购买行为。这一结论能够较好的解释其后期实 际购买次数的减少情况。但是具有14、32次和35次重复购买次数的客户更少, 只有3名，占样本量的0.58%,所以对整体预测效果的影响更小。
同时客户价值1代表的是采用原始Pareto/NBD模型计算的客户终身价值， 通过对比客户价值1和客户价值2的平均误差本文发现改进后得到的客户终身价 值误差相应降低，确实提高了预测准确性。
由于消费者的评论价值本文仅对其评论次数模型进行了研究，因此在本节仅 将预期评论次数的贴现值（DET）进行计算。计算DET所需的参数如第521.2 节表5-8所示，将其代入公式中，具体对比结果如下图所示。通过分析可以发现 预测结果较好。
9876543210 照龙念比照触线用禽
»预测期实际值
■ DET
1	2	3	4	5	6	7	8	9 10 11 12 13
建模期重复评论次数
图6-6实际值与DET值比较
6.3.	本章总结
本章的主要任务是从个体层面计算出基于购买价值和评论价值的客户终身 价值。在客户终生价值的计算公式推导完毕之后，本文对客户的购买次数和消费 金额均值的相关性进行了检验，发现二者近似独立，证明可以使用该公式进行计 算。在实证环节中，通过实证结果显示，客户终身价值-购买价值的预测模型取 得了较好的预测效果，因而说明通过模型计算的客户终生价值具有参考意义。最 后，我们进一步计算了评论次数的DET,虽然本文未对评论行为的贡献价值预 测进行研究，但为后期最终得到评论价值打下了坚实的基础。
76
第七章结论及展望
7.1.	主要贡献
第一，由于Web2.0时代的不断兴起，本文以用户创作内容为切入点，从消 费者的评论行为入手，创造性的将用户的自身评论行为与其购买行为相结合，提 出基于群体层面和基于个体层面的客户终身价值模型研究。基于此，本文首先对 客户终身价值的计算方法进行梳理，继而选择了一种能够体现购买行为和评论行 为的客户终身价值综合计算方法，并利用大众点评网的数据从个体层面和群体层 面分别对客户终身价值进行了预测并取得了较为不错的预测效果。这一系列的研 究成果可以为以后的研究者起到抛砖引玉的作用。
第二,针对群体层面的客户终身价值研究，本文在传统RFM模型的基础上， 创造性的提出了针对评论行为的RFMP模型，并且提出了综合客户终身价值计 算模型。随后利用大众点评网的数据进行实证研究，发现在不考虑消费者评论行 为下的客户终身价值与综合考虑消费者购买行为和评论行为的客户终身价值的 差异。最后，利用K-Means聚类分析方法对消费者进行细分，发现了四类用户 群，即高价值用户、低价值用户、传统用户和口碑用户。这一研究具有了一定的 理论价值和企业实际价值。
第三，针对个体层面的客户终身价值研究，本文首先进行购买价值的分析， 首先利用Logit计量回归模型发现影响消费者下一阶段购买流失行为的因素，重 点考虑评论行为对其影响，并且基于此进一步改进消费者购买流失预测模型；随 后将发现的重点影响因素作为改进流失行为的协变量引入传统Pareto/NBD模型 中，发现了预测效果的提高；接下来进行购买消费金额的建模，在此我们沿用了 经典的Gamma-Gamma模型并取得了良好的预测效果。针对评论价值的分析， 由于本文仅考虑了评论次数的预测模型构建，因此首先仍旧利用Logit计量回归 模型的方法发现影响消费者下一阶段评论流失行为的因素，重点考虑购买行为对 其影响，并基于此改进消费者评论流失预测模型；但在改进评论次数Pareto/NBD 模型时发现传统模型预测效果与改进模型预测效果差异不大且预测效果均较好， 因此本文沿用传统的Pareto/NBD模型进行评论次数预测。最终，将购买价值和 评论价值进行融合，形成个体层面的客户终身价值建模。
77
7.2.	研究不足
第一，本文的样本数据量较小，使得各个模型的改进效果并不十分明显。虽 然在Logit回归模型方面本文已经通过十重交叉验证的方法验证了模型的稳定性, 但是其他几个模型的预测效果仍有待提高。
第二，在对评论次数预测的Pareto/NBD模型引入协变量进行改进时并未发 现改进效果十分明显的变量，虽然基础模型对评论次数的预测已经达到了较好的 效果，但是在前文的研究中已经发现了购买行为对评论流失行为的影响，因此在 后续的研究中应该更进一步的扩大影响因素确定，以期能更好的提高预测效果。
第三，本文并未对评论价值中的评论贡献值进行预测，这使得个体层面的客 户终身价值并不完整。而对于评论贡献值的预测也正是本文研究的扩展方向之一。
7.3.	未来研究方向
第一，利用更大的数据集进行各个模型更精确的拟合。虽然本文创造性的将 消费者自身的评论行为与其购买行为结合在一起，并对原有模型进行了改进，也 取得了一定的改进效果，但仍然希望能够在大数据的背景下进一步验证模型的可 行性，这也为大众点评网、淘宝、天猫等一系列互联网交易平台的客户终身价值 研究打下更加扎实的基础。
第二，在评论次数Pareto/NBD中引入效果更加显著的协变量。建模者都希 望通过建立的模型为管理者提供更多有用的决策信息，尤其是当拥有丰富的建模 数据时。因此在大数据的基础上，如何更加有效更加准确的引入协变量，改进预 测效果就成为研究者关注的重点，这也有利于研究者挖掘更多有用的决策信息并 帮助管理者控制相关变量制定合理的营销决策。
第三，着重对评论行为产生的贡献值预测进行研究。不同于购买金额采用的 Gamma-Gamma模型，评论行为产生的贡献值无论从假设上还是实际情况上都与 现阶段的预测模型不太相符合，这就使得该研究点在后续的研究中能够成为又一 大创新点。如何能够建立起更加符合评论贡献值的预测模型将成为后续研究者的 重中之重。
参考文献
[1]	Chevalier J, Mayzlin D. The Effect of Word of Mouth on Sales: Online Book Reviews- Journal of Marketing Research, 2006, 43(3): 345-354.
[2]陈蒋蕾.基于网络和信任理论的消费者在线口碑传播实证研究[D].浙江：浙 江大学，2008.
[3]翟丽孔.网店在线评论对消费者购买意愿的影响研究[D].大连：东北财经大 学，2011.
[4]	Joseph B, Jake L, Tina G. Online Reviews, Helpfulness Ratings, and Consumer Attitudes: An Extension of Congruity Theory to Multiple Sources in Web 2,0[J]. Journal of Computer Mediated Communication, 2012, 18(1): 97-112.
[5]	Chen P Y, Wu S Y, Yoon J. The impact of online recommendations and consumer feedback on sales. In Proceedings of the 25th International Conference on Information Systems[A]//ICIS 2004[C], Washington DC, 2004: 711-724.
[6]	Dhar Y Chang E. A. Does Chatter Matter? The Impact of User-Generated Content on Music Sales [J]. Journal of Interactive Marketing, 2009, 23(4): 300-307.
[7]	Fader P S. Hardie. Probability models fbr customer-base analysis[J]. Journal of Interactive Marketing, 2009,23(1): 61-69.
[8]王浩.客户终身价值动态建模[D].北京：北京邮电大学,2009.
[9]蔡瑞.半契约情景下客户终生价值建模[D].北京：北京邮电大学，2013.
[10]Dwyer F R. Customer lifetime valuation to support marketing decision making[J]. Journal of Direct Marketing, 1997, 11(4): 6-13.
[ll]Kumar V, Ramani G, Bohling T. Customer lifetime value approaches and best practice applications[J]. Journal of Interactive Marketing, 2004, 18(3): 60-72.
[12]Berger P D, Nasr N L Customer lifetime value: marketing models and applications[J]. Journal of Interactive Marketings 1998, 12(1): 17-30.
[13]	Kotler P, Armstrong G. Principles of Marketing, 7th ed[M]. Englewood Cliffs, NJ: Prentice-HalL, 1996.
[14]Gupta S, Hanssens D, Hardie B, et al. Modeling customer lifetime valuefJ]. Journal of Service Research, 2006, 9(2): 139-155.
口5]夏秀兰.客户终身价值模型的改进及其应用研究[D].重庆：重庆大学,2006.
口6]赵骅，夏秀兰.基于口碑效应的客户终身价值改进模型口].中国流通经济,
79
2006,19(12): 42-45.
[17]范琳琳.基于CLV和活跃度的客户细分模型及其应用研究[D].西安：西安 工业大学,2010.
[18]马宝龙，李飞，王高，等.随机RFM模型及其在零售顾客价值识别中的应 用[J].管理工程学报,2011, 25(1): 102-108.
[19]Hughes A M. Strategic database marketing (3rd ed.)[M]. New York: McGraw-Hill, 2006.
[20]	Thomas J S. A methodology for linking customer acquisition to customer retention[J]. Journal of Marketing Research, 2001,38(2): 262-268.
[21]Gensch D H. Targeting the switchable industrial customer]J]. Marketing Science, 1984, 3(1):41-54.
[22]Thomas J S, Blattberg R, Fox E. Recapturing lost customers[J]. Journal of Marketing Research, 2004,16(February): 31-45.
[23]	Lewis M. Customer acquisition promotions and customer asset value[J]. Journal of Marketing Research, 2006, 43(2): 195-203.
[24]	Bolton R N. A dynamic model of the duration of the customer's relationship with a continuous service provider: the role of satisfaction[J]. Marketing Science, 1998, 17(1): 46-65.
[25]Gonul F, Kim B D, Shi M. Mailing smarter to catalog customers[J]. Journal of Interactive Marketing, 2000, 14(2): 2-16.
[26]Bitran G, Mondschein S. Mailing decisions in the Catalog sales industry[J]. Management Science, 1996,42(9): 1364-138L
[27]	Gupta S, Lehmann D. Managing Customers as Investments[M]. Philadelphia: Wharton School Publishing, 2005.
[28]	Ansari A, Essegaier S, Kohli R. Internet recommendation systems[J]. Journal of Marketing Research, 2000,40(May): 131-145.
[29]	Li S B, Sun B H, Wilcox R. Cross-selling sequentially ordered products: an application to consumer banking services]J]・ Journal of Marketing Research, 2005,42(2): 233-239.
[30]Yoo S, Hanssens D M. Modeling the Sales and Customer Equity Effects of the Marketing Mix[J]. working paper, 2005.
[31]	Villanueva J, Yoo S, Hanssens D M. The impact of marketing-induced versus word-of-mouth customer acquisition on customer equity growth[J]. Journal of Marketing Research, 2008,45(February): 48-59.
80
[32]	Friedman J H. Multivariate adaptive regression splines[J]. The Annals of Statistics, 1991,19(1): 1-67.
[33]Blattberg R, Getz G, Thomas J S. Customer equity: building and managing relationships as valuable assets[M]. Boston, MA: Harvard Business School Press, 2001.
[34]Libai B, Muller E, Peres R. The diffusion of services[J]. Journal of Marketing Research, 2009,46(2): 163-175.
[35]蔡淑琴，马玉涛，王瑞.在线口碑传播的意见领袖识别方法研究[J].中国管理 科学,2013 , 21(2):185-192.
[36]Miglautsch J R. Thoughts on RFM scoring [J] .Database Mark,1995,8(1):67-72.
[37]朱帮助，张秋菊.电子商务客户流失三阶段预测模型[J].中国软科学, 2010,6:186-192.
[38]王志君.基于神经网络的客户流失预警研究[D].吉林：吉林大学硕士论文， 2013.
[39]曹国，许娟，沈利香.基于ERFM和二元logistic的商业银行零售客户流失模 型研究[J].财会通讯,2012,11(T)：147-149.
[40]任剑锋，张新祥.电子商务客户流失的建模与预测研究[J].计算机仿真, 2012,29(5):363-366.
[41]吴琴.基于用户细分的流失预测[D].上海：华东师范大学,2012.
[42]谢纪刚，裘正定，韩彦俊，等.上市公司财务困境预测模型比较研究[J].系统 工程理论与实践,2006, 25(9): 29-35.
[43]	Schmittlein D C, Morrison D G, Colombo R. Counting Your Customers: Who Are They and What Will They Do Next? Management Science, 1987,33(1): 1-24.
[44]	Fader P S. Hardie and K. L. Lee. "Counting Your Customers" the Easy Way: An Alternative to the Pareto/NBD Model. Marketing Science. 2005,24(2): 275-284.
[45]Fader P S. Hardie and J. Shang. Customer-Base Analysis in a Discrete-Time Noncontractual Setting. MarketingScience. 2010, 29(6): 1086-1108.
[46]蔡瑞，齐佳音.基于改进的Pareto/NBD模型预测博客用户在线行为[J].统计与 信息论坛,2013, 28(6): 69-75.

第一章绪论
1.1课题研究的背景与意义
随着智能制造时代的到来，信息技术在工业领域发挥着越来越重要的作用， 特别是人工智能的兴起为工业领域中机械设备的智能化管理提供了有效的技术 手段。
大数据技术和工业生产结合日趋紧密，形成了工业大数据这个新的研究领域。 工业大数据技术及其应用将成为提高制造业生产率、竞争力和创新能力的关键因 素，是实现智能制造和智能服务的重要手段。
工业大数据技术的本质目标就是从复杂的企业信息数据或设备运行数据中 发现新的模式与知识，获取到有价值的新信息，来辅助企业决策，减少人工决策 中的不确定性，从而提高企业的管理水平和生产效率。由于工业生产中各种大型 系统的复杂度越来越高，系统的维护逐渐成为影响工厂生产效率和安全性的重要 因素，工业领域的维修方式在早期以被动维护、定期维修为主，这种维修策略耗 费资源，而且效率低下，后来逐渐转变为预防性维护、预测性维护，这种可靠且 高效的设备维护方式逐渐成为工业领域的研究热点。为了实现可靠且高效的设备 维护与管理，故障预测与健康管理(Prognostics and Health Management, PHM) 框架因此被提出。故障预测与健康管理(PHM)技术利用工业生产中的各类数据， 包括机器运行的状态数据，传感器采集的信号等，经过信号处理和数据分析等手 段，对工业系统的健康状态进行故障检测或对设备的剩余使用寿命进行预测，从 而进彳亍智能管理。其中剩余使用寿命预测(Remaining useful life, RUL)技术通过 预测工业设备的剩余工作时间，可以在设备损坏之前进行更换和维护，这对于提 高工业生产的效率和安全性有重要意义。
工业设备剩余使用寿命的精确预测是制定良好的预测性维护策略的前提和 必要条件，目前基于数据驱动的方法可以在不需要过多的领域专家知识的情况下 仅仅依靠传感器采集的数据得到有效的RUL预测结果，因此数据驱动的方法备 受学术界和产业界关注。数据驱动的方法可以充分的利用工业生产中产生的大量 数据，从设备的历史数据中挖掘出潜在特征，从而更加智能化的为设备剩余使用 寿命预测建模。同时，基于数据驱动的方法不需要过多的人工干预，通过提前设 置的各种控制器和传感器，数据中心可以采集到设备的各种运行数据，比如振动 信号，温度等，从而直接利用这些数据进行建模，提高了预测的有效性和实时性， 促进了智能制造的发展。近些年来，随着机器学习技术的发展，以深度学习为代 表的各种算法在工业设备的剩余使用寿命预测方面取得了显著的成果。然而，实 际生产中工况的改变往往会导致数据分布的变化，传统机器学习算法的泛化性受 到严重影响，迁移学习算法的发展为解决多工况条件下RUL预测问题提供了新 的方案。
本文以解决预测性维护技术的关键问题，即提高多工况条件下RUL预测精 度为核心，利用迁移学习在训练模型的同时减小训练集和测试集的数据分布差异, 得到训练集和测试集的公共潜在特征，进而提升模型的性能，同时针对损失函数 中工况的训练权重分配进行了深入研究。本文以轴承和刀具为实验对象，借助公 开数据集，评估了模型的性能和可应用性。最后，在理论研究的基础上，本文从 工业应用角度设计了以RUL预测算法为基础的基于微信小程序的工业设备运维 系统，在RUL预测理论研究和工程应用上有一定意义。
1.2主要挑战
工业领域的数据分布差异影响了数据驱动的设备剩余使用寿命预测模型的 泛化性。在真实的工业生产环境下，工业设备往往处于不同的工作状态，比如轴 承的转速发生改变，刀具切削的物件改变，这些工况的改变会导致数据分布的变 化。因此用于训练模型的数据和测试模型的数据往往都会包含多种分布，这影响 了剩余使用寿命预测模型的泛化性能。如何寻找一个有效的方法解决多工况场景 下工业数据集分布差异的问题，提高工业设备剩余使用寿命预测的性能是目前面 临的一大挑战。许多机器学习方法基于一个前提：训练和测试数据来自相同的特 征空间和相同的分布。因此当数据分布发生变化时，模型的预测性能就会变差。 在工业生产中，设备的退化过程可能需要几个月的时间，因此重新收集相同工况 数据用于训练模型的成本是高昂的，需要一种有效的算法能尽可能的避免工况变 化带来的负面效应。
1.3国内外研究现状
本文针对多工况条件下的设备RUL预测提出了基于迁移学习的方法来改进 模型性能，因此在本小节首先介绍了国内外RUL预测方法的进展，之后主要调 研了迁移学习中的领域自适应算法及其在预测性维护领域的应用。
1.3.1剩余使用寿命预测方法
随着制造业领域设备的日益精密复杂，市场竞争日益激烈，如何保证设备的 正常运转，及时地更换维修对于企业有着重要意义。对复杂精密设备的维护是昂
2
贵的，因此有效的设备维护策略在一定程度上可以降低企业的生产成本。目前的 设备维护策略主要分成预防性维护，预测性维护，及事后维护三种⑴。
随着设备的逐渐老化，设备的性能也在逐渐下降，从正常状态到产生隐患， 最后无法运转。事后维护即在设备出现隐患之后进行设备的更换维修，虽然方法 简单直接，但往往在这个时期设备容易出现不可预知的故障，严重影响生产效率， 造成昂贵的维修成本。预防性维护即在设备未出现退化时进行定期的维修，虽然 可以很大程度上避免故障的发生，但是非必要的检查维修也造成了资源的浪费。 同时预防性维护也无法确保完全消除设备的隐患。这两种设备维护策略无法满足 工业日益增长的对有效性，及时性，可靠性的需求，因此，预测性维护的策略应 运而生。不同于以上两种方法，预测性维护方法根据传感器实时收集的数据进行 分析，得出设备的剩余使用寿命(Remaining Useful Life,RUL),通过设定安全阈 值来及时提醒运维人员进行设备的更换维修，这种方法更为经济可靠。因此，预 测性维护策略的核心在于设备的RUL预测。
近些年来，针对设备的RUL预测，学术界展开了深入的研究。Jardine等人 Pl将剩余使用寿命(RUL)定义为给定当前时刻，根据设备过往的监测数据，预测 到设备无法运转之前的时间长度。设备的RUL预测目前可以分成三类⑴，即基 于物理模型的方法、基于数据驱动的方法、基于混合模型。
基于物理模型的方法试图通常用一系列数学方程来描述设备失效模式下的 物理现象，即建立输入与输出之间的映射关系。所建立的模型综合了材料、载荷、 润滑、温度等因素对设备的影响。基于物理模型的方法是基于大量的实验数据， 同时需要更多的数据来验证模型的准确性。随着对失效机理的进一步认识，可以 对模型进行逐步修正，提高其预测精度。目前，学者们提出了大量基于物理模型 的RUL预测方法。文献［4］提出了一种齿轮剩余使用寿命预测方法。对裂纹扩展 过程进行了模拟，得到正态分布的裂纹长度，并在贝叶斯框架下更新退化模型的 参数。退化模型最初由齿轮动力学模型或有限元模型的应力分析结果提供。利用 状态监测数据(模拟裂纹长度)，通过贝叶斯推理更新不确定因素的分布，并基 于退化模型估计得到齿轮的剩余使用寿命。文献⑸提出了一种Kalman滤波方法 来模拟受拉钢带的裂纹扩展。当达到预定的失效阈值时，使用预测的模态频率状 态导出RUL。使用卡尔曼滤波器的假设是，系统必须是线性的，过程和测量噪声 必须是白高斯和-独立的。为了将卡尔曼滤波扩展到非线性系统，提出了扩展卡 尔曼滤波和无迹卡尔曼滤波。文献［6］提出了一个多尺度框架，以解决快速时变的 荷电状态(SOC)和在更大时间尺度上变化的健康状态(SOH),从而估算锂离 子电池的寿命。该框架采用扩展卡尔曼滤波方法，分别处理快速和大的时间尺度。 利用离散时间-状态空间模型和多个时间尺度来描述SOC和SOH演化的不同时 间间隔，即用时间尺度分离来监测和预测系统的健康状态。在不受线性系统和高 斯噪声假设约朿的情况下，粒子滤波器可以用于RUL预测。例如，Daigle和 Goebel®通过应用基于模型的预测方法，克服了传感器数据有限的问题，将粒子 过滤器应用于电磁阀。Daigle和Goebel还提出了一个详细的电磁阀模型同，并根 据阀门寿命期间的损伤演变对其进行了扩展，其中建立从测量到系统内部状态映 射的测量模型是系统状态本身。在失效机理明确，设备结构简单的情况下，基于 物理模型的RUL预测方法简单高效，同时由于模型参数和物理量相关联，使得模 型具有良好的可解释性。然而在实际应用中，这类方法往往很难针对某一特定对 象建立精确的数学模型，相应的成本也很高。此外，随着物理模型的复杂化，模 型参数的数目增加，参数的估计也变得更加困难。因此，由于其固有的特点，基 于物理模型方法的应用具有局限性。
基于数据驱动的模型只依赖于先前监测到的数据来预测系统状态，或者匹配 历史上相似的模式来推断规则。因此，数据驱动的模型不过度依赖于领域专家知 识，而是借助传感器收集的监测数据来挖掘反映设备退化的特征，进而借助人工 智能算法对设备的剩余使用寿命进行预测。数据驱动模型主要包括统计模型和人 工智能模型。
统计模型如隐马尔可夫模型（HMM）已被应用于寿命预测问题。文献［9］提 出了一种数据驱动的剩余使用寿命预测方法，采用混合高斯隐马尔可夫模型 （MoG-HMMs）从振动信号中提取时域和频域特征，对轴承的健康状态进行评 估。Peng和Dong［®提出了一种隐马尔可夫和灰色模型的预测方法来预测泵的健 康状态。在传统的隐马尔可夫状态转移模型的基础上，引入老化因子来考虑器件 的劣化。采用统计算法对老化因子进行迭代优化。通过分析设备保持健康状态直 到发生故障的预期持续时间来估计RUL。统计模型可以进一步利用时间序列回 归技术。文献［11］提出了一种改进的带有非线性加速退化因子的自回归时间序列 模型，用于锂离子电池剩余使用寿命的估算。通过曲线拟合得到退化因子，并将 其加入AR模型输出中，对线性AR模型进行扩展，匹配电池退化过程。文献［12］ 提出了一种使用自回归滑动平均（ARMA）模型预测电梯门RUL的方法。用 ARMA模型预测失效概率的趋势，用logistic回归方法对传感器数据进行建模, 直到失效概率的趋势达到预定的失效阈值。文献［13］通过应用系统退化严重程度 指标和测量健康指标（泵转速）之间的线性回归，定义了用于预测飞机发动机燃 油泵机组的基于物理的健康指标。线性回归方法易于实现，预测结果易于解释。 然而，在故障初始化阶段，健康指示器通常是噪声和非单调的。因此，线性回归 可能不适合这种情况。运行条件的变化（例如速度、载荷）和故障模式的变化可 能会影响故障传播，这使得线性回归的预测不可靠。
4
通常基于人工智能的模型会将剩余使用寿命预测建模成回归问题，目前已有 很多学者应用人工智能算法如神经网络进行设备RUL值的预测。文献［14］提出 了一种利用前馈神经网络对泵振动数据进行预测的方法。该模型将历史单位的人 口特征和悬浮状态趋势数据纳入预测。训练前馈神经网络估计未来生存概率，进 而计算RUL,直至预测生存概率小于0.5。文献［15］提出了一种结合时间序列经 验模态分解（EMD）、粒子群优化（PSO）和支持向量机（SVM）的轴向柱塞泵 健康监测和预测方法。以回油流量作为磨损状态的指标，利用EMD对泵的健康 状态进行评价，并基于EMD分解的固有模态函数，采用SVM回归方法进行系 统健康状态趋势分析。与传统的机器学习方法相比，基于深度学习的方法通过将 数据转化为抽象的表示，实现了模型构建和特征学习的有机结合。文献［16］提出 了一种用于RUL估计的长短期记忆网络（LSTM）方法，在多种工作条件下展示了 传感器数据中的隐藏模式，并获得了比卷积神经网络（CNN）更好的性能。文献［17］ 将CNN的高维特征提取能力和LSTM在时间序列问题上的优势相结合，应用 CNN-LSTM模型预测RULo文献［18］提出了一种基于CNN-LSTM的有向无环图 （DAG）网络。特别是这项工作将CNN和LSTM有机地结合起来，而不是单纯 地使用CNN进行特征提取。文献［19］设计了一个双任务LSTM网络，以并行方 式执行RUL预测和退化阶段评估，该网络通过优化用于退化阶段评估的RUL预 测和分类任务的回归任务联合目标函数来实现。同时，值得注意的是，深度学习 算法由于其良好的非线性映射能力，能够直接利用原始振动信号［20］进行预测。
每种模型都有各自的局限性，混合模型通过结合基于数据驱动的模型和物理 模型来整合两者优势进而提高模型的预测性能。文献［21］使用贝叶斯网络从失效 物理模型（大气腐蚀的线性双对数定律）预测腐蚀条件下铁结构的剩余使用寿命， 同时使用马氏距离（MD）数据驱动方法评估系统健康状况，并基于重量、尺寸 和电阻检测异常，从失效物理模型得到的RUL分布和从MD值分布得到的当前 健康状态输入贝叶斯网络模型，以获得更新的RUL预测。文献［22］提出了一种用 于含氢压力容器裂纹长度预测的混合方法。在使用基于物理的方法进行预测时， 使用历史数据来确定通过数据驱动方法得到的超出安全阈值的裂纹预测。在该方 法中，采用数据驱动的方法来估计估计系统状态的可行性，即裂纹长度。结果表 明，当运行条件的变化对失效退化模型有较大影响时，混合方法确实能够对基于 物理的模型进行修正。文献［23］提出了一种相关向量机（RVM）方法，从提取的 特征（如电压、电流、功率、阻抗、频率和温度读数）中估计电池模型的内部参 数以及与时间的相关性。在基于物理的粒子滤波方法中，采用RVM方法估计电 池内部初始状态。然后通过传播粒子的轨迹来预测RULo基于混合模型的方法 融合了数据驱动方法和物理模型的优点，但是较为复杂，因而在实际应用中较少。
5
随着传感器技术的发展，工业系统采集的数据量日益丰富，毫无疑问，基于 数据驱动的RUL预测方法由于不需要理解物理机理且能从数据中挖掘出潜在特 征，已经成为当前的主流RUL预测方法。特别是其中基于深度学习的方法能将特 征提取和模型训练结合到一起，避免了人工特征的提取，直接在原始信号和RUL 值之间找到映射关系。
1.3.2迁移学习及领域自适应技术
机器学习算法表现良好的前提是训练集和测试集的分布一致，实际生产中， 工况发生变化导致数据分布改变时，传统的机器学习算法在RUL预测问题上的 泛化性会变差，迁移学习可以解决训练数据集和测试数据集分布不同的跨领域学 习问题。迁移学习的目的是利用来自一个或多个相关数据集（称为源域）的知识 来提高模型在当前数据集（称为目标域）中的性能。它的灵感来自于人类的能力， 即重用以前任务中的知识，而不必从头开始学习新任务。领域自适应是迁移学习 方法中的一项重要技术，它将学习系统从一个领域迁移到另一个领域，并能够有 效解决域之间的分布不同（Different Feature Distributions, DFD）的问题。
领域自适应技术目前在故障诊断领域应用较多，目前己经进行了大量的实验 研究。文献［24］考虑了工况的变化对模型的影响，并利用不同工况下采集的数据 来改进模型性能，提出了一种基于迁移学习的故障诊断算法。首先，提出的模型 从训练集中学习潜在特征，并调整网络参数。然后，模型可以根据数据分布的变 化来调整神经网络结构。最后，模型利用少数不同工况的数据进行微调。实验结 果证明了该方法的有效性。同时，本研究探讨了操作条件的相似性对模型性能的 影响。文献［25］利用转移成分分析（TCA）技术进行跨域特征提取和融合，在变 速箱试验台上进行了各种工况下的综合试验，研究和评价了不同核函数对TCA 性能的影响。实验结果表明，与其它基线降维方法相比，该方法能有效地提取和 融合变速箱工况的跨域特征，提高了各种工况下历史数据的重用性。文献［26］提 出了一种新的迁移学习模型WDMAN来学习跨域的不变特征。此外，还采用了 多层对抗策略来提高传输能力。文献［27］提岀了一个动态安全评估（DSA）模型， 该模型针对大量潜在故障，采用一个训练模型处理多个故障。基于转移学习技术 来迭代最小化训练数据和未知数据之间的边际分布和条件分布差异，将模型转移 到未知的不同但相关的故障，使得DAS模型的扩展性大大增强。文献［28］提出了 一种对抗性的域自适应方法，利用域混淆和多核最大平均差异损失来提取两个域 之间的域不变特征，用于跨域故障诊断。文献［29］开发了一种基于卷积神经网络 （CNN）的迁移学习方法，用于各种工况下的故障诊断，以解决轴承故障分类数据 不足的问题。同时，该研究分析了源域和目标域速度和负载的同时变化对故障诊
6
断性能的影响。此外，通过确定源域和目标域之间的速度和负载关系，研究了知 识的负迁移效应。文献［30］提岀了一种使用联合分布自适应(JDA)的深度传输网 络，以保证更精确的分布匹配。此外，一些研究还着重于改进不同数据集之间分 布差异的测量方法。文献［31］提出了一种改进的距离度量，称为多项式核诱导 MMD (PK-MMD),它使用多项式核代替高斯核来诱导MMD。在此基础上，建 立了机车轴承健康状态识别的传递学习模型。受KL散度和CMDP2］的启发，文 献［33］提出了一种新的数据集分布差异度量算法，称为高阶Kullback-Leibler (HKL)散度，基于HKL散度和迁移学习，构造了一种对工况变化具有鲁棒性 的故障诊断网络。在特征提取中，提出了一种基于HKL散度的稀疏滤波方法，用 于学习源域和目标域的共享特征和区分特征。在特征分类中，将HKL散度引入 到softmax回归中，将领域自适应与健康状况联系起来。该研究在滚动轴承数据 集和齿轮箱数据集上验证了该方法的有效性。
对于剩余使用寿命预测问题，目前只有很少一部分研究利用域自适应技术来 解决数据分布不一致问题。文献［34］提出了一种基于稀疏自动编码器(SAE)的 刀具RUL预测深度转移学习(DTL)网络。该方法采用权值转移、隐藏特征转 移学习和权值更新三种策略将历史数据训练的稀疏自编码器迁移到新的对象上。 文献［35］提岀了一种将压缩去噪自动编码器(CDAE)和转移成分分析(TCA)相 结合的迁移学习方法来提取深度自适应特征。然后利用得到的轴承跨域特征，利 用最小二乘支持向量机(LSSVM)训练RUL预测模型。然而，该框架并不是一 个端到端的体系结构，跨域特征表示学习和RUL预测是分离的步骤。文献［36］提 出了一种用于涡扇发动机RUL预测的端到端无监督对抗域自适应模型，它可以处 理不同工况或不同故障模式下的数据。该方法建立在一个双向长短期记忆网络的 基础上，该网络可以对时间依赖性进行建模，并提取具有代表性的特征。此外， 它通过去除特定领域的信息，同时保留特定任务的信息，得到工作条件之间的不 变表示。实验结果表明，该研究提出的方法明显优于现有的方法。
然而，这些基于域自适应的方法没有考虑源域和目标域都包含多个操作工况 的复杂情况，只针对从一个操作工况到另一个操作工况进行域自适应研究。
1.4论文主要研究内容与贡献
1.4.1研究目标
本文从工业大数据的大背景出发，结合迁移学习理论以及剩余使用寿命预测 方法，研究相关的数据驱动方法在特定工业场景下的应用与优化。主要研究目标 包括以下方面：
7
1. 研究复杂工况下的迁移学习技术的应用与优化，构建相关剩余使用寿命 预测模型，解决训练模型在复杂工况导致的数据分布差异因素影响下泛化能力差 的问题。
2. 结合工厂实际的运维管理需求，基于RUL预测算法，设计并实现基于微 信小程序的工业设备运维系统，为安全生产提供保障。
1.4.2研究内容
针对上一小节中所列的研究目标，本文的研究内容如下：
1、	领域自适应算法的研究与其在剩余使用寿命预测领域的应用优化
领域自适应算法主要针对源域和目标域数据分布不一致的场景，在本文的剩 余使用寿命预测研究中，针对复杂工况所导致的数据分布差异，提出了多工况条 件下领域自适应模型。模型基于迁移学习中的领域自适应技术，采用了基于多工 况的样本差异度量方法，将该差异作为损失函数的一项，在训练过程中缩小了训 练集与测试集在新的特征空间上的分布差异，提高了模型的泛化性。模型的特征 提取器采用稀疏自编码器，预测器采用长短期记忆网络，在模型训练的同时可以 对源域和目标域的相似工况进行域自适应，减小分布差异。同时，本文研究了损 失函数中工况的权重分配对模型性能的影响，在域自适应模型的基础上加入了工 况权重计算机制，可以在模型训练过程中动态的为各个工况赋予权重。
2、	深度学习模型的构建及相关调优
稀疏自编码器(SAE)和长短期记忆网络(LSTM)是深度学习中常用的两个模 型，其中SAE能够自动提取原始数据的特征，而LSTM擅长处理时序数据。本 文中，叠加使用SAE和LSTM,最后使用全连接层将结果映射到标签，作为实 验的基准模型，并在该基准模型上进行其他优化。本研究中利用Pytorch深度学 习框架构建了该基准模型，通过对学习速率、迭代轮数、SAE层数等参数的搜索， 对模型结果进行最优化。
3、	设计和实现预测性维护管理小程序
从工程应用的角度，将提出的RUL预测算法进行工程实现，同时结合工厂 实际的运维管理需求，设计并实现了基于微信小程序的工业设备运维系统。该系 统主要功能是利用本文提出的RUL预测算法对设备进行预测性维护和管理，包 括实时监测与预警、历史数据分析、设备资产管理、任务管理等模块。同时，系 统包含了设备价值评估功能，基于RUL预测的结果进行设备的价值评估，为企 业在资产管理方面提供有效的数据支持。
1.4.3主要贡献
本文基于迁移学习对工业设备剩余使用寿命预测模型的优化进行了深入研 究，并基于提出的寿命预测算法设计了预测性维护管理小程序，主要贡献如下：
1、	针对工业场景下，复杂工况导致的数据特征分布差异问题，本文提出了 多工况条件下的领域自适应方法(Domain Adaptation method under Multiple Operation Conditions, DAMOC)。该模型将稀疏自编码器(SAE)和长短期记忆网 络(LSTM)相结合。提出了基于多工况的样本差异度量方法，将该差异作为损失 函数的一项来最小化两个数据集之间的分布差异。该方法在富士康刀具数据集和 PHM 2012轴承数据集上进行了验证，并与其他方法进行了比较。结果表明， DAMOC方法具有较好的性能。更重要的是，该方法在域自适应过程中考虑了损 失函数中各个工况的相对重要性。通过实验表明了损失函数中不同工况的权重分 配会对模型的性能产生影响。我们的方法能够定量计算每个工况的权重，进一步 提高了域自适应模型的性能。
2、	结合工厂实际的运维管理需求，为解决传统工业运维系统功能单一的缺 点，基于RUL预测算法，设计并实现了基于微信小程序的工业设备运维系统。 该系统以预测性维护为主要目标，同时包含了实时监测与预警、历史数据分析、 设备资产管理、任务管理等模块，为工业设备的安全运行和工厂的有效管理提供 了保障。
1.5论文结构安排
本论文的主要结构安排如下：
第一章为绪论，首先对研究课题的背景与意义进行了阐述，论述了工业大数 据、PHM以及剩余使用寿命预测的相关背景和定义。然后，介绍了目前仍存在的 一些挑战，以及当前剩余使用寿命预测和迁移学习在故障诊断与寿命预测领域国 内外相关研究现状。最后，阐述了本文的研究目的、主要内容与主要贡献。
第二章为研究的理论基础，首先对基于数据驱动的剩余使用寿命预测框架进 行了介绍，然后介绍了本文所采用的稀疏自编码器，接着介绍了迁移学习中的领 域自适应算法以及特征提取算法，同时列举了迁移学习中常用的距离度量指标。 最后，介绍了本文使用的富士康刀具数据集与PHM 2012挑战赛的轴承数据集。
第三章针对工业数据中复杂工况导致的数据分布差异问题，提出了 DAMOC 模型来进行设备的剩余使用寿命预测，首先进行了问题定义和整体框架，然后对 该框架的细节进行介绍，包括SAE-LSTM基准模型的构建，应用复杂工况领域
9 自适应技术，评估损失函数中工况的相对重要性等。最后，在富士康刀具数据集 和PHM2012轴承数据集上进行了实验与结果评估。
第四章从工程应用的角度，将提出的RUL预测算法进行工程实现，设计并 实现了基于微信小程序的工业设备运维系统。该系统主要功能是利用本文提出的 RUL预测算法对设备进行预测性维护和管理。同时，系统包含了设备价值评估 功能，基于成本法进行设备的价值评估，为企业在资产管理方面提供有效的数据 支持。
第五章是总结与展望，包括对前文的总结与后续工作的规划。
10
第二章迁移学习及数据驱动的剩余使用寿命预测关键技术
本章首先对数据驱动的剩余使用寿命预测框架进行了介绍，包括整个流程的 各个步骤。然后对本文涉及到的相关技术和理论基础进行了介绍，主要包括信号 特征提取，稀疏自编码器(SAE),迁移学习技术，度量指标，及相关数据集，其 中迁移学习技术是本文研究的理论基础。
2.1数据驱动的剩余使用寿命预测框架

图2-1数据驱动剩余使用寿命预测流程图
如图2-1所示，一个完整的数据驱动剩余使用寿命预测框架包含信号采 集，数据预处理，特征提取，模型训练，RUL预测五部分。信号采集部分依赖 于传感器技术的发展，海量的设备监测信号可以被数据中心实时存储和分析， 这也是RUL预测模型构建的基础。在本文的研究中，信号采集主要是对设备部 件的振动信号，电流信号等进行采集，充足的信号数据是后续建模的基础。数 据预处理的目的是对原始信号进行清洗，避免异常数据对特征提取和构建模型 的干扰，同时还可以对原始信号进行时间窗的划分，有利于提取出重要特征。 常见的数据预处理手段包括缺失值，异常值，非工作段信号的处理，以及数据 归一化和时间窗划分。在特征提取阶段主要是对数据预处理后得到的信号数据 利用信号处理技术，对数据进行时域、频域、时频域特征的挖掘。模型训练是 整个框架的核心部分，决定了 RUL预测的效果，常用的数据驱动方法包括传统 机器学习算法，深度学习算法等，本文研究针对源域和目标域数据分布不一致 且包含多种工况的问题，提出了多工况条件下的域自适应模型，使得RUL预测 准确性得到了提升。模型训练完成后可以直接利用已训练好的模型，输出设备 的剩余使用寿命(RUL)值。根据得到的RUL预测值，结合不同设备的需求，可 以进行预测性维护，及时警报，甚至价值评估等活动。
2.2基于信号特征提取和处理 2.2.1时域特征提取
在模型训练之前，需要进行传感器信号的特征提取，即在时域、频域和时频
11

域针对每个时间窗进行信号的统计特征提取。假设每个时间窗的信号为z =
{Z],Z2，...,Zn},信号在时域上提取的统计特征如下：
1.
均值：
]n
Mean =方=—》召
i=l




Min = M 加(Z)
(2-3)
4.
均方根：


n

(2-4)
偏度:



脉冲因子:
Mox(|z 小
Impulse factor =
歆也1図|



方差:
n
ff=s(zi~^2
i-1
峰峰值:
Peak — to — Peak = Mox(Z) — Min(Z)
2.2.2频域特征提取
仅仅是时域的特征提取无法全面反映信号的特性，这时就需要我们对原始信 号进行频域的特征提取，主要是通过对信号进行傅里叶变换，得到幅度谱、相位 谱和功率谱，然后在这些谱上进行特征提取。本文主要是利用功率谱来进行特征 提取，估计方法采用welch功率谱估计法。
通常是利用傅里叶变换来得到信号的功率谱，然后在功率谱上进行统计特征 的提取。功率谱上的统计特征参考时域提取时选定的统计量。
12
假设信号为z(t)傅里叶变换的公式为:



2.2.3时频域特征提取
时频域的特征提取常采用小波变换和小波包分解。通常小波变换只对信号的 低频部分进行不断分解，高频部分不变,通过多次分解信号低频部分来满足要求。 小波包分解考虑到在信号的高频部分也会存在有效信息，因此对低频部分和高频 部分都进行分解。下面主要对小波变换进行详细说明，小波变换公式如下：

其中，K为小波基函数，a为尺度系数，控制小波基的伸缩；b为平移系数, 控制小波基的位置。小波变换的方法和傅里叶变换有相似之处，不同之处是小波 变换是将三角函数基转变为小波基。
2.3稀疏自编码器
2.3.1自动编码器
作为一种无监督的深度学习网络，自编码器(Auto-Encoder, AE)使得输入 网络的数据和输出网络的数据尽可能相等，从而学习到输入数据的潜在特征表 达。如图2-2所示，自编码器包含编码器和解码器两部分。

编码器将输入数据映射到新的特征空间，再通过解码器输出数据，损失函 数使得输入数据和输出数据尽可能相等，从而提取出输入数据的特征表示。假 设输入数据样本集为X = [xlfx2,x3, ...,xn],每个样本勺(i = 1,2, ...,n)的特征维度 是m维。办和九分别是编码器和解码器的非线性映射函数，那么输入数据的潜在 特征表示可以表达为：
h = fe(W^x +	(2 - 12)
其中“(i)是编码器的网络权重，b(D是偏置。解码器将潜在特征表示重
构，得到输出数据免如下：
x =九(IV ⑵ ％ + 匕⑵)	(2 — 13)
其中W⑵是解码器的网络权重，b⑵是偏置。自编码器的训练过程保证输 入数据和输出数据尽可能相等，因此损失函数表示如下：
n
JAE(8) = (訓孔一危『)	(2 - 14)
1=1
其中e =(w^,b^,w⑵上⑵)是编码器和解码器的参数，优化的目标是使 得损失函数丿朋(0)最小化。
2.3.2稀疏自编码器
由于自编码器在特征提取的过程中无法简明明了的得到输入数据的特征表 示，很多学者开始研究自编码器的各种变体来提升特征提取能力。稀疏自编码 器作为典型的自编码器的变体，开始被广泛应用。稀疏自编码器通过在损失函 数里增加稀疏惩罚项来实现对输入数据的稀疏特征提取。在自编码器的特征提 取中，提取出的特征维数是小于原始数据的特征维数，相当于完成了降维，而 稀疏自编码器的提取出的特征维数高于原始数据特征维数，即得到了高维且稀 疏的特征表示，这增强了自编码器的性能。
考虑输入样本集庞虫心，…,Xn],若令耳表示为隐藏神经元上的激活 值，那么互(心)可以表示为输入为勺时，隐藏神经元k的激活值。则隐藏神经元 k的平均激活度压为：
n
以=不》S(Xi)	(2 - 15)
i-1
为了实现稀疏表达，稀疏自编码器算法会在损失函数中加入惩罚因子来进 行稀疏约束，使得平均激活度压尽可能的逼近一个接近于0的常数p, P被称为
14

期望平均稀疏激活度参数。通常相对慵(KL散度)被用来作为损失函数的稀疏约 束项，相对赌随着p和以的差距增大而变大，优化目标是使得相对嫡趋近于0， 稀疏约束项可以表示为：
p	(1 — p)
KL(Pfc||p) = plog	(1 — p~)log—	r	(2 — 16)
Pk	(1 - Pk)
稀疏项惩罚可以使得大部分神经元处于未激活状态，得到高维且稀疏的表 达。同时，正则项也被加到损失函数里来避免过拟合，完整的损失函数如下：
a
人朋=屁⑹+訓“⑴+ 〃⑵怡+ P
k二 1
其中a和“是正则项和稀疏项的惩罚系数，用来表示每个项的相对重要性。
2.4迁移学习技术
迁移学习中的领域自适应技术是本文的研究重点，这一小节首先介绍了领域 自适应技术的背景和定义，然后重点介绍了本文用到的边缘分布自适应和条件分 布自适应，并且对常用的数据分布差异度量指标进行了介绍。
2.4.1领域自适应相关背景及定义
在工业大数据领域，以机器学习算法为代表的基于数据驱动的寿命预测算 法己经展示出了良好的效果，特别是随着传感器技术的发展，日益增长的数据 量使得机器学习算法发挥着越来越重要的作用。但是传统的机器学习算法基于 一个假设：训练集和测试集的数据来源于同一分布，即数据的特征空间和概率 分布相同。当训练集和测试集的数据分布不一致时，传统机器学习算法的性能 会受到影响，即泛化性较差。在实际工业生产中，由于设备工况条件的改变， 数据的分布会变化，为了保证机器学习模型的预测性能，只能收集和待预测数 据相同分布的数据用来重新训练模型，以适应新的分布，得到较好的预测结 果。然而在真实生产环境下，重新收集数据来训练模型会带来巨大的人力和经 济负担。在这种情况下，如果能实现知识的迁移，使得机器学习算法有更好的 泛化性，那么将极大的降低人工和经济成本。以轴承磨损为例，设备转速或者 负载的变化都会对轴承的剩余使用寿命预测产生较大的影响。如果使用传统的 机器学习算法，工况发生变化则需要研究人员重新收集数据来训练模型，然而 重新收集待预测工况条件下的轴承数据会带来昂贵的成本。
迁移学习的岀现就是为了解决数据分布不一致的问题，目的是利用来自一 个或多个相关数据集(称为源域)的知识来提高模型在当前数据集(称为目标 域)中的性能。它的灵感来自于人类的能力，即重用以前任务中的知识，而不
15 必从头开始学习新任务。源域和目标域通常用ZT和Z)t来表示，源域和目标域的 数据则用XS和来表示，其分布用P表示。同时，在迁移学习的任务中，源域是 有标签丹的，而目标域的标签厂是待预测的。那么迁移学习可以定义为：给定 源域DS和目标域Dt,在源域中有丰富的标签信息，而目标域中没有或者只有较 少标签信息下，模型借助DS来学习M的过程。
作为迁移学习的子方向，域自适应是给定源域和目标域后，源域IT和目标 域D'有相同的特征空间，以及相同的标签集合，但是边缘分布可能不相同，即 P(XS)HP(X)条件分布也可能不同，即P(XS|fs)域自适应的最 终目标是利用源域的知识预测目标域的标签。
最近几年，基于深度学习的域自适应技术得到了广泛的研究，主要可以分 为表示自适应和网络参数迁移。
从表征学习的角度来看，深层网络可以通过多层非线性变换学习高层抽象 表征。一般来说，低层次的表征更广泛，高层次的表征更具体。基于表示自适 应的方法旨在学习顶层或中间层的潜在抽象表示，利用源域的大量样本训练的 网络可以很好地完成目标任务。通常，这种方法通过添加一个惩罚项来调整源 域和目标域潜在抽象特征的统计分布，缩小学习过程中各领域之间的分布差 异。
网络参数迁移则是不同的模型共享一部分参数，比如不同深度学习模型的 前几层用相同的参数进行初始化。从特征变换的角度出发，深度神经网络通过 从训练数据集中学习多层参数，将输入信号变换到一个新的空间。因此，网络 输入输出之间的隐式关系模型是由层间参数决定的。对于跨域场景，参数迁移 方法假设相关任务的各个模型应该共享一部分参数，使得源域上学习到的知识 可以应用在目标域标签预测任务上。
2.4.2边缘分布自适应
对于源域数据集(DS,严)和目标域数据集(D［八),边缘分布不同时通常会采 用边缘分布自适应来减少两个域的分布差异，即缩小源域和目标域特征的边缘分 布P(XS)和P(Xt)的距离：
MMD(Ds,Dt) = ||P(XS) 一 P(Xp||	(2 — 18)
目前有很多用来度量数据集分布差异的测量指标，最大均值差异(MMD)是 迁移学习领域最常用的距离度量指标，它将原数据映射到希尔伯特空间中，然后 在新的空间中计算样本之间的平均距离，作为两个数据分布之间的距离。基于核 均值嵌入的MMD计算公式如下：
16

MMD(DSQt) = ||PW) _PW)||；

其中，％和他2分别表示源域和目标域中样本的数量；对和好代表源域和目标 域中的样本数据。冗代表再生核希尔伯特空间(Reproducing Kernel Hilbert Space , RKHS),①(•)表示将原始数据映射到再生希尔伯特空间的非线性映射。普遍认 为RKHS中的非线性映射是足够丰富的，我们可以从中找到一个合适的映射来 最大化数据集F与屮之间的距离。而fc(v) =< <DC), <fC)>为核计算，通常情况 下，我们会使用高斯核或者多项式核。
2.4.3条件分布自适应
当源域和目标域的条件分布不同时，单纯的采用边缘分布自适应效果一般， 甚至造成负迁移效应，条件分布自适应的提出用来解决这个问题，主要方法为缩 小源域和目标域的条件分布p(xs|rs)和p(xqH丿的距离：
Distance% DJ = ||P(Xs|ys) 一 戸(屮|严||	(2 - 20)
目前条件分布自适应的研究成果较少，文献［37］提出了类内迁移的思想，源 域和目标域中的相同类别特征理论上应该更加相似，因此相似类别之间的域自适 应可以尽可能避免负迁移效应。对于剩余使用寿命预测问题，不同的工况即为不 同的类别，因此通过对相似工况的迁移来避免负迁移效应。其计算方法如下：
Distance^, Dt) = ||玖护严)一
C
=》MMDg,妊)
C=1


该式对源域和目标域中相同类别的样本进行最大均值差异的计算，然后对所 有类别的计算结果求和加到损失函数中。，其中，c表示源域和目标域中样本的类 别总数，c代表样本所属类别。窄和"分别表示源域和目标域中属于C类别样本 的标签。從和恋分别表示源域和目标域中属于c类别样本的数量。秩和久机分别表 示源域和目标域中属于c类别样本的特征数据。坨,：和坨j分别表示源域和目标域 中属于c类别下标为i和丿•的样本特征数据。
2.4.4常用分布度量准则
迁移学习的核心思想是在模型训练过程中减小源域和目标域的分布差异，因 此数据分布之间的差异度量非常关键。目前有很多用于度量数据分布差异的指标, 常用的数据分布度量准则列举如下：
1) 欧式距离(Euclidean Distance)
D euclidean =	x2)2 + CVl V2)2	(2 — 22)
2) 曼哈顿距离(Manhattan Distance)
^Manhattan = |xx - X21 + |^ - y21	(2 - 23)
3) 切比雪夫距离(Chebyshev Distance)
Dchebyshev = max©】-x2l.lyi - y2l)	(2 - 24)
4) 余弦距离(Cosine Distance)

5) KL 散度(Kullback-Leibler Divergence)
DKZ(PIIQ)=工 P(x”og謡 (2 - 26)
6) 最大均值差异(Maximum Mean Discrepancy),最大均值差异是一种非参数 的距离度量准则，它将原数据映射到希尔伯特空间中，然后在新的空间中计算样 本之间的平均距离，作为两个数据分布之间的距离。通常在计算MMD时，为了 降低运算复杂度，会采用核技巧，直接得到两个样本在希尔伯特空间的距离,
MMD的定义如式2-19o在迁移学习领域，MMD是应用最广泛的数据分布差异
度量指标。
2.5相关数据集
2.5.1刀具数据集
本文第三章采用的刀具数据集是中国信通院举办的第二届工业大数据创新
18
竞赛中的比赛数据集，所有的原始数据均来自真实的铳削加工场景，由富士康公 司提供。整个刀具数据集包括三个子数据集，代表了三把不同的刀具从正常的初 始状态到严重磨损状态的完整生命周期。其中，严重磨损状态意味着刀具无法使 用，即剩余使用寿命为0。
三个原始子数据集都包含传感器数据和控制器数据两部分。传感器数据包含 三个方向的振动信号以及电流信号。图2-3展示了刀具进行切削所在的机床，其 中传感器安装方向包括X、Y、Z三个方向，分别对应了原始数据中的vibrationl > vibration_2> vibration_3三个信号。控制器主要是采集主轴负载信号、刀具坐标 信息、时间信息。值得注意的是，控制器和传感器均是每五分钟里随机选取一分 钟进行信号的连续采集，每采集一次生成一个原始数据文件。刀具1、刀具2、 刀具3分别有48、48、37个文件，因此可以认为刀具1和刀具2的完整寿命是 240分钟，而刀具3的完整寿命是185分钟。由于在信号采集过程中传感器和控 制器偶尔暂停，导致原始数据存在缺失值，因此在进行模型训练前需要进行数据 预处理操作。
刀具数据在采集的过程中会经历不同部件的切削，经历不同的磨损速度，从 而作为划分工况的标准，进行相似工况的迁移。

图2-3机床

2.5.2轴承数据集
在本文的第三章中使用了 PHM 2012挑战赛提供的轴承剩余使用寿命预测 数据集，数据采集自PRONOSTIA实验平台，实验平台允许实施几个小时的轴
19
承磨损退化实验，同时传感器采集轴承的信号数据。如图2-4所示，实验平台 包括三部分：旋转部件，退化生成部件(在轴承上施加径向力)，测量部件。

图2-4 PRONOSTIA实验平台结构
比赛提供的数据集包含三种运行条件：(1)条件一下转速设定为ISOOrpm, 径向力设定为4000N; (2)条件二下转速设定为1650rpm，径向力设定为 4200N;⑵条件三下转速设定为1500rpm，径向力设定为5000N;条件一和条件 二下包含7个轴承从正常到损坏的完整数据集，条件三下包含3个完整数据 集。数据集中的数据包含振动信号和温度信号。震动信号每隔10s采样一次， 每次采0.1s,即每两个文件之间间隔10s,采样频率为25.6kHZ,每个文件包含 2560条样本。温度信号每隔60s采样一次，即每两个文件之间间隔60s,采样频 率为10HZ,每个文件包含600条样本。实验中只需用到振动信号来提取时域特 征，频域特征和时频域特征。轴承在衰退的过程中会经历不同的磨损时期，本 文利用PHM 2012轴承数据集进行不同磨损时期的划分，从而进行相似工况的 迁移来优化模型。
2.6本章小结
本章是全文的理论基础部分，首先介绍了基于数据驱动的剩余使用寿命预测 的一般流程，包括信号采集，数据预处理，特征提取，模型训练，RUL预测等步 骤。然后对本文涉及到的信号特征提取技术进行了介绍，包括时域特征提取，频 域特征提取，时频域特征提取。接着对提出模型的特征提取器即稀疏自编码器 (SAE)进行了理论介绍，包括SAE的原理和损失函数。第四小节重点介绍了迁移 学习特别是域自适应技术的原理，包括边缘分布自适应和条件分布自适应的公式 推导，接着介绍了常用的数据分布差异度量指标。最后小节介绍了本文所采用的 数据集。
20
第三章复杂工况下基于领域分布自适应技术的剩余使用寿
命预测模型
剩余使用寿命(RUL)预测算法通常可以分成三类：基于物理模型的算法，基 于数据驱动的算法，基于混合模型的算法。其中基于物理模型的算法是在理解设 备退化机理的基础上，通过一系列数学方程来描述设备的退化现象。建立的物理 模型综合了材料、载荷、润滑、温度等因素对设备的影响，因此具有较强的可解 释性，同时随着对失效机理的不断认识，可以进一步来修正物理模型。在失效机 理明确，设备结构简单的情况下，即数据量较少时，基于物理模型的RUL预测 算法便于建立。然而，在实际工业生产中，这类方法往往很难针对某一特定对象 建立精确的数学模型，相应的成本也很高。此外，随着物理模型的复杂化，模型 参数的数目增加，参数的估计也变得更加困难。因此，由于其固有的特点，基于 物理模型方法的应用具有局限性。随着工业生产领域数据量的日益增长，基于数 据驱动的算法开始由于其不过度依赖专家知识的特点，开始得到广泛应用。特别 是其中的人工智能算法具有强大的非线性映射能力，只基于传感器获取的历史监 测数据，便可以得到具有较高准确性的RUL结果。
目前，大部分基于数据驱动的算法基于一个假设：用于训练模型的数据集和 测试模型的数据集分布一致。然而在实际的工业生产中，工况的变化会使得训练 集和测试集的分布不一致，特别是复杂工况条件下，训练集和测试集可能都会包 含多个工况，即含有多种数据分布，因此RUL预测模型的准确率会下降，即泛化 性难以得到保证。为了解决这个问题，通常采用领域自适应技术来尽可能减小训 练集和测试集的分布差异，同时利用训练集获取的知识来提升模型性能。
基于以上问题，本文结合工业数据的实际情况，提出了一种新的解决多工况 条件下的领域自适应模型(Domain Adaptation method under Multiple Operation Conditions, DAMOC)。该模型提出了基于相似工况的样本特征差异度量方法，将 该差异作为损失函数的一项，缩小了训练集与测试集的分布差异，提升了 RUL预 测模型的泛化性，克服传统方法在复杂工况导致的分布不同条件下预测准确性受 影响的问题。最后在富士康刀具数据集和PHM2012轴承数据集上，对提出模型 进行了评估，并与前人的工作进行了对比。
3.1问题及定义
在实际的工业生产中，传感器所采集的数据为多维时间序列数据。这些监测
21

数据代表了设备的运行状况，因此当设备的工作状况发生变化时，会使得训练集 和测试集的数据分布不一致。领域分布自适应技术是一类常用的解决数据分布差 异的迁移学习方法，其中训练集称为源域，测试集称为目标域。
由于工业领域采集的数据主要是时间序列数据，在数据预处理阶段会进行时 间窗的划分，即特征维度为d的原始数据集D会被分成N个子数据集。假设时间窗 长度为厶，每个子数据集用益(益e只叽,：E N)表示,则子数据集样本数量为厶。 滑动时间窗将原始数据划分成N个小时间窗，其中第/个滑动窗口表示为X?= 貯即为RUL预测模型的原始输入。
令和陷分别表示源域和目标域，xsexs和* ext分别是来自源域和目标 域的样本数据，样本数量分别为n和m。工业生产中设备传感器采集到的源域数 据和目标域数据服从边缘概率分布P(XS)和P(Xt)。相应的，源域和目标域数据对 应的剩余使用寿命标签分别表示为厂和厂,ys e厂和尸e 0则分别是源域和目 标域样本数据的标签。而如果目标是剩余使用寿命预测，则严为待预测值。考虑 到在实际的工业生产中，源域和目标域数据分别会包含多种工况，假设有C种工 况，c = ｛1,2,C］代表不同工况的类别。
因此，剩余使用寿命预测的目标是训练一个模型f： x -> y来预测目标域数据 的剩余使用寿命严，其中训练数据用｛(对,〃,q)｝世1来表示，瑞wxs, y?,eY, Ci e C,源域与目标域的边缘概率分布不同，PQ 主p(xt)。
3.2 DAMOC模型详细介绍
3.2.1 Domain Adaptation SAE-LSTM
为了解决多工况条件下数据分布不一致问题，本文提出了多工况条件下的领 域自适应模型(Domain Adaptation method under Multiple Operation Conditions, DAMOC),该模型可以在训练的同时最小化训练集和测试集的分布差异，模型结 构如图3-1所示。

FC Output
图3-1域自适应SAE-LSTM模型图
22
本文首先利用SAE-LSTM模型构建了 RUL预测框架的基础模型，包括多层 稀疏自编码器(SAE)和LSTMo SAE作为特征提取层，可以将输入数据映射到新 的特征空间，避免了繁重的特征处理工作，并利用多层网络的非线性特性深入挖 掘来得到源数据中的潜在特征。然后这些潜在特征被输入到多层LSTM,最后通 过全连接层输出结果。工业数据多为时间序列数据，考虑到样本之间的时间依赖 特性，模型采用了 LSTM进行时间序列预测,SAE提取的潜在特征被输入LSTM, 并在最后一层加入全连接层来输出结果。为了避免数据分布不一致影响模型的泛 化性，模型加入了域自适应机制。
在模型训练阶段，源域XS和目标域乂上数据同时输入模型，经过多层SAE后分 别得到潜在特征/和然后通过度量疋和，的分布差异并添加到损失函数里来 实现分布差异的最小化，最后源域潜在特征肚继续通过LSTM和全连接层来输 出RUL结果。本文使用最大均值差异(Maximum Mean Discrepancy, MMD)来度量 数据分布差异，与其他评估准则相比，MMD可以估计各种分布之间的非参数距 离，并且避免计算中间密度，是迁移学习领域使用频率最高的距离度量方法。因 此，模型训练目标是同时最小化源域数据集上训练的深度网络损失函数和源域数 据集与目标域数据集之间的域自适应损失，域自适应SAE-LSTM模型(Domain Adaptation SAE-LSTM, DASL)的损失函数可以表示为：

损失函数第一项是训练集标签和预测值的损失项，测试集不参与，第二项 是训练集和测试集的分布差异项。因此在训练过程中，训练集的损失项和两个 数据集的分布差项会同时最小化。
3.2.2多工况下的领域自适应
上一小节介绍了域自适应的SAE-LSTM模型，从参考式3-1可以看出损失 函数的分布差异项是针对整个训练集和整个测试集进行域自适应，没有考虑实际 应用中训练集和测试集都包含多种工况的情况。根据参考文献[24],域自适应成 功的关键在于利用源域和目标域的相似性。因此当源域和目标域均包含多种工况 时，只对相似工况的域自适应可以避免负迁移效应对泛化性的影响。在域自适应 的SAE-LSTM模型的基础上，本文提出了多工况条件下的领域自适应模型来实 现相似工况之间的迁移，这表示两个模型具有相同的网络结构但损失函数不同。 假设有C种工况，c = {1,2，…,C}代表不同工况的类别，每种工况有不同的相对重 要性，DAMOC模型的损失函数可以表达为：
C

23
损失函数第一项是训练集标签和预测值的损失项，测试集不参与，第二项表 示源域和目标域的相似工况分布差异的加权和，其中权重他(0 ＜他＜ 1)代表域 自适应过程中的相对重要性。
在应用相似工况迁移机制时，不同的工况可以看成是不同类别，对源域和目 标域的相似类别进行域自适应再求加权和可以尽可能利用到不同域之间的相似 性，提升迁移的有效性。然而在实际应用中，不同的类别有着不同的重要性，权 重&越高意味着重要性越高，因此，DAMOC模型损失函数第二项中不同的类别 权重赋值方法也会影响模型的表现。目前有两种赋值策略：(1) 一种是多次随机 赋值法，考虑到他介于0到1之间，因此随机在0到1之间选取一个值赋给&， 多次重复找到最优的值。(2)第二种是最大最小搜索法，即从0开始，每次增加 一定步长比如0. 1来给“C赋值，直到“C等于1，通过一定步长的遍历来找到最优 值。以上两种赋值方法思路简单，容易实施，但是每次赋值就需要重新训练一遍 模型，多次训练之后得到平均值作为结果，计算开销太大。受到参考文献［38］启 发，本文采用A-distance指标来量化佻，它表示建立一个线性分类器来区分两个 分布的区分度。因此，A-distance可以表达为：
dA(Xs, X。= 2(1 — 2e(H)	(3-3)
其中e(n代表分类器f区分XS和Xt的准确率，准确率越低，说明样本区分度 越小，样本分布越接近，则权重越大。因此源域和目标域中第c类的A-distance可 以表示为：
dc = dA^,X^	(3-4)
权重“C可以计算为：
通过这种方法，坨的赋值避免了多次搜索，在后续的实验中，不同的权重赋 值方法会进行比较来证明A-distance方法的有效性。
3.2.3算法流程
这一小节对模型的训练策略进行介绍，首先随机初始化稀疏自编码器，网络 权重随机初始化方法采用文献［39］提出的Kaiming初始化方法。然后对稀疏自编 码器进行预训练，预训练的目的是增强稀疏自编码器的特征表征能力，训练数据 采用源域数据£＞s和目标域数据优化目标是最小化参考式(2-17) o预训练完可 以从编码器输出潜在特征表示疋和X,训练后的网络权重表示为念。预训练的目 的是为了使网络获得更好的初始化参数，使训练中的模型更快收敛。
在完成SAE的预训练过程后，进行整个SAE-LSTM网络的训练。首先使用 比初始化SAE-LSTM网络结构的特征提取层，然后使用公式(3-2)作为损失函数
24 进行模型的训练。由于模型是基于神经网络的，所以采用mini-batch随机梯度下 降法，只在batch之间进行分布自适应，而不是对整个数据进行分布自适应。整 个模型的输入是有标签的训练数据集和无标签的测试数据集，两个数据集提前进 行了工况的划分，即两个数据集都包含了多种类别并进行了标注，在训练过程中 对相同类别进行域自适应。
整个算法的伪代码为:
算法DAMOC：
Input:
D$,Dt：源域和目标域输入数据
Vs：源域标签
r：源域工况类别标签
◎：目标域工况类别标签
c：源域和目标域相同工况的类别标签
比:稀疏自编码器(SAE)参数
0m：整个网络(SAE-LSTM)参数
“：学习率
1：利用预训练两层SAE
2：更新 SAE 参数：es^-os- KdJsAE^.D^/de,)
3：初始化整个网络(SAE-LSTM)参数，其中SAE部分采用比初始化
4： repeat
5： 将输入到网络中，在SAE层之后得到源域和目标域潜在特征 表达：/和加，利用相同工况的类别标签c可以得到砒和砒
6:	使用MMD和式(3-5)计算得到的自适应权重血计算/和加之间的距
离工ScMMD(碣號)
7： /通过后接全连接层的LSTM得到预测结果Y^.edict,最终的损失函 数为：Jm = 10SS(ys,y；redG)+E21PcMMD(號，战)
8： 对网络中参数进行更新：Om^em- K&Jm/dOrn)
9： until 收敛到最小
Output：剩余使用寿命预测模型f
25
3.3实验与评估
3.3.1数据集简介及工况划分
在本章中，我们使用刀具数据集和PHM2012轴承数据集来评估提出的域自 适应模型。
本章釆用的刀具数据集是中国信通院举办的第二届工业大数据创新竞赛中 的比赛数据集，所有的原始数据均来自真实的铳削加工场景，由富士康公司提供。 整个刀具数据集包括三个子数据集，代表了三把不同的刀具从正常的初始状态到 严重磨损状态的完整生命周期。其中，严重磨损状态意味着刀具无法使用，即剩 余使用寿命为Oo三把刀具的数据可以视为三个数据集，以下用TD001, TD002, TD003分别指代，TD001和刀具TD002的完整寿命是240分钟，而TD003的完 整寿命是185分钟。三个数据集中又分别包含传感器和控制器两部分。控制器信 号中，刀具的相对坐标是比较重要的反映刀具情况的参数。相对坐标主要能够反 映刀具的工作模式，利用折线图将散点坐标连接起来，形成的三维图像就可以反 映刀具切割工件时的运动轨迹，因此可以根据刀具运动轨迹对切削工况进行分类。 如下图3-2至3-5所示，总结了三个训练集大致包括的几种相对坐标反映的刀具 运动轨迹。可以看出，TD001保持在固定的高度进行切削，TD002采用波浪式切 削方式，即TD001和TD002在整个切削过程中只有一种工作方式。然而，TD003 包含两种切削模式，因为它改变了一次运动路径，这意味着TD003包含两种操 作工况。从刀具运动轨迹可以看出，TD001与TD003的第一种工况相似，TD002 与TD003的第二种工况相似。

图 3-3 TDOO2 0-240min 运动轨迹
图3-4 TD003生命周期前半部分运动轨迹

我们还使用了 PHM2012挑战赛的轴承数据集来进行模型的评估，该数据集 描述了轴承的退化过程，被广泛用于轴承故障诊断和寿命预测评估。数据集包括 三种操作工况。在第一种工况下，电机转速为1800rpm,负载为4000N；在第二 种工况下，电机转速为1650rpm,负载为4200N；在第三种工况下，电机转速为 1500rpm,负载为5000N=与刀具数据集不同，受到文献［35］的启发，本文将轴承 退化状态分为两部分：缓慢退化状态和快速退化状态。首先选取起始位置数据作 为基准值，这部分数据可以视为无磨损状态的数据。按照样本顺序依次计算所有 样本和起始位置数据之间的皮尔逊相关系数，可以得到一组按时间顺序排列的相 关系数，如图3-6所示，它是一条递减曲线，即工作时间越靠后的采集数据与基 准值的相关性越低。一旦信号状态发生变化，此时相关系数突然降低，就可以知 道快速退化状态的起点，从而将轴承的退化周期分成两个状态类别。


图3-6 轴承2相关系数曲线
表3-1展示了工况1下7个轴承缓慢退化状态和快速退化状态的样本范围。 实验中每个轴承依次作为测试集，其余6个轴承数据集分别作为训练集，结果取 平均值。不同的退化状态视为不同的类别，从而进行相似类别的域自适应。
表3-1轴承数据集退化状态划分
轴承编号
缓慢退化
快速退化
轴承1

3.3.2数据预处理
数据的预处理主要是指对传感器的数据进行处理，包括数据时间窗划分、对 非工作段信号的检测和处理、对信号异常值的处理和对信号缺失值的处理四个部 分。划分时间窗可以一定程度上扩充数据量，后续的数据预处理和特征提取是针 对每个时间窗进行的。对于刀具数据集，时间窗长度设置为0.5s,即12800个 样本。对于轴承数据集，时间窗长度设备为0. Is,即2560个样本。
非工作段信号主要是由于设备刚开始启动工作时传感器采集得到的，对RUL 预测来说属于无效信号，应该予以剔除。图3-7为刀具1中0-5min的传感器信 号数据，每幅图中从上到下的四个图形分别为vibration l、vibration_2、vibration_3 和current在这个时段内所取的一分钟内的信号波形。从图中可以看出，信号开 始阶段振动加速度值几乎为零。在数据中对非工作段信号都采取截断操作，去除 其所在的时间窗。
对信号的异常值处理通常是找到信号波动特别明显的位置，如图3-8所示, 对所在的时间窗进行剔除。信号缺失值往往是由于传感器的异常，比如检测溢出， 导致接收的数据产生了空值。对于缺失值的处理，本文采用填充法在划分时间窗 之前进行填充。

图3-7刀具1 (TD001)0-5min传感器信号

29

图3-8刀具1 (TD001)25-30min传感器信号

3.3.3特征提取
针对传感器信号一般采用包含物理意义和统计意义的特征提取方法，具体来 说就是在时域、频域和时频域提取一些统计特征和功率、能量等特征。
针对信号的时域特征提取，主要是提取信号在时域特征上的统计量，包括均 值、方差、最大值、最小值、均方根值、偏度、峰度、方差、波形因子、峰值因 子、脉冲值、裕度等。对于信号的频域特征提取，主要是通过对信号进行傅里叶 变换得到功率谱，然后在功率谱上进行统计特征提取。对于信号的时频域特征提 取，主要是进行5级小波变换，利用Python中的wavedec函数输出6个能量特 征及其归一化后的特征。
除了在时域、频域、时频域上进行信号的特征提取外，本文还提取了自回 归模型的系数作为特征。
3.3.4评价指标
为了方便与之前的论文进行对比，我们采用了均方根误差(RMSE)和评分函 数(SCORE)来对模型的结果进行评估。RMSE的值越小代表模型的拟合程度越好, 而SCORE的值越大代表模型的预测性能更好。假设待测试样本个数为N,第i个 样本的真实值和预测值的差用助；表示
其中，均方根误差(RMSE)的定义为：
30


评分函数(SCORE)的定义为:
(3-7)
从公式中可以看出，提前预测和滞后预测的权重是不同的。因为在工业制 造领域，滞后预测往往会导致更大的损失。
3.3.5实验结果与分析

这一小节我们在刀具和轴承数据集上对比了所提出的模型和其他模型的性 能，评价标准采用均方根误差(RMSE)和评分函数(SCORE)。对比模型包括：
(1) LightGBMRO】是基于GBDT算法提出的改进模型，使用基于直方图的 分割算法取代了传统的预排序遍历算法，在训练速度，内存消耗，以 及准确性上均优于传统的GBDT模型。
(2) DNN使用了多层神经网络构建。
(3) LSTM是长短期记忆网络，适用于处理时序数据预测。
(4) SAE-LSTM基准模型，叠加SAE与LSTM构成基础的深度RUL预 测模型。
(5 ) DASL(Domain Adaptation SAE-LSTM)是在 SAE-LSTM 基准模型上增 加了域自适应机制，但是没有考虑工况的影响。
(6) DAMOC(pl)考虑了工况影响，在相似工况间进行域自适应，但是没 考虑工况重要性的影响，即所有工况权重均设置为1。
(7) DAMOC(p2)不仅在相似工况间进行域自适应，还考虑到了工况重要 性的影响，工况权重“为动态调整，设置方法采用A-distance。
首先在刀具数据集上对比了提出模型与其他模型的性能，表3-2和表3-3分 别展示了以RMSE为指标和以SCORE为指标的实验结果。刀具数据集上设置了 3组实验：实验A的训练集为TD001,测试集为TD003；实验B的训练集为 TD001,测试集为TD002；实验C的训练集为TD002,测试集为TD003。为了 验证域自适应的有效性，将SAE-LSTM算法与DASL算法进行了比较。可以看 出，域自适应模型DASL在实验A和C中的性能更好，而SAE-LSTM模型在实 验B中的性能更好，说明了域自适应机制并不总是有效的。
31
由于不同的工况条件可能导致不同的数据分布，所以设计了实验A和实验 C来说明工况的影响。TD003包含两种操作工况，而TD001和TD002均只包含 一种工况，并且TD001与TD003的第一种工况相似，TD002与TD003的第二种 工况相似。实验A和C中对相似工况进行了域自适应，即运行了 DAMOC(pl)o 可以看出，DAMOC(pl)方法的性能优于其他方法，这意味着在相似的工况条件 下进行域自适应可以在一定程度上避免负迁移影响。由于DAM0C(p2)适用于源 域和目标域包含多个相似工况的条件，因此只在轴承数据上与其他模型进行了对 比。刀具数据集上主要说明了相似工况之间进行域自适应的有效性。
表3-2不同模型在刀具数据集上的RMSE指标对比


LightGBM

DNN

LSTM

SAE-LSTM

DAMOC (pl)

表3-3不同模型在刀具数据集上的SCORE指标对比



LightGBM

DNN

SAE-LSTM

DAMOC (pl)

表3-4和表3-5总结了不同模型在轴承数据集上的实验结果。实验只采用了 转速1条件下的轴承数据集，包含7个从正常到损坏的全寿命子数据集，7个数 据集依次作为测试集，剩下6个作为训练集分别进行模型训练，最后平均6个模 型的结果作为该测试集的结果,因此有B1至B7共7组实验。可以观察到DAMOC 模型(相似工况进行迁移)在所有数据集上的表现都明显优于LGB、DNN、LSTM、 SAE-LSTM,特别是采用RMSE作为评价指标优势更明显。与刀具数据集划分工
32
况方式不同，本文使用文献［35］提出的方法来划分退化阶段。实验结果表明 DAMOC (pl)和DAMOC (p2)在所有实验中性能都比DASL有所提高，并且 在大多数实验中都有明显的提高，这再次证明了在相似工况之间进行域自适应的 有效性。不同于DAMOC (pl)对所有操作工况赋予相同的权重，DAMOC (p2) 可以在训练过程中实现对不同操作工况权重的动态调整。值得注意的是， DAMOC (p2)在使用RMSE作为评价指标的所有实验和使用SCORE作为评价 指标的大多数实验中都取得了较好的性能，这表明使用A-distance方法设置工况 权重的有效性，从而也说明不同的操作工况的权重设置对域自适应有影响，后续 会对这一影响进行分析。从SCORE指标的实验结果可以看出，即使两个模型的 RMSE结果接近，SCORE的结果也可能有很大差异，这是由于早期预测和后期 预测的权重不同造成的。
表3-4不同模型在轴承数据集上的RMSE指标对比

表3-5不同模型在轴承数据集上的SCORE指标对比

不同模型的运行时间差异很大，本文在轴承数据集上对比了不同模型的运行
33

时间，实验所采用的GPU为Nvidia Tesla M40,时间窗长度为2560。LightGBM, LSTM, DASL, DAMOC(pl), DAMOC(p2)的平均运行时间分别为 可以看出DASL和DAMOC模型的运行时间明显更长，这是因为域 自适应过程需要对两个域的最大均值差异进行计算，消耗了时间。同时，由于 DAMOC(p2)需要在域自适应的基础上进一步计算工况的权重“，因此会比 DAMOC(pl)的运行时间更长。
动态域自适应因子的影响
通过轴承数据集上DAMOC(pl)和DAMOC(p2)的对比，可以发现工况的权 重分配对模型的影响，这一小节对工况权重的影响进行分析。在轴承数据集中, 工况被划分成两种：缓慢退化状态和快速退化状态，即数据集包含两种类别。令 类别1 (缓慢退化状态)的权重为“，则类别2 (快速退化状态)的权重为1-“。
为了证明权重“对模型的影响，我们分别从0至1每隔0.1递增设置“的值, 共进行了 D1至D4四组实验来运行DAMOC模型。实验D1的训练集为轴承3 数据，测试集为轴承7数据。实验D2的训练集为轴承5数据，测试集为轴承6 数据。实验D3的训练集为轴承2数据，测试集为轴承4数据。实验D4的训练 集为轴承1数据，测试集为轴承6数据。实验评价指标采用RMSE,需要注意的 是，在每项实验中，我们从实际值中减去平均值再记录下来，用RMSE-SUBM表 示，不同“取值下的结果如图3-9所示。显然，评估值随“的取值不同而变化，这 表明不同操作工况的权重设置对模型有影响，即不同工况在域自适应过程中有不 同的重要性。

图3-9轴承数据集上不同权重的RMSE指标对比
34
同时，本文对三种权重赋值方法进行了比较，如表3-6所示。第一种方法是 基于A-distance计算方法的动态赋值法，第二种方法是随机赋值，即随机在0到 1之间选取一个值赋给“，多次重复找到最优值。第三种方法是最大最小搜索， 即从0至1每隔0.1递增赋值给“，从而找到最优值。从实验结果可以看出，本 文采用的基于A-distance计算方法的动态赋值法明显优于随机赋值，同时和最大 最小搜索法结果接近。然而，随机赋值和最大最小搜索均需要多次运行模型来获 得稳定的结果，这表明我们采用的动态赋值法更高效，在模型运行过程中就可以 进行权重的动态设置。
表3-6不同权重赋值方法的RMSE指标对比

D1
D2
D3
D4
随机赋值

最大最小搜索

动态赋值法

3.4本章小结
在本章中，针对多工况条件下的域自适应问题，我们提出了 DAMOC模 型。DAMOC模型在SAE-LSTM的基础上增加了相似工况间的域自适应机制， 同时对不同工况在域自适应过程中的权重进行了定量计算来进一步提升性能。 这基于两个假设：（1）相似的操作工况具有相似的特征分布；（2）不同的工况 对域自适应过程的影响不同。
本文提出的DAMOC模型在相似的工况条件卞实现了域自适应，并可以量 化不同工况的数据分布的权重。为了计算不同分布的权重，DAMOC模型采用 了基于A-distance的动态赋值法。提出的模型在刀具和轴承数据集上与其他模 型进行了对比，结果表明：（1）提岀的模型性能上优于LSTM、DNN、 LightGBM,表明LSTM与SAE相结合可以有效地提取潜在特征，用于RUL预 测。（2）与 LSTM 和 SAE-LSTM 相比，DASL （Domain Adaption SAE-LSTM） 并不总是表现更好，而DAMOC模型的性能最好，这表明在相似的工况条件 下，域自适应的效果更好。（3）实验结果表明，在域自适应过程中不同工况的 重要性是不同的，我们采用的基于A-distance的动态赋值法能够有效地评估工 况的相对重要性，进一步提高模型的性能。
本文对刀具数据的工况划分是基于走刀路径，对轴承数据的工况划分是基
于轴承的衰退速度。在未来的研究中，还有几个问题需要研究：（1）如何设计
更通用的工况划分方案。（2）当源域和目标域没有相似的工况时，如何更有效
35
地优化多工况下的域自适应，是否可以利用第三方数据集来进行多次迁移以提 升模型的性能。
36
第四章基于微信小程序的工业设备运维系统
在工业生产中，设备的维护对安全保障和企业的经济效益有着重要意义。传 统的设备维护方式包括事后维护和预防性维护。事后维护即在设备岀现隐患之后 进行设备的更换维修，虽然方法简单直接，但往往在这个时期设备容易出现不可 预知的故障，严重影响生产效率，造成昂贵的维修成本。预防性维护即在设备未 出现退化时进行定期的维修，虽然可以很大程度上避免故障的发生，但是非必要 的检查维修也增加了企业经济成本。同时预防性维护也无法确保完全消除设备的 隐患。这两种设备维护策略无法满足工业日益增长的对有效性、及时性、可靠性 的需求，因此，预测性维护的策略应运而生，即利用技术手段对设备未来一段时 间的健康状况进行预测，根据预测结果制定维护策略。
过去由于技术的限制，预测性维护策略大多停留在理论阶段。近些年来，随 着信息技术的发展，各类传感器和物联网系统广泛应用于工业领域，这大大提高 了企业的设备运行数据采集能力。同时，人工智能技术的发展提高了设备故障诊 断和剩余使用寿命(RUL)预测的准确性。因此，设备的预测性维护系统具备了技 术实现基础。
本文在对设备的RUL预测算法进行理论优化的同时，也从工程应用的角度， 将提出的RUL预测算法进彳亍工程实现，结合工厂实际的运维需求，设计并实现 了基于微信小程序的工业设备运维系统。该系统主要功能是利用本文提出的 RUL预测算法对设备进行预测性维护和管理，包括实时监测与预警、历史数据 统计、任务管理、设备资产管理四个功能模块。同时，设备资产管理模块包含了 设备价值评估功能，基于RUL预测算法的结果进行设备的价值评估，这为企业 在资产管理方面提供有效的数据支持。设计的运维系统采用轴承数据集来模拟工 厂设备运维。
本文设计的工业设备运维系统面向的用户是工厂运维管理人员和外勤技术 人员。系统可以对传感器采集的设备运行数据进行实时分析，预测设备的剩余使 用寿命，方便技术人员实时了解设备的状态。同时，系统可以进行任务管理，不 仅提高了运维人员的效率，也降低了企业成本。这为企业带来的潜在价值十分可 观，经济上是可行的。
同时，本文基于微信小程序进行运维系统的开发，在开发成本上，由于微信 小程序依附于微信，无需考虑多种版本的开发来适配不同的操作系统，相对于传 统的App开发，减少了开发和维护成本。
37
自微信小程序推出以来，一直保持快速更新，功能逐渐成熟。官方提供了详 尽的开发文档，大量可调用API,以及各种组件，这为小程序的实现提供了技术 支持。同时，活跃的微信小程序开发社区使得开发过程中遇到的难题可以较易得 到解决方案。这些便利都使得基于微信小程序的运维系统开发在技术实现上具备 可行性。
4.1功能需求分析
4.1.1综合管理需求分析
传统的设备维护策略需要依靠人工去定期检查,往往会造成人力和财力的浪 费。随着大数据技术的发展，利用人工智能算法对传感器收集的设备运行数据进 行实时监测和分析，可以提前预测设备部件状态，进而对设备进行维修。同时， 目前工业领域中的运维管理系统大部分功能较为单一，通常会采用单独的数据分 析系统、工单管理系统、资产管理系统等，这些系统之间的数据通常不会共享。 因此，工业领域需要以预警为主，同时集成多种功能的运维管理系统来充分利用 日常数据来实现管理的智能化。
4.1.2工厂安全需求分析
传统的设备维护策略往往具有维护不及时或者过度维护的缺点，因此工厂需 要运维系统可以利用RUL预测算法对传感器采集的设备运行数据进行实时分析, 从而推测出设备状态，根据设备状态制定合适的维护策略，降低维护成本。同时， 工厂技术人员需要实时看到设备的运行数据报表，了解设备的参数信息，当前状 态，同时有对历史数据进行分析的需求。
4.1.3外勤维修需求分析
当某个设备被诊断为故障状态，需要进行停机维修时，工厂需要运维系统能 及时发出预警，然后运维管理人员能派发故障工单给外勤技术人员，使技术人员 及时得到预警以及设备故障类型，从而更有针对性的进行维修。当维修完成后， 需要技术人员填写维修工单，记录设备的故障时间，故障原因，维修方法等信息。
4.1.4资产管理需求分析
工业设备是企业资产的主要组成部分，因此，对设备资产的管理是十分有必 要的。传统的运维系统很少包括对设备资产的管理，工厂需要对设备的生命周期
38
有一个完整的管理，包括设备的购买、安装、运行状态、价值评估等。设备资产
管理过程中形成的数据有助于企业了解设备故障规律，实行更有效管理。
4.2系统设计
4.2.1架构设计
如图4-1所示，运维系统总体架构包括视图层，逻辑层，数据服务层三部分。 每一层都有各自的功能，从而实现总体任务的划分。
视图层

ft页界面
我的界面

业务逻辑层

实时监测与预警
历史数据统计

设备资产管理
任务管理

数据存储层
人员信息数据

设条历史数据
设备台账数据

维修工单数据
图4-1系统架构
视图层即展示给用户的操作界面，包括界面渲染功能和交互功能，即用户在 操作界面进行点击或输入数据后，视图层将逻辑层处理得到的数据渲染在前端页 面，进行可视化展示。微信小程序页面包含了 wxmR wxss、js和json四个文件， wxml用于描述小程序的页面结构，wxss文件用于描述小程序的页面样式，js文 件用于描述小程序的逻辑结构和部分数据,json文件用于描述小程序的配置信息。 结合功能
逻辑层作为视图层和数据服务层的桥梁，是整个系统的核心，主要功能是数 据处理和逻辑交互，使用Javascript语言进行开发。当用户在操作界面输入数据 时，视图层会将数据传递给逻辑层进行处理，并将结果返回到视图层。当需要进 行数据的存储和读取时，逻辑层和数据服务层会产生交互，即进行数据存储时由 逻辑层将数据传递给数据服务层，进行数据读取时由逻辑层将数据服务层返回的 数据传递给视图层。
数据服务层主要是用来进行数据库的访问，根据收到的请求进行相应的数据
39
库增删改查操作。微信提供了云数据库功能，开发者不用自己建立数据库。云数 据库是JSON格式的数据库，数据以集合的形式存放在云数据库中。开发者可以 利用云函数或者云开发控制台对云数据库进行增删改查操作，同时可以设置用户 访问数据的权限。
4.2.2功能模块设计
如图4-2所示，本文设计的工业设备运维系统主要包括四个功能模块：实时 监测与预警模块，历史数据统计模块，任务管理模块，设备资产管理模块。每个 功能模块下又包含了多个子功能。

图4-2系统功能设计

如图4-3所示，设备状态的实时监测与诊断模块是运维系统的核心模块。对 于设备的实时监测，前端页面显示当前所有设备的状况，包括正常运行设备和已 故障设备，通过点击正常设备查看所有正在运行的设备情况，包括工况情况，设 备某个特征一段时间的历史趋势，当前预测的剩余使用寿命等。这里的诊断是指 通过设定设备的安全剩余使用寿命阈值，当预测RUL低于当前阈值，则判定为 故障，同时发出警报，提醒对应的外勤技术人员进行维修。对于设备实时监测与 诊断结果的展示，外勤技术人员和调度中心的运维管理人员都有权限查看。


图4-3运维系统实时监测模块
运维系统的RUL预测模块是基于本文提出的多工况条件下的域自适应RUL 预测模型，利用预测模型对输入的数据进行实时预测，预测结果显示在前端界面。
40
采用的RUL预测模型首先会在本地进行构建和训练，模型采用Python语言构 建，训练完成后可使用joblib将训练好的模型保存为本地的.model文件。保存完 成之后，将.model文件上传到搭建的PHM平台，封装成可调用的API。然后通 过平台返回的API在小程序端进行直接调用，用于设备的RUL预测。设备的 RUL预测结果将会作为核心监测指标。

工厂的运维管理人员有对历史数据进行分析的需求，因此对历史数据的查看 是运维系统的主要功能。历史数据通过表格形式展示，如图4-4所示，前期的设 备运行数据己经记录在数据库，包括数据统计模块，一段时间内的工单数量统计, 设备状态统计。其中，数据统计模块又分为维修记录查询、工单记录查询、人员 信息查询、部门考勤查询、通讯录查询。

图4-4历史数据统计

运维系统面向的用户是运维管理人员和外勤技术人员。运维管理人员主要负 责任务的调度，当设备被系统诊断为故障状态时，系统发出预警，由调度中心的 管理人员进行工单的派发，如图4-5所示，指定相应的外勤技术人员进行维修。 外勤技术人员主要负责设备的维修和更换。当设备被系统诊断为故障状态时，外 勤技术人员收到预警以及管理员派发的工单，开始进行设备维修，在维修完成后 进行维修工单的填写。

图4-5任务管理流程

4.2.2A设备资产管理模块
设备资产管理模块负责设备从购买到报废的完整周期的管理，同时包含对设 备进行价值评估功能。
41
设备台账信息用来进行资产管理，包括设备ID,设备类型，使用状态，采购 人员，采购金额，安装日期，台账状态，价值评估等信息，这些信息记录在数据 库，只有管理人员有权限进行查看。
设备的价值评估功能基于设备的剩余使用寿命预测结果来进行设备的年限 法成新率计算。在得到年限法成新率之后，结合常用的资产评估方法对设备进行 价值评估，用于设备的再次交易。本文引入了成本法［41］进行了设备的价值评估， 如图4-6所示，价值评估包括成新率和重置成本的计算。其中成新率包括年限法 成新率和技术鉴定成新率，年限法成新率为RUL预测结果和实际使用年限的比 值，技术鉴定成新率根据设备的使用状态和使用时间来决定。重置成本由设备的 运杂费、安装费、公开市场成交价格组成。


图4-6设备价值评估
4.3数据库设计
根据运维系统的需求分析结果，本文设计了数据库的表结构，分为外勤技术 人员工作表，设备维修记录表，设备台账等。限于篇幅，挑选其中的重要数据库 表进行展示。外勤技术人员数据库表如表4-1所示，主要记录了员工的个人信息， 包括所在部门、电话、负责的设备等信息。
设备台账数据库表如表4-2所示，记录了设备从购买到报废的完整生命周期， 包括设备的使用状态、安装费、运杂费、维修次数、使用年限等信息，为设备的 资产管理特别是价值评估提供了数据支持。
维修工单表如表4-3所示，维修工单由运维管理人员在设备发生故障后进行 派发，主要记录了设备的故障类型、发生时间、是否完成维修等信息。维修工单 表可以在运维系统的历史数据分析模块进行查询，可以反映设备的历史维修情况, 作为设备可靠性的评估
42

表4-1员工表
列名
类型
允许Null值
说明
WorkerlD
String
一
工号
Name
String
是
姓名
DepartmentlD
String
一
所在部门
Tel
String
一
电话
Registed
Bool
-
是否注册
RegistedTime
Date
一
注册时间
Duty
String
一
职位

一
负责设备编号

表4-2设备台账表
列名
如类型
允许Null值
说明
DevID
String
一
设备ID
WorkerlD
String
一
管理员工号
State
String
是
使用状态
Buy Time
Date
一
购买时间
Buyer
String
一
购买商家
Price
String
一
购买价格
InstallPrice
String
一
安装费
Freight
String
一
运杂费
MaintenanceTimes
Number
一
维修次数
ServiceLife
String
一
使用年限
CurrentPrice
String
一
市场价格

表4-3维修工单表
列名
娠类型
允许Null值
说明
WorkerlD
String
一
外勤人员工号
WorkTime
Date
-
维修时间
DevID
String
一
设备ID
SubmitTime
Date
一
上传时间
Info
String
一
描述信息
WorkType
String
一
故障类型
Finish
Bool
一
是否完成
管理员工单表如表4-4所示。

43

表4-4管理员工单表
列名
类型
允许Null值
说明
WorkerlD
String
一
管理员工号
WorkTime
Date
一
确认时间
DevID
String
一
设备ID
SubmitTime
Date
一
发布时间
Info
String
-
描述信息
WorkType
String
一
工单类型
Finish
Bool
一
是否确认
4.4功能实现
4.4.1登录页面
传运维系统的使用用户分为两类：管理人员和技术员。不同身份的用户有着 于同的权限，在小程序的首页根据相应的身份选择不同的登录页面，如图4-7所 zK o
••• ©

艇人员



辜疼人员

图4-7小程序首页
选择完登录身份后进行账号和密码的输入，如图4-8所示，点击按钮后， 小程序通过后台数据库的用户信息表对输入的账号和密码进行校验，校验成功
44
后进入系统。不同的用户身份有着不同的权限，因此，系统根据选择的用户身 份显示对应的功能模块。通过在app.js文件中定义全局的list来存放底部导航 (tabBar),不同身份的用户设置不同的tabBar,即不同的list内容，并且存放在 公共文件中，通过export暴露出去，在登录成功后，不同用户对应的list列表 赋值到app.js中的list,然后跳转到对应的tabBar页面。


4.4.2实时监测与预警模块
实时监测与预警是整个运维系统的核心模块，本文设计的运维系统采用的模 拟数据为轴承公开数据集，实时监测模块的首页面如图4-9所示。上半部分是当 前设备的整体概况，包括机组总数、运行机组、停用机组，分别用三种不同的颜 色标记，圆框里面的数字为机组数。下半部分的柱状图显示了当前运行机组的设 备故障情况，即每个机组里的正常运行设备数和故障设备数。
实时监测模块首页中的运行机组圆框为button按钮，点击切换到设备选择页 面，如图4-10所示。在设备选择页面，用户可以选择机组和相应机组下的设备， 点击确定后进入设备监测页面。如图4-11所示，设备监测页面显示了当前设备 的状态，包括剩余使用寿命、重要参数、特征趋势图。当预测的剩余使用寿命低 于设置的阈值时，绿色的数字会变为红色的故障提示。设备的剩余使用寿命是利 用封装好的算法进行实时预测，然后显示在页面。采用的剩余使用寿命预测算法
45


为本文提出的算法，经过API封装步骤后直接调用。










当前设备：1号轴承 剩余寿命：160

工况参数
方差
最高值
最低值
X振动


当前工况
:X振动




图4-11设备监测页面
剩余使用寿命预测算法调用流程如图4-12所示，首先RUL预测算法在本地 进行构建和训练，采用Python语言，训练完成后可使用joblib将训练好的模型 保存为本地的.model文件。保存完成之后，将.model文件上传到PHM平台。通 过平台返回的API在小程序端进行直接调用，用于设备的RUL预测。同时，用 户在第一次调用平台API之前，需要在平台上进行身份认证来获取API身份信 息，根据返回的apiKey和apiSecret来获取access_token, access_token即小程序 每次调用API的身份认证信息。微信小程序通过监测页js文件中的wx.request向 服务器发送post请求来进行算法的调用,参数url即为PHM平台封装的API, 同时在请求时需传递用户access_token。调用API对当前数据进行预测的RUL结 果会存入云数据库中，数据库中每条数据的result字段即为模型预测结果。
数据预处理

'获取API身'
. 份信息


微信小程序
1


测试后上线





图4-12运维监测平台RUL预测算法调用流程

47
当预测的RUL低于阈值时，当前状态改变为故障模式，并发出预警，进行 工单派发。数据获取利用wx.request进行调取，每次监听页面对于机组的选择, 利用回传的FANid传入函数进行数据调取，调取成功后存入数组，然后再进行 工况参数表格渲染。报表功能的获取数据方式与数据展示部分相同。数据显示页 面的时间显示是利用了，微信的timefbnnat进行获取和显示的。
4.4.3任务管理模块
任务管理模块主要功能是设备检修或发生故障时外勤任务的调度，包括运维 管理员端和技术员端。在实际的工业生产中，设备发生故障时需要技术员进行现 场的维修或设备更换，运维管理员负责发布任务，指派特定的技术人员进行现场 的设备维修，当技术人员完成维修任务后再上传维修信息。
对于运维管理员，当运维系统检测到设备的剩余使用寿命低于正常阈值时会 发出警报，此时运维管理员进行任务发布，即工单的创建。工单内容如图4-13 所示，首选选择故障设备的所属部门，通过小程序的picker选择器组件实现，当 选择值改变时，调用bindchange对应的函数，从而给group变量赋值，代表所选 的部门。选择部门之后接着选择部门里对应的设备，然后是工单类型，包括报障 工单和检修工单。其中，报障工单是当设备发生故障，如剩余使用寿命低于阈值 时进行报障选择，常规的例行检修则选择检修类型。最后在文本框填写发布人, 然后点击发布按钮。工单生成之后会通过js文件中的wx.cloud.callFunction调用 名为createOrder的云函数，将工单数据写入云数据库中对应的工单表。
所属部门：

设备：

类型：

发布人：



注意事项
只能三管坯贡土三

图4-13管理员工单填写
48

运维管理员填写的工单进行发布之后，在对应的“我的工单页面”可以看到 增加的工单信息。这个模块用来记录运维管理员发布过的工单，如图4-14所示，



报障工单
买三
务三
报障工单
图4-14运维管理员工单管理
运维管理员工单管理页面包括“全部工单”，“处理中工单”，“未确认工单”，
“已完成工单”，以及“已逾期工单”共5种工单统计模式，其中右下角的加号 按钮用来创建新的工单，点击之后跳转到管理员工单填写页面。运维管理员工 单管理页面中通过选择不同的工单统计模式，来显示不同的工单信息。实现上 通过小程序的block组件遍历不同的工单统计模式，如处理中工单，未确认工 单，已完成工单等等。在点击不同的block时触发bindtap对应的js文件函数， 来设置activeindex的值，这个值通过赋给view组件中的hidden属性决定view 的显示与否，从而呈现不同的工单信息。其中，“全部工单”统计模式包含了运 维管理员创建的所有工单，然后工单信息显示在技术员的工单提醒页面，页面 同运维管理员工单管理页面一致，技术员点击确认之后，工单信息显示在“处 理中工单”页面，还未点击确认的则显示在“未确认工单”页面，当技术员完 成设备维修后上传维修工单，工单信息则显示在“已完成工单”页面，如果运 维管理员发布的任务在5分钟之内没有确认，则工单信息显示在“己逾期工 单”页面，由管理员直接联系对应的技术员。管理员工单发布的流程如图4-15 所示。
49

图4-15运维管理员工单发布流程

4.4.4历史数据统计模块
历史数据的查询和统计是整个运维系统的基础模块，可以让运维管理人员进 行历史数据的复盘和信息的查询。系统运行过程中的关键数据会被存入数据库， 比如设备的剩余使用寿命信息、管理员发布的工单信息、设备的维修记录等，运 维管理员可以随时查询历史数据。历史数据的呈现主要是通过各种图表进行展示, 本系统的图表显示采用了 Echarts框架。
如图4-16所示，历史数据统计的首页包含三部分，第一部分是数据统计模 块，分为维修记录、工单记录、人员信息、部门考勤、通讯录五部分。第二部分 是本周的工单统计折线图，纵坐标是时间，横坐标为工单数量，该部分反映了一 周内工单的创建情况。如图4-17所示，第三部分是本周的设备状态统计，利用 饼状图展示，反映了本周的正常设备数量以及发生故障的设备数量。
接下来重点介绍历史数据统计模块的第一部分。其中维修记录点击之后显示 设备选择页面，如图4-18所示，包含机组选择和设备选择。设备选择页面点击 查询之后显示设备的维修记录表单，如图4-19所示，包含了设备ID、维修时间、 维修人、描述等信息。其中描述信息中较为严重意味着设备的大修，大修次数是 设备价值评估中技术鉴定成新率的决定因素之一。
50







图4-16历史数据统计首页
表单的呈现通过名为find的查询云函数来查询云数据库中的"Maintenance record”表单来显示在前端页面。维修记录表单上方的搜索框可以用来筛选出特定
维修人或特定描述。







图4-17本周设备状态统计



图4-18设备选择
-左m第人坯






塔家三査課詐


图4-19维修记录

工单记录、人员信息、部门考勤、通讯录同维修记录一样，查询数据库后采 用表单展示，并利用搜索框输入关键字进行筛选。工单记录表单记录了部门、设
52

备、工单类型、发布人信息。人员信息表单记录了所有技术人员的工号、姓名、 所属部门、级别、联系方式信息。部门考勤记录了所有部门
图4-20通讯录
4.4.5设备资产管理模块
设备的资产管理模块主要包括设备的台账查询和设备的价值评估。设备台账 记录了工厂的设备从购买到无法运转的完整管理周期，反映了各种类型设备的拥 有量、设备分布以及设备变动情况，同时台账信息为设备的价值评估提供了数据 支持。设备台账界面如图4-21所示，本文采用了机组、设备顺序进行台账编排， 这有利于生产维修计划管理。通过选择目标设备所在的机组，从而显示该机组所 有设备的台账信息。台账的主要内容有设备ID、使用状态、采购人、安装日期、 购买金额、供应商等等，以表格的形式呈现在页面，当设备情况变化时会进行及 时更新。由于台账信息较多，因此采用scroll-view组件进行上下和左右滚动，来 展示台账信息。左右滚动时scroll-view内通过block组件遍历设备台账名称数组 来显示完全每个设备的所有信息，上下滚动时显示完全某个机组的所有设备的信 息。整个设备台账信息表格的位置和大小是固定的，每次点击搜索时触发名为 find的査询云函数，对云数据库中某一机组下设备台账信息表单进行查询，将查
53

询数据显示在前端。






图4-21设备台账

设备的资产管理模块除了展示设备的台账信息外，还增加了设备价值评估模 块，这是为了方便设备的再次交易。价值评估模块如图4-22所示，本文采用了 成本法对设备目前的价值进行评估。


或X法侶评估

机	:
1■号碣
设輕择：

钿诙率:

鉴率：60
%
市场成交价:100

舞费：	1

运杂费：	1



图4-22设备价值评估

54
在价值评估页面，首先进行机组和设备的选择，设备选择完成后，系统根据 设备的剩余使用寿命和设备的总寿命的比值得到年限法成新率，传统的方法中设 备的剩余使用寿命只能依靠专家的经验判断。本文利用提出的迁移学习模型对设 备的剩余使用寿命进行了准确的预测，将预测结果作为设备的剩余使用寿命，再 利用设备台账信息中的已使用年限进行年限成新率的计算。技术鉴定成新率需要 管理员自己根据参考表手动填写，参考表如表4-5所示。系统根据得到的年限法 成新率和技术鉴定成新率计算得到综合成新率，计算方式为年限法成新率乘0. 6 加技术鉴定成新率乘0. 4。
除了成新率参数外，价值评估算法中还需要填写市场成交价、安装费、运杂 费等信息，这些信息提前记录在设备的台账信息中，通过查询设备台账信息填写。 部分参数需要现场填写的则由运维管理员手动输入，然后点击计算按钮触发名为 cal的函数来计算价值评估结果。
表4-5技术鉴定成新率参考表
使用状态
使用时间
设备分类
技术鉴定成新率
(%)
正常
一年以下
全新设备
90-100

一到两年
较新设备
65-89

两年以上
半新设备
40-64
一般
一
旧设备
15-39
较差
一一
报废待处理设备
0-14
4.5系统测试
4.5.1测试目的
系统测试是整个开发过程的最后阶段，也是非常重要的一步。发现和解决 系统潜在的错误是系统测试的最终目的。完善的系统测试流程可以提前检验开 发的系统是否符合可靠性要求，通过不同的测试内容和测试方法，可以验证设 计的系统是否符合最初的设计。因此，良好的系统测试可以一定程度保证系统 的可靠性和功能的完善。
本文设计并实现的基于微信小程序的工业设备运维系统包含多个功能模
块，每个单独的功能模块在开发时可以编译通过并正常运行，但是多个模块集
成到一个系统时可能会出现卡顿、闪退、崩溃等问题，这些问题往往只能在系
统测试阶段才能被发现。因此，系统的测试在整个开发阶段是必不可少的步
骤，可以保证系统在上线后可以高质量的运行。本文从功能测试和性能测试两
55
个角度对开发的工业设备运维小程序进行测试。
4.5.2功能测试
系统的功能测试主要是验证各个主要功能模块是否满足最初的设计要求， 即比较实际的测试效果和预期效果。本文设计并实现的基于微信小程序的工业 设备运维系统主要包括了实时监测与预警模块、任务管理模块、历史数据统计 模块、设备资产管理模块。本小节将针对这四个主要模块以及登录模块设计测 试用例，并检验实际的测试效果能否达到预期的要求。
表4-6展示了小程序的实时监测功能测试样例,
表4>6实时监测功能测试,

测试功能
预期结果
是否符合预期
进入实时监测页面
进入成功

查看机组总数
显示机组总数

查看运行机组数
显示运行机组数

查看停用机组数
显示停用机组数

查看设备总体情况
显示各状态数量

选择设备
选择成功

查看设备RUL
显示预测结果

查看设备工况参数
显示工况参数

查看设备数据趋势
显示数据趋势图

表4-7展示了小程序的历史数据统计功能测试样例,


表4-7历史数据统计功能测试表
测试功能
预期结果
是否符合预期
进入历史数据模块
进入成功

查看设备状态统计
显示成功

查看工单统计
显不成功

查询维修记录
显示维修记录

查询工单记录
显示工单记录

查询人员信息
显不人员信息

查询部门考勤
显示部门考勤

查询通讯录
显示通讯录

表4-8展示了小程序的任务管理功能测试样例，包括工单发布和各种类型

工单的查看。工单创建成功后应当能显示在工单管理页面。
56

表4-8任务管理功能测试表
测试功能
预期结果
是否符合预期
进入任务管理模块
进入成功

管理员发布工单
发布成功

技术员上传工单
上传成功

查看我的工单页面
显示不同类别工单信息

查看处理中工单页面
显示所有处理中工单

查看未确认工单页面
显示所有未确认工单

查看已完成工单页面
显示所有已完成工单

查看已逾期工单页面
显示所有已逾期工单

表4-9展示了小程序的设备资产管理功能，主要包括设备台账查看和设备


价值计算两个功能。首选进入资产管理模块，然后选择相应的功能。
表4-9任务管理功能测试,

测试功能
预期结果
是否符合预期
进入资产管理模块
进入成功

选择设备
选择成功

查看设备台账
显示台账信息

计算设备价值
显示计算结果

4.5.3性能测试

性能测试主要是检验开发的系统是否满足可靠性和稳定性的要求，避免在 上线之后发生卡顿甚至崩溃等问题，影响用户的体验。针对本章开发的运维系 统的性能测试主要是对算法接口测试和云函数调用测试。表4-10展示了小程序 的算法接口测试。运维系统的RUL预测模块可以调用多个算法API来进行预 测，使用缓存意味着直接利用训练好的算法进行预测，不同重新训练，而不使 用缓存则表示重新训练模型，会消耗较长时间。
表4-10 小程序算法接口测试
指标
使用缓存
不使用缓存

运维小程序的逻辑实现采用云函数，针对该系统的云函数调用测试主要是 查看每个云函数的调用成功率，表4-11展示了小程序的云函数调用测试。
57
表4-11小程序云函数调用测试
云函数名称
近1小时
近24小时
近48小时
find
调用成功率100%
调用成功率100%
调用成功率100%
getResult
调用成功率100%
调用成功率100%
调用成功率100%
getUserToken
调用成功率100%
调用成功率100%
调用成功率100%
createOrder
调用成功率100%
调用成功率100%
调用成功率100%
getValue
调用成功率100%
调用成功率100%
调用成功率100%
测试工作是整个系统开发过程中的关键部分，可以为高质量的软件开发提 供强有力的支持。通过对开发的基于微信小程序的工业设备运维系统进行功能 测试和性能测试，提前检验了是否符合最初的设计以及可靠性要求，避免了在上 线之后发生较多问题，影响用户的使用。
4.6本章小结
本章主要进行了基于微信小程序的工业设备运维系统的开发和测试，包括 对小程序的需求分析和功能设计。小程序分为实时监测与预警、任务管理、历 史数据统计、设备资产管理四大功能模块。其中，核心模块实时监测与预警基 于提出的RUL预测算法进行工程实现，同时结合设备状态监测等技术，进行工 况参数和历史趋势的可视化。同时，系统包含了任务管理、历史数据统计、资 产管理功能，实现了对设备的预测性维护和管理，为企业在日常运营和资产管 理方面提供了有效的数据支持。最后，对小程序进行了测试，通过功能测试表 和性能指标表明小程序符合要求。
58
第五章总结与展望
5.1本文工作总结
本文主要针对源域和目标域数据分布不一致的场景，特别是复杂工况所导致 的源域和目标域数据均包含多种工况的情况，提出了多工况条件下领域自适应模 型，在训练过程中缩小了源域和目标域在新的特征空间上的分布差异，提高了模 型的泛化性。模型的特征提取器采用稀疏自编码器,预测器采用长短期记忆网络。 原始数据在经过数据预处理和特征提取后输入模型，首先被稀疏自编码映射到新 的特征空间，在新的特征空间应用本文提出的基于多工况的样本差异度量方法来 计算源域和目标域的分布差异，并将分布差异项加到损失函数中进行优化，从而 在训练过程中减小源域和目标域在新的特征空间中的分布差异。
本文提出的基于多工况的样本差异度量方法是对源域和目标域中的相似工 况进行最大均值差异的计算后求和作为计算结果。同时，本文针对优化过程中工 况的赋予权重对模型性能的影响进行了研究，在域自适应模型的基础上加入了工 况权重计算机制，可以在模型训练过程中动态的为各个相似工况对赋予权重，以 提高模型的有效性。
同时，本文从工程应用的角度，将提出的RUL预测算法进行工程实现，同 时结合设备状态监测等技术，设计并实现了基于微信小程序的工业设备运维系统。 该系统主要功能是利用本文提出的RUL预测算法对设备进行预测性维护和管理。 同时，系统包含了了设备价值评估功能，基于成本法进行设备的价值评估，其中 的年限成新率由RUL预测算法计算得到，价值评估功能为企业在资产管理方面 提供有效的数据支持。
5.2未来工作展望
尽管本文使用迁移学习算法对工业场景下的剩余使用寿命预测模型进行了 进一步的研究与优化，与各种算法的结果相比有了一定的提升，但是在相关领域 的研究上，还有很多可以优化的点，在模型上还有许多可以完善的方面：1.如何更合理地识别不同的操作工况。本文所用的工况划分方法采用两种， 一种是根据切削物体的不同划分，另一种是根据衰退时期划分，今后将探索更通 用更有效的工况划分方式，从而更好的应用相似类别迁移，提升模型性能。　　2.当源域和目标域没有相似的工况时，如何更有效地优化多工况下的域自 适应，探索能否通过第三方数据集进行多次迁移来优化模型。同时，本文设计的基于微信小程序的工业设备运维系统在功能上可以进一步 完善，比如优化任务管理调度，历史数据统计分析模块更加自动化和智能化。同 时针对设备价值评估可以采用更多的评估算法，如市场法和收益法，从不同角度 对设备的价值进行评估，综合计算设备的价值。

参考文献
[1] 藏义明，杨明波.工业互联网条件下智能维修的预测性维护策略[JJ.设备管 理与维修,2017, No.415(19):64-65.
[2] Jardine A K S , Lin D , Banjevic D . A review on machinery diagnostics and prognostics implementing condition-based maintenance ・ ScienceDirect[J]・ Mechanical Systems and Signal Processing, 2006, 20( 7):1483-1510・

64

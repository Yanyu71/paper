第一章绪论
1.1	课题研究背景及意义
随着智能移动终端的日益普及以及无线通信的高速发展，人们对于基于位置 的服务(LocationBased Service, LBS)的需求不断增加。同时，随着现代社会向 城镇化推进，大型建筑日益增多，室内环境(含地下、隧道、矿井等)成为人们 主要的活动场所以及作业场所。在室内环境中，LBS存在着大量的应用需求与广 阔的市场前景，典型的室内LBS应用场景包括有：大型建筑物内导航、矿井人 员定位、运动跟踪与行迹记录、情景感知、个性化精准推送、安全监控与应急响 应、物流管理、工业流水线自动化生产等。
室内定位技术是实现室内LBS的关键技术之一。全球定位系统(Global Positioning System, GPS) 口】是当前使用最为广泛的定位系统，并且其技术发展 已经较为成熟。但是GPS所依赖的卫星信号容易受到建筑物遮挡的影响，终端 在室内环境中较难接收到足够数量的卫星用于定位，这使得GPS并不适用于室 内环境。相比于室外定位，室内定位还面临着许多独特的挑战〔2〕，一方面，室内 环境相比于室外环境更加复杂，建筑物内部的复杂构造、房间的布局、物体的陈 设以及人员的频繁走动等，都会对室内定位的效果产生影响。另一方面，室内定 位对于精度的要求更高，一般的室外定位技术难以满足室内定位的精度要求。因 此，需要针对室内环境，研究相应的定位技术。
无线通信技术的发展有力地推动了室内定位技术相关研究的展开。根据使用 的无线信号媒介的不同，当前的无线室内定位技术可以主要分为：红外室内定位 技术⑶、超声波室内定位技术巴,］、无线局域网(Wireless Local Area Networks, WLAN)室内定位技术16,7】、蓝牙室内定位技术冈、ZigBee室内定位技术［9］、射频 识别(Radio Frequency Identification, RFID)室内定位技术口°」"、超宽带(Ultra-Wide Band, UWB)室内定位技术口21以及可见光室内定位技术等。其中，红外室 内定位技术和超声波室内定位技术的定位精度较高，但是由于需要额外的通信技 术作为通信辅助，研究和使用得较少。WLAN室内定位技术、蓝牙室内定位技 术、ZigBee室内定位技术、RHD室内定位技术和UWB室内定位技术等以各类 射频(Radio Frequency, RF)信号为基础的室内定位技术，也可以统称为RF室 内定位技术。RF通信的日趋成熟以及在实际室内环境中的广泛应用，使得RF室 内定位技术成为研究得最为广泛的一类室内定位技术，但是由于RF信号通常受 多径传播影响严重口叫RF室内定位系统的定位精度通常较低(通常只能达到 1〜5m［14］).UWB室内定位技术能提供高精度的定位结果，但是其硬件成本偏高。
1
可见光室内定位技术是极具潜力的室内定位技术之一 O可见光室内定位技术 基于可见光通信(Visible Light Communication, VLC)技术，利用可见光信号进 行定位。VLC是一种新型的无线通信技术，作为解决最后一公里无线接入的一 个重要技术，已成为近年来无线通信领域的研究热点之一口叫VLC利用发光二 极管(Light Emitting Diode, LED)的高速调制能力，将LED作为信号发射器， 使得LED兼具照明和通信的功能。LED发出高速闪烁(肉眼察觉不到)的可见 光信号来传输信息、，接收端则利用光电二极管(Photodiode, PD)或图像传感器 对信号进行接收。可见光室内定位系统以VLC系统为基础，通常用接收器代表 待定位的目标，接收器对来自LED的可见光信号进行接收和测量，然后通过特 定的定位算法对接收器的位置进行估计。
可见光室内定位系统的主要优势在于：1)得益于LED作为新一代环保、节 能和高效的照明设备被越来越广泛地应用于室内场景，可见光室内定位系统的基 础设施密度高且成本低，有利于大规模地推广；2)由于可见光具有较强的方向 性且受多径传播影响小口可可见光室内定位系统可以实现高精度定位；3)可见 光室内定位系统可以在对电磁信号敏感或不适用的地方(如：医院〔的、矿井口7〕、 水下[网等)使用；4)由于可见光信号不能穿墙，可见光室内定位系统的安全性 较 IrJ。
定位算法是定位技术的核心与主要研究内容。根据使用的定位方法的不同， 当前的可见光室内定位算法通常可以分为以下几类：近邻法(Proximity)。虫用、 指纹法(Fingerprinting) [14,25-30]> 到达时间(Time of Arrival, TOA)法冏、到达 时间差(Time Difference of Arrival, TDOA)法以版、接收信号强度(Received Signal Strength, RSS)法卬刃、到达角度(Angle of Arrival, AOA)法〔冽和图像 传感器(ImageSensing)法回金。其中，图像传感器法需要使用图像传感器作为 接收器，其他算法则一般使用PD作为接收器。基于RSS的可见光室内定位算法 (即RSS法)由于其精度高、成本低且测量简单，是研究得最为广泛的一类可 见光室内定位算法。
根据可见光信道模型，可见光信号的RSS主要取决于LED的物理参数、PD 的物理参数以及LED与PD之间的相对位置和相对方向。在可见光室内定位中， RSS可由PD测量而得，LED的物理参数、PD的物理参数以及LED的实际位置 和实际方向通常是已知的，基于RSS的可见光室内定位算法就是利用以上这些 已知或可测量的参量以及可见光信道模型推导出PD的位置。
近年来，在基于RSS的可见光室内定位算法的研究中，有越来越多的研究 开始使用LED阵列"46](各led的物理参数、位置或方向不同)代替传统的单 LED作为发射器，或使用PD阵列印-52](各PD的物理参数、位置或方向不同)
2
代替传统的单PD接收器，以提升算法的性能或降低算法的限制。在发射器包含 多个不同的LED,可以使得单个PD接收到该发射器时可以获得一组RSS不同 的信号；在接收器包含多个不同的PD,可以使得该接收器在接收到单个LED时 可以获得一组RSS不同的信号。由此，对于基于RSS的可见光室内定位算法而 言，一方面，可以测得更多的RSS用于定位，另一方面，还可以把发射器中各 LED (或接收器中各PD)的关系也应用于定位之中。
在当前的基于RSS的可见光室内定位算法的研究中，已有不少算法能实现 厘米级的定位精度，但仍普遍存在着如下问题：
1)算法通常需要PD同时接收到来自多个LED的信号，但是PD的视场角 (Field of View, FOV)通常较小，不利于同时接收多个发射器，这使得算法的 覆盖较为有限；另一方面，PD的FOV越大，则其接收到的噪声越多，定位误差 越大叽
2)可见光传播具有较强的方向性，LED和PD的方向都会影响可见光信号 的传播，因为PD 一般被当作定位目标，因此PD的方向通常是任意的而且是不 确定的，从而给定位带来困难。对此，现有的研究通常的解决方法有：a.固定PDF 的方向国,39],但这在大部分实际应用中不现实；b.通过传感器(如加速度计、陀 螺仪、电子罗盘等)进行测量PD的方向"I,但这可能会引入新的测量误差。
1.2	研究内容及成果
本课题来源于企、事业单位委托项目：华为创新研究项目(HuaweiInnovation Research Program, HIRP),项目编号：20150101。本课题的主要研究内容为基于 RSS的可见光室内定位算法的研究，主要研究内容和成果如下：
1)多角度 LED 阵列(Multi-Directional LED Array, MDLA)的设计及 MDLA 下基于RSS的可见光室内定位算法研究
传统的发射器通常为单LED或单角度LED阵列，单个发射器只能代表单个 LED。考虑到可见光具有较强的方向性，LED的不同方向也能作为LED之间的 区分，本课题在发射端改进了发射器的设计，采用由多个指向不同方向的LED 构成的MDLA作为发射器，从而使得单个PD接收到单个发射器能相当于接收 到多个不同LED,获得一组不同的RSS»在接收端则采用传统的单PD作为接收 器。
在算法设计中，利用MDLA中不同LED与单PD之间的可见光信号传播只 有辐射角不同的特性，提出基于接收信号强度比(Received Signal Strength Ratio, RSSR)的可见光室内定位算法，通过比值关系消去信道模型中PD的方向，从而 使算法无需限制或已知PD的方向。并且，在该算法中,PD只需接收到单个MDLA
3
就能进行2维(2-Dimension, 2-D)定位,接收到2个MDLA就能进行3维(3-Dimension, 3-D)定位。另外，为了减小MDLA中不同LED之间不可避免的位 置差异所带来的误差，在所提算法的基础上引入LED位置校正(LED Location Correction, LLC)机制，在算法模型中考虑LED的实际位置，对RSSR进行校 正，进一步提升算法的定位精度。
所提算法使用MATLAB进行了仿真实现。在已有的可见光室内定位的相关 研究中，对于定位算法的评估标准主要集中于定位精度，对定位算法的覆盖较少 考虑，然而，对于可见光室内定位而言，受限于PD的FOV较小且高精度定位 算法通常要求PD能同时接收到多个LED,使得定位算法的覆盖也往往较为有 限。因此，除了常用的定位精度以外，本课题分别定义了位置覆盖率(Coverage Ratio, CR)和平均角度接受率(Average Angle Accept Ratio, AAAR),用以量化 评价定位算法对于接收器位置的覆盖和方向的覆盖。仿真显示，所提算法能达到 较高的定位精度，当MDLA中LED的倾斜角为15。时，95%的2-D定位结果的 误差小于12cm, 95%的3-D定位结果的误差小于19cm,并且相比于传统的单 LED发射器下使用三边定位法的基于RSS的可见光室内定位算法，所提算法可 以覆盖更多的接收器位置和方向。
研究成果：通过研究分析，提出了 MDLA下基于RSS的可见光室内定位算 法，对其进行了理论推导和仿真分析。同时，撰写完成学术论文《IndoorVisible Light Localization Algorithm Based on Received Signal Strength Ratio with MultiDirectional LED Array》，发表于 2017 IEEE ICC Workshop =
2)多角度 PD 阵列(Multi-Directional PD Array, MDPA)的设计及 MDPA 下基于RSS的可见光室内定位算法研究
在1)中在发射端利用了可见光的方向性，对应的，在接收端也能被利用可 见光的方向性。由此，本课题在接收端使用由多个指向不同方向的PD构成的 MDPA作为接收器，并对MDPA进行了设计。在发射端，则使用传统的单LED 发射器。单个MDPA在接收到单个LED时，能同时获得一组不同的RSS =
在算法设计中，利用单LED与MDPA中不同PD之间的可见光信号传播只 有入射角不同的特性，提出基于RSS的可见光室内定位算法。但是不同于MDLA 下基于RSS的可见光室内定位算法可以直接使用LED的已知方向，MDPA作为 接收器，代表待定位目标，其方向是任意且未知的，使得PD的方向也是任意且 未知的。为了解决这个问题，本课题在全局坐标系的基础上引入接收器坐标系， 用于描述PD相对于MDPA的相对方向。在算法设计中利用PD的相对方向进行 定位，规避掉PD的绝对方向的未知性所带来的问题。所提算法分为两阶段，分 别为接收器坐标系下基于RSSR的入射角估计和全局坐标系下基于RSS的位置
4
估计。使用所提算法，MDPA接收到至少3个LED就能进行3-D定位，且无需 限制或已知MDPA （或PD）的方向。
所提算法使用MATLAB进行了仿真实现。仿真显示所提算法可以实现厘米 级的定位精度，当PD的倾斜角为15。时，95%的定位结果的误差小于5cm。
研究成果：通过研究分析，提出了 MDPA下基于RSS的可见光室内定位算 法，对其进行了理论推导和仿真分析。撰写完成学术论文《Indoor Visible Light Localization Algorithm with Multi-Directional PD Array》，发表于 2017 IEEE Globecom Workshop o
3） MDLA和MDPA下基于RSS的可见光室内定位算法及MDLA-MDPA多 模定位机制研究
在1）和2）中分别在发射端和接收端利用了可见光的方向性，在它们的基 础上，本课题开展了更进一步的研究，在发射端和接收端同时利用可见光的方向 性，在系统中同时使用MDLA发射器和MDPA接收器，以同时发挥它们的优势。
在算法设计中，先针对MDPA接收到单个MDLA的情况，同时利用MDLA 和MDPA的特性，提出MDLA和MDPA下基于RSS的可见光室内定位算法; 算法包括三个阶段：全局坐标系下基于RSSR的辐射角估计，接收器坐标系下基 于RSSR的入射角估计，全局坐标系下基于RSS的位置估计，本课题对它们依 次进行了推导。通过以上三个阶段对定位过程进行拆解，一方面使得所提算法无 需限制或使用MDPA （或PD）的方向，另一方面使得所提算法相比于1）和2） 中的算法具有无需迭代求解的优势，计算复杂度更低。
除此以外，本课题也对定位系统中有多个MDLA和单个MDPA的情况进行 了研究，对于该定位系统，前文所提的三种定位算法所基于的系统模型都可以被 视为它的特定形式，因此，本课题将前文所提的三种定位算法进行联合，形成 MDLA-MDPA多模定位机制。对于3-D定位而言，在该机制中，当MDPA中有 任意1个PD接收到至少2个MDLA时，可以使用MDLA下基于RSS的可见光 室内定位算法；当MDPA中有任意3个PD同时接收到至少同样3个LED （无 需同属于同一 MDLA）时，可以使用MDPA下基于RSS的可见光室内定位算法； 当MDBA中有任意3个PD同时接收到同一个MDLA时，可以使用MDLA和 MDPA下基于RSS的可见光室内定位算法。
MDLA和MDPA下基于RSS的可见光室内定位算法和MDLA-MDPA多模 定位机制使用MATLAB进行了仿真，仿真显示MDLA和MDPA下基于RSS的 可见光室内定位算法可以实现厘米级的定位精度，当LED的倾斜角和PD的倾 斜角都为15。时，95%的定位结果定位误差小于8cm。仿真也显示MDLA-MDPA 多模定位机制相比于其包含的任一单模算法，可以覆盖更多的接收器位置。
5
研究成果：通过研究分析，提出了 MDLA和MDPA下基于RSS的可见光室 内定位算法，对其进行了理论推导和仿真分析。同时，基于该算法和1）、2）的 研究成果，提出了 MDLA-MDPA多模定位机制，也对该机制进行了仿真分析。
综上所述，本课题从可见光信号的特性出发，在发射器设计和接收器设计中 分别利用可见光的方向性，使用MDLA和MDPA分别作为发射器和接收器，使 得单个发射器和单个接收器能对应一组不同的RSS。在算法设计中，针对不同的 定位系统模型（利用不同的发射器和接收器），分别提出了 MDLA下基于RSS的 可见光室内定位算法、MDPA下基于RSS的可见光室内定位算法、MDLA和 MDPA下基于RSS的可见光室内定位算法。这些算法都可以实现较高的定位精 度，并且无需限制接收器的方向，亦无需使用额外的传感器测量接收器的方向。 同时，在以上算法的基础上，本课题将它们进行联合，形成MDLA-MDPA多模 定位机制，不同的信号接收情况可以对应不同的定位模型及算法，从而一方面可 以相比于单模算法覆盖更多的信号接收情况，另一方面令接收器在满足多个不同 单模算法的定位条件时，可以选择性能更好（如定位精度更高）的定位算法。
1.3论文结构与章节安排
本论文分为六章，以第三、四、五章为重点，论文结构如下：
第一章“绪论”，主要介绍本课题的研究背景及意义、研究内容及成果，以及 论文的结构与章节安排。
第二章“可见光通信系统及室内定位综述”。首先对可见光室内定位算法所基 于的VLC系统进行概述，介绍VLC系统的组成和关键技术及应用。接着对可见 光室内定位算法进行综述,把可见光室内定位算法分为近邻法、指纹法、TOA法、 TDOA法、RSS法、AOA法和图像传感器法，对各类算法的定位原理和定位方 法进行介绍，并重点分析了本文所研究的RSS法，并总结了 RSS法当前面临的 主要挑战。
第三章“多角度LED阵列（MDLA）下基于RSS的可见光室内定位算法”， 首先建立定位系统模型，介绍MDLA的设计、信道模型与噪声的模型等。接着 对所提定位算法进行推导，先推导出基本的2-D定位算法，并在其基础进一步引 入LED位置校正（LLC）机制，以进一步提升定位算法的精度，之后，在将它们 都扩展到3-D定位场景。最后，对所提算法进行仿真分析，并在仿真分析中引入 两个新的评价指标一一位置覆盖率（CR）和平均角度接受率（AAAR）用于评价 系统的覆盖。
第四章“多角度PD阵列（MDPA）下基于RSS的可见光室内定位算法”，首 先建立定位系统模型，介绍MDPA的设计、信道模型与噪声的模型等。然后，在
6
全局坐标系的基础上引入了接收器坐标系。接着，对所提算法进行推导，将其分 为两个阶段：在接收器坐标系下基于RSSR的入射角估计；在全局坐标系下基于 RSS的位置估计。最后，对所提算法进行了仿真分析。
第五章“MDLA和MDPA下基于RSS的可见光室内定位算法及多模定位机 制”，首先建立定位系统模型，介绍信道模型与噪声模型等。然后，针对MDPA 接收到单个MDLA的情况，提出MDLA和MDPA下基于RSS的可见光室内定 位算法，对算法的三个阶段：全局坐标系下的辐射角估计、接收器坐标系下的入 射角估计和全局坐标系下的位置估计，依次进行了推导。接着，将该算法与第三、 四章所提的算法进行联合，引出MDLA-MDPA多模定位机制，最后，对所提算 法和MDLA-MDPA多模定位机制进行了仿真分析。
第六章“总结与展望”再次总结本课题的研究内容和研究成果，突出本课题的 研究亮点。同时指出课题可能的进一步的研究方向。
第二章可见光通信系统及室内定位综述
2.1	引言
可见光通信(VLC)是一种通过可见光波段在自由空间中直接进行数据传输 的无线通信技术。与射频(RF)通信系统中的发射天线和接收天线不同，VLC系 统需要以光电器件作为发射器和接收器，并且一般采用强度调制(Intensity Modulation, IM)和直接检测(Direct Detection, DD)。在 VLC 系统中，发射端 对电信号进行调制等处理并将电信号转换成光信号，光信号在自由空间传播后到 达接收端，接收端将接收到的光信号转换成电信号，然后进行电信号的接收、再 生和解调，从而实现信息的传递。可见光室内定位是VLC极具潜力的应用方向 之一。可见光室内定位系统以VLC系统为基础，通常以接收器代表待定位的目 标,把接收到的信号通过定位算法进行处理,计算出接收器的位置。因此,对VLC 系统进行研究分析是对可见光室内定位进行研究的基础。
对可见光室内定位的研究主要是研究其所使用的定位算法。当前主要的可见 光室内定位算法可以分为近邻法、指纹法、到达时间(TOA)法、到达时间差 (TODA)法、接收信号强度(RSS)法、到达角(AOA)法和图像传感器法。 其中，RSS法是使用最为广泛的一类可见光室内定位算法，该算法利用VLC系 统的信道模型中LED和PD之间的相对角度及相对位置与RSS的关系实现定位， 具有测量简单且可以达到较高的定位精度等优势。
在本章接下来的内容中，2.2节对VLC系统进行了阐述，首先介绍VLC系 统的组成，重点介绍了 VLC系统的发射器、接收器、信道和噪声等，其次介绍 了 VLC系统的关键技术及应用，包括调制技术、信道编码技术、均衡技术、多 输入多输出(Multiple-Input Multiple-Output, MIMO)技术、调光技术和室内定 位技术；2.3节引入了对可见光室内定位算法的综述，对主要的可见光室内定位 算法的定位原理与方法进行了介绍，并对它们进行了总结和对比；之后2.4节分 析了基于RSS的可见光室内定位算法的研究现状和所面临的主要挑战。最后， 2.5节总结了本章的主要内容。
2.2	可见光通信系统
2.2.1	可见光通信系统组成
VLC系统主要由发射端、信道和接收端三部分组成［58］。以使用LED作为发 射器、PD作为接收器的VLC系统为例，VLC系统组成如图2-1所示。在发射
8
端，原始电信号先经过编码、调制等处理，然后电信号被送至LED并驱动LED 将电信号转化成光信号发射出去。承载着信息的光信号在自由空间传播，之后到 达接收端。在接收端，光信号先通过接收端前端的聚光器和光学滤波器，聚光器 将光信号聚焦到PD,光学滤波器把背景光滤除，之后PD将光信号转化成电信 号，该电信号再经过放大、解调、解码等处理，最后恢复得到原始的信号。
图2-1可见光通信系统组成
1	.发射器
在VLC系统中，通常使用LED作为发射器，将电信号转化成光信号。LED 是一种半导体发光器件,其核心为一块由P型半导体与N型半导体构成的晶片， P型半导体和N型半导体的连接处形成PN结。当PN结工作在正向偏压时，注 入的少数载流子与多数载流子复合，以光的形式辐射出能量，从而可以实现电光 转化。LED发出的光的波长（即光的颜色），与半导体所采用的材料有关。
LED早在20世纪60年代就已出现，但是初期只能够发出红光，且光效很 低。后来，随着制造工艺的不断进步和新型材料的开发应用，不仅发展出了其他 单色光版本的LED, LED的光效也得到显著提高。近年来，高光效、高亮度的 白光LED的问世推动了 LED成为新一代的光源，LED被越来越广泛地应用于 照明领域。相比于荧光灯、白炽灯等传统的照明光源,LED具有能耗低、寿命长、 绿色环保等优势。除此以外，LED还具有响应时间极短（通常可达到纳秒级）的 特点，可以达到很高的闪烁频率（每秒可高达数百万次），使其具备高速调制的 能力，并且人眼由于余晖效应，不会感觉到LED闪烁。VLC正是利用LED发出 高速明暗闪烁的信号来传递信息，令LED兼具照明和通信的双重功能。
根据白光发光原理的不同，当前的白光LED实现方案主要有以下三类：
1）基于色度学的三基色原理，适当组合红、绿、蓝光LED晶片来得到白光 LEDo该类型的白光LED光效高、显色性好，并且可以获得较高的调制带宽，
9
但是成本偏高，并且需要对各个单色LED晶片进行单独驱动，驱动电路较复杂。
2)在蓝光LED的晶片上涂上黄色荧光粉，蓝光LED激发黄色荧光粉产生 黄光，黄光与剩余部分蓝光混合，形成白光。该类型的LED成本低，驱动电路 简单，在LED照明中应用得最为广泛，但是调制带宽较低。
3)在紫外LED晶片上涂上红绿蓝荧光粉，紫外LED激发红绿蓝荧光粉产 生红、绿、蓝三基色光，结合形成白光。该类型的LED在转化白光过程中能量 损耗较大，光效较低，在实际中较少使用。
2	.接收器
在VLC系统中，通常使用PD或图像传感器作为接收器，将光信号转化成 电信号。PD也是图像传感器中的光电转化元件。
1)	PD
当前，常用的PD主要有两类：PIN型光电二极管(Positive-Intrinsic-Negative Photodiode, PIN-PD)和雪崩型光电二极管(AvalanchePhotodiode, APD)O PIN-PD和APD本质上都是一个加了反向偏压的PN结。当有光照射PN结时，PN结 耗尽层产生光生载流子，外部偏压促使光生载流子定向漂移,从而产生光生电流， 如果PN结有与负载电阻串联，负载电阻上便会有电流流过，实现了光电转化。
不同于一般的PN结,PIN-PD在PN结中间加上了一层本征半导体层(I层)， 耗尽层可在整个I层展开，相当于人为地展宽了耗尽层，从而增大了对光的吸收 以及光电转化的区域，提高了光电转化效率。PIN-PD的主要优势在于线性输出 范围宽、接收面积可以做得相对较大以及造价相对低廉。
APD与PIN-PD的基本结构相似，但是需要比PIN-PD高得多的反向偏压以 获得强电场，借助强电场产生雪崩效应，利用雪崩效应来工作，从而对光电流具 有倍增的作用，可以放大光电流。APD的主要优势在于响应速度快、调制带宽宽 以及接收灵敏度高。
2)图像传感器
当前,常用的图像传感器主要有两类：电荷耦合器件(Charge Couple Device, CCD)图像传感器和互补金属氧化物半导体(Complementary Metal Oxide Semiconductor, CMOS)图像传感器。两者都集成了大量的PD用于捕捉光信号 以及进行光电转化，但是光电转化后信息传送的方式不同。
CCD图像传感器将光信号转化成电荷后，利用电荷耦合结构，在每一行逐 个像素地移动电荷，直到到达放大器进行放大，再到模数转换器(Analog-to-DigitalConverter, ADC)转换成数字信号输出。CMOS图像传感器则在每个像素 旁都连着放大器和ADC,直接在像素上进行放大和模数转换。
CCD图像传感器的优势在于灵敏度高、噪声低、成像质量好，但代价是功耗
10
较高、工艺较复杂、成本较高。CMOS图像传感器除了功耗较低、工艺较简单、 成本较低以外，还具有集成性好、读取速度高的特点。近年来，随着CMOS图 像传感器成像质量等性能的进步，CMOS图像传感器已逐渐主导了图像传感器 的市场。
3) PD与图像传感器比较
相比于PD,图像传感器具有更加复杂的硬件，成本也更高，但是也具备许 多优势：图像传感器可以提供更大的FOV,并且对背景光的抗噪性能要优于 PD0］；由于不同位置的LED在图像传感器上成像的位置不同，图像传感器能够 天然区分出多个LED,而无需任何复用技术。
但是，图像传感器最大的限制在于其数据传输速率要远低于PD。当前，商 用的PD可以轻松达到数十MHz的采样率［59］。而主流智能手机配备的图像传感 器一般最高能达到60fps的帧率，这意味着如果使用单个LED与图像传感器进 行通信，数据传输速率只能达到30bpsR］。所以，如果直接使用图像传感器作为 VLC的接收器，数据传输速率将非常低，甚至无法满足室内定位系统中简单的 通信需求。为了使图像传感器达到更高的数据传输速率，解决方案包括有：使用 高速图像传感器，使帧率达到1000-1 OOOOfps,但是其价格也非常高昂；使用多 个LED构成的阵列作为发射器，使得每一帧图像可以携带更多的信息；使用 CMOS图像传感器的卷帘快门(Rolling Shutter, RS)效应，逐行(或逐列)扫 描图像，提高数据传输速率%。］。然而即使通过以上方案，在图像传感器低采样率 的瓶颈之下，图像传感器所能达到的数据传输速率仍远低于PD所能达到的数据 传输速率。
对于可见光室内定位而言，PD由于成本较低、能精确测量出信号的强度、 以及有极快的响应速度可以支持较高精度的时间测量等，被应用于除了图像传感 器法以外的绝大多数定位算法之中国图像传感器则一般应用于图像传感器法 之中，利用LED在图像传感器上成像的位置与其在真实环境中的位置之间存在 的几何关系进行定位。
3	.信道
在VLC系统中，可见光无线信道有不同的链路形式。根据发射器和接收器 之间是否有无障碍的直线通路，可见光无线信道的链路形式可以分为两类：视距 (Line of Sight, LOS)链路和非视距(Non Line of Sight, NLOS)链路。LOS 链 路指的是可见光信号在发射器和接收器之间无遮挡地进行直线传播；NLOS链路 则是当发射器和接收器之间没有直线路径或者有障碍物遮挡时，可见光信号通过 反射等方式到达接收器。由于LOS链路功率占据了接收总功率中的绝大部分(超 过95%阿)，因此本文只考虑可见光的LOS链路。
11
LED和PD间的可见光传播模型如图2-2所示。假设LED符合朗伯辐射模 型，则LED和PD之间LOS链路的直流增益可以表示为网，621
G.s =’"cos"⑻.(7皿小双")，0W"凡	QJ)
[	0,
其中加是LED的朗伯阶数，表征了 LED的发光指向性，可以由LED的半功率 角血2计算得到:«7 = -Iog2/log(cos(^2))； 4是PD的实际接收面积；d是LED 和PD之间的距离；。是辐射角，代表光发射方向与LED法线方向的夹角；什是 入射角，代表光入射方向与PD法线方向的夹角；子c是PD的视场角(FOV), 代表PD可以接受的最大入射角；1(叼是光学滤波器增益；g(〃)是聚光器增 益，可以表示为
n2
g(^)= sin2Tj	(2-2)
、0，小匕
图2-2 LED和PD间的可见光传播
以£表示LED的发射光功率，则PD的接收光功率只可以表示为
B=PSl0s	(2-3)
在实际中，PD的接收光功率与可以通过测量PD在接收到可见光信号后产 生的电流/,得到，它们的转化关系为
"P『Rp	(2-4)
其中(为PD的光电转化效率。
4	.噪声
在VLC系统中，噪声主要由散粒噪声和热噪声组成，并且通常被建模成加 性高斯白噪声(Additive White Gaussian Noise, AWGN )网, 62]。
12
散粒噪声主要由背景光和光信号所产生的光电流涨落所引起，散粒噪声方差 可以表示为
aL ^2qRpPrB + 2qIbgI2B	(2-5)
其中，1是电子电荷，5是等效噪声带宽，4g是背景光产生的光电流，人是噪声 带宽因子。
热噪声则主要来源于接收器的前置放大器，热噪声方差可以表示为
2	8万修 2
Cr
+画现.「画了
(2-6)
其中，左是玻尔兹曼常数，q是绝对温度，g是放大器开环电压增益，〃是PD单 位面积电容，r是场效应管(Field-EffectTransistor, FET)信道噪声系数，g而是 FET跨导，右是噪声带宽因子。
因此，噪声总方差可以计算为
b'ftuiNe - ^shol + Ghermal	(2-7)
信噪比(Signal-to-Noise Ratio, SNR)则可以表示为
(PR)2
SM? TOI。.。2	彳—	(2-8)
b.Ma 十 ^"thermal
2.2.2可见光通信系统关键技术及应用
1	.调制技术
由于LED发出的光为非相干光，不能提供频率稳定或相位稳定的载波，因 此VLC系统一般采用IM/DD[63], IM/DD中常用的调制技术有开关键控(On-O任 Keying, OOK)、脉冲宽度调制(Pulse Width Modulation, PWM)、脉冲位置调制 (Pulse Position Modulation, PPM)等。OOK 根据数据比特是 “1” 或 “0” 来控 制LED的开或关，是VLC中最简单的一种调制方式。PWM通过控制脉冲的占 空比来传递信息，常与调光技术进行结合。PPM通过控制脉冲的相对位置来传 递信息，根据脉冲形式的不同，PPM还可细分为：1)单脉冲位置调制(L-PPM)： 将一个帧周期分成L个时隙，但只在其中的某一时隙发送单脉冲信号；2)差分 脉冲位置调制(Differential PPM, DPPM)：在L-PPM的基础上进行改进，将脉 冲时隙后的无脉冲时隙去掉，获得更高的带宽效率；3)多脉冲位置调制(Multiple PPM, MPPM)：将多个脉冲调制到一个帧周期内的不同位置上，在一个帧周期 内发送多个脉冲信号。
为了提高VLC系统的频谱效率，正交频分复用调制(Orthogonal Frequency
13
Division Multiplexing, OFDM)被引入到VLC中。OFDM是一种多载波调制技 术，其基本思想是将信道划分为若干个正交子信道，将高速率的串行数据转化为 低速的并行数据，并分配到每个子信道上单独调制。OFDM可以有效地克服多径 效应和码间干扰。但是，传统的OFDM信号是双极性复信号，而可见光信号受 至U IM/DD方式的约束，具有非负性和实值性。因此，将OFDM应用到VLC系 统中时需要进行改进以获得非负实信号，由此衍生出了多种光OFDM (Optical-OFDM, O-OFDM)技术，如直流偏置 O-OFDM (DC-biased Optical OFDM, DCO-OFDM)、非对称修剪 O-OFDM (Asymmetrically Clipped Optical OFDM, ACO-OFDM)、Flip-OFDM, 口-OFDM 等。
2	.均衡技术
在VLC系统中，LED发出的光信号除了直射以外还会经过反射、折射等不 同路径到达接收端，由此产生多径效应，并导致码间干扰，使得误码率增加，通 信质量下降。均衡技术通过对信道的特性进行补偿，可以有效地对抗码间干扰。
均衡技术可以分为预均衡技术和后均衡技术。预均衡技术在发射端进行均衡, 可以提高LED调制带宽和传输速率。现有的预均衡技术主要有两种：1)基于模 拟电路的均衡技术：通过模拟电路对信号的衰减进行补偿；2)基于FIR滤波器 的均衡技术：通过设计合适的FIR滤波器来扩展系统的带宽。后均衡技术则是在 接收端进行均衡，可以补偿频率偏移和相位噪声，根据不同的处理角度，可以分 为：1)时域均衡：在时域对信号进行处理，直接校正系统的响应波形；2)频域 均衡：在频域上对信道进行补偿，补偿信道的频域响应。
3	. MIMO技术
在VLC系统中，为了满足室内照明的亮度需要，发射端一般采用LED阵 列，这为MIMO技术提供了天然的适用条件，另一方面，LED的调制带宽有限， 单个LED较难实现高速数据传输，将MIMO技术引入到VLC系统中，可以在 不增加频带的前提下提高数据传输速率。
根据接收机接收原理的不同，可见光MIMO可以分为成像MIMO和非成像 MIMO[64k在成像MIMO中，接收端使用多个PD和一个成像透镜构成成像接收 机，利用成像原理来进行接收，来自各LED阵列的光信号通过成像透镜映射到 各自对应的PD上，从实现了不同通道的光信号的区分。在非成像MIMO中，每 个PD有独立的聚光透镜，各LED发出的光信号在PD上重叠，通过算法对信号 进行解析。成像MIMO需要收发端严格对准，非成像MIMO则无需严格对准， 但接收端算法的复杂度更高医]。
4	.调光技术
不同于RF通信系统，在VLC系统中发射器LED需要兼顾通信和照明的双
14
重功能，通信过程中调制方式的选取会影响到LED照明的亮度和稳定性，因此 需要使用调光技术保证LED在实现VLC的同时能满足照明需要。
当前的调光技术可以分为两类：模拟调光和数字调光。模拟调光通过调节驱 动信号的幅值来实现调光。数字调光一般是将PWM技术用于调光，通过调节驱 动信号的占空比来实现调光。可变脉冲位置调制（Variable PPM, VPPM）将2-PPM和PWM进行结合，分别用于数据传输和调光。［66］将副载波脉冲位置调制 （SubcarrierPPM, SC-PPM）和 PWM 结合，使用 SC-PPM 传输数据，使用 PWM 调光，传输波形为SC-PPM波形乘以PWM波形。
模拟调光的优势在于实现简单、不会像数字调光一样产生由高频开、关引起 的电磁干扰，但是易产生色度漂移；数字调光则几乎不会产生色度漂移，但是需 要很高的开关频率，对LED驱动电路的要求较高。
5	.室内定位技术
可见光室内定位技术是VLC极具潜力的应用方向之一。可见光定位技术主 要用于室内场景（包括地下、矿井、隧道等），利用发射器与接收器之间传播的 可见光信号来进行定位。在可见光室内定位系统中，通常将发射器作为参考点（位 置及方向已知），接收器作为待定位目标（位置及方向未知），发射器把发射器的 编号（ID）、实际位置或其他对于定位有用的信息作为可见光信号发射出去，接 收器接在收到发射器发射的可见光信号之后，对信号进行测量或处理，利用特定 的定位算法计算出接收器的位置。	-
相比于RF定位，可见光室内定位具有受多径干扰小、精度高等优势，还可 以在对电磁信号敏感或无法使用电磁信号的场所使用。除此以外，随着LED作 为新一代光源在室内照明场景中日渐普及，使得可见光室内定位一方面无需建设 额外的基础设施，另一方面还具有泛在化的潜力。
可见光室内定位技术的关键在于其所采用的定位算法，下一节将对现有研究 中主要的可见光室内定位算法进行分类和介绍。
2	.3可见光室内定位算法
根据使用的接收器的不同，当前的可见光室内定位算法可以分为两类，一类 是使用PD的可见光室内定位算法，另一类是使用图像传感器的可见光室内定位 算法。使用PD的可见光室内定位算法主要从传统的无线定位算法中发展而来， 主要包括有近邻法、指纹法、到达时间（TOA）法、到达时间差（TDOA）法、 接收信号强度（RSS）法和到达角（AOA）法。使用图像传感器的可见光室内定 位算法则借鉴了视觉几何的原理，称为图像传感器法。
需要注意的是，近邻法、指纹法、TOA法、TDOA法、RSS法和AOA法等
15
都是定位领域常用的算法，在除了可见光定位技术以外的其他定位技术（如：红 外定位、超声波定位、RF定位等）中也有广泛的应用。为了叙述的方便，在本 文中提到上述方法时，如未作特殊说明,都是指它们在可见光定位技术中的应用。
2.3.1近邻法
近邻法也称为ID法，是一类最简单的定位算法，通过获取接收器的最近邻 居（即最近的LED）的位置作为接收器的位置来实现定位。在近邻法中，各个 LED都有其唯一的ID并且位置已知，LED通过VLC广播自身的ID,接收器在 接收到某个ID后，在数据库中查找该ID对应的LED位置，并将该位置估计为 接收器位置。近邻法通常只能提供接收器的近似位置，在同一 LED照射区域以 内的接收器，都会被估计为相同的位置，使得近邻法精度较低且受限于LED的 密度，但是近邻法在实现上最为简单，依然适合在对精度要求低的室内定位场景 中推广［19-21］。
为了改善近邻法的定位精度，［22］提出一种使用LED阵列作为发射器并且 在发射器前端安装凸透镜的方法对LED的照射区域进行细分，如图2-3所示， 除了一些仅有单个LED照射的区域以外，该方法还可以创造出多个对应于不同 LED组合的照射区域。该方法的定位精度主要取决于接收器的数量和接收器中 LED的数量，一个包含“个LED的发射器，可以最多创造出2" -1个互相独立的 照射区域，当有多个发射器时，则显然可以创造出更多互相独立的照射区域。
图2-3由3个LED和凸透镜创造的不同照射区域
不同于对发射器进行改进，［23, 24］提出一种在接收端增加6轴传感器的方 法，也有效提升了近邻法的定位精度。该方法假设接收器的高度已知，通过6轴 传感器测量出接收器的方位角和倾斜角，由此计算出接收器相对于LED的角度 和距离，再根据已知的LED位置，即可计算出接收器的位置。但是该方法不仅 需要己知接收器的高度，还需要接收器正对着LED,限制了在应用中的灵活性。
16
2.3.2指纹法
指纹法也称为场景分析法，该定位算法将信号的一个或多个特征作为指纹, 利用指纹与接收器位置的相关性进行定位。接收信号强度［25］是最常作为指纹的 一类可见光信号特征，除此以外，可以作为指纹的还有接收信号强度差〔2句、冲击 响应时间［2刀、消光比128〕等。指纹法的定位流程主要由两个阶段组成：1）离线训 练阶段：收集指纹，建立位置指纹数据库。通常是在定位区域选取一些位置作为 参考点，在各参考点采集来自不同LED的可见光信号的一个或多个特征作为指 纹，并与该参考点的位置坐标组合成位置指纹记录，储存到位置指纹数据库中。 2）在线定位阶段：将接收器实测测量到的可见光信号特征与位置指纹数据库中 的指纹进行匹配，通过匹配算法估计出待定位目标的位置。
匹配算法是指纹法的关键，常用的匹配算法有贝叶斯概率法内和k近邻（k-NearestNeighbors, k-NN）法m-?%贝叶斯概率法在离线训练阶段采集信号特征 的分布建立指纹库，在在线定位阶段利用贝叶斯定理计算各参考点的后验概率， 然后选取后验概率最高的参考点所对应的位置作为接收器位置的估计值。k-NN 法通过实测的信号特征向量与位置指纹库中的指纹向量之间的距离（欧几里得距 离或曼哈顿距离）来估计信号特征向量与指纹向量之间的相似度，距离越近表示 相似度越高，然后由最近的k个指纹向量对应的位置计算出接收器的位置。除了 以上匹配算法以外，［3。］提出一种利用信号间相关性的匹配算法，基于的原理是当 接收器离LED越近时，接收器接收到的来自各LED的混合信号与某个特定LED 的发射信号之间的相关性越高。
指纹法的主要优势在于该算法主要是通过实时测量量与预先测量的指纹之 间进行匹配实现定位，不受制于理论模型，也不需要大量计算。但是，指纹法需 要预先建立位置指纹库，当室内场景面积较大时，位置指纹库的建立会十分地耗 时耗力。除此以外，位置指纹库依赖于其建立时的室内环境，可移植性和灵活性 较差，当室内环境发生变化时难以及时更新。
2.3.3到达时间（TOA）法和到达时间差（TDOA）法
TOA法和TDOA法都是基于测距的定位算法，并且都是通过测量时间并将 时间换算成距离来实现测距，在位置估计中则通常与三边定位法结合。
TOA法通过TOA获得接收器与多个发射器之间的距离，继而估计出接收器 的位置。在TOA法中，通常是在LED的发送信号中加上发送时间戳，接收端在 接收到信号后根据本地时间戳和发送时间戳得到信号传播时间，继而可以利用信 号传播时间与信号的传播速度计算得到发射端与接收端之间的距离。
以即，九,J表示LEDi的位置，［xq,z了表示接收器的位置。LEDz•和接
17
收器的距离4可以表示为
4 = f J +(%-几 J +3 — j =c.Tj	(2-9)
其中，c为可见光信号的传播速度，即光速；马表示LEDi与接收器之间的信号 传播时间，可以根据LEDi信号的发射时间”血,和到达时间计算得到，即
务-'arrivalJ - 'depart j	(24。)
由式(2-9)可以看到，在2-D平面，每一个TOA可以确定一个圆，接收器落 在该圆上；在3-D空间，每一个TOA可以确定一个球面，接收器落在该球面上。 因此，在TOA法中，对于2-D定位,接收器需要接收到至少3个不共线的LED, 如图2-4所示，以3个LED为圆心，以它们各自到接收器的距离为半径可以获 得三个圆，这三个圆的交点即为接收器的位置。对于3-D定位，接收器则需要接 收到至少4个不共线的LED,接收器位于它们所确定的一组球面的交点。在实 际应用中，由于测量误差等原因，各圆(或各球面)往往不会交于一点，因此在 求解中通常使用最小二乘法求得最优解［6工
图2-4 TOA法原理
TOA法对时间同步要求严格，要求所有发射端和接收端都要在时间上同步, 因此在实际中较少使用。TDOA法则是对TOA法的改进，不同于TOA法中利用 TOA的绝对值，TDOA法利用的是TOA的差值，即TDOA,从而相对降低了对 时间同步的要求，只需要发射端之间在时间上同步。TDOA法通过TDOA计算 接收器与不同发射器的距离的差值，继而来计算接收器的位置。
LEDz•和LED/与接收器的距离的差值为可以表示为
d. 二 d - d y f j
=一加『+ (% 一 九『+ (马 — 4 J - J(X, — X, J +回一九 丫 + ),一 4 J
= c-Ar i j
(2-H)
18
其中，为来自LEDi和LED)的可见光信号到达接收器的时间的差值，可以 计算为
'arrival,i	'arrival, j
(2-12)
由式(2-12)可以看到，在2-D平面，每一个TDOA可以确定一个双曲线，接 收器落在该双曲线上；在3-D空间，每一个TDOA可以确定一个双曲面，接收 器落在该双曲面上。因此，在TDOA法中，对于2-D定位，接收器需要接收到 至少3个不共线的LED,如图2-5所示，以LED1、LED2为焦点，可以确定一 条双曲线，以LED1、LED3为焦点，可以确定另一条双曲线，这两条双曲线的 交点即接收器的位置。对于3-D定位，接收器则需要接收到至少4个不共线的 LED,接收器位于它们所确定的一组双曲面的交点。
图2-5 TDOA法原理
TDOA的测量是TDOA法的重要步骤。对于使用时分复用(Time Division Multiplexing, TDM)的定位系统，由于各LED的信号已经在时间上区分开，因 此可以直接测量TDOA",33］。对于使用频分复用(Frequency Division Multiplexing, FDM)或其他复用机制的定位系统，一般需要间接地测量TDOA,常用的一种方 法是通过测量信号的到达相位差来获得TDOA。在［34］提出的基于TDOA的可见 光室内定位系统中，FDM被用作复用机制，各LED在其所分配的频率上发射正 弦光信号，接收端在收到信号后利用希尔伯特变换将信号分解成同相分量和正交 分量，以计算各对信号之间的相位差，然后根据相位差、各LED的调制频率以 及光速，就能计算出对应的距离差。［35］也采用了类似的正弦光信号，不同在于 其相位差是通过测量正弦信号峰-峰波幅来获得。
TOA法和TDOA法在理论上和仿真中能达到厘米级的定位精度5,32,34 36］o 但是TOA法对时间同步要求严格，虽然TDOA法相对降低了对时间同步的要
19
求，但TDOA法和TOA法一样都需要非常精确的时间测量。然而，可见光信号 的传播速度极快，并且在室内场景中，信号的传播距离又通常较短。因而,在TOA 法和TDOA法的实际应用中，微弱的时间测量误差就会导致较大的定位误差。
2.3.4	接收信号强度(RSS)法
RSS法是一类使用信道模型的定位算法，如式(2-1)和式(2-3)所示，可见光信 号的RSS与LED和PD之间的距离的平方成反比，与辐射角余弦值及入射角余 弦值成正比。LED和PD之间的距离由LED和PD之间的相对位置所决定，辐 射角由LED和PD之间的相对位置以及LED的方向所决定，入射角由LED与 PD之间的相对位置以及PD的方向所决定。因此，RSS与PD的位置之间存在 着一定的关系，且它们之间的关系可以由信道模型来描述，这是RSS法定位的 基本原理。
与TOA法和TDOA法类似的是,RSS法也需要接收器能够接收到多个LED, 并且常与三边定位法结合。［37］将RSS法与三边定位法结合，先由RSS计算出 接收器到各LED之间的距离，然后再由三边定位原理计算出接收器的位置。除 了与三边定位法结合以外，RSS法也可以直接由信道模型推导出相应的以PD位 置为未知量的方程组，通过求解该方程组求得PD的位置。以上这两种方式在求 解中都可利用最小二乘法进行求解。为了进一步提升定位精度，［38］提出一种使 用最大似然法的基于RSS的可见光室内定位算法，将最小二乘法得到的位置估 计值作为最大似然法迭代的初值,通过一系列的迭代,虽然增加了计算的复杂度， 但是可以获得更高精度的定位结果。
除了 RSS的绝对值以外，接收信号强度比(RSSR)或接收信号强度差也可 以用于定位。［39］提出一种基于RSSR的可见光室内定位算法，该算法假设LED 与PD相互平行(使得辐射角与入射角相等)且高度差已知，将来自各LED的 信号之间的RSSR转化为只与各LED到PD的距离有关的函数，其中LED与PD 的距离由LED的位置与PD的位置决定，从而可以基于RSSR对PD进行定位。 ［40］提出一种基于RSS差值的可见光室内定位算法，将信号中逻辑。码和逻辑1 码对应的RSS之间的差值用于距离估计，然后进行三边定位。
2.3.5	到达角(AOA)法
AOA法通过获得来自多个LED的可见光信号到达接收器时的角度，来计算 接收器的位置。如图2-6所示，在AOA法中，在获得一组AOA后，接收器的位 置可以通过各AOA所确定的LED与接收器之间的相对方向所确定。对于2-D 定位，通常需要接收器接收到至少2个LED；对于3-D定位，通常需要接收器 接收到至少3个LED。
20
AOA法的关键在于AOA的获取，为了获取AOA,通常需要使用PD阵列 作为接收器。［53］提出一种利用环状PD阵列作为接收器以测量AOA的方法，如 图2-7所示，各PD排列在一个环形表面且角度已知，由于接收器与LED之间的 距离远远大于PD之间的距离，所以对于接收器中的各PD而言，它们与LED之 间的距离近似相等，LED对它们的辐射角也近似相等，因而它们接收到的信号强 度的不同主要由它们入射角的不同所引起。根据已知的各PD角度，并利用各PD 对应的接收信号强度获得加权因子,［53］通过计算PD角度的加权和来测量AOA。
需要注意的是，不同于在RF定位中一般只通过方向性天线或者阵列天线来 获取AOA,在可见光定位中，AOA其实既可以通过PD阵列中各PD对可见光 信号的接收情况来获得（不使用信道模型），也可以通过测量RSS后基于信道模 型计算得出，为了避免歧义，本文将前一种获得方式视为AOA法，后一种获得 方式仍归于RSS法。
由于可见光具有方向性以及PD具有较窄的FOV,使得可见光定位天然地适 用AOA法，但是在AOA法中较小的AOA测量差异就可能导致较大的定位误 差,且AOA法只考虑了角度，精度不如同时考虑了距离和角度的RSS法。
21
2.3.6	图像传感器法
图像传感器法利用LED在真实环境中的位置与其投影在图像传感器上的位 置之间的几何关系进行定位。图像传感器法借鉴了计算机视觉中的多视图几何理 论[68],但是不同在于传统的基于计算机视觉几何的定位通过图像处理技术来获 得定位区域内参考点的信息，图像传感器法通过接收LED发射的VLC信号来获 得参考点（即LED）的信息HL
在图像传感器法中，通常需要建立三个坐标系：以真实世界为参考系的世界 坐标系、以相机（即图像传感器）为参考系的相机坐标系、以图像为参考系的图 像坐标系。以这三个坐标系可以描述LED在不同参考系下的位置，利用这些坐 标系之间的关系以及不同坐标系下坐标之间的关系可以进行定位。
[54]提出利用共线条件进行定位的图像传感器法，该方法需要使用单个图像 传感器和多个LED,如图2-8所示，不同位置的LED在图像传感器上成像的位 置不同，但对于每个LED而言，LED的实际位置、透镜的中心与LED在图像传 感器上的成像位置在同一条直线上，由此可以获得一组共线方程，从而求出图像 传感器的位置。
图2-8使用单个图像传感器的图像传感器法定位原理
同样是使用单个图像传感器和多个LED, [55]提出一种利用比例因子来对图 像传感器进行定位的方法，该方法分先求出LED在相机坐标系下的坐标和图像 坐标系下的坐标之间比例因子，利用该比例因子计算得到LED在相机坐标系下 的坐标，之后再由相机坐标系和世界坐标系之间的关系求出图像传感器在世界坐 标系中的坐标。
除了使用单个图像传感器以外，也可以使用多个图像传感器进行定位。[56] 提出一种使用2个图像传感器和多个LED的图像传感器算法，如图2-9所示， LED的位置、LED在不同图像传感器上的成像位置、不同图像传感器之间的相 对位置之间存在一定的几何关系，利用该关系可以求得待定位目标（以2个图像 传感器的透镜之间的中心点代表待定位目标点）与LED之间的距离，当有至少 3个LED时，可以将距离用于三边定位法进行定位。
22
LED A
图像传感器1图像传感器2
图2-9使用多个图像传感器的图像传感器法定位原理
2.3.7	总结与对比
综上所述，对各类可见光室内定位算法的总结与对比如表2-1所示。
表2-1各类可见光室内定位算法总结与对比
可见光室内定位算法	优点	缺点
近邻法	实现最简单	精度低且受限于发射器的密度
指纹法	实现较简单；对接收的要 求较低	需要建立位置指纹数据库；可移 植性差；灵活性差
TOA法	精度高；在高精度方法中 实现较简单	需要所有发射端和接收端严格同 步；需要精确的时间测量；需要接 收到多个发射器
TDOA 法	精度高；在高精度方法中 实现较简单	需要所有发射端同步；需要精确 的时间测量；需要接收到多个发 射器
RSS法	精度高；RSS测量简单	需要接收到多个发射器；依赖于 信道模型
AOA法	精度较高	需要接收到多个发射器；硬件较 复杂；较小的AOA测量误差会引 起较大的定位误差
图像传感器法	精度高；无需复用技术	图像传感器比PD成本高且响应 速度慢
23
2.4	基于RSS的可见光室内定位算法
2.4.1	研究现状
基于RSS的可见光室内定位算法（简称RSS法）由于其精度较高、测量简 单、对同步要求较低、成本较低等优势，是研究得最为广泛的一类可见光室内定 位算法。
RSS法的难点之一在于RSS不仅受PD的位置影响，也受PD的方向影响, 这在信道模型中也有体现，信道模型中的入射角与PD的方向有关。但是PD作 为待定位目标，其方向通常是任意且未知的。为了解决这一问题，［41,42］提出一 种带有补偿机制的RSS法，该算法也是先估计PD与各LED之间的距离，然后 进行三边定位，但是将距离的估计过程分为两步：第一步先忽略PD方向对RSS 的影响，由RSS对距离进行粗估计，该估计距离通常比实际距离大；第二步通 过加权因子对第一步中估计的距离进行补偿,加权因子由第一步中估计的距离与 LED可能的最大传播距离共同决定。除此以外，对于PD的方向问题，更为常见 的两类解决方案是固定PD的方向a 39］或使用额外的传感器测量PD的方向［41 在［37,39］中，PD被要求与LED平行，即LED垂直朝下、PD垂直朝上。［43］发 现如果在RSS法中忽略PD方向的影响，则PD的估计位置相比于PD的实际位 置，会向PD所偏向的方向偏移，因此提出一种补偿机制，使用陀螺仪测量PD 的方向，根据PD方向对PD估计位置的偏移进行补偿。［44］在算法中假设LED 与PD平行，利用三边定位法定位，对于实际上不平行的PD,使用传感器测量 PD的方向将其调整回平行的方向。
近年来，也有不少研究者对RSS法中使用的发射器或接收器进行改进，使 用多LED阵列代替单LED作为发射器，或使用多PD阵列代替单PD作为接收 器。在阵列中各LED （或各PD）的物理参数、位置或方向不同，从而使得单个 发射器（或接收器）能代表一组不同的LED （或PD）,从而能对应一组不同的 RSS=通过这样的改进，一方面可以使得接收器获得更多的RSS,另一方面阵列 中各LED （或各PD）之间的关系也可以应用于定位之中。
在对发射器的改进中，［45］在单个发射器中包含多个不同方向的LED,使得 PD在对空间中多个发射器接收时可以接收到多组不同的RSS,并将这些RSS都 应用于定位算法之中；［46］也在单个发射器中包含多个方向的LED,并将PD固 定在天花板上，以LED作为待定位目标，但只选取每个发射器中对应RSS最大 的LED用于定位。
在对接收器的改进中，［47］在接收器中将3个PD安装在一个0.2m为半径的 圆形底面上，令各PD之间的位置存在较大的差异获得足够的区分度，使得该接
24
收器只需接收到单个LED就能进行RSS法定位，但是该接收器的尺寸过大不便 于携带，使其适用的应用场景有限；［48］也使用了较大尺寸的环形PD阵列（半 径为0.16m〜0.2m）作为接收器，但是将接收器固定在了天花板上，以LED作为 定位目标；［49］也在接收器中利用不同位置对多个PD进行区分，但是接收器的 尺寸要比前两种方法小得多（半径为0.02m）,并且各PD之间的相对位置也被用 于定位之中；［50］提出一种利用孔径进行角度分集的接收器，该接收器由多个单 元组成，每个单元包含一个PD和一个孔径且PD和孔径之间略有偏移，对于不 同的单元，光透过孔径投射的光圈与PD的重合面积不同，使得各PD的有效接 收面积不同，继而使得各PD接收到的RSS不同；［14］和［51］则使用多个不同方 向的PD构成的阵列作为接收器，并在算法设计中利用的各PD得至U的RSS的差 异性，分别提出了基于RSSR和RSS差的可见光室内定位算法；［52］仍使用单 LED作为发射器、单PD作为接收器，但是在接收器底部加上一个可以360。水平 旋转并且可以精确测量角度的平台，使得PD的方向可以变化，也相当于可以在 同一接收器中提供不同的PD。
但是在这些研究中，PD的方向问题仍未解决，其中，对于多PD阵列接收 器，由于接收器的方向是任意且未知的，因而PD的方向也是任意且未知的。与 采用单LED发射器和单PD接收器的算法的解决手段类似，［45, 47-50: 52］要求 接收器的方向固定，［14,51］要求额外的传感器作为辅助测量方向。［46］将接收器 固定在天花板上，令发射器代表待定位目标且方向任意，但需要使用传感器测量 发射器的方向。
2.4.2	面临的挑战
在当前基于RSS的可见光室内定位算法的研究当中，己有不少研究成果能 在仿真上实现厘米级的定位精度口4, 41,43, 47］,但是仍普遍面临着如下挑战：
1）实际环境的信道模型不理想
信道建模是基于RSS的可见光室内定位算法的基础，也是其面临的固有挑 战之一。式（2-1）是当前VLC中使用最为广泛的路径损耗模型，也是当前的基于 RSS的可见光室内定位算法普遍使用的算法推导基础。但是，在实际环境中，由 于噪声、遮挡和反射等的影响，信道并不理想，其与理论模型的差距，会导致定 位误差。
2）需要固定或测量PD的方向。
RSS不仅受LED的方向影响，也受PD的方向影响。但是在可见光室内定 位系统中，LED通常作为参考点，其位置和方向都是固定且已知的，PD通常代 表待定位目标，其位置和方向都是随机且未知的。因此，在实际中，PD的方向 对于RSS的影响通常难以确定。为了解决这一问题，现有的算法通常的解决途
25
径有两类：a）固定PD的方向，但这在许多实际应用中并不现实；b）通过附加 的传感器（如加速度计、陀螺仪、电子罗盘等）直接测量PD的方向，但这在增 加了硬件成本的同时，可能会引入新的测量误差。
3）定位系统的覆盖率较低。
基于RSS的可见光室内定位算法通常需要PD同时接收到来自多个不同 LED的信号，但是PD的FOV通常较小，不利于同时接收多个LED,因此定位 系统的覆盖范围通常有限。简单地寄托于使用大FOV的PD也不能很好解决该 问题，因为PD的FOV越大，其接收到的噪声则越多，定位误差也会越大Hl。
可见光信道模型的改进依赖可见光信道建模技术的发展，本文则将从定位算 法本身出发，针对上述挑战中的2）和3）分别进行解决和改善。
2.5	本章小结
本章主要通过调研与分析，对可见光室内定位进行了综述。首先对可见光室 内定位所基于的VLC系统进行了介绍，包括VLC系统的组成和VLC系统的关 键技术和应用。然后对可见光室内定位中主要的定位算法进行了综述，先对它们 进行了分类，然后分别介绍了不同类别的可见光室内定位算法的定位原理和定位 方法，并将它们进行了对比。之后重点阐述了其中使用最为广泛的基于RSS的 可见光室内定位算法，分析了其研究现状和当前面临的主要挑战。上述内容为本 文对基于RSS的可见光室内定位算法的研究奠定了基础，提供较为深入的技术 支撑。
26
第三章 多角度LED阵列（MDLA）下基于RSS的可见光 室内定位算法
3.1	引言
在现有的可见光室内定位算法中，通常按照传统的照明场景，假设LED全 部垂直朝下。在这种场景下，为了区分各LED,需将LED置于不同位置，并且 位置差异越大，LED区分性越好。但是，PD的视场角（FOV）通常较小，不利 于同时接收多个不同位置的LED,尤其当各LED相距较远时，接收多个LED将 更加困难。
除了 LED的方向，PD的方向也会影响可见光的传播。但是不同于LED的 方向通常是固定的且可以在安装时确定，PD作为待定位目标，其方向通常是随 机且未知的，由此会给基于RSS的可见光室内定位算法带来困难。为了解决这 一问题，现有的研究通常是固定PD的方向或者增加额外的传感器测量PD的方 * 向，但是前者会限制算法的灵活性，后者会增加成本并可能引入新的测量误差。■
针对以上问题，本章提出多角度LED阵列（MDLA）下基于RSS的可见光 室内定位算法。在发射器设计中，使用MDLA作为发射器，利用可见光的方向 性，通过不同方向区分不同LED。在算法设计中，利用接收信号强度比（RSSR） 减小PD的方向对定位结果的影响。最终使算法在实现高精度定位的同时，无需 , 限制或已知PD的方向，并且相比于传统的单LED发射器下基于RSS的可见光 室内定位算法，PD更容易接收到足够的发射器用于定位。
在本章接下来的内容中,3.2节建立了所提算法的系统模型,并给出了 MDLA 的设计；3.3节对所提算法进行了详细的推导；3.4节对所提算法进行了仿真，并 对仿真结果进行了分析；3.5节总结了本章的内容。
3.2	系统模型
第二章中已经建立了可见光通信（VLC）系统的基本模型，可见光室内定位 系统模型以VLC系统模型为基础。本算法所使用的可见光室内定位系统模型如 图3-1所示，发射器是由多个指向不同方向的LED构成的多角度LED阵列 （MDLA）,安装在天花板上；接收器是PD,并且代表待定位的目标。为不失一 般性，此处考虑可见光在任意一个MDLA和PD之间的传播，并假设MDLA和 PD都拥有任意的3-D方向和3-D位置。用K代表单个MDLA中LED的数量， 对于 Vi e {1,2,…,K}, U,. = [xLEDJ,yLEDJ,zLEDiY 和叫皿分别代表该 MDLA 中 LED
27
i的实际位置与单位法向量(即方向)。V = [x?D，力少Zp°r和分别代表PD的 实际位置和单位法向量。4代表从LED i指向PD的向量，即
d, = V—U ： — \_xPD — xLEDi, yPD — yLEDJ, zPD —zLEDj\	(3 -1)
则LED i到PD的距离可以计算为4= |d,I，对应的辐射角4和入射角匕的余 弦值可以分别计算为
绣(。,)=七工	(3-2)
COS (% ) =	(3-3)
图3-1使用多角度LED阵列和PD的可见光室内定位系统模型
3.2.1	MDLA 设计
传统的发射器通常为单个LED或单角度LED阵列，单个发射器只能提供单 个LED或多个意义相同的LED,区别不同的LED需以不同的位置进行区分。基 于RSS的可见光定位算法通常要求PD能够在同一位置同一角度接收到多个不 同的LED,然而PD的FOV较小，不利于同时接收多个不同位置的LED。尤其 当LED分布较稀疏或者距离较远时，PD将难以接收到足够数量的LED,导致 算法难以实现。然而实际上，一方面，可见光的传播以LOS传播为主，具有较 强的方向性，除了 LED的位置，LED的方向也会显著影响可见光的传播；另一 方面，LED的方向和它的位置一样，通常是固定不变且在安装时就能确定。因
28
此，除了 LED的位置，LED的方向也可以用来区分不同的LED,并且被利用于 定位算法之中。
基于以上，考虑一种改进的发射器一一MDLA,由多个指向不同方向的LED 构成的阵列作为发射器。根据式(3-2), MDLA中的各LED的不同方向会使它们 有不同的辐射角。如图3-2所示，MDLA有着半球型表面，多个LED安装在其 上，且沿着同一个与MDLA顶面水平的圆均匀分布。以倾斜角。表示LED的方 向与MDLA的中心法线方向的夹角，MDLA中各LED有着相同的倾斜角。。
3.2.2	信道模型
由式(2-1)可知，LEDi和PD之间LOS光链路的直流增益可以表示为
Gg =	cos"® ) 7；(3)g (%)cos (%)	(3-4)
假设MDLA中各LED的发射光功率一样，都为£。则PD从LEDi接收到 的RSS,即接收光功率可以计算为
心=小黑,	(3-5)
将式(3-2)、式(3-3)和式(3-4)代入式(3-5),片,可进一步表示为
c
■ =”cosm(0)cos(%)
'	(3-6)
=(n/皿,. d J"	• d,)
其中c =	粤”<(%)g(%)，是一个常数。
3.2.3	噪声模型
噪声主要由散粒噪声和热噪声组成，并且通常被建模成加性高斯白噪声 (AWGN)o由式(2-5)和式(2-6)可得，LEDi和PD之间的可见光信号受到的散粒 噪声和热噪声的方差可以分别表示为
29
疯,=2jZ + 2%y	(3-7)
窄似朋+丘里哦力，	(3-8)
G	gm
对应的总噪声方差为cr；°g =才>必+4侬/,信噪比(SNR)可以表示为
(PriR„)2	八一、
SNR = 10 log10 2口一片—	(3-9)
。幼叫,+ ihermal
3.3定位算法
假设每个LED都知道其自身的朗伯阶数、位置和方向，并在各自分配的时 隙通过VLC轮流广播这些信息。当某个LED在PD的FOV内时，PD可以接收 到来自该LED的可见光信号，并测量出接收光功率(即代表RSS)。需要注意的 是，在本文中，为了避免歧义，当某个发射器中所有LED都在PD的FOV内时， 才认为PD可以接收到该发射器，当某个MDLA中有LED不在PD的FOV内 时，则不认为PD可以接收到该发射器。
在理论上，同一 MDLA中的各LED除了方向不同以外，其他参数都相同。 然而在实际中，由于LED的实体尺寸不可能为零，各LED的位置不可能完全重 合，因而LED之间存在着不可避免的位置差异。但是，在一般的室内定位场景 中，同一 MDLA中的各LED之间的距离远远小于LED和PD之间的距离，使 得该位置差异对于定位结果的影响很小，可以被忽略。
在本节中，先针对2-D定位进行算法推导：先忽略同一 MDLA中各LED的 位置差异，推导出所提定位算法的基本思想，之后再重新考虑同一 MDLA中各 LED的位置差异，在算法基本思想的基础上引入LED位置校正(LED Location Correction, LLC)机制，从而进一步提升定位精度；最后再将算法的基本思想和 LLC机制都延伸到3-D定位中。
3.3.1	2-D定位算法
在2-D定位中，只需要考虑单个MDLA与PD之间的可见光信号传播。
1)忽略MDLA中各LED的位置差异
对于每个MDLA,把各LED的几何中心作为各LED的共享位置U,即 U = [xi£Z,,yA£Z)5zi£D]7'	o则由这些LED指向PD的向量也可以被共同
地表示为
d = V-U = [X9	一 y [Fn，Zpr> -Zg>]	(3-10)
30
把d尸d, 4- d = ||d』代入式（3-6）,则接收信号强度可以被近似地表示为
小*。Sm（R）COS（"）
•d)m(nra-d)
(3-11)
C /
M7+3 1nL皿 i
可以看到MDLA中各LED的方向不同，导致了辐射角不同，继而导致了 PD对 MDLA中各LED的接收信号强度也不同，这一特性被应用在了定位之中。
由式（3-11）,同一个MDLA中LEDz•和LED/之间的接收信号强度比（RSSR） 可以被表示为
(	A
niED.i ' d
Prj
(3-12)
其中z；/w{12…,K），j q把式（3・10）代入式（3/2）,可以得到
PrJ (n^,,-(V-U)T
叫皿/ ［彳1^ - X1ap , ypD - 乃ED，ZpD - Zled ］
J^LEDJ '［马。-XLED，JpD - YlED ^ZPD — ZLED 1
(3-13)
在式（3-13）中，接收光功率所代表的RSS可以通过测量获得，LED的位置和 方向也是已知，因而未知量只剩下PD的位置［不必为切z^F。所以，当已知至少 2个互相独立的RSSR （例如，月之/匕和心/Ej）和PD位置三个坐标中的任一 坐标（例如，ZpD）,则PD的另外两个坐标（例如，x阳和%°）可以通过一组类 似式（3-13）这样的RSSR方程组计算得到。换言之，当PD接收到至少一个MDLA 且该MDLA中包含至少3个LED时，可以进行2-D定位。
RSSR方程组的求解通过最小二乘法来实现，求得最优解。以PD的z轴坐 标与。已知，x、j轴坐标待求为例，并取LED 1与LEDi （i。1）之间的RSSR 用于算法之中，则对礼和外的求解可以化作对下列最小二乘问题的求解
min 尸（马3，'即）= minZ：2/2（x也/加）	（3-14）
其中
.P .
工(%如%0)= $一
口£皿1. IApD - *1屈,YpD . YlED，Z9 - 2田)J
、口£皿 1 ' lXPD - Xled，yPD — yLED*PD - ZLEdY)
(3-15)
该最小二乘问题是非线性最小二乘问题，本文使用Levenberg-Marquardt算法进 行迭代求解。
2）考虑MDLA中LED的位置差异（引入LLC）
31
在上一小节中，MDLA中各LED的位置差异被忽略，相当于MDLA的尺寸 被忽略，然而在实际中，MDLA中各LED之间存在不可避免的位置差异。在本 小节中，MDLA中各LED的位置差异被重新考虑到定位算法之中，在所提算法 的基础上进一步提出LLC机制以进一步改善定位算法的精度。
图3-3 MDLA中LED的位置差异对可见光传播的影响
以R代表MDLA的半径，由于LED之间存在位置差异，所以及＞0。如图 3-3所示，R的存在导致了各LED的中心位置U与LEDz•的实际位置U,之间存 在差异，继而导致由向量d和4之间存在差异。以£表示从U指向U,的向量，即
£ = U] — U = \xLEDi - xLED, yLEDI - yLED, zLEDi - zLED ]	(3-16)
显然问| = R sin 6。
由式(3-1)、式(3-10)和式(3-16)可得d, =d-£,将其代入式(3-6),接收光功率 可以被重新表示为
0 _ C	/ d—n[皿/ rj(11如 d—nPD , £ )
为=	jn ij^+3	( j 1 j
IMF
可以看到当|M| = 0时，式(3-H)和式(3-17)是等价的，即式(3-11)忽略了 I；以及与之 直接相关的•与'。卡。由于r,不可避免的存在，式(3-11)推导得到的RSSR 公式(3-13)与实际的RSSR之间存在着一定的偏差。由于当MDLA安装完成，r, 会随之确定，因此，r,可以作为LEDi的己知信息被LEDi广播。当PD接收到 LEDi的信息时，式(3-17)中的£和n®厂£都可以被确定，只有n尸°七需要被忽略, 因为修。是未知的。基于以上，式(3-17)可以近似地重新表示为
p ♦ Red,/ d 一 叫皿• £ ) (%口 ・ d)
一 记严	(，)
相比于式(3-11),式(3-18)中LED的位置得到了部分的校正，更加接近真实值。
根据式(3-18), LEDi和j之间的RSSR可以被改进为
32
茎/ ni£Z)Zd-11A£D./-r/T | "一| Pq 、n由 j • d - n的 弓，J|d - |,
(3-19)
其中打飞{1,2,	jo因此，如式(3-19)所示的改良后的RSSR公式可以代
替之前如式(3-12)所示的RSSR公式，被应用于定位算法之中，通过一定程度上 校正LED的位置，减少LED之间实际存在的位置差异所带来的定位误差。
相应地，在对应的最小二乘问题中，式(3-15)应修改为
fi(XpD，ypD)

冬 J n曲,「d-n.「£/p (||d-^||p3 、n的[*[M-加
(3-20)
其中	[^^PD	LED，力o -Yled/pd~ZLED^ 中包占了 XpD 和 XpD。
3.3.2 3-D定位算法
3.3.1中所推导的算法也可以推广到3-D定位中。不同于2-D定位，在3-D 定位中，需要多个MDLA,各MDLA之间只有位置不同。当有£个MDLA (每 个MDLA包含K个LED)在PD的FOV以内，PD可以得到£(£-1)个互相独立 的RSSRo对于V/e{l,2,…/}和令U” =区皿小/皿“/回,'J代 表MDLA/中LEDi的位置，令dq =V-U”表示由MDLA/中LEDz•指向PD的 向量。对于MDLAZ , MDLA/中各LED的几何中心位置可以表示为 幼=[%。"/皿0皿/=『£>"。类似331中2-D定位算法的推导，3-D 定位算法中，也根据是否考虑MDLA中LED的位置差异，分为两部分。
1)忽略MDLA中各LED的位置差异
在每个MDLA中，以各LED的中心位置作为各LED的共同位置,则U“ « U’, 4产d/=V—U/。类似331, MDLA/中LEDi和/之间的RSSR可以表示为
"(V-UJ 丫
& j、j • ( V - U/
njEDj • [XpD - Xledj, Ypd  YlEDJ，ZpD - Zledj 了
11 LED,j ' [XpD 1 XLEDJ，VfD - VLED,I = ZPD ~ ZLEDJ ] >
(3-21)
其中/e{l,2,……,K},厚j。值得注意的是，在所提算法中，RSSR 只在同一 MDLA的LED之间计算，不在不同MDLA的LED之间计算。这是因 为不同MDLA之间以不同位置作为区分，使得由PD指向它们的向量之间有很 大的不同，无法在RSSR的计算中被互相抵消。
当KN3且£上2时，PD的位置[巧如为"ZpD『可以从对应的一组Z(K—1)个 类似式(3-21)的RSSR方程的方程组中求出。因此，对于3-D定位，PD需要接收 到至少2个MDLA,且每个MDLA中包含至少3个LED。此处RSSR方程组的
33
求解也是通过最小二乘法来求得最优解。以取各MDLA中LED 1与LED i （i。1） 之间的RSSR作为算法所需的RSSR为例，则对PD的位置比如》如Zp/的求解 可以化作为对下列最小二乘问题的求解
vamF(xPD,yPD,zPD) = min2t	力/如上。，z?。)
(3-22)
其中
九(XpD，ypD 9ZPD ) = "^匚"
"厂(v-uj
J皿1 ,(V-U/L

m

口2初,, [“PD - XleDJ，*D — YlEDJ，立尸q 一 ]
、*

、. [XPD ~ XLEDJ，y?D — yLEDJ,ZPD 一 ZLED,l\ )
（3-23）
该最小二乘问题也是非线性最小二乘问题，本文使用Levenberg-Marquardt算法 进行迭代求解。
2）考虑MDLA中LED的位置差异（引入LLC）
LLC机制也可以被推广到3-D定位场景中。令以％表示从指向U1,,的向 量，即切二叮,-口。类似于21D定位场景，式（3-21）可以被改进为
Pfi〜 尸"J -
^LEDj'^l "nLED j ' YIJ ?
便ill
x m+3
(3-24)
叫㈤* a -	Fj
V
、向F儿
相应地，在对应的最小二乘问题中的式（3-23）也应修改为

4 - 口£皿「.
x m+3
力 J(Xp£＞，VPD，ZpD ) = D

(3-25)
*4 —必即,,山）
7
在理论上，本章中所提出的算法可以准确计算得到PD的实际位置。然而, 除了 MDLA中LED的实际位置差异以外，噪声对RSS的影响是定位误差的更 大来源。对此，本文通过多次测量接收光功率取其平均值来降低噪声带来的误差。
3.4仿真结果与分析
3.4.1	仿真设置
在仿真中考虑一个典型的室内场景，使用的基本参数如表3-1所示。假设采 用开关键控（00K）调制作为调制机制。
34
表3-1仿真使用的基本参数
参数	取值
室内空间大小（长*宽X高）	5mx5mx3m
LED发射光功率，P,	2.2 W
LED半功率角，①皿	60°
PD实际接收面积，A	1 cm2
PD FOV,八	60°
PD法向量极角，a	[0o,180°]
PD法向量方位角，P	[0°?360°]
光学滤波器增益，Ts	1
聚光器折射率，n	1.5
PD光电转化效率，R.	0.5 AAV
等效噪声带宽，B	100 Mb/s
背景光电流，”	5100 pA
噪声带宽因子，12	0.562
绝对温度，Tt	295 K
放大器开环电压增益，G	10
PD单位面积电容，7	112PF/cm2
场效应管（FET）信道噪声系数，r	L5
FET跨导，gg	30 mS
噪声带宽因子，4	0.0868
MDLA安装在天花板上，法线方向垂直朝下（对于所提算法而言，MDLA的 位置和方向都可以是任意的，这里考虑的是一般的照明场景）。对于每个MDLA, 其中LEDi	2,...,£｝）的单位法向量为
./ic 八、 (2(1).180。) sin(180Q-0)cos -----------
V K J

5皿18。一山丝针
(3-26)

cos。80。- 6)
PD位于室内空间之中，为待定位目标。PD可以任意地旋转，PD的单位法 向量必。可以由它的极角a （法向量与z轴正方向的夹角）和方位角尸（法向量
35
在x-y平面上的投影与x轴正方向的夹角）所表示，即 nPD = [sin a cossin a sin /3, cos ocf。
对于PD所接收的来自每个MDLA的可见光信号，选取该MDLA中LED 1 和其他LED之间对应的RSSR作为定位算法中所需要的RSSR,即匕/匕（2-D 定位中使用）或匕“/月〃（3-D定位中使用），Vze{2,3,...,^}o
3.4.2	评价指标
1	.定位精度
定位精度是定位算法最为重要的性能评价指标，通常通过定位误差来衡量, 定位误差指的是待定位目标的实际位置与估计位置的偏差。对于单个定位样本， 定位误差可以表示为待定位目标的实际位置区,wz了与估计位置戌,无,2了之 间的欧几里得距离，即
m = y/（xr-xr）2+（yr-yr）2+（zr-zr）2	（3-27）
对于整体的定位误差，常用的评估标准有：（1）误差累积分布函数 （Cumulative Distribution Function, CDF）：指的是在所有的定位样本中，误差小 于某个值的定位样本所占的比例；（2）均方根误差（Root-Mean-Square Error, RMSE）：可以表示为
1
RMSE =
num
num 2
1
(3-28)
其中，“加是定位样本的总数量，e7是第i个定位样本的定位误差。
由于误差CDF能体现出定位误差在不同范围的分布，因而本文中使用定位 误差CDF来评价定位精度。
2	.位置覆盖率和平均角度可接受率
除了定位精度以外，接收器能否接收到足够的发射器以实现定位算法，是关 系定位算法性能的另一重要因素。当接收器在某点无法探测到足够的发射器时， 则定位算法无法实现，意味着定位算法无法覆盖该点。尤其是基于RSS的可见 光室内定位算法而言，算法通常要求要有一组来自不同LED的信号，而接收器 的FOV又通常较小，导致定位算法的覆盖往往有限。另一方面，由于接收器的 位置和方向都会影响到对可见光信号的接收,可见光室内定位算法的覆盖体现在 两个层面：对接收器位置的覆盖和对接收器方向的覆盖。
在已有的基于RSS的可见光室内定位算法研究成果中，在评估中主要关注 算法的定位精度，对算法的覆盖关注较少，尤其鲜有对角度覆盖的评估。为了评 估可见光室内定位算法的覆盖，定义两个评估标准，位置覆盖率（CR）和平均角 度接受率（AAAR）,分别用于表征可见光室内定位算法对接收器的位置和方向
36
的覆盖。CR是当接收器保持指向某个特定方向时，在接收器可放置的所有位置 中，可以接收到足够数量的发射器用于定位的位置所占的比例o在定义AAAR之 前，还需要先定义角度可接受率（Angle Acceptance Ratio, AAR）= AAR是当接 收器位于某个特定位置时，在接收器可以指向的所有方向（接收器的方向与接收 器法向量的极角和方位角的组合一一对应）中，可以接收到足够数量的发射器用 于定位的方向所占的比例。AAAR则是接收器可以放置的所有位置对应的AAR 的平均值。
3.4.3结果分析
1.定位精度
在对所提算法的定位精度的评估中，分别考虑了 2-D和3-D定位：1）在2-D定位中，只使用1个MDLA （即所提算法所要求的最小数量），该MDLA的位 置坐标为［2.5,2.5,（单位为m）。需要注意的是，在本文中，MDLA的位置是 指MDLA半球结构中球心的位置。假设PD的z轴坐标已知，x、y轴坐标待求。 在每次接收光功率的测量中，取100次测量的平均值作为测量结果。2）在3-D 定位中，使用2个MDLA （即所提算法所要求的最小数量），这2个MDLA的位 置坐标分别为［2.8,2.5,3了和［2.2,2.5,3了（单位为m）。在每次接收光功率的测量 中，取1000次测量的平均值作为测量结果。
为了考察MDLA的结构（由MDLA的半径R、LED的倾斜角。和LED的 数量K决定）对定位精度的影响，仿真中也针对不同的R、8、K进行了评估。 对于每一组不同的参数，各仿真1000个定位样本。对于每个定位样本，PD位置 坐标在室内空间以内随机取值，即PD的位置是随机的；PD法向量的极角a和 方位角6在表3-1中定义的对应范围里随机取值,即PD的方向是随机的。但是， 只取可以令PD接收到足够多接收器用于定位的PD位置与方向组合。对于每个 定位样本，使用本章所提的定位算法进行仿真，并且分别计算了不增加LLC和 增加了 LLC时的定位结果。
图 3-4 是 MDLA 半径 R=0cm、2cm、4cm、6cm, LED 倾斜角 9=15。，LED 数量K =4时的定位误差CDF： （a） 2-D定位；（b） 3-D定位。其中，R=0cm代 表理想情况，即LED的位置完全重合，从图中可以看到，此时定位精度最优， 且无需使用LLC机制。在2-D定位中，对于R=0cm、2cm、4cm> 6cm：当不使 用LLC时，定位误差的第95百分位数（表示95%的定位样本的定位误差要小于 该数）分别约为12cm、13cm、：15cm、17cm；当使用LLC时，定位误差的第95 百分位数分别约为12cm、12cm、12cm、13cm。在3-D定位中，对于R=0cm、 2cm、4cm、6cm：当不使用LLC时，定位误差的第95百分位数分别约为19cm、 22cm、21cm、25cm；当使用LLC时，定位误差的第95百分位数分别为19cm、
37
20cm、20cm、21cm»结合图中可以看到，定位精度随着MDLA半径R的增加而 下降，这是因为及越大意味着MDLA中LED之间的位置差异越大，与定位算法 中的理想模型的偏差越大。除此以外，当&>0cm时，在所提算法中增加LLC可 以进一步提升定位精度，提升后的定位精度已经十分接近尺=0cm的理想情况， 并且当火越大，提升越明显。
(a)	2-D定位
I
0.8
0.6
0.2
定位误差[m]
(b)	3-D定位
定位误差[m]
图3-4 不同MDLA半径R下的定位误差CDF： (a) 2-D定位；(b) 3-D定位 (LED倾斜角夕=15°、LED数量K =4)
图 3-5 是 LED 倾斜角。=5。、15。、30。、45°, MDLA 半径火=2cm, LED 数 量K =4时的定位误差CDF： (a) 2-D定位；(b) 3-D定位。在2-D定位中，对于 9=5。、15。、30。、45°,当不使用LLC时，误差的第95百分位数分别约为36cm、 13cm> 8cm、7cm；当使用LLC时，误差的第95百分位数分别约为36cm、12cm、 7cm、5cmo在3-D定位中，对于。=5。、15。、30。、45。，当不使用LLC时，误差 的第95百分位数分别约为48cm、20cm、13cm、12cm；当使用LLC时，误差的
38
第95百分位数分别约为48cm、19cm、12cm、10cm。结合图中可以看到，定位 精度随着LED倾斜角。的增加而增加，这是因为LED的倾斜角越大，各LED之 间的差异性越大，使得来自MDLA的一组RSS之间的差异性越大，从而当RSS 受噪声等影响存在一定的测量误差时，RSSR受RSS测量误差的影响越小。除此 以外，还可以看到当LED的倾斜角。越大时，LLC对定位精度的提升越明显， 这是因为当MDLA半径出相同且不为零时，倾斜角6越大，LED之间的位置差 异越大，LLC对定位精度的提升空间越大。
(a) 2-D定位
1
0.8
O.fi
0.4
0 o
图3・5 不同LED倾斜角9下的定位误差CDF: (a) 2・D定位；(b) 3・D定位
13
定位误差[m]
(MDLA 半径 R =2cm、LED 数量 K =4)
图3-6是LED数量K=3、4、5, MDLA半径出=2cm, LED倾斜角8=15。时 的定位误差CDF： (a) 2-D定位；(b) 3-D定位。由图中可以看到，不同LED数 量下所提算法的定位误差表现基本持平，换言之，LED的数量K对定位精度的 影响不大，只要满足所提算法所需的最低数量(即K=3)即可。
39
(a)	2-D定位
(b)	3-D定位
O
图3-6不同LED数量K下的定位误差CDF: (a) 2-D定位；(b) 3-D定位 (MDLA 半径K=2cm、LED 倾斜角 6=15。)
综上，所提算法的主要定位误差来源包括噪声和MDLA半径R (半径尺表 征了 MDLA中各LED之间的位置差异)，噪声使得PD实际接收的RSS与理论 应接收的RSS之间存在差异，半径尺在非零时则使得实际的MDLA与算法中理 想的MDLA模型之间存在差异。当半径7?较小时，噪声是相对更大的定位误差 来源，当半径尺较大时，半径尺则成为相对更大的定位误差来源。以上误差来源 对所提算法的影响程度受LED的倾斜角6所影响，当倾斜角8越大时，所提算法 受噪声的影响越小，但受半径尺的影响越大。除此以外，MDLA中LED的数量 K则对所提算法定位误差的影响较小，只需满足算法所需的最小数量即可。
40
21球烝坦投
51泄咚*仪
H三照哆.W技
0.18
0.16
0.14
「-0.12
' -0.08
图3・7定位误差的空间分布：(a) zPD =0m; (b) zPD =lm; (c) zPD =2m
（MDLA 半径夫=2cm、LED 倾斜角 6=15。、LED 数量K=4）
以MDLA半径R =2cm、LED倾斜角6=15。、LED数量K=4为例，图3-7给 出了定位误差的空间分布：（a） z9=0m； （b） zPD=lm； （c） zPD =2mo由于图形
41
显示的限制，这里只考虑了 2-D定位。可以看到，定位空间中的绝大部分位置都 能达到20cm以下的定位误差。定位误差的空间分布与RSS的空间分布有关， RSS的空间分布则取决于发射器的设计与位置。在仿真中，MDLA在天花板正 中向下辐射，因此PD离天花板越近或离空间中心越近，接收到的RSS越强，定 位精度越好。另外，由于LED的辐射范围有限，且发射信号强度与辐射角为余 弦关系，当PD在LED半功率角外时其接收到的RSS也相对较弱，定位精度也 相对较差。
2.位置覆盖率和平均角度可接受率
在CR和AAAR的评估中，对比以下两个基于RSS的可见光室内定位算法： （1）定位算法1：本章所提的MDLA（MDLA中LED数量K = 4）下基于RSSR 的可见光室内定位算法；（2）定位算法2：传统的单LED发射器下使用三边定位 法的基于RSS的可见光室内定位算法1的。其中，单LED可以看作是MDLA的 特殊情况：K=l, 8=0。。
表3-2展示了定位算法1和定位算法2在2-D定位和3-D定位下分别需要 的发射器的最小数量，可以看到定位算法1需要的最小数量要小于定位算法2需 要的最小数量。对了对比的需要，在仿真中统一设置发射器的数量为4,坐标分 别为[3,3,3]"[2,3,3了，[2,2,3?和[3,2,3『（单位：m）。PD 的x、y、z轴的坐 标的离散步长都取为0.05m。在CR的仿真中，由于当PD的方向不同时，CR也 会不同，因此为了简便，只仿真了 PD保持垂直朝上（即％°=[0,0,1了）时的01。 在AAAR的仿真中，PD法向量的极角和方位角的离散步长都取为5° =
表3-2定位算法所需发射器的最小数量
定位算法	所需发射器的最小数量
2-D定位	3-D定位
定位算法1	1	2
定位算法2	2	3
除此以外，由于在OOK调制中，为了使误码率（BER）优于10",要求SNR 要不低于13.6dB[6i],因此，仿真考虑两种情况：一种是只要PD能接收到足够的 发射器，没有SNR要求；另一种则是不仅要求PD能接收到足够的发射器，还 要求SNR要不低于13.6dB。
42
(a) CR
0.8
0.6
0.5
1-2-D定位
年一2-D定位（有SNR要求）
3-D定位
投一3-D定位（有SNR要求）
10
一9二
20	30
LED倾斜角e尸]
(b) AAAR
：A 2-D定位
一守一2-D定位（有SNR要求）
0.05「	，3-D定位
T-3-D定位（有SNR要求）
0 L---:---------:--
10	20
30	40	50
60
LED倾斜角6 [c]
*勺___■:% .	t
产 冲 9 冷------------.
* —>

O 04
0.2 ~
o 二 o
2VV-8 3 图
定位算法1和定位算法2的CR与AAAR: （a） CR; （b） AAAR
图3-8是定位算法1和定位算法2的CR与AAAR的比较结果。其中6=0。 （即LED无倾斜）代表使用单个垂直朝下的LED作为发射器，对应使用的定位 算法为定位算法2；当。＞0。时，。为MDLA中LED的倾斜角，对应使用的定位 算法为定位算法1。可以看到基于RSS的可见光室内定位算法能覆盖到的位置与 方向有限（尤其是当有SNR要求时），当PD位于部分位置或方向时无法进行定 位，这是因为VLC具有方向性、LED的覆盖范围有限以及PD的FOV通常较窄
43
所共同导致的。对于定位算法1,当LED的倾斜角增加时，这种限制越发严重， CR与AAAR都会随之下降，这是因为LED的倾斜角越大，MDLA中各LED覆 盖范围的重合部分越小。但是，当LED的倾斜角限定在一定范围以内时，定位 算法1的CR和AAAR要优于定位算法2,例如，当有SNR要求，MDLA中 LED的倾斜角为15。时:对于2-D定位，定位算法1能比定位算法2多覆盖14.8% 的位置和12.3%的方向;对于3-D定位，定位算法1能比定位算法2多覆盖11.1% 的位置和13.1%的方向。这是因为一方面，定位算法1使用MDLA作为发射器， 将不同方向的LED集中在同一位置，使得接收器接收到一个发射器时相当于可 以获得一组不同的单角度LED,另一方面，定位算法1在算法设计中利用RSSR 进行定位，使得2-D定位和3-D定位分别仅需1个和2个发射器，从而使得算 法的覆盖要优于定位算法2。
结合定位精度与CR以及AAAR的仿真结果，可以看到选择不同的LED倾 斜角，需要在定位系统在定位精度与覆盖之间进行平衡。LED的倾斜角越大，可 以实现更高的定位精度，但是只能覆盖更少的接收器位置与方向。
3.5本章小结
本章在发射端利用可见光的方向性，提出了 MDLA下基于RSS的可见光室 内定位算法。首先在第二章建立的VLC系统基本模型的基础上，建立了所提算 法所使用的定位系统模型，并对MDLA进行了设计。之后从系统模型出发，对 定位算法进行了推导，先提出了 2-D定位场景下基于RSSR的定位算法，然后在 其基础上又引入LLC机制，之后又将它们都扩展到3-D定位场景。最后通过 MATLAB对所提算法进行了仿真实现，对基于所提算法的定位精度、对接收器 的位置和方向的覆盖进行了评估和分析。
在所提算法中，接收器仅需要接收1个发射器就能进行2-D定位，仅需要接 收2个发射器就能进行3-D定位，并且算法对PD的方向无限制也无需使用额外 的传感器测量PD的方向。仿真显示，当MDLA中LED的倾斜角为15。时，所 提算法能实现较高的定位精度（95%的2-D定位结果的误差小于12cm, 95%的 3-D定位结果的误差小于19cm）,并且相比于传统的单LED发射器下使用三边 定位法的基于RSS的可见光室内定位算法，所提算法可以覆盖更多的接收器位 置和方向。
44
第四章 多角度PD阵列（MDPA）下基于RSS的可见光室 内定位算法
4.1	引言
第三章中，多角度LED阵列（MDLA）被用作发射器，每个MDLA中包含 多个不同方向的LED,用LED的方向对LED进行区分。实际上，除了在发射器 利用可见光的方向性以外，接收器也可以利用可见光的方向性。在本章中，发射 器仍使用传统的单LED,但是使用由多个不同方向的PD构成的多角度PD阵列 （MDPA）作为接收器，使得单个接收器对单个LED可以接收到一组接收信号 强度（RSS）不同的信号，并且RSS的不同是由PD的方向不同导致的入射角不 同所引起。
然而，不同于MDLA中各LED的方向在MDLA的安装阶段即可固定和确 定，MDPA作为接收器和待定位目标，它的方向是随机且未知的，因而MDPA中 各PD的方向也是随机且未知的。所以，在本章中PD的实际方向无法被直接使 用。为了解决这个问题，本章在算法设计中提出使用PD的相对方向而非绝对方 向用于定位。因为PD相对于MDPA的方向是固定的，且当MDPA的结构确定 时，PD的相对方向也能够确定。基于此，本章提出MDPA下基于RSS的可见光 室内定位算法，该算法能够实现3-D定位，定位过程分为两个阶段：在第一阶段 先利用接收信号强度比（RSSR）和PD相对于MDPA的相对方向估计出入射角， 然后在第二阶段利用RSS和第一阶段估计出的入射角估计出MDLA的位置。
在本章接下来的内容中,4.2节建立了所提算法的系统模型,并给出了 MDPA 的设计；4.3节在全局坐标系的基础上引入了接收器坐标系，接收器坐标系用于 描述PD相对于MDPA的相对方向；4.4节对所提算法进行了详细的推导；4.5节 对所提算法进行了仿真，并对仿真结果进行了分析；4.6节总结了本章的内容。
4.2	系统模型
本章中的可见光室内定位系统模型也是以第二章中建立的可见光通信（VLC） 系统的基本模型为基础，如图4-1所示。发射器为K个LED,安装在天花板的不 同位置上。接收器为一个由J个不同方向的PD构成的MDPA,并且代表待定位 目标。为不失一般性，假设各LED和MDPA都有着任意的3-D位置和3-D方 向。U产口皿4皿一皿了和11卯分别代表LEDi （Vie{l,2，…,K}）的实际位 置与单位法向量（即方向）。匕=和n如分别代表PD j
45
(V/e{l,2,…,J})的实际位置和单位法向量。可代表从LEDi指向PD j的向量， 即
4 J = Vj - Uj = \_XpD j ~XLEDi, ypD j — yiED,i 5 ZPDJ ~ ZLED,i	(4-1)
则LEDi到PDj的距离可以计算为d, s = MMI,对应的辐射角4 ,和入射角上J的 余弦值可以分别计算为
cos%"%』	(4-2)
cos (%/ = "(-%)	(4-3)
ij
图4-1使用LED和多角度PD阵列的可见光室内定位系统模型
421信道模型
由(2-1)可知，LED i和PD)之间LOS光链路的直流增益可以表示为
GgJ =[，4 cosm “ 四(%j)g(%j)cos(%j)	(4-4)
假设所有的LED都发射相同的光功率4 ,则PD j从LED]•接收到的RSS, 即接收光功率月,“，可以计算为
匕.)=月3血,	(4-5)
将式(4-2)、式(4-3)和式(4-4)代入式(4-5),匕了可以进一步表示为
46
&，=声—（幻）cos（，,j）
3	（4-6）
=dm+i （'助-	） （n尸°j ,	）
其中他,Jg他）是一个常数。
4.2.2噪声模型
噪声主要由散粒噪声和热噪声组成，并且通常被建模成加性高斯白噪声 （AWGN）o由式（2-5）和式（2-6）可知，LEDi和PD）之间的可见光信号受到的散 粒噪声和热噪声的方差可以分别表示为
戊hajj = 2 叫，,/ + 2qIbgI、B	（4-7）
2 阮修 ..D, 16/kT11r , ,2z d3	“
媪5尸一^^3-+------------（4-8）
G	gm
对应的总噪声方差为cr匕5,打=仇“内+%~海，信噪比（SNR）可以表示为
SNR = 101og10 异？—	（4-9）
bshotJJ + ^thermal
4.2.3 MDPA 设计
本算法使用MDPA作为接收器，MDPA是由J个不同方向的PD构成的PD 阵列。MDPA的结构如图4-2所示。MDPA也有着半球型结构，以犬表示其半径。 PD安装在MDPA的半球表面，均匀分布在一个与MDPA底面平行的圆上。以6 表示PD的方向与MDPA的中心法线方向的夹角，各PD有着相同的倾斜角6。
图4-2 4个PD构成的多角度PD阵列：（a）仰视图，（b）侧视图
由（4-3）, PD的方向不同会导致入射角的不同。因而，传统的单PD接收器 在同一位置同一方向对于同一 LED只能接收到相同的RSS,而MDPA在同一位 置同一方向对于同一 LED可以在接收一组不同RSS,并且这组RSS的差异与
47
PD的方向差异有关，从而使得接收端可以获得更多的信息用于定位。需要注意 的是，为避免歧义，本文规定当MDPA中所有的PD都能接收到某个LED时， 才认定为MDPA可以接收到该LED,即MDPA的视场角(FOV)是MDPA中所 有PD的FOV的重合区域。
假设MDPA中所有PD有着完全相同的参数，除了方向。然而在实际中，由 于PD存在一定的大小，因而各PD之间存在着不可避免的位置差异。但是，在 一般的室内定位场景中，MDPA中各PD之间的距离远远小于发射器和接收器之 间的距离，因而各PD之间的位置差异可以忽略。以MDPA的球心位置代表MDPA 的位置，标记为V = |>m⑼,九⑼/皿/。把MDPA的位置作为各PD共享的位 置，即丫丫，则九 adj=V—口，dtj «d, = ||d,|| o 因而，式(4-6)中 PD/对LED ，•的接收光功率匕力可以被近似地重新表示为
蜀尸.cospjcos - J
i	(4-10)
=而T (nLEDJ ,	) {nPDJ -	)
由式(4-10)可以看出，PD的方向和位置都对RSS有显著的影响。值得注意 的是，PD方向对RSS的影响是通过影响入射角而达到的。因此，可以先估计入 射角从而得到PD方向对RSS的影响，使得在对RSS有影响的未知量中仅剩下 PD的位置，继而可以由RSS估计出PD的位置。
4.3	全局坐标系与接收器坐标系
在一般情况下，为了确定和描述定位空间中位置、方向等，会以实际空间为 参考系建立一个确定的坐标系(例如，以房间某一角为原点，位于该角的相邻两 个墙面的水平延伸方向为x轴正方向与y轴正方向，以反重力方向为2轴正方向， 建立一个直角坐标系)，该坐标系可以称为全局坐标系。对于定位而言，定位的 目的就是获得待定位目标在全局坐标系中的位置坐标。
在本章所提算法中，为了估计入射角，需要利用MDPA中各PD的不同方向 之间的关系。但是，接收器MDPA在定位空间中是可以随意旋转的，即MDPA 的方向是任意且未知的，因而位于MDPA上的各PD的方向也是任意且未知的。 所以，在全局坐标系中，表示PD方向的PD单位法向量的坐标无法确定。然而， 值得注意的是，各PD相对于其所属的MDPA是固定的，因而当MDPA的结构 确定之后，PD相对于MDPA的相对位置和相对方向也可以确定。因此，本文引 入接收器坐标系用于描述PD相对于MDPA的相对位置和相对方向。
接收器坐标系是一个以接收器为参考系的直角坐标系。如图4-3所示，接收
48
器坐标系的原点。⑶为MDPA的球心，x⑻-y⑻平面为MDPA底面所在平面, z⑻轴正方向为MDPA的法线方向。令PD的方位角从零开始计，即MDPA中第 一个PD的法向量在针）-y⑻平面的投影落在小）轴正半轴上。
a -
图4-3接收器坐标系。⑻--»段2⑻和全局坐标系。-孙z
为了区别同一点或同一向量在全局坐标系和接收器坐标系中的不同坐标，以 右上角标“⑻”标记点或向量在接收器坐标系中的坐标，无特殊标记的则为点或 向量在全局坐标系中的坐标，即接收器坐标系中的U,、V\R）、v（R）、或治、 碉J、崂和d产等分别对应于全局坐标系中的U,、丫、V、n皿.、n皿,、九 和d,等。显然，V（R）=[O,O,O]" MDPA的结构一旦确定（即及，。和J确定）, Vf）和n以,也能够被分别确定为
V『=Rn^	（4-11）
n
PDJ
(4-12)
如图4-3所示，全局坐标系和接收器坐标系是互相等价的，但是由于接收器 在定位空间中的移动和旋转，全局坐标系和接收器坐标系通常是不重合的。假设 初始时刻接收器坐标系和全局坐标系重合，接收器坐标系可以看作是全局坐标系 经过平移和旋转变换后得到的坐标系，坐标转换公式可以表达为
1）从全局坐标系变换到接收器坐标系
49
[X ⑻，严力力，=R[”zF +T	(4-13)
2)从接收器坐标系变换到全局坐标系
[x,y,zY =葭3?*/⑻ 了-T	(4-14)
其中[”,zF和3?歹⑻,z(，『分别表示全局坐标系和接收器坐标系中的坐标；T 代表平移向量，用于计算平移变换，在本文中丁 = -V； R代表旋转矩阵，用于计 算旋转变换。
接收器坐标系固定于接收器，随着接收器的旋转而旋转。接收器为刚体，刚 体的旋转可以分解成三个互相独立的定轴旋转，对应的三个独立的旋转角被称为 欧拉角16纥取全局坐标系的三个坐标轴为定轴，以逆时针旋转为正，则接收器坐 标系的旋转变换可以通过接收器绕x轴、y轴和z轴的旋转角%、％和%所确定， 对应的旋转矩阵分别为
-1	0	0 ■
&a)=	0 cos%	sin%	(4-15)
0 -sin 片	COS/j
cos /2 0	-sin/2
Rg =	0	1	0	(4-16)
sin y2 0	cos/7
cos/3 sin 为 0
风仇)=	一 sin % cos% 0		(4-17)
0	0	1
接收器绕各坐标轴的旋转顺序有多种组合，本文中使用的顺序为先绕Z轴旋 转八角，然后绕X轴旋转九角，最后绕y轴旋转右角。则接收器坐标系和全局坐 标系之间的旋转矩阵可以表示为
R = Rv(72)Rx(71)Rr(73)	(4-18)
R为正交矩阵，RrR = I3, h为3x3的单位矩阵。
4.4	定位算法
在所提算法中,MDPA需要包含至少3个PD,且需要接收到至少3个LED, 即KN3且JN3。假设各LED都知道自身的朗伯阶数、位置和单位法向量，并 在各自分配的时隙轮流通过VLC广播这些信息。当LED在MDPA的FOV中， MDPA中的各PD分别接收到来自该LED的可见光信号，并测量出对应的接收
50
光功率（即代表RSS）。
所提算法可以实现对MDPA的3-D定位，定位过程分为两个阶段：1）在接 收器坐标系中估计入射角；2）在全局坐标系中估计位置。
4.4.1	入射角估计
入射角估计基于RSSR实现，并且在接收器坐标系中进行。
入射角作为角度，其值不受坐标系影响，在全局坐标系和接收器坐标系中的 值都是一样的。对于来自LEDz•的可见光信号，由式（4-10）可得PD/和PD/z之间 的RSSR为
工理& 31	（4-19）
Pr.t.h cos（/j n 血厂可
在接收器坐标系中，式（4-19）可以对应地表示为
匕./ 严（九）_明年）
Pr.i.h COS（0n第』•小）
(4-20)
, j 丰 h °
由于MDPA中包含J个PD,因而对于每个LED （在MDPA的FOV以内）, MDPA可以获得（J-1）个互相独立的像式（4-20）一样的RSSR方程。为了简便, 这里使用PD 1与其他PD之间的RSSR作为算法所需的RSSR,即
电厂嘿再© 匕「脸遇⑻
(4-21)
经过一些简单变换，式（4-21）可以被更进一步的转化为
，嘿「况暇。二0	（4-22）
在式（4-22）中，向量d产的模（即4）的大小对等式的成立没有影响，它的方向（即 可及）/4 ）对等式的成立有影响。
令
吼-留暇）
则MDPA得到的那（J —1）个如式（4-20）的RSSR方程，可以写成如下齐次线性方
51
程组的形式
A.Xj = 0
(4-24)
其中X,满足闾1 = 1。
由于在实际环境中存在噪声以及测量误差等因素，使得RSSR的实际测量与 理论值之间可能存在一定的偏差，使得如果直接求解式(4-24)可能无解，因此， 对式(4-24)求解其最小二乘解。式(4-24)是齐次线性方程组，在l的约束下, 该方程组的最小二乘解为为矩阵A；A,最小特征值所对应的特征向量。又由 04//<％<90。，可知cosdJ20。因而，入射角余弦的估计值可以计算为
cos (我)) = %鼠闻	(4-25)
4.4.2	位置估计
位置估计基于RSS实现，需要使用上一阶段得到的入射角估计值，并且在 全局坐标系中进行。
将式(4-10)变换成如下形式
P，，7 =("，「，)
Ccos(〃J ||d,|r+3
其中，cos仇j已经在第一阶段得到了估计值cos(必J),只有d,中的V还是未知 量(d,=V—U,)。在式(4-26)中，(n皿/4/7眄/3与)无关，即在理论上， e,j/Ccos(%j)对同一 MDPA中的所有PD都是相同的。但是在实际中，由于噪 声以及PD间不可避免的位置差异等因素的存在，不同PD的耳内/Ccos(%J会 有细微的差别。因此，本文把4,j/。cos(%J的估计值。定义为各PD得到估计 值的平均值，即
八A 1工 P
)了2鹿欹)	.7)
最终，MDPA的位置V在全局坐标系中的估计值可以通过求解下列最小二 乘问题得到
(4-28)
该最小二乘问题是非线性最小二乘问题，本文使用Levenberg-Marquardt算法进 行迭代求解。
52
4.5	仿真结果与分析
4.5.1	仿真设置
在仿真中考虑一个典型的室内场景，使用的基本参数如表4-1所示。假设系 统开关键控（00K）调制作为调制机制。4个LED安装在天花板上并且全部垂 直朝下，位置坐标分别为［2,2,3了、［2,3,3『、［3,3,3?和［3,2,3了（对于所提算法 而言，LED的位置和方向都可以是任意的，这里考虑的是一般的照明场景）。 MDPA位于室内空间之内，作为待定位目标。
表4-1仿真使用的基本参数
参数	取值
室内空间大小（长X宽X高）	5mx5mx3m
LED发射光功率，P,	2.2 W
LED半功率角，①“2	60°
PD实际接收面积，A	1 cm2
PD FOV,也	60°
光学滤波器增益，Ts	1
聚光器折射率，n	1.5
PD光电转化效率，Rp	0.5 A/W
等效噪声带宽，B	100 Mb/s
背景光电流，”	5100 |1A
噪声带宽因子，12	0.562
绝对温度，Tk	295 K
放大器开环电压增益，G	10
PD单位面积电容，TJ	112PF/cm2
场效应管（FET）信道噪声系数，r	1.5
FET跨导，gm	30 mS
噪声带宽因子，13	0.0868
MDPA绕x轴旋转角外	[0,360°]
MDPA绕y轴旋转角八	[-90。, 90。]
MDPA绕z轴旋转角为	血360。］
仿真主要对所提算法的定位精度进行评估，并使用定位误差的累积分布函数 （CDF）对定位精度进行衡量。为了考察MDPA的结构（由MDPA的半径R、 PD的倾斜角6、PD的数量J所决定）对定位精度的影，在仿真中设置了不同的
53
r、e和J。对于每组不同的R、e和j组合，各仿真looo个定位样本。对于每 个定位样本，MDPA被随机放置在室内空间内的任意位置，且MDPA可以绕x 轴、丁轴、2轴任意随机旋转，但是只取MDPA可以接收到4个LED的位置和 旋转角。除此以外，为了减少噪声带来的误差，对于每次RSS的测量，取1000 次测量的平均值为测量结果。
4.5.2	结果分析
图 4-4 是 MDPA 半径尺=0cm、2cm、4cm、6cm, PD 倾斜角 8=15°, PD 数 量J=4时的定位误差CDFo R与MDPA中PD的位置差异成正比，R=0cm代表 了理想情况，即MDPA中各PD位置完全重合。对于MDPA半径R =0cm、2cm、 4cm、6cm,定位误差的第95百分位数分别为5cm、5cm> 7cm、9cm。结合图中 可以看到，定位精度随着火的增加而下降，这是因为所提算法假设了 MDPA中 各PD的位置重合，而及越大，PD之间的位置差异越大，与所提算法的假设偏 差越大。但是也可以注意到，对于R=0cm、2cm、4cm、6cm,绝大多数的定位样 本都能达到厘米级的定位精度（定位误差小于10cm）。
0.8
0.6
0.2
0.05
0.2
0.15 定位误差[m]
R=0cm
--R=2cm
..R=4cm
--R=6cm
图4-4不同MDPA半径R下的定位误差CDF （PD倾斜角6>=15°、PD数量J=4）
图 4-5 是 PD 倾斜角 6=5。、15。、30°, 45°, MDPA 半径尺=2cm, PD 数量 J =4时的定位误差CDF。对于PD倾斜角8=5。、15。、30。、45°,定位误差的第95 百分位数分别为15cm、5cm、3cm、3cm。可以看到当PD的倾斜角6足够大（如 0215。）时，所提算法可以实现厘米级的定位精度。并且，定位精度随着PD的 倾斜角。的增大而增大。但是，需要注意的是，如果。取得过大，MDPA中各PD 的FOV的重合部分将变得过小，则MDPA的FOV会变得过小，MDPA将较难 接收到足够多的LED进行定位。因而，在设定MDPA中PD的倾斜角时，应该 要平衡定位系统对精度和覆盖的分别诉求。
54
图4-5 不同PD倾斜角（9下的定位误差CDF （MDPA半径尺=2cm、PD数量J=4）
图4-6是PD数量J=3、4、5, MDPA半径灭=2cm、PD倾斜角6=15。的定 位误差CDF。可以看到PD数量J对定位精度影响很小，令PD的数量满足所提 算法的最低需求（J=3）即可。
定位误差[m]
图4.6 不同PD数量J下的定位误差CDF （MDPA半径R =2cm、PD倾斜甭8=15°）
综上，与第三章所提的MDLA下基于RSS的可见光室内定位算法类似，本 章所提算法的主要定位误差来源包括噪声和MDPA半径尺（半径R表征了 MDPA 中各PD之间的位置差异），噪声使得MDPA中各PD实际接收的RSS与理论应 接收的RSS之间存在差异，半径出在非零时则使得实际的MDPA与算法中理想 的MDPA模型之间存在差异。当半径R较小时，噪声是相对更大的定位误差来 源，当半径7?较大时，半径尺则成为相对更大的定位误差来源。MDPA中各PD 的倾斜角。则影响了以上误差来源对所提算法的影响程度，当倾斜角。越大，所 提算法受噪声的影响越小，但受半径火的影响越大。除此以外，MDPA中PD的 数量J则对所提算法定位误差的影响较小，只需满足算法所需的最小数量即可。
55
(a)
0. J
0.08、
0.06-
0.04 ~
0.02 <
“PA=°m
o.i、
0.08、
0.06-
0.04-
0.02 J
图 4-7 定位误差的空间分布：(a) zWPA=Oni; (b)	(c) 2的j2m
(MDLA 半径 R=2cm、LED 倾斜角 8=15。、LED 数量 K =4)
图4-7是MDLA半径出=2cm、LED倾斜角6=15。、LED数量K=4时的定
56
位误差空间分布。由于图形显示的限制，将MDPA的z轴坐标取为定值： (a) z谢pA=Om； (b) zMDPA =lm； (c) z皿户/2m。从图中可以看到，一方面，可 以到室内空间内几乎所有位置都能达到厘米级的定位精度；另一方面，定位误差 的分布与RSS的分布有关，当MDLA距离LED较远或不在LED的半功率角以 内时RSS较弱，定位误差较大。
4.6	本章小结
本章在接收端利用可见光的方向性，提出了 MDPA下基于RSS的可见光室 内定位算法。首先在第二章建立的VLC系统模型的基础上，建立了所提算法所 使用的定位系统模型，并对MDPA进行了设计。之后，为了解决PD的实际方向 与MDPA的实际方向一样任意且未知的问题，在全局坐标系的基础上引入了接 收器坐标系，以使用PD相对于MDPA的相对方向。接着，对所提算法进行了推 导，所提算法将定位过程分为两阶段，分别为：接收器坐标系下基于RSSR的入 射角估计，全局坐标系下基于RSS的位置估计。最后通过MATLAB对所提算法 进行了仿真实现，并对其定位精度进行了评估和分析。
在所提算法中，接收器接收到3个LED可进行3-D定位，接收器的方向没 有限制，且无需使用额外的传感器测量接收器的方向。仿真显示，当PD的倾斜 角足够大时，所提算法可以实现厘米级的定位精度，例如，当PD的倾斜角为15。 时，95%的定位结果的误差小于5cm。
57
第五章MDLA和MDPA下基于RSS的可见光室内定位算 法及多模定位机制
5.1	引言
第三章以多角度LED阵列（MDLA）作为发射器、单PD作为接收器，提出 了 MDLA下基于接收信号强度（RSS）的可见光室内定位算法；第四章以单LED 作为发射器、多角度PD阵列（MDPA）作为接收器，提出了 MDPA下基于RSS 的可见光室内定位算法。在本章中，将以MDLA作为发射器、MDPA作为接收 器，在发射端和接收端同时利用可见光的方向性，提出MDLA和MDPA下基于 RSS的可见光室内定位算法，该定位算法中，MDPA接收到单个MDLA即可进 行3-D定位。
除此以外，本章还将上述三个单模算法进行联合，形成MDLA-MDPA多模 定位机制：针对不同的信号接收情况，使用不同的定位模型及算法进行定位。一 方面可以发挥各单模定位算法的优势，另一方面则可以拓宽定位的适用条件，相 比于单模定位算法拥有更高的覆盖。
在本章接下来的内容中，5.2节建立了定位系统模型；5.3节对MDLA和 MDPA下基于RSS的可见光室内定位算法进行了详细的推导；5.4节把5.2节所 提算法与前两章所提的算法进行联合，形成MDLA-MDPA多模定位机制；5.5节 分别对5.3节所提算法和5.4节所提多模定位机制进行了仿真，并对仿真结果进 行分析；5.6节总结了本章的内容。
5.2	系统模型
本章中的可见光室内定位系统模型如图5-1所示，该系统模型结合了第三章 和第四章中所使用的系统模型，使用MDLA作为发射器，使用MDPA作为接收 器，在发射端和接收端都充分利用可见光的方向性。在该定位系统中，共有L个 MDLA安装在天花板上，每个MDLA中有K个不同方向的LED, MDLA的半 径为火“小，LED的倾斜角为为ed。各MDLA除了位置不同以外，其他参数和结 构都相同。MDPA代表待定位的目标，包含J个不同方向的PD, MDPA的半径 为Rmdpa，PD的倾斜角为dPD o MDLA和MDPA的结构设计分别与第三章和第四 章中的设计类似，不再赘述。
为不失一般性，假设MDLA和MDPA的位置和方向都是任意的。以
］和四应（/（	, VZ e	）代表
58
MDLA /中LEDi的实际位置和单位法向量。Vy = \xPD],yPD J,zPD J JnPDj (V/e{L2,…,J})代表MDPA中PDj,的实际位置和单位法向量。d〃j代表从 MDLA/中的LEDi指向PD/的向量，即
d”j=V「U”=[XpDJ— XLED,i,l^ 丫PD,j —九，Z尸— ZLED,i,l 1	(51 1)
则MDLA/的LEDi到PD J的距离可以计算为d山=|跖』，对应的辐射角虹口和 入射角〃山.的余弦值可以分别计算为
3(源/)=七工	(50
侬(,)=叱0	(5-3)
aiJJ
图5-1使用LED和多角度PD阵列的可见光室内定位系统模型
5.2.1	信道模型
由(2-1)可知，MDLA/的LED i到PD j•之间LOS光链路的直流增益可以表 示为
^LoSJJJ ~ 墨0 coS"(即加(，"J)g(%JJ)8S(%，/J)	(5-4)
假设所有的LED都发射相同的光功率月，则PDj从MDLAZ的LED i接收 到的RSS,即接收光功率耳”,，可以计算为
59
Pp,j = PtGLoSJJ,J
(5-5)
将式(5-2)、式(5-3)和式(5-4)代入式(5-5),接收光功率月〃,可以被进一步表 示为
n	C
alJJ
C Z
Y%Jcos(匕”)
(5-6)
11 LED J &;/,/) (nroj
其中c=H怨仇是一个常数。
5.2.2	噪声模型
噪声主要由散粒噪声和热噪声组成，并且通常被建模成加性高斯白噪声 (AWGN)o由式(2-5)和式(2-6)可知，MDLA/的LEDi和PD/之间的可见光信号 受到的散粒噪声和热噪声的方差可以分别表示为
=2qRpPr〃、jB + 2qIbgI2B	(5-7)
2	8兀珥	,
(rthermal=—^jLrlAI2B- +
Cr
皿竺人2/3
(5-8)
对应的总噪声方差为忧皿内=靖山々+脸„„“，信噪比(SNR)可以表示为
SNR = 101og10 - 2(生，々-+ ^thermal
(5-9)
5.3	MDLA和MDPA下基于RSS的可见光室内定位算法
在本节中，考虑在MDLA和MDPA所组成的系统下的一种特定情况：只使 用单个MDLA (即£ = 1)和MDPAo对于这种单个MDLA和单个MDPA的组 合，本节提出MDLA和MDPA下基于RSS的可见光室内定位算法。
所提算法假设MDLA中各LED只有方向不同，MDPA中各PD只有方向不 同。在实际中，MDLA中各LED之间有不可避免的位置差异，但是由于该差异 一般远小于发射器和接收器之间的距离，因此可以忽略而不会带来太大的误差， MDPA同理。此时,以U = [x^Q/N，为如/及必]'和V =	尸分别表
示MDLA和MDPA的位置，则MDLA中LEDi的位置U, ® U, MDPA中PD / 的位置上a V。从LEDi指向PD j的向量九可以化为从MDLA指向MDPA的
60
向量d,即
d.«d = v-u	(5-10)
根据式(5-6),对于单MDLA和单MDPA情况，MDLA的LED i的信号在 被MDPA中PD )接收后的RSS对应的公式可以退化为
c
43尸再一(如心优)
a	(5-11)
= 磊伍皿，7厂(11见4)
所提算法也需要使用全局坐标系和接收器坐标系，坐标系的引入方式与第四 章类似，不再赘述，并也以右上角标“⑷”标记点或向量在接收器坐标系中的坐 标，无特殊标记的则为点或向量在全局坐标系中的坐标。
所提算法将定位过程分为了三个阶段：全局坐标系下基于RSSR的辐射角估 计；接收器坐标系下基于RSSR的入射角估计；全局坐标系下基于RSS的位置 估计。
5.3.1	辐射角估计
在全局坐标系下，利用MDLA中不同LED与MDPA中单个PD之间的可见 光信号的传输只有辐射角不同的特性，基于RSSR估计辐射角。
由式(5-11)可得，来自LEDi (V，e{2,3,…,K})与LED1的信号达到PD；
()后分别对应的接收光功率的比值RSSR为
Pr,.j ..cosm(^)_(n££g,-d)m
为〜。。腔⑷飞加叶	()
在理论上，COsM(4)/cOSm (外)与j无关,即乙或COSFOJ/COS"(林)对 于MDPA中所有PD是相同的(对MDLA中不同LED是不同的)，但是由于测 量误差和噪声的存在，不同PD对应的月〃/月"可能会有所差异，因此，定义
以月/匕代替匕j/Ejj作为在辐射角估计中实际使用的RSSR,将其代入式 (5-12),并将式(5-12)经过简单的变换，转化为
当MDPA接收至[] MDLA中K个LED时，则接收端可以获得K-1个如式(5-14) 的方程，方程中的未知量为d的方向。
61
则接收端获得的K-1个如式(5-14)的方程可以转化为A/】=0形式的齐次线性方 程组。由于恒| = 1,该方程组的最小二乘解当为A；4的最小特征值所对应的特 征向量。
又由于当0 V族< 90。时,接收器才能接收到LEDi的信号，所以cos(0) > 0。 由年可以计算得到辐射角例余弦值的估计值为
cos ㈤闯	(5-16)
5.3.2	入射角估计
在接收器坐标系下，利用MDLA中单个LED与MDPA中不同PD之间的可 见光信号的传输只有入射角不同的特性，基于RSSR估计入射角。
由式(5-11)可得，来自LEDi (Vie{l,2,...,K})的信号达到PD1和PDj
(0w {2,3,-,7))后分别对应的接收光功率的比值RSSR为
(匕)一嘿4⑻
(%)暇鹏
(5-17)
在理论上，85"'(%)/85“(％)与》无关，即月	或 COS^MJ/cOsM (四)
对于MDLA中所有LED是相同的(对MDPA中不同PD是不同的)，但是由于 测量误差和噪声的存在，不同LED对应的可能会有所差异，因此，定 义
Pr、j21弋用 另二一 K台匕j
(5-18)
以无/也代替吃,/匕」作为在入射角估计中实际使用的RSSR,将其代入式 (5-17),并将式(5-17)经过简单的变换，转化为
喘「各暇
d⑻=0
(5-19)
7
62
当MDPA中的J个PD都接收到MDLA时,则接收端可以获得J-1个如式(5-19)
的方程，方程中的未知量为d⑻的方向。
(5-20)
则接收端获得的J-1个如式(5-19)的方程可以转化为A2X2R形式的齐次线性方 程组。由于区| = 1,该方程组的最小二乘解心为AWA2的最小特征值所对应的特 征向量。
又由于入射角在PD的FOV以内时，PD才能接收到发射器的信号，即 《k<90。，所以cos(匕)>0。由文2可以计算得到入射角匕余弦值的估计 值为
cos优) = |n 鼠为	(5-21)
5.3.3	位置估计
在全局坐标系下，利用前两个阶段估计的结果，基于RSS估计MDPA的位 置。
由式(5-11)可得
1
d ® -cosm(0) cos (匕)	(5-22)
J，"	J
由式(5-22),以及前两个阶段得到的辐射角估计结果cos (孙和入射角余弦值 估计结果cos(%),将MDLA和MDPA之间的距离估计值2计算为
k」(	$
9cosm⑻cos(%)	(5-23)
在辐射角估计中，除了可以获得辐射角余弦的估计值以外，还可以获得由 MDLA指向MDPA方向上的单位向量$=d/d的估计值年。但是需要注意的是， 年的方向可能与相反，即为=±玉。对于、与事是否同向，可以在接收器接收到 的LED中任取一个LED的单位法向量叫孙,根据n曲,，.与句的内积是否为正判 断(本质上就是判断辐射角是否小于90。)。因此，由MDLA指向MDPA的向量 d可以估计为
63
拄I，^LEDJ , Xj > 0
-2*15 ni£D,i ' X] 0
(5-24)
由式（5-10）, MDPA的位置可以估计为
V = U + d	（5-25）
至此，实现了对MDPA的3-D定位。可以看到，不同于第三章和第四章提 出的算法需要解非线性最小二乘问题，本节所提算法中的最小二乘问题都是线性 的，可以直接通过公式求得理论解，因此在本节所提算法中无需迭代求解过程, 计算复杂度更低。
5.4	MDLA-MDPA多模定位机制
第三章以MDLA作为发射器、单PD作为接收器组成系统模型，推导了 MDLA下基于RSS的可见光室内定位算法，该算法在PD能接收到至少2个 MDLA时可以实现3-D定位；第四章以单LED作为发射器、MDPA作为接收器 组成系统模型，推导了 MDPA下基于RSS的可见光室内定位算法，该算法在 MDPA能接收到至少3个LED时可以实现3-D定位;本章5.3节以MDLA作为 发射器、MDPA作为接收器组成系统模型，推导了 MDLA和MDPA下基于RSS 的可见光室内定位算法，该算法在MDPA能接收到至少1个MDLA时可以实现 3-D定位。
由于MDLA也可以提供单LED, MDPA也可以提供单PD,所以，在本章 5.2节所建立的以MDLA作为发射器、MDPA作为接收器，且有多个发射器（不 同MDLA之间位置不同）的可见光室内定位系统中，以上三个算法所基于的系 统模型都可以被视为5.2节所建立的系统模型的特定形式，换言之，以上三个算 法可以适用于5.2节所建立的系统下不同的信号接收情况。
因此，本文将以上三个单模定位算法进行结合，提出MDLA-MDPA多模定 位机制。考虑3-D定位，该机制需要定位系统中有至少2个不同位置的MDLA 且每个MDLA中有至少3个LED, MDPA作为待定位目标，且MDPA中有至少 3个PD。针对不同的信号接收情况，该机制可以使用不同的定位算法进行定位：
1）当MDPA中任意1个PD接收到至少2个MDLA时，可以使用MDLA 下基于RSS的可见光室内定位算法（即第三章所提算法）；
2）当MDPA中至少3个PD共同接收到任意3个同样的LED （不限定是否 属于同一个MDLA）时，可以使用MDPA下基于RSS的可见光室内定 位算法（即第四章所提算法）；
3）当MDPA中至少3个PD共同接收到任意1个同样的MDLA时，可以
64
使用MDLA和MDPA下的可见光室内定位算法（即本章5.3节所提算 法）。
由于以上三种算法都无需限制或已知接收器的方向，因此MDLA-MDPA多 模定位机制无需限制接收器的方向，也无需使用额外的传感器测量接收器的方向。 同时，相比于只使用其中任一单模算法，MDLA-MDPA多模定位机制通过将三 种单模算法进行结合并适配不同的信号接收情况，主要能产生两方面优势：一方 面，可以使得可见光室内定位系统覆盖更多的信号接收情况，从而覆盖更多的接 收器位置和方向；另一方面，当信号接收情况同时满足不同算法时，接收器可以 选择性能更优（如定位精度更高）的算法进行定位。
5.5	仿真结果与分析
5.5.1	MDLA和MDPA下基于RSS的可见光室内定位算法
在对MDLA和MDPA下基于RSS的可见光室内定位算法的仿真中，仿真 模型构建在一个典型的室内场景之中，使用的基本参数如表5-1所示，只使用单
个MDLA（gpz = l）o假设系统采用开关键控（00K）调制作为调制机制。MDLA
安装在天花板中央（即位置为［2.5,2.5,3『，单位：m）并垂直朝下，MDLA中LED i （ Vze{l,2,...,^}）的单位法向量11A皿，为
Dr rn 二
LED,i
sin(180。-%。)cos △-±-------
sm(180°- 0LED) sinM~~-----
cos(180°-^d)
(5-26)
MDPA位于室内空间之内，作为待定位目标。
仿真主要考察了所提算法的定位精度，使用的定位精度衡量指标为定位误差 的累积分布函数（CDF）。在仿真中，为了考察MDLA中LED的倾斜角%即和 MDPA中PD的倾斜角0PD对定位精度的影响,设置了不同的01En与0PD o对于每 组不同的仇即与斗。组合，各仿真1000个定位样本。对于每个定位样本，MDPA 被随机放置在室内空间内的任意位置，且MDPA可以绕x轴、y轴、z轴任意地 随机旋转，但只取可以令MDPA接收到MDLA的位置和旋转角。除此以外，为 了减少噪声带来的误差，对于每次RSS的测量，取1000次测量的平均值为测量 结果。
65
表5-1仿真使用的基本参数
参数	取值
室内空间大小(长X宽X高)	5mx5mx3m
MDLA半径，%	2 cm
MDLA中LED的数量，L	4
LED发射光功率，P,	2.2 W
LED半功率角，①I?	60°
MDPA半径，R回	2 cm
MDPA中PD的数量，J	4
PD实际接收面积，A	1 cm2
PD FOV,匕	60°
光学滤波器增益，Ts	1
聚光器折射率，n	1.5
PD光电转化效率，Rp	0.5 A/W
等效噪声带宽，B	100 Mb/s
背景光电流，Iig	5100 pA
噪声带宽因子，72	0.562
绝对温度，Tk	295 K
放大器开环电压增益，G	10
PD单位面积电容，	112PF/cm2
场效应管(FET)信道噪声系数，「	1.5
FET跨导，gm	30 mS
噪声带宽因子，13	0.0868
MDPA绕x轴旋转角片	[0,360°]
MDPA绕y轴旋转角片	[—90。,90。]
MDPA绕z轴旋转角为	[0,360°]
图5-2是不同LED倾斜角和不同PD倾斜角6%下的定位误差CDF,取 %即=5。、15。、30。，和23=5。、15。、30。进行两两组合。从图中可以看到，一方 面，定位精度同时受LED倾斜角Bed和PD倾斜角斗。的影响，当LED倾斜角
越大或PD倾斜角斗。越大，定位精度表现越好。另一方面，对于仿真中的 这些倾斜角组合，几乎都能实现厘米级的定位精度。例如，当％切=5。且％”=5。 时，此时的定位精度在仿真中所有组合里表现最差，定位误差的第95百分位数 约为9cm；当％ed =15。且％°=15。时，定位误差的第95百分位数约为8cm。
66
(a)。回=5°
(b)	8回=15。
(c)	%初=30。
0 5-2 不同LED倾斜角％ 和不同PD倾斜角斗。下额度定位误差CDF
图5-3是定位误差的空间分布。可以看到与第三章和第四章所提的算法相似, 在MDLA和MDPA下的基于RSS的可见光室内定位算法中，定位误差的分布 也受RSS的分布的影响，当MDPA距离MDLA较远或不在MDLA中各LED的
67
北京邮电大学工学硕士学位论文
半功率角范围内，RSS较弱，定位误差较大。除此以外，还可以看到几乎在空间 内的所有位置，都能实现厘米级的定位精度。
⑸工的=0m
工 MDPA ~ [ m
=二法言
(b)
10.09
008
户0.07
P ；
-- 0.06
--0.05
0.04
0.03
0.02
(c)	~	=?m
-.MDPA I”

0.1
0.08
0.06
0.04
0.02
0
图5・3定位误差的空间分布：(a)	(b) z即尸『lm; (c) z的/=2m
5.5.2 MDLA-MDPA多模定位机制
在MDLA-MDPA多模定位机制的仿真中，仿真考虑了一个典型的室内场景 之中，使用的基本参数如表5-1所示，使用4个MDLA(即乙=4)。假设采用OOK
68
调制作为调制机制。MDLA安装在天花板上并垂直朝下，坐标分别为［3,3,3了， ［2,3,3『，［2,2,3『和［3,2,3了(单位：m),各 MDLA 中 LEDi ( Vi w {1,2,…,K}) 的单位法向量n团 ,如式(5-26)所示。MDPA位于室内空间以内，作为待定位目标。 MDLA中的LED倾斜角和MDPA中的PD倾斜角都取为15。，即，即=15。且％0 =15。。
仿真主要以位置覆盖率(CR)为例，对使用MDLA-MDPA多模定位机制的 覆盖情况进行评估。PD的X、/、z轴的坐标的离散步长都取为0.01m。在CR 的仿真中，由于当PD的方向不同时，CR也会不同，因此为了简便，只考虑了 PD保持垂直朝上(即叫°=［0,0,1了)时的CR。除此以外，为了使OOK调制的 误码率(BER)优于10R 还要求接收信号的SNR要不低于13.6dB网］。
表5-2 CR仿真结果
定位算法/机制	CR
定位算法1	0.716
定位算法2	0.641
定位算法3	0.641
MDLA-MDPA多模定位机制	0.720
表5-2是CR的仿真结果，定位算法1代表MDLA下基于RSS的可见光室 内定位算法，定位算法2代表MDPA下基于RSS的可见光室内定位算法，定位 算法3代表MDLA和MDPA下基于RSS的可见光室内定位算法。从表中可以 看到，一方面，包含了 3个单模定位算法的MDLA-MDPA多模定位机制的CR 高于其所包含的任一单模定位算法的CR,即MDLA-MDPA多模定位机制可以 覆盖更多的接收器位置。另一方面，就CR而言，定位算法1对MDLA-MDPA 多模定位机制的贡献最大，另外两个算法的贡献则相似。但是，由前文的仿真结 果可知，定位算法1比定位算法2和定位算法3的定位精度要低。此外，定位算 法1和定位算法2都含有非线性最小二乘问题，需要迭代求解，定位算法3则无 需迭代求解，计算成本更低。因此，当信号接收情况可以同时满足不同算法时， 不同算法之间的优先级应该是：定位算法3＞定位算法2＞定位算法1 =
5.6本章小结
本章在发射端和接收端同时利用可见光的方向性，提出了 MDLA和MDPA 下基于RSS的可见光室内定位算法以及MDLA-MDPA多模定位机制。首先,结 合第三章和第四章建立的定位系统模型，建立了 MDLA和MDPA下的定位系统
69
模型。之后，对仅使用单个MDLA和MDPA的情况，推导了 MDLA和MDPA 下基于RSS的可见光室内定位算法，该定位算法分为三阶段，分别为：全局坐 标系下基于RSSR的辐射角估计，接收器坐标系下基于RSSR的入射角估计，全 局坐标系下基于RSS的位置估计。接着，联合第三章所提的MDLA下基于RSS 的可见光室内定位算法、第四章所提的MDPA下基于RSS的可见光室内定位算 法以及本章所提的MDLA和MDPA下基于RSS的可见光室内定位算法，形成 MDLA-MDPA多模定位机制。最后，通过MATLAB对所提算法和MDLA-MDPA 多模定位机制进行了仿真实现，并对仿真结果进行了分析。
在MDLA和MDPA下基于RSS的可见光室内定位算法中，接收器MDPA 接收到1个MDLA即可进行3-D定位，且算法的计算过程无需迭代求解。该算 法对接收器的方向没有限制，也无需使用额外的传感器测量接收器的方向。仿真 显示，该算法可以实现厘米级的定位精度，例如，当LED的倾斜角和PD的倾 斜角都为15。时，95%的定位结果定位误差小于8cm=
在MDLA-MDPA多模定位机制中，针对不同的信号接收情况，可以适用不 同的定位算法。仿真结果显示，该机制可以比其所包含的任一单模定位算法覆盖 更多的接收器位置。
70
第六章总结与展望
6.1	论文工作总结
可见光室内定位技术是一类使用可见光信号进行定位的室内定位技术，是可 见光通信（VLC）技术非常有前景的应用方向。相比于传统的无线室内定位技术， 如射频（RF）定位技术，可见光室内定位技术具有精度高、安全性好、可以在对 电磁信号敏感的地方使用等优势，并且随着VLC的发射器LED作为新一代光源 在室内照明中日渐普及，可见光室内定位技术还具有拥有大量现成的基础设施而 无需额外部署的优势。
基于接收信号强度（RSS）的可见光室内定位算法由于其精度高、测量简单、 成本较低，是使用得最为广泛的一类可见光室内定位算法。但是在当前研究中， 基于RSS的可见光室内定位算法普遍面临着接收器较难接收到足够的发射器用 于定位使得定位系统覆盖有限，以及需要固定接收器的方向或使用额外的传感器 测量接收器的方向等问题。
本文从可见光信号的特性出发，对基于RSS的可见光室内定位算法及其所 面临的问题进行了研究，主要完成的工作、成果和创新如下：
1）提出了多角度LED阵列（MDLA）下基于RSS的可见光室内定位算法
在传统的可见光室内定位算法中，通常使用单LED作为发射器，LED需要 被置于不同的位置以作区分，不利于PD接收足够多的LED进行定位。对此， 本文在发射端利用可见光的方向性，使用由多个不同方向的LED构成的阵列 MDLA作为发射器，在发射器中以不同方向区分不同LED,使PD接收到单个 发射器时就能接收一组不同的RSS。针对发射器为MDLA、接收器为MDPA的 定位系统模型，提出了 MDLA下基于RSS的可见光室内定位算法，在该算法中 利用接收信号强度比（RSSR）而非RSS的绝对值进行定位，通过比值关系减小 PD的方向对定位结果影响。最终，使PD只需接收1个MDLA就能进行2-D定 位，接收到2个MDLA就能进行3-D定位，且无需限制或用额外的传感器测量 PD的方向。仿真结果显示，所提算法可以实现较高的定位精度，当MDLA中 LED的倾斜角为15。时，95%的2-D定位结果的误差小于12cm, 95%的3-D定 位结果的误差小于19cm,并且相比于传统的单LED发射器下使用三边定位法的 基于RSS的可见光室内定位算法，所提算法可以覆盖更多的接收器位置和方向。
2）提出了多角度PD阵列（MDPA）下基于RSS的可见光室内定位算法： 除了在发射端可以利用可见光的方向性以外，也可以在接收端可以利用可见 光的方向性。本文使用由多个不同方向的PD构成的阵列MDPA作为发射器，使
71
得单个接收器在接收到单个LED时可以接收到一组不同的信号。针对发射器为 单LED、接收器为MDPA的定位系统模型，提出了 MDPA下基于RSS的可见光 室内定位算法。同时为了解决PD和MDPA方向任意且随机的问题，在全局坐标 系的基础上引入接收器坐标系以在算法中可以利用PD相对于MDPA的相对方 向，并将定位算法分为两个阶段：接收器坐标系下的入射角估计和全局坐标系下 的位置估计。最终，使MDPA接收到3个LED就能进行3-D定位，且无需限制 或使用额外的传感器测量MDPA （或PD）的方向。仿真结果显示，所提算法可 以实现厘米级的定位精度，当PD的倾斜角为15。时，95%的定位结果的误差小 于 5cm o
3）提出了 MDLA和MDPA下基于RSS的可见光室内定位算法及多模定位 机制：
在1）和2）的基础上，本文进一步地在发射端和接收端同时利用可见光方 向性，在定位系统中同时使用MDLA和MDPA。针对发射器为MDLA （且只使 用单个发射器）、接收器为MDPA的定位系统模型，提出了 MDLA和MDPA下 基于RSS的可见光室内定位算法，将定位过程分为三个阶段：全局坐标系下的 辐射角估计，接收器坐标系下的入射角估计和全局坐标系下的位置估计。通过将 定位过程拆解为以上三阶段，一方面，使得MDPA接收到单个MDLA时就能进 行3-D定位，且无需限制或使用额外的传感器测量MDPA （或PD）的方向；另 一方面，使得定位过程无需迭代求解。仿真结果显示，当LED的倾斜角和PD的 倾斜角都为15。时，95%的定位结果定位误差小于8cm。除此以外，针对发射器 为MDLA （使用多个发射器）、接收器为MDPA的定位系统模型，将上述所提三 个单模定位算法进行联合，形成MDLA-MDPA多模定位机制，不同的信号接收 情况可以转化为不同的定位系统模型，从而使用不同的定位算法。仿真结果显示， 仿真结果显示，该机制可以比其所包含的任一单模定位算法覆盖更多的接收器位 置。
综上，本文在对基于RSS的可见光室内定位算法的研究中，在对发射器和 接收器的设计中引入了可见光的方向性，设计了改进的发射器MDLA和改进的 接收器MDPA。分别针对发射器为单LED或MDLA、接收器为单PD或MDPA 的不同组合下的定位系统模型，提出了相应的3种基于RSS的可见光室内定位 算法，并将这3种算法进行联合，形成MDLA-MDPA多模定位机制。所提算法 和多模定位机制，在实现了高精度定位的同时，解决了基于RSS的可见光室内 定位中需要固定或已知接收器的方向的问题，也一定程度上提升了对接收器位置 和方向的覆盖。
72
6.2下一步研究方向
本文对基于RSS的可见光室内定位算法进行了研究，针对不同的系统模型， 分别提出了 MDLA下基于RSS的可见光室内定位算法、MDPA下的可见光室内 定位算法、MDLA和MDPA下基于RSS的可见光室内定位算法以及MDLA-MDPA多模定位机制。在研究过程中，为了分析方便，本文做了一些前提假设; 除此以外，这些研究中也还有一些研究内容有待进一步的探索。本节对这些前提 假设和待探索的研究内容进行归纳和总结，作为下一步的研究方向，分别如下：
1）信道模型改进
本文假设LED服从朗伯辐射模型，但是实际的LED不是完全理想的朗伯光 源。本文也只考虑了视距（LOS）链路，但是VLC不仅存在LOS链路，也存在 着非视距（NLOS）链路。除此以外，本文还假设了噪声为加性高斯白噪声 （AWGN）,但是实际的信道不是理想的AWGN信道。因此,在接下来的研究中， 可以在信道建模时同时考虑NLOS链路，并且可以对实际的LED和实际的信道 进行建模，以使算法所基于的信道模型更加符合真实场景。
2）定位算法实测
本文对于所提算法主要进行了理论推导和仿真实现，但是没有进行实测。在 实际环境中，受发射器模型、接收器模型和信道模型不理想以及噪声等影响，定 位系统的实际性能表现将不如仿真中的结果。在接下来的研究中，可以对本文所 提定位算法进行实测，并根据实测结果进一步改进算法模型。
3）对MDLA和MDPA的设计进行优化
本文对发射器和接收器分别进行改进，设计了发射器MDLA和接收器 MDPA,但是在设计中只是简单设计成为均匀分布的球形结构，在接下来的研究 中，可以对其他形式的结构进行讨论。
4）对移动场景进行考虑
本文只对静态的定位场景进行了考虑，在实际的应用中，通常是动态的定位 场景，一方面待定位目标即接收器是移动的，待定位目标的运动速度将考验定位 系统的处理延时，需要高效率的定位算法来支持，本文所提的定位算法和多模定 位机制能否满足要求有待验证；另一方面环境和信道是动态，这将对基于RSS的 可见光室内定位算法中的信道建模产生较大的挑战。
73
北京邮电大学工学硕士学位论文
参考文献
[1]	Misra P3 Enge P. Global Positioning System: Signals, Measurements, and Performance [M]. 2nd ed. Lincoln: Ganga-Jamuna Press, 2006.
[2]	Hassan N U, Naeem A, Pasha M A, et al. Indoor Positioning Using Visible LED Lights: A Survey [J]. ACM Comput Surv, 2015, 48(2): 1-32.
[3]	Want R, Hopper A, Falcao V, et al. The active badge location system [J]. ACM Trans Inf Syst9 1992, 10(1): 9M02.
[4]	Harter A, Hopper A, Steggles P, et al. The anatomy of a context-aware application [A], // Proceedings of the 5th annual ACM/IEEE international conference on Mobile computing and networking [C], Seattle: ACM, 1999: 59-68.
[5]	Priyantha N B, Chakraborty A, Balakrishnan H. The Cricket location-support system [A]. H Proceedings of the 6th annual international conference on Mobile computing and networking [C]r Boston: ACM, 2000: 32-43.
[6]	Bahl P, Padmanabhan V N. RADAR: an in-building RF-based user location and tracking system [A]. // Proceedings of IEEE INFOCOM 2000 [C], Tel Aviv: IEEE, 2000: 775-784.
[7]	Youssef M5 Agrawala A. The Horus WLAN location determination system [A]. // Proceedings of the 3rd international conference on Mobile systems, applications, and services [C]? Seattle: ACM, 2005: 205-218.
[8]	Kotanen A, Hannikainen M, Leppakoski H, et al. Experiments on Local Positioning with Bluetooth [A], //Proceedings of the International Conference on Information Technology: Computers and Communications (ITCC) [C], Las Vegas: IEEE Computer Society, 2003:297-303.
[9]	Blumenthal J5 Grossmann R, Golatowski F, et al. Weighted Centroid Localization in Zigbee-based Sensor Networks [A]. // Proceedings of the IEEE International Symposium on Intelligent Signal Processing [C]5 Alcala de Henares: IEEE, 2007: 1-6.
[10]	Ni L M, Liu Lau Y C, et al. LANDMARC: indoor location sensing using active RFID [J]. Wireless Networks, 2004, 10(6): 701-710.
[11]	Hightower J, Borriello G, Want R. SpotON: an indoor 3D location sensing technology based on RF signal strength [R]. Seattle: University of Washington, 2000.
[12]	Gezici S? Poor H V Position Estimation via Ultra-Wide-Band Signals [J].
74
Proceedings of the IEEE, 2009, 97(2): 386-403.
[13]	Armstrong J, Sekercioglu Y A, Neild A. Visible light positioning: a roadmap for international standardization [J]. IEEE Communications Magazine, 2013, 51(12): 68-73.
[14]	Yasir M, Ho S 巩 Vellambi B N. Indoor Position Tracking Using Multiple Optical Receivers [J]. Journal of Lightwave Technology, 2016, 34(4): 1166-1176.
[15]	Pathak P H, Feng X, Hu P, et al. Visible Light Communication, Networking, and Sensing: A Survey, Potential and Challenges [J]. IEEE Communications Surveys & Tutorials, 2015, 17(4): 2047-2077.
[16]	Murai R, Sakai T, Kawano H, et al. A novel visible light communication system for enhanced control of autonomous delivery robots in a hospital [A]. // Proceedings of the 2012 IEEE/SICE International Symposium on System Integration (SIT) [C]5 Fukuoka: IEEE Computer Society, 2012: 510-516.
[17]	Iturralde D? Azurdia-Meza C5 Krommenacker N, et al. A new location system for an underground mining environment using visible light communications [A]. // Proceedings of the 2014 9th International Symposium on Communication Sy stems, Networks & Digital Sign (CSNDSP) [C], Manchester: IEEE, 2014: 1165-1169.
[18]	Rust I C, Asada H H. A dual-use visible light approach to integrated communication and localization of underwater robots with application to nondestructive nuclear reactor inspection [A]. // Proceedings of the 2012 IEEE International Conference on Robotics and Automation (ICRA) [C], Saint Paul: Institute of Eleetrical and Electronics Engineers Inc, 2012: 2445-2450.
[19]	Campo-Jimenez G D, Perandones J M, Lopez-Hernandez F J, A VLC-based beacon location system for mobile applications [A]. // Proceedings of the 2013 International Conference on Localization and GNSS (ICL-GNSS) [C]s Turin: IEEE, 2013: 1-4.
[20]	Ayub S, Kariyawasam S, Honary M, et al. Visible light ID system for indoor localization [A]. // Proceedings of the 5th IET International Conference on Wireless, Mobile and Multimedia Networks (ICWMMN 2013) [C]9 Beijing: IET, 2013: 254-257.
[21]	Nakajima M, Haruyama S. Indoor navigation system for visually impaired people using visible light communication and compensated geomagnetic sensing [A]. // Proceedings of the 2012 1st IEEE International Conference on Communications in China (ICCC), Beijing: IEEE, 2012: 524-529.
75
[22]	Taylor M T, Hranilovic S. Angular diversity approach to indoor positioning using visible light [A]. // Proceedings of the 2013 IEEE Globecom Workshops (GC Wkshps) [C]9 Atlanta: IEEE, 2013: 1093-1098.
[23]	Sertthin C, Tsiyi E, Nakagawa M, et al. A Switching Estimated Receiver Position Scheme For Visible Light Based Indoor Positioning System [A]. // Proceedings of the 2009 4th International Symposium on ^reless Pervasive Computing (ISWPC) [C]? Melbourne: IEEE, 2009: 1-5.
[24]	Sertthin C, Ohtsuki T, Nakagawa M. 6-Axis Sensor Assisted Low Complexity High Accuracy-Visible Light Communication Based Indoor Positioning System [J]. IEICE Transactions on Communications, 2010, E93.B(11): 2879-2891.
[25]	Kail G, MaechlerP, Preyss N, et al. Robust asynchronous indoor localization using LED lighting [A]. // Proceedings of the 2014 IEEE International Conference on Acoustics, Speech and Signal Processing (ICASSP) [C], Florence: IEEE, 2014: 1866-1870.
[26]	Yang S H, Jeong E M, Han S K. Indoor positioning based on received optical power difference by angle of arrival [J]. Electronics Letters, 2014, 50(1): 49-51.
[27]	Vegni A M, Biagi M. An indoor localization algorithm in a small-cell LED-based lighting system [A]. // Proceedings of the 2012 International Conference on Indoor Positioning and Indoor Navigation (IPIN) [C]5 Sydney: IEEE, 2012: 1-7.
[28]	Yang S-H, Kim D-R, Kim H-S? et al. Visible light based high accuracy indoor localization using the extinction ratio distributions of light signals [J]. Microwave and Optical Technology Letters, 2013, 55(6): 1385-1389.
[29]	Van M T, Tuan N V Son T T, et al. Weighted k-nearest neighbour model for indoor VLC positioning [J]. DET Communications, 2017, 11(6): 864-871.
[30]	Jung Hann S5 Park S, et al. Optical wireless indoor positioning system using light emitting diode ceiling lights [J]. Microwave and Optical Technology Letters, 2012, 54(7): 1622-1626.
[31]	Wang T Q, Sekercioglu Y A, Neild A, et al. Position Accuracy of Time-of1 Arrival Based Ranging Using Visible Light With Application in Indoor Localization Systems [J]. Journal of Lightwave Technology, 2013, 31(20): 3302-3308.
[32]	Do T~H, Yoo M. TDOA-based indoor positioning using visible light [J], Photonic Netw Commun, 2014, 27(2): 80-88.
[33]	Kim X Shin Y Yoo M. VLC-TDOA Using Sinusoidal Pilot Signal [A], // Proceedings of the 2013 International Conference on IT Convergence and Security
76
(ICITCS) [A], Macao: IEEE, 2013: 1-3.
[34]	Jung S X Hann S, Park C S. TDOA-based optical wireless indoor localization using LED ceiling lamps [J]. IEEE Transactions on Consumer Electronics, 2011, 57(4): 1592-1597.
[35]	Panta K, Armstrong J. Indoor localisation using white LEDs [J]. Electronics Letters, 2012, 48(4): 228-230.
[36]	Nah J H Y Parthiban R, J award M H. Visible Light Communications localization using TDOA-based coherent heterodyne detection [A]. 〃 Proceedings of the 2013 IEEE 4th International Conference on Photonics (ICP) [C], Melaka: IEEE, 2013: 247-249.
[37]	Guan W, Wu Y Wen S9 et al. A novel three-dimensional indoor positioning algorithm design based on visible light communication [J]. Optics Communications, 2017. 392(282-293).
[38]	Lim J. Ubiquitous 3D positioning systems by led-based visible light communications [J]. IEEE Wireless Communications. 2015? 22(2): 80-85.
[39]	Jung S-Y Lee S R, Park C-S. Indoor location awareness based on received signal strength ratio and time division multiplexing using light-emitting diode light [J]. OPTICE, 2014, 53(1): 016106.
[40]	Zhang Chowdhury M I S5 Kavehrad M. Asynchronous indoor positioning system based on visible light communications [J]. OPTICE, 2014, 53(4): 045105.
[41]	Kim H S. Kim D 艮 Yang S H, et al. An Indoor Visible Light Communication Positioning System Using a RF Carrier Allocation Technique [J]. Journal of Lightwave Technology, 2013, 31(1): 134-144.
[42]	Kim H S? Kim D R Yang S H, et al. Indoor positioning system based on carrier allocation visible light communication [A]. // Proceedings of the Quantum Electronics Conference & Lasers and Electro-Optics (CLEO/IQEC/PACIFIC RIM) [Cl Sydney: IEEE? 2011: 787-789.
[43]	Eun M, Deok R, Se H, et al. Estimated position error compensation in localization using visible light communication [A]. // Proceedings of the 2013 Fifth International Conference on Ubiquitous and Future Networks (ICUFN) [C], Da Nang: IEEE? 2013:470-471.
[44]	Li L, Hu H Peng C, et al. Epsilon: a visible light based positioning system [A]. // Proceedings of the 11th USENIX Conference on Networked Systems Design and Implementation (NSDI) [C], Seattle: USENIX Association, 2014: 331-343.
77
[45]	Sahin A, Eroglu Y S, Guvenc I, et al. Hybrid 3-D Localization for Visible Light Communication Systems [J]. Journal of Lightwave Technology, 2015, 33(22): 4589-4599.
[46]	Yin L, Wu X, Haas H. Indoor Visible Light Positioning with Angle Diversity Transmitter [A]. // Proceedings of the 2015 IEEE 82nd Vehicular Technology Conference (VTC Fall) [C], Boston: IEEE, 2015: 1-5.
[47]	Yang S H, Jung E M, Han S K. Indoor Location Estimation Based on LED Visible Light Communication Using Multiple Optical Receivers [J]. IEEE Communications Letters, 2013, 17(9): 1834-1837.
[48]	Xu 丫 Zhao J5 Shi J, et al. Reversed Three-Dimensional Visible Light Indoor Positioning Utilizing Annular Receivers with Multi-Photodiodes [J]. Sensors. 2016, 16(8): 1254.
[49]	Xu W, Wang J, Shen H, et al. Indoor Positioning for Multiphotodiode Device Using Visible*Light Communications [J]. IEEE Photonics Journal, 2016, 8(1): 111.
[50]	Steendam H, Wang T Q, Armstrong J. Cramer-Rao bound for indoor visible light positioning using an aperture-based angular-diversity receiver [A], // Proceedings of the 2016 IEEE International Conference on Communications (ICC) [C]5 Kuala Lumpur: IEEE, 2016: 1-6.
[51]	Yang S H, Kim H S, Son Y H, et al. Three-Dimensional Visible Light Indoor Localization Using AOA and RSS With Multiple Optical Receivers [J]. Journal of Lightwave Technology, 2014, 32(14): 2480-2485.
[52]	Ting H? Xumin G, Yanqing G, et al. Visible light indoor positioning fashioned with a single tilted optical receiver [A]. // Proceedings of the 2015 14th International Conference on Optical Communications and Networks (ICOCN) [C]? Nanjing: IEEE, 2015: 1-4.
[53]	Seongsu L, Sung-Yoon J. Location awareness using Angle-of^arrival based circular-PD-array fbr visible light communication [A]. // Proceedings of the 2012 18th Asia-Pacific Conference on Communications (APCC) [C], Jeju Island: IEEE, 2012: 480-485.
[54]	Masaki 丫 Shinichiro H, Masao N. High-accuracy positioning system using visible LED lights and image sensor [A]. // Proceedings of the 2008 IEEE Radio and Wireless Symposium [C], Orlando: IEEE, 2008: 439-442.
[55]	Kuo Y-S, Pannuto P, Hsiao K-J? et al. Luxapose: indoor positioning with mobile
78
phones and visible light [A]. // Proceedings of the 20th annual international conference on Mobile computing and networking (MobiCom) [C]. Maui: ACM, 2014: 447-458.
[56]	Rahman M S, Haque M M, Kim K-D. Indoor Positioning by LED Visible Light Communication and Image Sensors [J]. International Journal of Electrical and Computer Engineering, 2011,1(2): 420-431.
[57]	Do T H, Yoo M. An in-Depth Survey of Visible Light Communication Based Positioning Systems [J]. Sensors (Basel, Switzerland), 2016,16(5): 678.
[58]迟楠,LED可见光通信技术[M].北京：清华大学出版社,2013.
[59]	Do T H, Ybo M, Potentialities and challenges of VLC based outdoor positioning [A]. // Proceedings of the 2015 International Conference on Information Networking (ICOIN) [C], Cambodia: IEEE, 2015: 474-477.
[60]	Danakis C, Afgani M, Povey G, et al. Using a CMOS camera sensor for visible light communication [A]. // Proceedings of the 2012 IEEE Globecom Workshops (GC Wkshps) [C]9 Anaheim: IEEE, 2012: 1244-1248.
[61]	Komine T, Nakagawa M. Fundamental analysis for visible-light communication system using LED lights [J], IEEE Transactions on Consumer Electronics, 2004, 50(1): 100-107.
[62]	Kahn J M, Barry J R. Wireless infrared communications [J]. Proceedings of the IEEE, 1997, 85(2): 265-298.
[63]	Elgala H, Mesleh R, Haas H. Indoor broadcasting via white LEDs and OFDM [J]. IEEE Transactions on Consumer Electronics, 2009, 55(3): 1127-1134.
[64]	Zeng L, Brien D C O, Minh H L, et aL High data rate multiple input multiple output (MIMO) optical wireless commumcations using white led lighting [J]. IEEE Journal on Selected Areas in Communications, 2009, 27(9): 1654-1662.
[65]迟楠，乔梁,赵嘉琦，等.基于可见光通信的MIMO技术研究现状[J].南京 信息工程大学学报, 2017, 9(2): 113-22.
[66]	Sugiyama H, Haruyama S, Nakagawa M. Brightness Control Methods fbr Illumination and Visible-Light Communication Systems [A]. 〃 Proceedings of the Third International Conference on Wireless and Mobile Communications (ICWMC), Guadeloupe: IEEE, 2007: 78.
[67]	Liu H, Darabi H, Banerjee P, et al. Survey of Wireless Indoor Positioning Techniques and Systems [J]. IEEE Transactions on Systems,Man, and Cybernetics, Part C (Applications and Reviews), 2007? 37(6): 1067-1680.
79
[68]	Hartley R，Zisserman A. Multiple View Geometry in Computer Vision [M]. 2nd ed.: Cambridge University Press, 2003.
[69]朱雷鸣，吴晓平，李建伟，等.直角坐标系的欧拉旋转变换及动力学方程叫. 海洋测绘,2010, 30(3): 20-22.
80
缩略语
缩略语
英文缩写	英文全拼	中文
2-D	2-Dimensional	2维
3-D	3-Dimensional	3维
AAAR	Average Angle Accept Ratio	平均角度接受率
AAR	Angle Acceptance Ratio	角度可接受率
ACO-OFDM	Asymmetrically Clipped Optical Orthogonal	非对称修剪光正交频分复
Frequency Division Multiplexing	用调制
AOA	Angle of Arrival	到达角度
APD	Avalanche Photodiode	雪崩型光电二极管
AWGN	Additive White Gaussian Noise	加性高斯白噪声
CCD	Charge Couple Device	电荷耦合器件
CDF	Cumulative Distribution Function	累积分布函数
CMOS	Complementary Metal Oxide Semiconductor	互补金属氧化物半导体
CR	Coverage Ratio	位置覆盖率
DCO-OFDM	DC-biased Optical Orthogonal Frequency	直流偏置光正交频分复用
Division Multiplexing	调制
DD	Direct Detection	直接检测
DPPM	Differential Pulse Position Modulation	差分脉冲位置调制
FDM	Frequency Division Multiplexing	频分复用
FET	Field-Effect Transistor	场效应管
FOV	Field of View	视场角
GPS	Global Positioning System	全球定位系统
IM	Intensity Modulation	强度调制
k-NN	k-N earest Neighbors	k近邻
LBS	Location Based Service	基于位置的服务
LED	Light Emitting Diode	发光二极管
LLC	LED Location Correction	LED位置校正
LOS	Line of Sight	视距
L-PPM	L-Pulse Position Modulation	单脉冲位置调制
MDLA	Multiple Directional LED array	多角度LED阵列
MDPA	Multiple Directional PD Array	多角度PD阵列
MIMO	Multiple-Input Multiple-Output	多输入多输出
81

英文缩写	英文全拼	中文
MPPM	Multiple Pulse Position Modulation	多脉冲位置调制
NLOS	Non Line of Sight	非视距
OFDM	Orthogonal Frequency Division Multiplexing	正交频分复用调制
O-OFDM	Optical-Orthogonal Frequency Division	光正交频分复用调制
Multiplexing
OOK	On-Off Keying	开关键控
PD	Photodiode	光电二极管
PIN-PD	Positive-Intrinsic-Negative Photodiode	PIN型光电二极管
PPM	Pulse Position Modulation	脉冲位置调制
PWM	Pulse Width Modulation	脉冲宽度调制
RF	Radio Frequency	射频
RFID	Radio Frequency Identification	射频识别
RMSE	Root-Mean-Square Error	均方根误差
RS	Rolling Shutter	卷帘快门
RSS	Received Signal Strength	基于接收信号强度
RSSR	Received Signal Strength Ratio	接收信号强度比
SC-PPM	Subcarrier Pulse Position Modulation	副载波脉冲位置调制
SNR	Signal-to-Noise Ratio	信噪比
TDM	Time Division Multiplexing	时分复用
TDOA	Time Difference of Arrival	到达时间差
TOA	Time of Arrival	到达时间
UWB	Ultra-Wide Band	超宽带
VLC	Visible Light Communication	可见光通信
VPPM	triable Pulse Position Modulation	可变脉冲位置调制
WLAN	Wireless Local Area Networks	无线局域网
82

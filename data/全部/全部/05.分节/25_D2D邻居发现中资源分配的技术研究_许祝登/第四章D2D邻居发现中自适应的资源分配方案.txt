第四章D2D邻居发现中自适应的资源分配方案
如图3-6所示，系统会分配一部分的时频资源用于邻居发现，在LTE FDD 系统中分配的是上行频段的一部分资源，在LTE TDD系统中分配的是一些帧。 如果每个发现周期中分配的这部分资源是固定的，这样的设定不能适应于不同的 场景，如在用户稀疏的郊区和用户密集的市中心。自适应的资源分配技术能够提 高邻居发现服务的适应性，从而提供更可靠的邻居发现服务』文献［23］中提出了 一种自适应的资源分配方案，然而方案中的一些假设与现有3GPP中给出的假定 并不一致o3GPP技术文档中提出参与D2D邻居发现的设备在邻居发现阶段是工 作在半双工的模式，尽量分配连续的子帧用于D2D邻居发现。本节将基于3GPP 技术文档中提出的一些共识，给出实际可行的自适应资源分配的方案。
当参与邻居发现的用户数相对于分配用于邻居发现的资源较多时，也就是资 源分配出现拥挤的情况时，用户选取资源的冲突概率和用户选取的资源在同一个 子帧的概率都比较高，这将使得邻居发现的性能下降。本章中将引入发送概率的 概念，并通过发送概率的自适应调整方案来减轻资源分配拥挤对发现性能的影响。 对于某些邻居发现服务，用户对发现时延是比较敏感的，如果发现时延比较大可 能会导致服务的失效。本章将研究系统参数配置如分配的子帧数、发现周期等对 于发现时延的影响，并将提出两种自适应的资源分配方案来保障服务的时延质量。 4.1发送概率的自适应调整
随机的资源选取方案中，D2D设备在每一个发现周期都会从资源池中选取 资源用于发送发现信号，并且方案中发现资源池的大小是固定的。发现概率和发 现的用户数是衡量D2D邻居发现资源分配方案性能的重要指标，发现概率是指 在一个或多个发现周期发现某个设备的设备数量占蜂窝小区中总的参与邻居发 现的用户数。在参与邻居发现的用户数相对资源池大小比较小的情况下，随着参 与邻居发现的用户数的增加，即用户密度增加的时候，用户平均发现的邻居用户 数将增加。当用户密度增加到一定程度时，用户平均发现的邻居用户数将减少， 平均的发现概率也将减小。这是因为密度比较小的时候，资源选取的冲突比较小， 发现信号间的干扰比较小，平均发现的邻居用户数随用户密度的增加而增加。而 当用户密度比较大的时候，资源选取的冲突比较大，发现信号间的干扰比较大， 并且用户选取的资源在同一个子帧的概率比较大，如果用户密度继续增大将对邻 居发现的性能造成严重的影响。图4-1和图4-2分别给出了分配子帧数为5和7
30
时，平均发现的D2D用户数和发现概率随D2D用户数变化的仿真图，仿真参数 同表3-1。
参与D2D邻居发现的用户数
图4-2发现的用户数和发现的概率随用户数的变化（7个子帧）
从两个图可以看出，当分配的资源池大小是固定的，用户发现的概率将随用 户数的增加而减小，这是冲突概率增大的缘故，而发现的用户数将随用户数的增 加先增后减。发现用户数变化的拐点与分配的资源池有关，资源池的大小越大,
31
拐点处的用户数越大。当子帧数为5时，对应DRB的数量为220。图4-1可以 看出当用户数小于200左右时，资源的冲突比较小，发现的用户数是随D2D用 户数的增加而增加；而大于200左右时，资源的冲突比较大，发现的用户数将随 D2D用户数的增加而持续的恶化。应该尽可能地避免拐点后的情况发生，增加 的用户数反而使得发现的用户数减小。
发现信号的发送概率是指D2D设备在每个发现周期以一定的概率决定在该 发现周期是否发送发现信号，本节将研究如何设计合理的发送概率的自适应调整 方案来减少资源分配拥挤造成对邻居发现服务的影响。
我们对不同的子帧数量、不同用户数下发现信号的发送概率对D2D设备的 单个周期发现概率的影响进行了仿真，仿真参数同表3-1。
图4-3给出了几条典型的仿真曲线，其中(用户数、子帧数)分别设置为(200,5)、 (400,5)、(400,6)。下面对仿真结果进行详细的分析。
当用户数为200,子帧数为5时，发现概率随着发送概率的增大是一直增大 的，在发送概率为1时取得最大值。此时，DRB的数量为220,这时用户数量和 资源的数量是相当的，资源的分配并不拥挤，因此设备可以选择最大的发送概率 1以实现最大的发现概率。
当用户数为400,子帧数为5时，发现概率随着发送概率的增大是先增后减 的。用户数量要比资源的数量大得多，这使得资源的分配很拥挤，这时发送概率
的选取应该小于1来减少资源分配的冲突，然而过小的发送概率将使得设备发送 发现信号的机会少，从而被其他设备发现的概率变小。
对于用户数相对资源数目较多的情况，设备的发现概率将随发送概率的增大 先增大后减小，会有一个发送概率的最优取值。由于现在没有成熟的理论分析， 可以通过大量的测试来获得一个(用户数、资源池大小)对应最优发送概率的对 应关系，测试的时候用户数和资源池的大小取一些离散值，通过测试可以获得在 一些离散点的最优的概率选取。在实际的系统中，可以用一个表格来存储在对应 不同的用户数、资源池大小时发送概率最优的取值，系统根据用户数和资源池的 值在表格中查询最优的发现概率的取值从而统一地调整所有用户的发送概率。

3.3分布式的资源分配方案
分布式的资源分配方案需要按应用场景加以区分。
在无蜂窝覆盖的场景中，会有一个专用的公共资源池预留给D2D设备来进 行邻居发现，D2D设备自己从资源池中选择资源用于发送发现信号。
在蜂窝覆盖的场景中，基站会以半静态的方式为所有的用户分配一个公用的 资源池用于邻居发现，半静态的方式可以节省信令的开销，基站会通过系统信息 广播向D2D用户告知分配用于邻居发现的资源的配置，网络并不会去指定每个 进行邻居发现的设备使用哪个资源块进行发现信号的发送，而是由每个设备自己 从资源池中进行选择。
当前D2D通信的研究主要都集中于LTE网络中D2D通信，下文中的分布 式的资源分配方案也是针对LTE蜂窝网络中的。
LTE网络会分配周期性的资源用于D2D邻居发现，把分配用于邻居发现过 程的子帧称为发现子帧，发现子帧的分配可以是连续的也可以是不连续的。连续 的分配可以减少唤醒设备的时间从而延长设备电池的寿命。下图是发现子帧连续 分配的资源结构图，
发现周期%
<	>
多个发现子帧 多个LTE WAN子帧
<	>
发现区间N个子帧
图3-5.连续分配的发现子帧
然而在某些情况下可能需要发现子帧的非连续分配，例如在承载低时延要求 服务（如语音服务）的数据传输时，需要在连续的发现子帧中间隔插入一些LTE WAN （无线接入网）的子帧。考虑到发现子帧的非连续分配会导致高的能耗， 间隔插入连续发现子帧的WAN子帧应该比较少。在发现过程中，移动设备选择 一个邻居发现资源块（Discovery Resource Block, DRB）5fe发送发现信号，发现信 号中携带移动设备的标识和一些其他必要的信息；同时，移动设备会监听其他设 备在DRBs中发送的发现信号。在邻居发现阶段，移动设备是工作在半双工的模 式，半双工的模式是指正在发送发现信号的移动设备无法同时去检测其他设备发 送的发现信号。图3-6给出了发现子帧连续分配方式下的子帧结构图，对于TDD 的双工系统，系统会周期性地分配一些子帧用于邻居发现，对于FDD的双工系
20
统，系统会周期性地分配上行频段的一些子帧用于邻居发现。下面考虑10MHz 的FDD系统，每个时隙有25个RBs,其中的4个RBs用于物理上行控制信道
(Physical Upper Control Channel, PUCCH)发送 UTE 的控制信令，其余的 21 个 RBs用于物理层上行共享信道(Physical Upper Shared Channel, PUSCH)发送发 现信号。
发现区间
使用序号为m以外的其他的DRB发送发现信号
图3-7.用于邻居发现性能分析的空间模型
考虑单个蜂窝小区的情况，小区中有M个用户开启了邻居发现的服务，所 有参与邻居发现的用户用集合U = {1,2,表示。
图3-7给出了 D2D邻居发现的空间模型。当两个D2D用户使用了相同的 DRB时，它们的发现信号会相互的干扰。如图3.7所示，UE2和UE3在一个发 现周期选择了相同的资源用于发送发现信号，UE1在检测UE2的发现信号的时 候会受到UE3的发现信号的干扰。如果UE2到UE1的距离要比UE3到UE1的 距离远，这个干扰会比较严重，从而导致UE1在这个发现周期无法发现UE2。
用户，•接收到用户丿•的发现信号的SINR为
&=	巴团4
y £ 2,R(*)=A(j) 4 禺 I "kJ + S
其中g是用户z•的发现信号的发送功率，为了简化，这里假定所有用户的发 现信号的功率都为々呃“，％表示用户Z•和顶之间的欧式距离，与表示用户Z•到用 户项的信道衰落，为噪声功率，正⑺表示用户z•所选择DRB。
当接收的信干噪比大于门限值季时(专是保证发现信号能被成功检测时对接 收信噪比要求的门限值)，认为用户Z•可以成功发现用户
集合S (/)=(/1 rtj > &,jeU,j丰i}表示一"发现周期内成功发现用户i的其他 用户，叫表示集合S«)的大小。
单个周期的发现概率定义为一个用户经过一个发现周期被小区中的其他用 户发现的概率，表示如下
22
PdN) = m」M,	(3-2)
因此，单个周期的平均发现概率为
Pd，，=&£P"(i)，	(3-3)
单个周期的发现概率可以作为D2D邻居发现阶段的资源分配方案的性能指 标，发现概率越大时，D2D设备会被蜂窝小区中的更大比例的其他D2D设备发 现，反之。

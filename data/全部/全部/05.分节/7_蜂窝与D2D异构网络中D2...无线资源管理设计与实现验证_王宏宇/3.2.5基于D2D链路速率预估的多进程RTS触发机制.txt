3.2.5基于D2D链路速率预估的多进程RTS触发机制
普通CSMA/CA采用紧凑型RTS-CTS过程，如下图3-11示。
图3・11 802.11协议中RTS-CTS过程
此时,RTS申请不存在与CTS应答之间还有多个RTS信道的情况。在SSCA 中，RTS-CTS过程往返时延大，若将数据传输也计算入内，则从RTS开始到 D2D数据发送完毕将花费3个无线帧的时间。以图3-9的TDD Config 1下的通 信流程为例，TxDUE在第n帧申请RTS竞争接入第n+2帧后，在第n+2帧数 据传送完成前，第n+1、n+2帧又各有一次RTS竞争接入信道的机会。若TxDUE 在将申请到的数据信道使用完毕后再查询待发送缓冲区内是否还有数据待发， 最快也需等到第n+3帧的RTS信道中进行申请，并使用第n+5帧进行第二次数 据传输。两次数据传输之间间隔2个无线帧，这在无碰撞的单向D2D通信中， D2D的通信速率将会直接降低到最大传输能力的1/3-
考虑到上述情况，提出基于D2D链路速率预估的多进程RTS触发机制。 其思想与多进程HARQ相似，分配多个RTS进程，每个RTS进程独立管理一 次数据传输过程，并利用历史D2D发送链路平均链路速率预测已经申请的上行 传输资源能否足够承载待发送缓冲区内的所有数据，在不足时可以及时进行 RTS接入申请新传输资源。
TxDUE到RxDUE的平均链路速率S^〉为近N次成功传输中D2D上行共 享物理信道（D2D-PSCH）能够承载的平均通信速率，单位为bit/scheduled。
26
SD2D=i^BSizejN , NnminWsMax)
其中，翊为第i次成功传输时使用的传输块大小，Mans为已记录的传 输次数，蝠为记录队列的深度。
Sd2d与TxDUE到RxDUE的链路质量、蜂窝网络负载情况、DUE周围环 境相关。由于D2D通信用户常处于低速或静止状态，信道环境、蜂窝网络负载 在短时间段内维持稳定，所以结合历史岛2d和待发送缓冲区状态对发送所需要 的子帧数进行估计。
-	RTS触发流程如下：
1）	检查SD2D是否已初始化，若TxDUE到RxDUE的=0 ,表明此链 路平均速率暂未初始化，采用普通RTS触发流程，即一次申请直到确认发生碰 撞或数据子帧发送完成才允许下一次申请。当无CTS等待且在非退避期时，使 用RTS进行信道竞争接入，在已申请列表中记录本次申请上行子帧数。
2）	若品2。已初始化，在满足非退避期时，读取目的地址为RxDUE的待发 送缓冲区状态，为妇，对应目的地址己申请上行子帧数NUL_req ,此时待发送 缓冲区的发送通过预估得到需要的上行子帧数凡妇^
NuL -need =LtB/SD2D
当凡小，心〉M如冲时触发RTS发送，并记录申请上行子帧数，否则屏屛 次触发。
3）闭环控制：对于叫心_叫，当发生RTS碰撞（CTS接收超时）或数据发 送完成后，在已申请列表中删除对应申请的上行子帧数。对于则通过式3-6 进行更新。

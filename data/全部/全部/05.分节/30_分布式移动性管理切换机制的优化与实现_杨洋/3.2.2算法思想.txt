3.2.2算法思想
在3.1节中，我们提岀了一个基于虚拟化的VDMM方案。VDMM方案可以实现 用户在不同AP之间的无缝切换，并且无需像IETFDMM方案需要建立隧道，减少 了隧道开销，降低了切换延迟和丢包率。因此，VDMM方案对实现网络AP之间的 负载均衡也有一定的优势。将负载均衡算法部署在控制器上，当控制器通过一定 条件判断发生了负载均衡后，执行负载均衡算法，通过VDMM方案将虚拟AP从高 负载AP迁移到低负载AP上，实现AP间的负载均衡，使网络吞吐量最大化。
负载均衡是WLAN中非常重要的一项技术。在传统方案中，无线用户扫描所 有可能的AP,然后独立的选择信号强度最大的AP来接入，而不需要考虑AP的 负载状态。这常常会引起AP上的负载不均衡，导致丢包率高，网络吞吐量低等 问题，这会严重降低用户体验圆血。传统的负载均衡算法是基于RSSI的，但其 中存在一些缺陷，它们的共同点是都没有考虑到AP的负载状况。基于RSSI的负 载均衡保证用户总是连接到信号最强的AP上熨闵。然而，这并不能保证最好的 用户体验因为信号最强的AP可能负载最重。因此，当设计负载均衡算法时需要 同时考虑RSSI和AP负载。
算法的具体思想如图3-16和3-17所示,网络中有两个AP分别是API和AP2, 三个用户分别是MN1，MN2, MN3o由于API的RSSI值比AP2的RSSI值大，因此 这三个用户初始接入时都接入了 API, AP2上没有接入用户，所以API的负载会 迅速增长，而AP2的负载则为0。控制器通过两个AP的负载判断API和AP2发 生了负载不均衡，然后执行自适应的负载均衡算法，算法将负载最小的MN3从 API切换到AP2,控制器判断此时AP负载均衡，算法执行完毕。
图3-16 VDMM方案实现负载均衡
图3-17 VDMM方案实现负载均衡
从上面的描述可知，如何判断网络中发生了 AP负载不均衡以及如何找到负 载较低且信号强度合适的AP并将用户从高负载的AP迁移到此AP上是算法需要 解决的主要问题。基于以上的问题，我将基于VDMM方案提出一个适应性的负载 均衡的算法来解决AP的负载不均衡问题，算法使用AP的负载状况和RSSI值作 为负载度量。在控制器上部署自适应负载均衡算法，控制器保证了网络的集中视 角，能够定期的检查每个AP的负载状况。一旦检测到负载不均衡的情况发生， 控制器就会主动的重新分配无线用户到负载较低、RSSI值相应较好的AP上，直 到网络中AP负载均衡。算法的具体内容以及执行过程将在下一部分进行介绍。

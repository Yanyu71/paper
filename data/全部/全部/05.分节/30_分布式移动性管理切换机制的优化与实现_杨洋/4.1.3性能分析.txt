4.1.3性能分析
(1)利用Docker平台验证VDMM方案
本节首先验证VDMM方案的可行性。验证步骤如下:
a.在Docker平台模拟网络元件，MN, CN接入网络，分别为它们创建VAP2, VAPL 如图4-7所示在Docker平台初始化网络元件VAPL VAP2和Controller。图4-8
生成网络元件的Docker镜像并部署到容器中运行。
图4-7网络元件初始化
图4-8生成Docker镜像
b.如图4-9测试MN和CN的互通性:
图4-9 MN和CN之间的互通性
c.测试VLC视频流，CN端作为VLC服务端，MN作为客户端来播放VLC视 频流，检查视频流是否能在MN端播放，MN切换到新的AP之后，观察MN端 播放的视频是否流畅。如图4-10所示，MN切换到新的AP之后，在新AP上为 MN克隆一个虚拟AP,对MN来说两个虚拟AP没有区别。测试结果为，MN 移动到AP3时，视频流业务不中断，仍保持连续。
曇涉樓 lootli(g)lootlM>43-￡S3G: -
lootii@Loctii-P43-ES3G:sudo docker	P5
CONTAINER ID	　IMAGE	　COMMAND	CREATED
STATUS	　　　PORTS	NAMES
a080a316ellc	　43e?b?ccbfe4	　"docker-entrypoint.s-w	2S	> second:	5 sg。
Up 27 seconds		ap3
i>489a7323d97	　43e6b9ccbfe4	　"docker-entrypoint.s^	4	ninutes	ago
Up 4 ninutes		ap2
F558dc925395	　43eGb0ccbfe4	　"docker-entrypolnt.s_"	4	ninutes	ago
Up 4 minutes		apl
285901fea887	　ff8ecSd52246	　"/usr/local/bin/eted"	8	ninutes	ago
Up 8 ninutes	　　　6.8,e.B:2379'>2379/tCp, 2389/tcp controller
loDtii^locttx-P4 3-	ES3G：~$ |
图4-10 MN和CN之间的互通性
（2） VDMM方案和IETF DMM方案性能对比
上面我们已经分析了 IETF DMM方案和我们提出的VDMM方案的切换过程和信 令交互流程,并通过数学建模分给出了切换延迟，丢包率和信令开销的计算公式。 并已经通过Docker平台进行了仿真验证。下面根据公式对切换延迟，丢包率和 信令开销进行定量的分析。给出参数的参考数值，经过计算得出结果并画出对比 分析图，通过对比分析图能够直观的对两个方案的性能进行对比。
方案默认的参数值参考自文章關，默认参数的参考数值为：TL2 （二层切换 延迟）=200ms,以〃，（身份认证延迟）=100ms, Lc （控制包大小）=80bytes, Ld （数据包大小）=400bytes, BW （有线链路带宽）-100Mbps, BWw （无线链路 带宽）=10Mbps, I （有线链路传输延迟）=0. 5ms, lw （无线链路传输延迟）=2ms, 暧D=20ms, 建#=10ms, pf （无线链路失败率）=0.5, B=500KB, r （子网半 径）=1000m°
a.切换延迟
为了对IETF方案和VDMM方案进行比较，在相同的参数条件下（相关参数已 近在上面给出），分别计算两个方案的切换延迟进，并画出了如图所示的对比分 析图。
° 2。1UUU ZUUU 5UUU 4UUU bUUU bUOO
Radus of Cells（m）
图4-11子网半径-切换延迟
如图4-11所示是在其他条件相同，子网半径r从1000m增长至6000m, IETF 方案和VDMM方案的切换延迟的对比图，子网半径每次增长500米。横坐标表示 子网半径，单位是米，纵坐标表示切换延迟，单位是秒。图中粉色曲线表示IETF 方案中的切换延迟，绿色曲线表示VDMM方案的切换延迟。
从图中可以看出，当子网半径从1000m增至4000m的过程中，随着子网半径的増加，IETF方案和VDMM方案的切换延迟都有轻微的减少，这是因为子网半径 增加，则网元之间的平均跳数减小，因此信令传输时间降低，所以切换延迟也会 减小；但当子网半径大于4000m后，IETF方案和VDMM方案的切换延迟变化不大, 这是因为当子网半径达到一定的大小后，即使继续增长，网元之间的平均跳数变 化也不大，因此切换时延变化不大。但从两个方案的整体性能来看，IETF DMM 方案的切换延迟主要分布在500ms左右，而我们的方案的切换延迟主要分布在 440ms左右，整体的切换延迟下降了约12%。
图4-12无线链路失败率-切换延迟
如图4-12所示是在其他条件相同，无线链路失败率p,从0增长至0. 8, IETF 方案和VDMM方案的切换延迟的对比图，其中无线链路失败率每次增长0.1。横 坐标表示无线链路失败率P,,纵坐标表示切换延迟，单位是秒。图中粉色曲线 表示IETF方案中的切换延迟，绿色曲线表示VDMM方案的切换延迟。
从图中可以看出，随着无线链路失败率的增加，IETF方案和VDMM方案的切 换延迟都有所增长。这是因为一旦无线链路发生故障，则用户和AP或锚点之间 的信令交换会受到影响（如RS和RA信令），因此切换延迟会有所增长。但从两 个方案的整体性能来看，IETF方案的切换延迟主要分布在500ms左右，而我们 的方案的切换延迟主要分布在440ms左右，整体来看切换延迟下降了约12%o
综上所述，在切换延迟的方面，本文方案的切换延迟整体要小于IETF DMM 方案，而且从图中可以看出，我们方案的切换延迟波动幅度更小，说明方案的稳 定性更好。因此从切换延迟来看，本文的方案要由于IETF DMM方案。
b.丢包率
为了对IETF方案和VDMM方案进行比较，在相同的参数条件下（相关参数巳经在上面给出），对两个方案的丢包率进行了比较，并画出了如图所示的分析图。
图4-13子网半径-丟包率
如图4-13所示是在其他条件相同，子网半径r从1000m增长至6000m, IETF 方案和VDMM方案的丢包率的对比图，子网半径每次增加500米。图中横坐标表 示子网半径，单位是米，纵坐标表示丢包率，单位是X10Kb/s。图中粉色曲线表 示IETF方案中的丢包率，绿色曲线表示VDMM方案的丢包率。
从图中可以看出，当子网半径从1000m增至4000m的过程中，随着子网半径 的增加，IETF方案和VDMM方案的丢包率都有所降低，这是因为子网半径增加， 则网元之间的平均跳数减小，切换延迟也会减小，因此丢包率也会下降；但当子 网半径大于4000m后，IETF方案和VDMM方案的切换延迟变化不大，这是因为当 子网半径达到一定的大小后，即使继续增长，网元之间的平均跳数变化也不大， 因此切换时延变化不大，因此丢包率变化不大。但从两个方案的整体性能来看， IETF DMM方案的丢包率主要分布在80Kb/s,而本文的方案的丢包率主要分布 65Kb/s左右，较IETF DMM方案整体下降了 20%左右。
CT! CT2 U3 (T5	03 U7B CE7 UT
Probability of Wireless Link Fail
图4-14无线链路失败率-丢包率
如图4-14所示是在其他条件相同，无线链路失败率Pf从0增长至0. 8, IETF 方案和VDMM方案的丢包率的对比图，无线链路失败率每次增长0. 1。图中横坐 标表示无线链路失败率，纵坐标表示丢包率，单位是X10Kb/so图中粉色曲线表 示IETF方案中的丢包率，绿色曲线表示VDMM方案的丢包率。
从图中可以看出，无线链路失败率从0增长至0.5的过程中，随着无线链路 失败率的增加，IETF方案和VDMM方案的丢包率没有明显变化；而无线链路失败 率从0. 5增长至0. 8的过程中随着无线链路失败率的增加，IETF方案和VDMM方 案的丢包率有所增长，但增长幅度并不大。这是因为一旦无线链路发生故障，则 用户和AP或锚点之间的信令交换会受到影响（如RS和RA信令），切换延退会 有所增长，因此丢包率也会随之增长。但从两个方案的整体性能来看，IETFDMM 方案的丢包率主要分布在80Kb/s,而我们的方案的丢包率主要分布65Kb/s,较 IETF DMM方案整体下降了 20%左右。
因此，从上述分析可知，在切换延迟的方面，我们方案的切换延迟整体要小 于IETF DMM方案，而且从图中可以看出，我们方案的丢包率波动幅度很小，说 明方案的稳定性很好，因此从丢包率来看，我们的方案要由于IETF DMM方案。
上面对丢包率的计算是在VDMM方案没有数据包缓存机制的情况下进行的， 但在上面已经分析过，VDMM方案可以在AP中引入数据包缓存机制，在用户离开 之前的AP之后，之前的AP缓存发往用户的数据，当控制器下发指令控制虚拟 AP进行迁移时将AP缓存的数据包一同迁往新的APo此时VDMM方案的丢包率可 以认为是0,则此时VDMM方案的丢包率则大大小于IETF DMM方案的丢包率。
此外，从上一章描述的VDMM方案的主要场景以及信令流程中可以看出，VDMM 方案中是不需要在锚点之间建立双向隧道的，因此不需要额外的隧道开销。而 IETF DMM方案则需要在sMAAR和nMAAR之间建立双向隧道，而且随着节点不断 移动，双向隧道的数量不断增加，隧道开销也就不断增大。就这一点来看，VDMM 方案的性能要比IETF DMM方案的性能高。
c.信令开销
下面对IETF DMM方案和VDMM方案的信令开销进行对比。上面4. 1. 1节已经 分析了 IETF DMM和VDMM方案的信令开销，并给出了计算公式。
C1ETF—D心=^update + Cme/ =	* ^CMD-MAAR	（4-1 ）
= ^update = ^AP.Controller * AP-Con	（4-2 ）
假设在相同的网络情况下，IETF DMM方案和VDMM方案中相似的功能实体的 处理时间近似相同，这样可以便于突出影响方案信令开销的主要因素。因此我们可以假设妬""和瞄,5“近似相同，Gm—妳和G P—Controller 近似相同，则可 以给出下面的公式：
ClETF-I^fM / GoAflf = ^CMDJMAR * ^CMD-MAAR ^^AP,Controller *^AP-Con 3 / 2 (4-3 ) 从上面的公式可以看出，在相同的网络环境下，IETF DMM方案和VDMM方案 的信令开销比近似为3:2,因此可以说我们的VDMM方案的信令开销要小于IETF DMM方案。

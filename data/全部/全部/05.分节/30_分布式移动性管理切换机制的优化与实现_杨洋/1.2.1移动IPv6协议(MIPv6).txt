1.2.1移动IPv6协议(MIPv6)
移动IPv6协议，是一个基于主机的移动性管理协议。因此需要修改终端的 协议栈来支持移动性管理。IETF工作组对移动IPv6协议进行了标准化。
MIPv6协议是一个基于主机的移动性管理协议，因此需要修改MN的协议栈。 当移动节点切换到新的网络时，外地链路会为节点分配转交地址，而节点的家乡 地址则依然保留，在节点的家乡代理上缓存节点的HoA和CoA的绑定关系。这样 节点移动前的数据通信会被首先路由到家乡代理，再由家乡代理通过隧道进行转 发。因此当节点移动到新的链路时依然保持着原来的数据通信不中断。
如图1-1所示是MIPv6协议的移动性管理架构，协议的数据通信流程如图中 箭头所示。MN的家乡代理为HA,家乡地址为HoA, MN从家乡链路AR1移动到外 地链路AR2,外地链路AR2为其配置转交地址CoAo AR2向HA发送消息绑定MN 的家乡地址和转交地址。由于对端节点CN并不知道MN发生了移动，所以CN依 然向HoA发送数据，则数据会首先到达家乡代理，然后家乡代理将数据封装后通 过隧道转发到MN的新位置AR2,再由AR2将数据转发给MN。
图1-1 MIPv6协议架构
由上述通信过程可知，MN和CN之间的通信存在三角路由的问题。为了解决 三角路由问题，MIPv6协议引入了路由优化机制。当移动节点收到来自对方的数 据后，判断CN还不知道MN的转交地址，则MN向CN发送它的转交地址，CN收 到后缓存MN的HoA和CoA之间的绑定信息，则之后CN可以直接向MN的转交地 址发送数据,数据可不经过HA直接到达MN的转交地址，避免了三角路由的问题。

4.2.1主次用户的网络协议
假设m个主用户和"个次用户均匀分布在单位正方形内部，主次网络共享相 同的地理空间和无线频谱。主用户可以不考虑次用户，而次用户要避免对主用户 的干扰。本文假设〃和m满足关系n = ",其中0是一个正数。信道的功率增 益是g(r) =丄，其中尸是发射机和接收机之间的距离，«＞2是路损因子。主次 r
网络都是随机ad hoc网络，主次网络的工作协议与文献［4-6］的工作协议相似， 不同点在于两个方面：1)本文假设次用户知道主用户接收机的位置，因此主次 用户都釆用9-TDMA协议；2)次用户釆用方向性传输，因此一个活动次用户栅 格可能同时支持多条传输链路。其中第二条是本文与文献［4-6］的主要区别。主网 络的工作协议如下：
＞将单位正方形区域划分为小正方形，其面积为为=A囈,K＞1。这样的一 个小正方形称为一个主用户栅格。
＞将主用户栅格分簇，每个簇内有9个主用户栅格，主用户釆用9-TDMA传输 协议，即主用户的每个传输帧包含9个传输时隙，如图4-2所示，每个时长 为tp的传输时隙分配给簇内的一个主用户栅格传输。在每个主用户传输时隙, 簇内的主用户栅格按照循环的方式交替处于活动状态，向相邻的栅格传输数 据，如图4-3所示。
＞如图4-5所示，主用户的数据按照水平数据路径(Horizontal Data Paths,HDPs) 和垂直传输路径(Vertical Data Paths, VDPs)从源节点传输到宿节点，这种 路由方式标记为HDP-VDP路由。在一个活动栅格里面的节点轮流担任中继 节点传输数据，以维持节点的能量均衡。
＞由于有多条主用户路由通过一个主用户栅格，同时一个栅格内部也在产生数 据，所以当一个主用户栅格处于活动状态时，它将自己的传输时隙进一步分 为多个包时隙，每个包时隙用于为一条经过或者源于这个栅格的主用户路由 传输数据，如图4-2所示。关于通过一个主用户栅格的路由数目，本文在接 下来的引理中予以研究。
＞每个主用户栅格的节点只能向相邻栅格的主用户发送数据，也就是说，在每 个传输时隙，主用户发射节点的发射功率是P.af ,其中*是常数。
138
主用户包时隙
图4-2主用户的帧格式，这个图在文献［4-6］图3的基础上修改，将25-TDMA改为9-TDMA
图4-3循环传输方案：以四个簇为例，每个簇内有9个栅格，9个栅格循环处于活跃状态，
向相邻柵格传输数据
次网络的工作协议如下：
＞将单位正方形划分为小正方形，其面积为归箜这样的一个小 n
正方形称为一个次用户栅格，一个主用户的保护区是指包含9个次用户栅格 的正方形，其中主用户接收器在中间的栅格内。当次用户发射机落到主用户 保护区的时候，次用户将检测角度维度的频谱空洞，如果没有角度维度的频 谱机会，次用户将缓存自己的数据，等到另一个时间维度或者角度维度频谱 机会岀现的时候传输数据，次用户的传输釆用多跳路由协议。
＞将次用户栅格分簇，每个簇有9个次用户栅格。次用户釆用9-TDMA传输方 案，类似文献［4-6］中的传输方案，一个次用户的传输帧长等于主用户的一个 传输时隙，一个次用户的传输时隙进一步划分为次用户的包时隙，用于传输
139
经过或者源于这个次用户栅格的次用户路由的数据，如图4-4所示。
> 次用户只有检测到它与最近主用户发射机的距离不小于J《/2,才能发射。
>如图4-5所示,次用户的数据按照水平数据路径(Horizontal Data Paths,HDPs) 和垂直传输路径(Vertical Data Paths, VDPs)从源节点传输到宿节点，这种 路由方式标记为HDP-VDP路由。次用户的发射机使用DOA算法来搜索角 度维度频谱空洞。如果一个频谱空洞存在，次用户就采用功率匕。/来传输， 其中《是常数。不同于文献［4-5］和［4-6］中的方案，在这里一个活动次用户栅 格内部可以有多个次用户传输数据，只要它们能够找到频谱机会。
图4-4次用户的帧格式，这个图在文献［4-6］图4的基础上修改，将25-TDMA改为9-TDMA
图4-5 HDP和VDP路由示意
140

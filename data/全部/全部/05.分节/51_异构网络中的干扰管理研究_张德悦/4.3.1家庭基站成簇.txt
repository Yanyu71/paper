4.3.1家庭基站成簇
在这个小节中，根据家庭基站和宏用户的位置信息，整个网络被分成多个独立 的家庭基站簇。我们假设，在考虑的系统里，有F个家庭基站。为了便于描述，首先 定义一个向量feRixF和一个矩阵DeIRFxF,其中，f包括了系统中所有的家庭基 站的索引号。而矩阵用来存放任意两个家庭基站之间的距离信息，详细来 说矩阵D中第a行第8列的元素dab表示FBSa和FBSb之间的距离，其中a € [1,F], be[l,F],并且daa=8°接下来，预先设定一个门限值。来判断两个距离较近的家 庭基站是否会对对方产生强干扰。
图4-2给出了家庭基站分簇的一个具体的例子。双箭头的线表示这个家庭基站到 彼此之间的距离是最近的。单箭头的线表示带箭头这一端的家庭基站是距离另一端的家庭基站最近的家庭基站。举例来说，距离FBS&最近的家庭基站是FBS40另外, 黑色的线表示线两端的两个家庭基站之间的距离小于预先设定的门限b。相反的，红 色的线表示线两端的两个家庭基站之间的距离大于预先设定的门限（7。接下来，将 详细地介绍家庭基站分簇的过程。
首先，形成原始的家庭基站对。根据矩阵D中任意两个家庭基站之间的距离，距 离彼此最近的两个家庭基站被选出来形成一个家庭基站簇。从数学的角度来说，如 果dab既是矩阵D中第。行元素中的最小元素，又是矩阵D中第8列元素中的最小 元素，那么｛FBSa,FBSfo｝就形成一个家庭基站对。当这个步骤完成之后，我们就可 以得到多个家庭基站对。
然后，对已经形成的家庭基站对进行初步分簇。基于每一个家庭基站对中两个 家庭基站之间的距离，我们判断这个家庭基站对中的两个家庭基站形成一个簇还是 形成两个簇。为了便于解释，以｛FBSfl,FBSj为例。当满足dab<c的时候，家庭基 站对｛FBSa，FBS》｝形成一个初始的家庭基站簇｛FBSa,FBS3。例如图4-2中的FBS】 和FBS2。但是，当不满足dab<G的时候，家庭基站对｛FBSa,FBSj将被分成两个 初始的家庭基站簇｛FBSJ和｛FBS》｝。例如图4-2中的FBS3和FBS8o定义一个集合 L来存放初始的家庭基站簇L =	I。｝。其中L，ce[l,C],表示一个初始的家庭
基站簇，￡包含了这个家庭基站簇内的家庭基站的索引，C表示初始的家庭基站簇的 数目。接下来，需要将已经纳入集合L中的家庭基站的索引从向量f中移除，来更 新向量f中等待分簇的家庭基站的索引。
接下来，进行家庭基站成簇。在这一步中，向量f中剩余的家庭基站将会被分配 到已形成的初始的家庭基站簇中或者形成新的簇。对于向量f中任意的一个待定家 庭基站，如果距离这个待定基站最近的家庭基站并不属于任何一个已经形成的家庭 基站簇，那么这个待定的基站被跳过。如果距离这个待定基站最近的家庭基站属于 已经形成的簇L，那么可以通过这个待定的家庭基站到簇￡中的家庭基站的距离来 判断这个待定基站是否应该被分配到这个簇中还是应该单独成簇。假设家庭基站簇 lc包含Tc个家庭基站，并且定义一个（1x4）的向量e。当待定的家庭基站到簇\c中 第，个家庭基站的距离大于预先设定的门限值6令％ = 0,否者令e, = l。如果向 量e中元素1的数目大于「八/2],认为该待定矩阵分配到已形成的簇丄。同时，将待 定家庭基站的索引从向量f中移除，并添加到簇妃。但是，如果向量e中元素1的数 目不大于\Tc/2\,则待定的家庭基站单独的形成一个簇，更新L,C和f中的元素。
循环地进行家庭基站成簇，直到向量f中所有的家庭基站都形成簇。
对于系统中的宏用户来说，每个宏用户被分配到距离自己最近的家庭基站所在 的簇内。
为了更清楚地展示提出的分簇方案，将家庭基站成簇的整个过程用流程图4-3来 表示。
不同于现有的文献HE中的方案，初始节点的选择和门限值的选择都非常的重 要，对系统性能有明显地影响。在本文提出的家庭基站成簇的方案中，使得任意两 个到彼此间距离最近的家庭基站形成一个或者两个家庭基站簇，不需要选择一个家 庭基站作为初始的节点。并且，无论门限值的取值是多大，都不会出现整个系统形成一个家庭基站簇的情况。提高了家庭基站成簇方案的稳定性。

5.8FPGA系统优化
上一节给出了系统整体的资源消耗。从中可以看出，系统工程总共消耗的资源为 15500个LUT资源。主要的资源消耗为FFT计算模块。接下来对该系统进行资源的优
52
化。
从本系统的FPGA优化角度来讲，有如下几个优化方法：
1、	在FPGA系统中，大多数模块都需要计数器来控制时序结构，可以将计数器移 出模块，放到系统顶层，进行资源的共享，达到节约资源的目的。
2、	从本系统的角度出发，将优化的重心放到FFT模块上。发现整个同步子系统的 主要工作由一对FFT/IFFT组成，而结合数字信号处理的知识。快速傅里叶算法有两种 计算方式：基时与基频郞】。基时FFT的输入为自然顺序，输出为二进制逆序，基频的 FFT输入为二进制逆序，输出为自然顺序。若能利用这一特性，不仅能降低系统整体时 延,而且可以节省RAM资源。所以可以进行的优化为将FFT模块设置为自然顺序输入， 二进制逆序输出；IFFT模块设置为二进制逆序输入，自然顺序输出。然后将本地数据 控制模块设置为二进制逆序地址。系统整体结构上便表现为自然顺序输入，自然顺序输 出。
3、	关于复乘模块的优化，复乘模块中，适合FPGA实现的3乘法5加法结构虽然 节省了一个乘法器资源，但是会增加2个加法器的使用与增加一级时延。通过对结构的 深入研究发现，错误味找到引用源。的两个加法运算a + A, c-d需要提前进行的加法 运算是导致增加一级时延的原因，而对于本项目中需要从RAM中读取本地数据，而从 RAM中读取数据会有两个时钟周期的延迟，因此两个时钟周期的延迟可以利用来计算 a + b,而c, d是RAM中己知的数据，可以提前计算好c-d放入RAM中，这样便达 到节省一个加法器，并且缩短一级时延的目的。这正是FPGA中空间换时间的重要体现。 5.9本章小结
本章主要介绍SC-FDE整体系统的FPGA设计，在设计之前，规定系统的各个参数 与接口是完成设计的必要条件，在参数与接口设计完成之后，一般就不再进行改动。
然后完成对系统的模块划分，针对各个模块进行详细的FPGA设计，同时针对各个 模块的功能与接口进行完备的仿真。在此之后将各个模块级联调试，通过Modelsim与 Matlab的联合仿真快速定位bug位置，进行快速开发。最后完成模块设计。
在同步子系统设计完成之后，通过增加一定的模块，便完成了 FDE子系统的设计， 联合FDE子系统与同步子系统得到SC-FDE整体系统的设计。结合这两个系统的目的 是为了对FFT运算的资源的复用。FFT是本系统中唯一消耗资源比较多的模块，只要完 成对FFT资源的复用，就能很大程度上达到节约系统资源的目的。
53

5.3同步子系统仿真与调试
同步子系统数据流比较复杂，需要结合Matlab与Modelsim进行联合仿真，对比数 据流程与数据波形，这样在设计阶段能够快速定位问题，解决问题。如下图所示，使用 Modelsim的testbench将各级输出数据保存为文件，然后在Matlab中调入这些文件数据， 并画出波形，通过对波形的比较，可以判断FPGA程序设计是否出错。如果波形不同， 则需要仔细分析错误模块的问题。以下面的输出为例，进行说明。
仿真条件，在无噪声的情况下，信号满量程输入
Modelsim仿真得到的估计信噪比输出：
：47 肚3。『312	时72巨脯
图5-11信号能量与噪声能量的Modelsim仿真
Matlab仿真得到的估计信噪比输出：
4	47	139	312	722	869	394	176	70	9
图5- 12信号能量与噪声能量的Matlab仿真
47
从上图可以看出，Matlab与Modelsim的输出基本一致。证明Verilog设计功能达到 预期。
从图5- 13的板级调试图中可以看出，在有线直连模拟无线信道的情况下，不存在 同步丢失的情况。

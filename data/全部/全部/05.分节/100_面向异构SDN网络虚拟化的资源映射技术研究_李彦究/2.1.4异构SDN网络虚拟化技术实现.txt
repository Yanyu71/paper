2.1.4异构SDN网络虚拟化技术实现
在本节中，我们主要聚焦于可编程网络的虚拟化实现平台。在基于SDN的 网络虚拟化平台中，根据虚拟化组件实现的层次，可以技术实现模式主要可以分 为转发设备集成式、透明代理式、控制器集成式三种Ml,分别与计算虚拟化的裸
机【小、虚拟机监视器【创、容器［43］三类技术相对应，如图2-4所示。
图2-4 SDN虚拟化平台实现模式
1）	转发设备集成：该方式类似于计算虚拟化中的虚拟机技术，虚拟化组件 在SDN交换机中的内核转发路径上层实现，通过该虚拟化组件，每个物理交换 机可以运行多个虚拟交换机实例，每个交换机实例都是一个逻辑上独立的交换机, 接受一个控制器的指导转发，虚拟化组件根据虚拟网络的映射信息把底层流量交 付给相应的控制器进行处理。
2）	透明代理：在这种模式下虚拟化组件以独立的外置设备实现，作SDN交 换机和SDN控制器间的透明代理。每个租户向虚拟化组件提交虚拟化请求，从 而创建自己的可编程网络，每个租户都可以使用完整的地址空间，搭建自己的拓 扑，部署自己的网络控制器。虚拟化组件根据虚拟网络的映射信息，对SDN控
13
制器向SDN交换机下发的PACKET-OUT数据或SDN交换机向SDN控制器上 报的PACKET-IN数据进行“实时翻译”，对于控制器来说，虚拟化组件为其提供 底层网络拓扑，而对于底层物理网络，虚拟化组件扮演了控制器的功能。其代表 技术有 FlowVisor[44l, VeRTIGO[45l和 OpenVirtexR®等等。
3）控制器集成：该方式中虚拟化组件位于控制器中，作为控制器的一个特 殊APP出现。当虚拟化组件运行时，控制器可以接受上层用户的虚拟网络请求， 并为其建立一个虚拟网络，因为不需要使用额外的软硬件设备，因此这种模式适 合于那些对性能要求不高，但却希望得到一个支持网络虚拟化的并且可以开箱即 用的SDN控制器的用户。这种模式可以通过APP链式调用使用控制器其他APP 的功能，从而定制自己的需求。目前两个发展如日中天的SDN控制器 OpenDayLight和ONOS均内置了网络虚拟化组件。
基于容器模式实现的平台理论上性能更强，适合于在开发设计良好的大规模 控制器中集成实现。但是基于透明代理模式实现的网络虚拟化平台，不依赖于上 层控制器和底层物理转发设备的类型，因此灵活性和通用性较高，因此受到了广 大网络虚拟化技术研究人员的青睐。
综上所述，异构SDN网络虚拟化平台可以使用三层架构实现，如图2-5所 示。最上层为虚拟网络控制层，用于实际控制虚拟网络的转发功能；最下层为异 构物理网络层用于模拟异构SDN网络；中间层为虚拟化层，用于实现SDN网络 虚拟化。
图2-5基于透明代理的网络虚拟化平台
虚拟化层对控制器与交换机之间通信的信令数据进行处理，其根据定义的规 则进行消息的拦截、修改、转发等操作，而控制器只能接收到被虚拟化层转换过 的数据，却对所有的转换操作都毫无感知。
14
网络虚拟化层可以划分为几个主要部分：1）网络状态管理模块完成对于底 层物理网络的拓扑探测，以及网络状态参数的测量，包括时延，剩余带宽，丢包 率等。网络资源状态是整个系统以及映射算法的基础。2）业务管理模块负责获 取、缓存并解析虚拟网络请求，作为整个系统的输入。3）网络资源池管理模块 通过虚拟化映射算法完成虚拟网络的建立，向业务管理模块返回结果。4）网络 状态管理模块建立网络资源列表，并完成虚拟化资源的维护过程。5）网络映射 管理模块完成虚拟网络和物理网络之间的相互映射，用于在虚拟网络映射之后的 部署。

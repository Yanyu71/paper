3.2.2虚拟网络映射求解目标
在评估虚拟网络映射算法优劣的时候，映射收益支出比是衡量算法对于资源 利用的重要因素，对于在线映射而言，虚拟网络请求遵循先到先得的原则，如果 成功映射则会得到收益，否则收益为零。因此，对于虚拟网络请求G、'，定义它 在任意时刻/的映射收益R(Gv(t))为链路带宽收益和节点资源收益之和，如式(3-1) 所示：
&£(/))=工纬+。工5	(3-1)
其中，坊为虚拟链路厂的带宽需求，C””为虚拟节点”"的CPU资源需求， 血为节点CPU资源收益影响因子。需要注養的是式(3-1)中第一项链路带宽收益 不会被该虚拟链路所映射的底层物理路径的距离、跳数、异构网络切换次数所影 响，这是因为虚拟网络的用户仅仅关心他们的资源约束需求，并且不会为更优质 的物理链路付出代价。
正是由于这样的特性，本章映射算法的求解目标将是最小化物理网络支出， 如公式(3-2)所示。这样做能预留出更多的物理资源用于其他的虚拟网络服务的映 射和部署。
(3-2)
对于虚拟网络支出C(G()),由于不同网络的特性将会导致其经济模型不同, 因此该因子的定义可能会随着场景的变化所不同。对于本文所述的异构SDN网 络环境，本章将物理网络支出主要聚焦于链路带宽和异构子网切换次数方面。
开销如公式(3-3)所示。
(3-3)
其中公式第一部分是物理链路支出，第二部分为物理节点支出。节点支出的 定义同节点收益保持一致，即虚拟网络请求需要多少计算资源就视为支出多少物 理资源。对于第一部分的物理链路支出，又包括带宽支出和网络切换支出两部分。 带宽支出部分由虚拟链路厂映射到的物理路径上所有的物理链路支出带宽之
23 和表示。除此之外，本文引入了异构子网切换代价，切换代价与物理路径p;子 网切换次数和请求带宽有关，即切换次数越高，并且请求的带宽资源越高，则异 构子网切换代价越高，2为切换权重因子。
在最小化虚拟网络支出C(G"⑴)支出的同时，也需要满足虚拟网络请求中的 约束条件。本文使用表示加行"列的二维节点映射矩阵，其中每一行表示一 个虚拟节点加为虚拟节点数量每一列表示一个物理节点才，"为物理 节点数量|N£而厶表示虚拟节点":映射到底层物理节点叭，否则 △虫,丿)=0。
对于每个虚拟网络请求，节点映射将满足一定限制，首先是每个虚拟节点都 映射到一个物理节点上，如公式(3-4)所示。
耳 S = l,Vze{l,2,...,w)	(3-4)
因此，多个虚拟节点也不能被映射到同一个物理节点之上,如公式(3-5)所示。
S 1,巧 w {1,2,...,"}	(3-5)
i
虚拟节点nv想要映射到底层物理节点眄必须满足物理节点眄剩余可用资源 大于虚拟节点”''请求的资源。如公式(3-6)所示。
△虫，丿)(C”： -cJnO,y/w{l,2,...,"},X77w{l,2,...,7M}	(3-6)
虚拟节点":和虚拟节点";之间的虚拟链路/；将会映射到一条不可分割的物 理路径加，其中必是一系列物理链路的集合。本文使用亠表示卩行g列的二 维链路映射矩阵，其中每一行表示一条虚拟链路r, P为虚拟链路数量|引，每一 列表示一条物理链路厂，g为物理链路数量#|,如果则AL(x,y)=l,否 则 Az(x,j)=Oo
在链路映射矩阵中，对于每一行虚拟链路仃，所有映射该虚拟链路的底 层物理链路Z；必须可以组成一条物理节点":和";之间的路径，否则映射将不被 允许。与此同时，所有物理链路集合竝中的物理链路剩余带宽资源必须小于等 于带宽需求如，如公式(3-7)所示。
(x,y){B^ -Br，) > 0, Vx e {1,2,, Vy e {1,2,(3-7) 除此之外，考虑到异构子网切换带来的开销，需要进行子网切换约束。本文 使用表示卩行g列的二维链路切换矩阵，其中每一行表示一条虚拟链路厂，p 为虚拟链路数量|厂|,每一列表示一条物理链路Is, q为物理链路数量片|,该矩 阵初始化为0。当虚拟链路映射到物理路径上时，逐跳处理该链路，若该物理链
24
路y为第一跳，则As.(x,v)=i;若j，链路不是第一跳，则检查y链路与上一跳物 理链路类型是否相同，若类型相同，则视为没有发生网络切换,A.(x,v)=O,否则 发生了异构子网切换，△s(x」)=l。整条物理路径子网切换次数不大于最大切换 次数Smax，如公式(3-8)所示。
q
2 X (x, y) V Smax,色 e {1,2,…,M	(3-8)
y
综上所述，本章映射算法的求解目标将是最小化物理网络的总支出，如公式 (3-9)所示。
(3-9)
s.l.	式(3-4) ~式(3-8)

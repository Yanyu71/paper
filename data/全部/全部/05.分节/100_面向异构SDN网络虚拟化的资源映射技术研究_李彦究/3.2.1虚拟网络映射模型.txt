3.2.1虚拟网络映射模型
本文使用无向多重图(Undirected multigraph) Gs = (Ns来表示底 层物理网络平面，其中各种参数具体含义如下所述。
底层网络物理节点集合定义为N'，念由底层网络节点的CPU计算能力来 描述，使用C”：表示物理节点巧(”;G Ns)当前可用的CPU资源。
底层网络物理链路集合定义为77 ,对于底层物理网络中任意链路Z；(Z； eT), 有即链路由源节点7、目的节点八链路类型/三个参数 描述。不同类型的链路具有不同的通信能力和特性，当两条相邻的物理链路类型 不同时，节点将会进行异构网络切换，从而引入数据包处理开销。因此需要尽量 少的进行异构网络切换。
由链路可用带宽来描述，对于链路，使用如表示链 路当前可用的物理带宽。
图3-1的右面部分描述了一个异构SDN网络的转发平面图，该网络中每个 节点至多有三种通信方式与其他节点进行通信，其中每种通信手段组成的网络单 独的表示为一层，通过三层堆叠构建了整个底层物理网络拓扑，其中具有相同名 字的节点物理上为一个节点，该节点包含归一化的CPU资源剩余情况，最大值
20
为100。同时，不同通信方式层的链路不同，通过连线样式区分，链路上的数字 表示物理链路剩余带宽。
与物理网络类似，虚拟网络请求可用加权无向图GJ(NH,C'N，C'L)来表示, 其中N"表示虚拟网络请求节点集合，2/表示虚拟网络请求链路集合，虚拟网络 节点约束通过CPU资源表示，C”,"表示虚拟节点附对于CPU资源的需求约束。 虚拟网络链路资源约束通过链路带宽表示，B,.表示虚拟链路/：的带宽请求约束。 图3-1的左面部分描述了两个虚拟网络请求，其中一个是包括三个节点两条链路 的线性网络拓扑请求，另一个是包括四个节点和四条链路的环形网络拓扑请求。 每个请求使用不同形状的图形区分，节点内数字代表该虚拟节点所需的计算资源, 链路上数字代表该虚拟链路所需带宽。
参数符号龄
物理网络节点，物理网络节点集合 物理网络链路，物理网络链路集合 虚拟网络节点，虚拟网络节点集合
虚拟网络链路，虚拟网络链路集合
虚拟网络Gv映射到的物理路径集合
参数梯赫
注释
q
虚拟节点 < 对于计算资源的需求
物理节点n'j可用计算资源
虚拟链路/；对于链路带宽资源的需求
物理链路可用带宽资源
基于以上物理网络和虚拟网络请求的建模方式，为实现虚拟网络映射功能, 本文中虚拟网络映射采用了 "先到先得"(FirstComeFirstEmbedded, FCFE)的 在线映射策略。与离线映射提前了解所有的虚拟网络映射请求不同，本文中每个 虚拟网络的映射顺序是由该虚拟网络的到达时间决定的。
在前一个虚拟网络请求没有被完全处理之前，新到达的虚拟网络请求必须缓 存在FIFO队列中，只有当前一个请求处理完毕，才开始下一个新请求的处理。 如图3-2所示。如果需要评估算法的执行时间性能，可设置虚拟网络请求的最大 等待时间为一个阈值，超出等待时间阈值的虚拟网络请求视为失败。
图3-2虚拟网络映射流程图
在线映射过程分为节点映射和链路映射两部分。
(1) 节点映射
首先进行节点映射，虚拟网络请求中的每个虚拟节点都要被映射到一个满足 资源约束的物理节点之上。如图3-1中，第一个虚拟网络请求VNR1的节点映射 结果为{a — A,bfD,cTB},第二个虚拟网络请求VNR2的节点映射结果为 {QTC,bTF,c->E,dTB}。如果虚拟网络请求中的所有节点映射成功，则进 行下一阶段的链路映射，否则映射失败。
(2) 链路映射
当所有虚拟节点映射成功时，开始进行固定节点的链路映射。虚拟网络请求 中的每条虚拟链路都要被映射到一条满足资源约束的物理路径之上。物理路径使 用(A,a,B)表示，其中英文字母表示链路的两端节点，中间的希腊字母表示两节
22
点之间的链路类型。如图3-1中，虚拟网络请求VNR1的链路映射结果为 {@,b)T(4a,功,(b,c)T(D,a,B)},虚拟网络请求VNR2的链路映射结果 初,b)T(C/F),(b,c)T(F』,G』,E),(cM)T(E,0,B)，aa)T(B,0,C)}。如 果虚拟网络请求中的所有链路映射成功，则该映射成功，并且更新被映射物理节 点和物理链路的剩余资源，否则请求映射失败。

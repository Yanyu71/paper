4.3.4算法流程
由于虚拟网络的请求规模可能增长，需求可能多样，对于携带有带宽和时延 需求的复杂虚拟网络请求，通过改进蚁群优化算法中的信息素和启发因子，从而 在多代蚂蚁迭代中快速找到次优解，从而降低物理网络支出，从而降低请求拒绝 率。
对于携带有时延和带宽需求的虚拟网络请求，每条虚拟链路的映射支出需要 综合考虑带宽、时延、异构子网切换次数。该算法首先进行请求规模的评估，当 评估结果小于某个阈值时，则采用启发式策略计算出所有备选路径并进行选优, 当评估结果大于该阈值时，则采用基于蚁群算法的策略来进行虚拟网络映射。该 阈值依据历次映射中虚拟网络的规模和映射花费时间综合算出。
当每个虚拟网络请求到来时，执行vHSDNM-ACO算法来完成整个映射流 程，其中整个算法流程由vHSDNM-ACO-Framework算法和vHSDNM-ACO- Slover算法两部分组成。
vHSDNM-ACO-Framework算法描述了算法的整体框架，包括蚁群迭代、信 息素更新、以及算法终止条件等。算法伪代码如算法4-1所示。
算法 4-1 vHSDNM-ACO-Framework
输入：底层物理网络Gm、虚拟网络请求GV{N\L'}
输出：	映射方案M =
1. 初始化全局最优映射解Mg/<0"=+8
2. 初始化迭代次数、蚂蚁数量
3. 计算虚拟节点数目nv = size’N'、
4. 计算物理节点数目ns =size
5. 初始化信息素矩阵pher[nv][nx]
6. 基于公式4-5计算每个物理节点启发因子
7.
while最大迭代次数未到do
&
初始化蚁群他
9.
for nan! in Nan, do
10.
执行算法4-2获得映射解Mant
11.
使用公式4-9更新信息素矩阵中映射解轨迹的信息素
12.
end for
13.
计算本次迭代过程中最佳映射解斶。辺
14.
if M嗣 < Mgiobai then
15.
更新全局最优映射解Mg!ohal=M!ocal
16.
end if
17.
进行信息素蒸发
end while
19.
return Mgiobai
vHSDNM-ACO-Slover算法是具体的蚂蚁搜索流程算法，其描述了每一只蚂 蚁是如何基于信息素和启发函数进行子问题逐步求解的过程。每只蚂蚁随机的从 一个节点出发，从而生成了第一个子问题。当第一个子问题求解完毕后，剩余的 子问题由则是映射那些已映射的邻居虚拟节点中未映射的节点及其悬挂链路。其 中节点的选择则是基于转移概率和轮盘赌算法，而链路的选择则是选择综合度量 最优的链路，重复子问题的解决过程，当前蚂蚁便可以得到一个可行的映射解。 如果无法完成虚拟网络请求的映射，则返回一个空解，视为本次蚂蚁搜索失败。 算法伪代码如算法4-2所示。
算法 4-2 vHSDNM-ACO-Slover
输入：底层物理网络Gs{Ns,If},虚拟网络请求G''{N',L'} 输出：映射方案Mtrail
1. 初始化映射方案
2. 随机挑选一个虚拟节点硝构造初始子问题
3. 依据转移概率矩阵在物理节点集合中挑选礦作为硝节点映射
4. 标记虚拟节点加和物理节点碼为已映射
5. 将所有未映射且与已映射节点相邻的虚拟节点放入集合Snear
6. for ": in Snear do
7. 构建可映射物理节点集合并计算其转移概率
&	根据随机比例算法选择一个物理节点”;进行映射
9. 基于公式4-7将该悬挂链路映射到一条最优可用物理路径p
10. if映射无法满足资源约束then
11. continue
12. end if
13. 将”;和路径p加入颯圖中，并将虚拟节点"：和物理节点";标记为己映射
14. 将已映射虚拟节点移除
15. 将其未映射悬挂邻居节点加入S”如”
16. end for
]7. retum
综上所述，该策略适用于映射规模较大的异构SDN网络，相对于两段式的 求解策略，该策略综合考虑了节点、链路带宽、链路时延多方面因素，充分利用 了蚁群搜索算法以及异构网络中具有丰富的不同网络类型的特点。对于大规模的 异构网络和映射需求，相对于精确式算法，该算法牺牲了一定的最优性，换取了 映射时间的减少。相对于启发式算法，通过随机搜索特性，提高了算法选优的能 力。

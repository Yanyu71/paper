4.2.4.2CTS控制器
CTS控制器负责对CTS信令的发送和接收处理，其提供的主要函数接口如下: 表4-9 MAC CTS控制器主要接口
函数接口定义
send(int fn)
recv(const char * const header, int msg len)
CTS控制器的发送操作由Heartbeat Msg在指定的TTI触发，如果CTS发送 队列非空，则根据子帧号以及D2D-CCCH时序调用send。生成发送CTS的Sched Msg,并下发到物理层。发送完成后，CIS控制器告知DATA控制器在两个无线 帧后接收数据。
41
图4-11 CTS发送处理逻辑
CTS控制器的接收操作由来自物理层的CTS上报的Core Msg触发，执行recv() 函数。CTS Core Msg的负载部分除如图3-6所示的CTS信令以外，还携带一个 CRC校验位。如果CTS接收结果校验正确，CTS控制器将告知RTS控制器竞争 成功，并告知DATA控制器在两个无线帧后发送数据；如果CTS接收结果校验错 误，CTS控制器将告知RTS控制器竞争失败，由RTS启动碰撞退避功能。
接收到CTS
二处“用宜命;、 木一认定碰撞，执行退
、校验结果正枷？. >—杏》	避算法
......—…-
T
/建否指定自己为接、、 不亠 壬古宕
收端？ /―否十丢弃该E
'、、、/ — 'Y
是
准备发送点对点数据
图4-12 CTS接收处理逻辑

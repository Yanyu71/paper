2.2TDOA定位
TDOA定位是一种经典的基于网络的定位方法。在20世纪80年代曾经广 泛使用的导航系统LORAN-C就是基于这种技术。TDOA或者ToA的定位方式 都需要测量传播时间，根据传播时间推算出距离。传播时间的估计可以分为单向 和双向两种方式。在单向方式中，测量的是某事件（例如信号起点）发生在发射 机上和发生在接收机上的时间差，即传播时间。在这种方式中，又可以有多种具 体实现。例如，发射机可以发送一个时间戳，带上信号发送时间，或者接收机提 前知道周期性信号的起始时间。根据测得的传播时间，乘以光速，就可以得到发 射机和接收机之间的距离。这种方式被广泛采用，例如GPS系统中的测距。单 向方式要求发射机和接收机是同步的，并且接收机需要知道信号的发射时间，才 能正确推算距离。在双向方式中，测量的是信号的往返传播时间。在这种方式中， 一个终端作为询问者，另一个作为应答者，需要询问者和应答者都具有双工的能 力。询问者发送特定信号给应答者，由于双工模式等因素，在响应时延后，应答 者发送信号给询问者，询问者可以根据发送和接收时间差和引入的响应时延，估 计往返距离。相比于单向方式，这种方式对应答者性能要求可以较低，它只需要
s
其具有接收，存储和发射等能力，而不需要复杂的信号处理能力。正因为这种特 点，它在RFID (Radio Frequency Identity,射频标识)技术中被采用。
如果已知信号发射时间，但是不满足单向方式中发射机和接收机同步，也可 以利用时间差即距离差定位，即采用TDOA定位，这种方式只要求非目标节点 之间保持同步。这里时间差具体指两个非目标节点和同一个目标节点间信号传播 时延的差。时间差可以由两种方式得到，一种方式是接收机具有发送信号的副本， 分别估计来自多个发射机信号的传播时间，然后差分得到时间差，称为主动模式； 另一种方式接收机无发送信号副本，通过对两个发射机的信号的处理，直接得到 时间差，称为被动模式。
系统的部署又可以分为两种情况，一种是目标发送信号由网络接收，称为多 边方式；另一种是网络发送信号由目标接收，称为单边方式。如果网络中有M个 节点参与定位，总共可以得到C；,组时间差，但是这些时间差是线性相关的。事 实上可以得到时间差的多个独立的集合，集合中每一个时间差对应的时延中至少 有一个没有被其他时间差采用，这样的集合具行个元素，并且是线性无关 的。通常认为这样一个独立的集合足以支持定位［⑵，然而在考虑到噪声的情况下, 可以引入冗余的时间差来提高精度口叫
根据测量的时间差可以换算得到距离差，加上已知或者确知的非目标节点的 位置，通过求解定位方程等方法，可以估计目标的位置。这里以二维欧氏平面为 例(三维空间可以以此类推)，简要介绍一下TDOA基本的几何模型。记已知的 网络节点i的位置坐标为的& P)，待估计的目标节点的位置坐标为(x y),目 标到节点i和j之间的距离差为4,, =4一4，则有下列方程：
4.产 J(x — x)2+(y — y)2 - J(x_xj+(y_yj	(2-1)
由多个节点和距离差可以联立得到方程组.，方程组的解即为位置的估计。图2-1 为TDOA定位示意图。
.■
用户
e!MB2	eNBB
图2-1 TDOA定位示意图
该方程组为非线性方程组，通过变量变换，可以变换为关于第三方变量的线 性方程组。为了使方程组有解，需要满足其中。为坐标数，即维数， 当大于号成立时为超定方程组。对于超定方程组情况，求解可以采用LS (Least Square,最小二乘)法，加权的 LS网, Chan 算法〔皿,AML( Approximately Maximum Likelihood)算法。旬，Tylor级数算法［⑸和高斯一牛顿法【16］等。

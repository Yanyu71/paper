2.3位置指纹定位
基于位置指纹的定位，也称为RFPM (Radio Frequency Pattern Matching,射 频模式识别)，是一种新兴的基于网络的定位技术。在2003年开始的SKYHOOK 就是这样的商用系统之一［期。目前该技术主要基于WLAN网络，因为WLAN多 是用户自组织的，地理位置未知但基本固定口7卜口叫其中采用的位置指纹一般为 一些 Wi-Fi 热点相关的 RSS 或者 RSSI (Received Signal Strength Indicator)等量。 通过比较接收机得到的位置指纹和数据库(即样本集)中的记录来估计位置，这 里数据库是预先建立的，包含已知位置和对应的位置指纹。这种方式不需要硬件 改动，可以在现有通信系统上实现。此外，这种方式受到多径和阴影衰落的影响 较小，因为它们带来的影响本身就包含在位置指纹中，甚至可以利用这些信息增 强定位。同样地，系统部署方式可以分为单边或者多边方式，这里以单边方式为 例进行说明。
定位过程由两个阶段组成。第一个阶段称为训练或者离线阶段，目的是建立 数据库。在该阶段，测量一些参考点上的位置指纹，预处理并建立起和位置的映 射，存入数据库。第二个阶段称为测试或者在线阶段，目标测量自己的位置指纹， 通过某种搜索算法和数据库中的记录比较，得到位置估计。在早期的位置指纹技 术中，离线阶段是通过路测或者室内测试等实测的方式进行口刃，但现在一些研究 基于的众包(crowdsourcing)的方式进行，也能取得不错的精度口刃。流程如图2-2所示。
10
图2-2位置指纹定位流程示意图
测试阶段的搜索算法可以有多种实现〔2〕，比较典型的有最近邻居和贝叶斯推 断算法。最近邻居算法也称为NNSS （Nearest Neighbor in Signal Space,信号空 间中最近邻居）算法，其中，记数据库中的一个参考位置的指纹为国，对应的位 置为“，现观测得到一个位置指纹,记为。，则位置估计为。= argminM。-Sj, 其中卜|算子表示距离。这里距离的定义包括但不限于欧式距离，也可以有范数或 者曼哈顿距离等方法。最近邻居算法易于操作和实现。
贝叶斯推断算法也称为MAP （Maximum-a-Posteriori,最大后验概率）算法。 在贝叶斯推断算法中，位置估计为在给定观测位置指纹的条件下，后验概率最大 的参考位置。记观测得到的位置指纹为。，参考位置外下的位置指纹的概率分布 为尸（x|pj ,在每个参考位置上的先验概率记为P（p,）。则由贝叶斯公式，后验 概率为：
（2-2） 工尸（。加）尸（2）
/
则位置估计为P = argmax,„ P（p.|o）。容易看出，当先验概率相等的情况下，退 化为最大似然估计。=arg max% P{o\ A ） o贝叶斯推断要求具有位置指纹的概率 分布，但在实际中，通常采用位置指纹的统计特性来近似概率特性。
RADAR系统是早期被提出的位置指纹定位实验，在2000年进行口叫 它是 一种基于WLAN射频的室内用户定位和跟踪系统。它采用从三个WLAN AP （AccessPoint,接入点）接收机收集得到的用户信号强度信息确定用户坐标。这
11
里利用的信号强度信息是从WLAN网卡驱动中得到的SS （Signal Strength,信号 强度）和SNR （Signal-to-Noise Ratio,信噪比），每当接收到广播包的时候就可 以得到这些信息。
训练阶段可以进一步分为数据收集阶段和处理阶段。在数据收集阶段通过收 一集信号强度信息来建立数据库。一个移动的信标周期性地发送广播包，让AP来 接收。AP每次接收到广播包时，记录AP编号，SS和SINR的三元组，最后附 上时间戳。训练阶段和测试阶段收集到的信息都可以采用这样的三元组格式来表 示。在训练阶段，移动信标会以坐标的形式标记自己的实际位置，由于LOS/NLOS 环境，这里也会记录信标的朝向，进而得到二维坐标和朝向的三元组，最后附上 时间戳。在数据处理阶段,对同一地点同一朝向的多次测量取平均值，然后合并， 得到每一个AP视角下信标二维坐标，朝向，SS和SINR的五元组，并存入数据 库。测试阶段，类似地，目标终端也会发送广播包，并且AP多次测量取平均值， 得到每一-个AP视角下的SS和SINR的两元组。
通过实验比较，该研究最后采用了 SS作为位置特征，而没有采用SINR。在 该研究提出的“经验方法”中，采用NNSS算法来匹配测试阶段的两元组中的SS 和训练阶段的五元组中的SS,并将匹配到的五元组中的坐标和朝向作为估计结 果。因为系统中有三个AP,这里的距离需要包括AP的自由度。对NNSS的一 个改进是引入多个最近邻居，最后将多个最近邻居加权平均。该研究还提出了另 一种“无线传播模型方法”作为改进，通过一些无线传播模型来扩充训练阶段的 数据库。这里用到了瑞利衰落模型，莱斯衰落模型和楼层衰减模型，通过训练阶 段的实测数据，取得模型参数设定，进而得到更多位置上的五元组，于是扩充了 数据库。通过运用这种方法，可以减少训练阶段的工作量。在数据库扩充完成后， 其他步骤和“经验方法”相似。实验结果表明，RADAR能够以相当高的概率在 几米的误差内估计用户的位置。

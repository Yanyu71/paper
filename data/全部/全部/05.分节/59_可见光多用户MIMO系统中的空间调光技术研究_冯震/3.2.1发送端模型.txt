3.2.1发送端模型
如图3-2所示，空间调光在发送端完成预编码和发送天线选择等预处理。发 送端将根据系统亮度需求，充分利用CSI进行发送天线选择，从光源中的全部N, 个LED中选出々个LED工作，从而预编码方案的性能得以提升，保障用户在不 同亮度条件下的通信性能。其中，发送天线选择算法将在332和342两个小节 中做具体介绍。
预编码矩阵W可以由工作LED与接收端K个用户组成的信道共同确定，预 编码矩阵的每一行向量w. 5=1,…,K)对应不同的用户。用户比特流经过QAM 调制模块映射成QAM符号。招，然后分别乘以预编码向量”并叠加成频域的 发送信号向量X*eC"R,其中，1WZWN, N为子载波总数。相应地，第q个 LED上的信号X公可以表示为：
=	(3-1)
其中，4 = 1,…，/小
在完成IFFT变换前，频域复信号X必将首先输入到Hermitian对称模块以保 证输出的时域OFDM信号为实数，Hermitian对称可以用数学公式表示为：
[X/一*=反』,左=1, 2,…,N/2-1
1	(3-2)
= Xq” = 0
随后IFFT变换将生成时域的OFDM信号，用数学公式可以表示为：
1 .v-i	2 乃
= — Ex 上 exp(jF欣)，k = 0, 1,…，N-I	(3-3)
其中，xq n为得到的时域OFDM信号。
接下来，信号％,将乘以一个比例缩放因子。，它的作用有两个，一是缩放 调节LED驱动信号的电功率，使得用户的接收信噪比尽可能大，二是通过比例 缩放有效控制信号削峰畸变的程度，避免信号发生较大失真。从而使％”的幅度 能够满足LED动态区间的限制，在叠加直流偏置之后避免信号发生较大的削峰 失真，进而影响通信性能。接下来为了使信号为正值，比例缩放后的OFDM信 号需要叠加直流偏置信号，所得LED驱动信号可以表示为：
琮(3-4) 由于半导体LED器件的饱和效应和物理特性，驱动信号以需要工作在LED的 动态区间内，在这个区间中，输入信号与输出光功率将满足线性关系，而超出该
36
范围后输出信号将发生削峰。动态区间可以数学表示为%,3],其中与为LED 动态区间的最小输入电流,为LED动态区间的最大输入电流。本节假定了 LED 的电-光转换系数为1,经过强度调制后输出的光信号可以表示为：
j	旷。J纭^
W %,■ +4,矿	（34）
（，	y Xq,n&
。表示缩放因子，定义为：
其中，=	表示时域信号的幅度范围，77dB =1010gde（/+1）用
于调节0FDM信号的削峰程度。
由于人类的视觉暂留特性，室内照明中人眼感觉到的亮度主要取决于光信号 的平均功率，难以感觉到光强的瞬时变化。由于当264时，时域OFDM信号可 以看作高斯随机变量，可以将第4个LED的平均光功率表示为：
取,」=题『,"+4] = 4, n = Q, --,N-l	（3-7）
功率归一化后QAM符号4,*的幅度分布在[-1,1]范围内，因此经过LED强度调 制后输出的光信号需要满足：
-1+4	（3-8）
为了使乂，“工作在动态区间内，需要分别考虑到动态区间下界和上界的限 制：
「EMM泌	（3.9）
因此，预编码矩阵需要满足：
%| = |WR|<||W』咛吟	（3-10）

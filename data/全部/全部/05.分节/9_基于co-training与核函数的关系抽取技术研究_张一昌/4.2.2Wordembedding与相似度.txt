4.2.2Wordembedding与相似度
Word embedding是一种连续、向量化表示单词的一种方式，通过计算两个 词向量之间的余弦值，就能得到它们的相似度。在这里本文将词向量置于模板里, 相似度计算的这个过程就体现在了实体对生成函数GenerateSeed中。
实体对是co-training关系抽取系统的另外一个重要产出，虽然不能直接应用 于给定实体的关系抽取系统，但是实体对和模板是相辅相成的，任何一部分的产 出策略都影响着对方的质量，这部分也是系统的核心。
实体对生成函数可以釆用两种经典的策略：
第一种就是给定一个实体，然后从这个点出发，一直到走到路径的尽头，查 看终点的类型是否为指定类型，在当前的出生地关系里，终点应该是地名。这样， 如果当前句子具有这个路径，且路径终点相一致，则这个实体对就是正确的实体 对，可以被抽取出来。这里面如果句子是共指的句子，则把共指的单词序列替换 为原实体。
第二种则是找到所有的找到所有满足关系的实体对，然后抽取实体对之间的 最短路径，如果最短路径和模板完全匹配，则这个实体对被抽取。
根据对数据的观察，以及方案实现是否方便，这里选择第二个策略。因为一 个句子里面符合的实体对比较少，另外就是最短路径的函数己经实现，可以直接 调用接口。
30
第二个方案的具体流程是这样的，当本文从模板列表中取出一个模板，如上 面提到的< (0,nsubjpass),born, (1,prep),in, (l,pobj) > ,通过这个模板可以匹配出很 多的实体对。假设有句子：Jordan was bom in Brooklyn.这个句子的句式和Barack Obama was bom in Honolulu.完全一样，见图4-5,具有相同的模板，这时本文就
可以抽取出实体对〈Jordan, Brooklyn > ,这就是实体对生成函数的工作。具体逻 辑见图4-5。
图 4-5 "Jordan was bom in Brooklyn?5的依存关系图
使用模板进行匹配的时候，为了保证召回率，本文使用的是软匹配模式，即 种子对之间的最短路径和模板之间的相似度不是非0即1的离散值，而是一个连 续值。连续值会有很多的好处，通过利用word embedding,系统增强了泛化能力， 假设本文找到了 模板 < (0,nsubjpass),born,(1,prep),in,(1,pobj),province,(1,nn) > , 那么，根据词向量，本文实验得出province、city> country以及state的余弦相似 度比较高，这样，下面的四个模板，如图4-6,就会非常接近。因此，即使最终 只是找到了一个模板，本文也能抽取出这些类似模板的实体对。
这个匹配函数很简单，就是计算两个模板(其中一个模板是当前抽取出来的 最短路径)，然后计算公式(4-1).
<(0, nsubjpass), born, (1, prep), in, (1, pobj), province, (1, nn) >
<(0, nsubjpass), born, (1, prep), in, (1, pobj), city, (1,nn) >
<(0, nsubjpass),feorw, (l,prep),m, (l,pobj),sto/e,(l,nn) >
<(0, nsubjpass), born, (1, prep), in, (1, pobj), country, (1, nn) >
图4-6相似度很高的模板
31
式(4-1)需要考虑最短路径是否长度一致，只有一致的才能计算，否则记为相 似度为0.其中首先计算节点的相似度，奇数节点相似度计算方法为式(4-2)：
而当节点为偶数时，相似度的计算方法为式(4-4).
顷(x,y) = ： »(x”y,)+cos(")
其中，sz初。(x,y)表示奇数节点X与节点7的相似度，花为节点所具有的子元
子元素，也就是词向量之间的余弦相度。考虑到整个模板，则模板之间的相似 度计算公式为式(4-5)。
%
sMPx,py) = sim0 (xk况)x	sim0(x2M,y1M)xsime(x2i,y2i)	(4.5)
式(4-5)中的阵表示链各个不同的模板，左则表示模板的节点个数，如模 板 < (O,nsubjpass),Z>orn, (l,prep),zw, (l,pobj),province, (l,nn) > 则包含 7 个节点，即 k=7,而［团代表对,4进行下取整。本文中将阈值设为模板匹配相似度低 于S的实体对丢弃。
32

4.1.2802.1lp车辆通信原型机系统
在完成本论文的工作之前，我们已经搭建了一个基于802.lip协议的车辆通 信的原型机系统，这是一个视频传输的软硬件平台。在未添加本文实现的频率同
29 步模块之前，该原型机系统不能实现正常的视频的射频传输。该车辆通信系统原 型机，主要完成WAVE车载网络的物理层传输功能，主要由四大硬件模块组成: 控制及数据接口模块、IEEE 802.1 Ip物理层数字基带模块、数模/模数转换模块、 射频发射与接收模块。各个模块之间都采用流水线的工作方式，增加了系统的平 行处理能力和吞吐量，消除了各个模块间的处理等待时延。同时，在原型机上搭 建了一套实时视频传输系统来模拟车辆通信的业务层，主要包括视频釆集与回显 模块、业务层视频数据收发模块、中间层视频数据收发模块、中间层控制和接口 模块。
该原型机主要包括物理层的硬件实现和业务层视频传输系统的实现，系统的 整体连接图如图4-1所示：
图4-1 802.1 Ip车辆通信原型机系统连接图
从图中我们不难看出，整个车辆通信的原型机设计包括了摄像头、计算机、
FPGA开发板、AD/DA板、射频板等。系统的整个收发流程是摄像头采集视频 信息，经过视频压缩编码后，将压缩视频数据传输给FPGA开发板，在此开发板 上实现了基于IEEE 802.11p物理层的发送机部分，经过数模转换和射频调制之后 发送出去，在接收端通过射频接收之后经过模数转换传回给接收端的FPGA开发 板，在此开发板上完成了基于正EE 802.1 lp物理层的接收机部分，然后再传回给 计算机，完成完成视频解压缩，视频回显等操作。
对于上面提到的基于IEEE 802.1 lp物理层的发送机和接收机框图如图4-2和 图4-3所示，这是我们整个原型机硬件实现的关键部分：
30
图4-2 802.lip物理层发送机框图
由图4-9可知，发送机首先通过NIOSII软核和AVALON总线从计算机上读 取己缓存的上层数据；然后将读取的数据按照802.1 Ip协议规定的物理层处理流 程经过信道编码、交织、星座映射、插入导频、IFFT、添加循环前缀、添加帧头、 成形滤波，最后发送数据帧到数模转换模块。
图4-3 802.lip物理层接收机框图
31
由图4-10可知，物理层接收机的处理流程是将模数转换模块输出的数字基带 数据通过帧同步检测数据帧的到来，通过载波同步进行载波偏差的估计和纠正， 通过符号同步定位和分离OFDM符号，获得FFT的转换窗口位置，接着去除CP 和时域训练序列，使用FFT完成子载波的解调，通过信道估计来估计和补偿信 道衰减，通过釆样同步进行采样定时偏差和采样频率偏差的估计和纠正，通过相 位跟踪来对相位变化进行跟踪补偿，然后去除导频、星座逆映射、解交织、信道 解码、解扰，将已解调数据输出到数据缓存接口中，供上层读取。
我们所开发的频率同步模块是在整个系统的物理层接收机中，除了利用短训 练序列完成频率的粗同步之外，由于车辆通信中高速导致的多普勒频移引起信号 的快衰落，我们还需要利用导频完成相位的跟踪。其中载波同步位于帧同步和符 号同步之间，相位跟踪模块位于信道估计模块和BPSK解调模块之间。我们通过 在发送端摄像头采集图像，在接收端进行图像的接收和还原来验证其中各种算法 的正确性和有效性。

2.4.2履射的暮效电踣仿真
非理想传输线的等效电路并不是普适的，需要针对具体的导线网络，根据上 文所介绍的过孔与寄生电容电感的*效电路分析方法，将走线过程中所遇到的情 况一一串联，即可得到该传输线用于分析反射的等效电路模型.
在设计成熟的PCB线路中，对于直接与电源层（VCC）和地层（GND）相 连的传输线来说，终端端接可以通过上文所述的各种方式来实现终端负载的阻抗 匹配。然而在信号层上的走线中，则很少存在这类方式•当分析这类从管脚（Pin） 到管脚（Pin）的数据时，需考虑器因管脚封装所带来的寄生电容和电感信息。在 PCB仿真中，有源器件管脚正常工作时的数据都被集成在该器件的IBIS模型中, 通过查询该器件的IBIS模型文件即可获得该管脚的封装电阻R_Pin、封装电容 C_pin和封装电感L_Pin。同时根据模型类别可获取焊盘与驱动器之间的电容 C_Compo
为了更好地突出反射问题在传输线中的影响，传输线的选取应当尽可能长。 本文在开发板中选取一条跨越多层的长传输线，该传输线Line共分布在三层中， 在不同层叠之间通过过孔实现了其的连通。其位置信息如图2-12所示。该线共 有三个引脚，其对应的三个芯片分别为FPGA、ISL54050和CPLD。其中ISL54050 为双重低压单刀双掷模拟开关，共有10个管脚。在上文的读取PCB文件所得的 拓扑结构中，已经包含这些有源器件管脚的信息，该条传输线的主要用途是实现 对FPGA芯片的选通数据信号通信。
图2-12所选传输线在PCB板上的位置
通过编写的读取PCB文件的代码，一方面可以得出该传输线的端接情况， 另一方面可以准确获得每一段在各层上的走线长度。根据文件读取结果，可以得 出该网络的三个部分分别在Bottom> Sig_Layerl2和Sig_Layer6层，在上述各层 中的走线长度分别为0.83in、5.56in和2.54in°同时读取结果显示，该条传输线 三个管脚并无其他分支走线，避免了互连线分支造成的阻抗突变。在PCB文件
19
的头部，通过查询PCB的层叠信息，可以获得上述各层的电导率、厚度、相对 介电常数和损耗角正切等参数。根据该网络的结构特点，在考虑过孔对电路的影 响的情况下，按照上文所述的计算传输线和过孔电容电感的栩关公式，绘制传输 线的等效电路模型如下图2-13所示，图中詁个盧线框部分分别代表传输线和过 孔的电气模型。
圈2-13传输线的等效电路
为了分析该等效电路的性能，选用Advanced Designed System（UZ下简称为 ADS）软件来对电路进行仿真验证。将ADS仿真频率设置为0〜400MHz,步长为 50MHz,同时在电路的源端和负载端设置S参数端口 Termo
对于使用数值计算方法的电路参数，其SU参数的仿真结果如下图2-13所
示。
freq, MHz
图2T3常规数值计算方法的结果
对于使用矩量法和高斯积分法计算的电路参数，其参数是随频率不断变 化的非线性曲线。因此存在两种方法来表征出其S11参数曲线。其一是将参数随 频率的变化关系拟合为一段函数，这种方法速度快，但由于拟合函数与原曲线存 在误差，因此存在较大的误差。另一种方法是根据计算结果，按照一定的步长采 样，将不同频率下的仿真结果描点，即可得到使用矩量法计算参数的S11曲线,
20
抽取的点数越多，该方法的精度越好•使用第二种方法绘制的S11参数曲线如图
2-14所示。
频率(MHz)
图2-14矩量法计算的仿真结果
2. 4. 3 Cadence Sigr ity 中的反射仿真
为了验证该等效电路的准确性，本文采用对照实验的方式对仿真结果进行比 对和验证。在目前市场流行的板级仿真工具中，Cadence公司出品的Sigrity可以 为印刷电路板提供快速的全波电磁场分析，并且可以相对自由设置端口，该软件 能够提供多任务分布式计算能力，将大型复杂的任务分配给多个线程同步完成, 因此比其他全波仿真工具在速度上占据优势。
在分析反射问题时，在Cadence Sigrity中，首先选择该条传输线，根据该传 输线所涉及的器件为管脚设置IBIS模型，默认使用该PCB板上已经设置好的层 叠结构，同时设置左右两个边缘引脚设置端口，将仿真频率设置为0〜500MHz, 其自反射系数Si】的结果可以如下图2-15所示。
21
图2-15 Cadence SI中该传输线參数仿真结果

3.3.3建立PCB的拓扑结构
经过 PCB 文件的读取，获取了actiue_pi7is、passivejpinsSegs、Vias四 个序列集合，这四个集合中的序列可以根据坐标和器件名称连接起来。研究串扰 问题主要研究处于同一层的信号线之间的耦合，因此在构建拓扑时，一般都以有 源器件管脚作为开始点，对于不存在跨层的传输线，以有源器件管脚为结束点， 而对于存在跨层的传输线，以过孔作为该拓扑结构的结束点。
上述四个集合中，每个集合中的元素具有无序且不重复的特点，因此使用集 合(set)存储上述的四个集合。每查找到该元素的下一条元素信息，则从集合中 将已经查找到的元素删去(过孔除外)，其时间复杂度为0(1)。首先在队列(Queue) 中存入一条有源器件activejpin的信息，依据该有源器件的坐标，可以査询到与 该点相连的线段的一个端点的坐标，根据该线段的另一端点的坐标，可以查找与 该点相连的下一条线段的坐标。根据坐标点可以在无源器件管脚集合中査找到该 器件的名称，同时在管脚集合中查找到该器件的另外一个管脚(无源器件管脚基 本为2个)。过孔的坐标信息往往与线段的坐标相重合，在构建拓扑结构时，需 要注意在过孔处信号线常常出现分支的情况，即在Seps集合中可能存在多个seg 包含过孔的位置信息，因此过孔集合Vias在第一次遍历时需保持完整，不进行删 减操作。依次类推将上述信息使用深度优先搜索(DFS)算法在以上四个集合中
34 遍历，当遇到过孔或第二个有源器件时，停止查找。将査找到的信息依次存入队 列中，队列遵循先进先出(FIFO)原则，此时输出的即为一条互联线的拓扑结构序 列。
将最终建立的模型命名为modeGosstaik，其结构如公式3-9所示，其中。针对 Stratix IV GX FPGA开发板，共有120068条线段，7781个管脚和783个过孔， 读取和建立传输线拓扑结构的总用时长为10.624s。
modelcrosstalk = [activejpin^ segr ... passivejpirii ...segn ... activejpin^\ (3-9)

3.4.1建立PCB平行线段集合
根据3.2中对干扰因素的分析，可以得出与传输线耦合长度，传输线的间距， 层叠厚度和端接情况有关，因此需要构建一个能够包含上述所有信息的序列。
在进行串扰仿真时，确定两条线之间的耦合段是十分重要的步骤，可以近似 认为线间距不符合3W原则的平行双线互为耦合段。在3.1节中，介绍了串扰的 两种耦合方式中，当两条传输线相互正交时，其耦合的长度最小，当两条传输线 相互平行时，其耦合部分的长度越大。因此在进行数据抽取时，首先应筛选出不 同序列中相互平行的线段。在PCB布线的过程中，为了避免阻抗突变，减小信 号的反射，一般不采用直角弯直接转弯的布线方式，多采用E面弯曲、E面双拐、 H面双拐等方式，拐角的常见角度一般为120°和240° o
在3.3节中，读取PCB所得到的Segs集合中，每条seg包含了其起始坐标 (Xi")和终止坐标区2，冬)，利用公式3-10求解该条线与水平方向夹角的正切值 tand,每条seg都可以计算出该值。根据的数值，将tan &数值相同的seg 线段组成一个新的集合，这个集合记作Paralleln,可用公式3-11来表示，其中 n表示tan0数值。对于一个Parade!集合，包含了这块电路板中所有互相平行的 35
线段，其中部分线段可能互为耦合。如Parallel,包含了 segs集合中所有的 tan0=0的线段，即与水平方向平行的线段。
(3-10)
对于一个完整的拓扑结构，依照第3.3节中的分析，其中拓扑结构是由有源 器件管脚、无源器件管脚、线段和过孔四个集合中的内容以器件名和坐标位置为 检索项，逐条拼接而成，在不考虑序列的先后顺序的情况下，假设每个拓扑结构 对应一条网络，则一个网络中所包含的序列信息可以用公式3-12来表示，其中 网络的集合记作nets,单条网络记作net。在nets中，可以认为passivej)in中包 含端接的器件信息，Segs内包含导线的相对位置信息。
net = {passivejptn, activejpin, Segs, Vias}

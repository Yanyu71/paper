3.1.3PCIEDMA模块设计分析
数据经过MAC处理后进入到此模块，此模块主要负责网卡与主机之间的数据 交互，通过基于PCIE接口的DMA方式降低数据搬移时延。在第二章对DMA传输 方式的介绍中提到，DMA传输方式基于PCIE总线实现，需要对PCIE的事务层和 DMA控制器进行设计实现。
PCIE事务层在协议规范中包括PCIE接收和PCIE发送模块，为了对接收和发 送进行控制，本文加入PCIE控制器。总体设计如图3-3所示，主要包括PCIEIP核、 PCIE发送引擎、PCIE接收引擎、中断控制模块、DMA控制器以及PCIE控制器， 各个模块的功能以及设计将在第四章进行详细阐述。对于网卡来说，需要对描述符 进行读取以及解析，这部分功能由DMA控制器进行实现。其中对描述符的读取需要 以DMA读的方式将描述符从内存中读取回来，这个过程需要驱动以存储器写请求 的方式对网卡中描述符的相关寄存器进行配置，其中相关寄存器控制着描述符的读 取方式以及软硬件的交互，对描述符的读取设计是基于描述符的DMA传输方式的 重点。
图3-3 PCIE DMA模块设计框图

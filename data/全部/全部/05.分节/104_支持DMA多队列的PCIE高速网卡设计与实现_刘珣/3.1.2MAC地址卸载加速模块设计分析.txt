3.1.2MAC地址卸载加速模块设计分析
MAC地址卸载加速模块主要完成基于MAC地址的匹配查找操作。具体工作流 程为：在预处理阶段，用户根据实际需求下发解析字段和匹配规则。在处理阶段，首 先对经过MAC处理后的数据进行解析，解析操作只对包头部分进行处理，数据部分 保持不变。然后根据流表项对关键域进行匹配查找，重点对关键域的匹配查找方式 进行研究。每查找到相应的流表项后，根据流表项的规则进行转发。最后数据被丢弃 或者被转发到各个队列，完成数据的处理［佝。经过上述对数据处理工作流程的大致 分析，本文将设计方案定为如图3-2所示。
图3-2 MAC地址卸载加速模块设计框图
MAC地址卸载加速模块包括四个模块，即解析模块、匹配查找模块、配置模块、 动作模块。以接收为例，每个模块的具体功能为；解析模块负责对数据进行解析，将 数据包头中的域进行提取，之后将域发送到匹配查找模块；匹配查找模块将接收到 的域进行匹配，得到匹配结果并发送到动作模块；配置模块负责对解析模块和匹配 查找模块下发所要解析的字段和匹配规则。比如MAC目的地址或者包的长度；动作 模块则根据匹配上的域执行相应的动作，在第四章将对基于MAC源地址卸载模块 进行具体设计。
23

6.1论文工作总结
本文主要完成的工作如下：
第一，本文首先对目前产业界高速智能网卡根据不同架构和应用场景进行功能 和指标的分析和总结，基于以上提出本网卡的设计重点，即支持lOGbps的以太网速 率、支持协议栈部分功能卸载以及支持数据包的快速搬移，并对以上的关键技术理 论进行研究分析，得出本文网卡的主要功能、技术指标，并提出网卡总体设计框图， 然后对网卡中关键模块进行研究分析，其中关键模块包括PCS模块、MAC地址卸载 加速模块以及PCIEDMA模块。最后深入网卡系统，对关键模块整体进行设计分析， 并总结出各模块中的重点和难点，并针对重点难点对目前现有技术解决方案进行分 析比较，提出本文的设计思路和技术解决方案。
第二，根据确定好的技术解决方案。首先，对基于64b/66b编码的PCS模块进 行设计，其中包括64b/66b编解码器、加解扰器、TX/RX变速箱、Sync_Block模块， 其中难点在于接收时数据的同步头锁定，本文提出一种滑动机制，可通过硬件处理 能力强的特点高效完成同步，其中减少了同步头锁定的时间，并且容易实现；然后， 本文基于CAM存储器在MAC层中完成了 MAC地址的解析、匹配以及转发模块的 设计；最后，在PCIE总线接口部分，其主要负责与主机侧进行数据交互，为减少中 断CPU次数，采用了基于描述符的DMA工作方式将数据在内存与网卡之间进行快 速搬移。本部分主要基于PCIE IP核对事务层进行开发设计，其中完成了包括PCIE IP核配置、PCIE发送引擎、PCIE接收引擎以及PCIE控制器模块，然后对DMA控 制器进行总体设计，其中包括DMA读写操作、DMA寄存器以及中断控制模块。
第三，本文对各部分的功能进行仿真测试工作。其中对PCS模块、MAC地址卸 载加速模块以及PCIE DMA模块进行仿真测试。主要工作包括搭建测试平台，测试
67
平台包括测试激励、测试验证、被测部分。采用回环测试法，构造完整的测试路径。 并借助Vivado和Modelsim联合仿真完成各部分的功能仿真，仿真结果表明部分的 功能正确。

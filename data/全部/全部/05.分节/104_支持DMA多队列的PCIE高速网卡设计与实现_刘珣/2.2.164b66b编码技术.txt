2.2.164b66b编码技术
目前以太网协议中的接口部分中的PCS层采用的编码方式不同。如图2-3所示， 在千兆以太网中，以1000Base-T协议为例，其采用8b/10b的编码方式。这种编码方 式最大的特性为保证直流平衡，并且通过特殊的控制字符进行同步(lOOOBase-T协 议中使用K字符Pi】)。然而，这种编码技术在发送10比特位时，其中只有8比特位 是有效数据位，信道的传输效率只有80%,开销很大，带宽利用率不高。
为了支持高速率以太网协议，IEEE 802.3ae工作组提出了 64b/66b编码技术【词, 目的是减少编码开销，降低硬件的复杂性，并且相比于8b/10b的传输效率，其传输 效率达到了 97%。其可作为8b/10b编码的另一种选择，以支持新的数据和程序，在 后续以太网标准中都沿用该编码方式。由于其可接受的游程长度和低开销，64b/66b 编码技术成为高速互联通道、芯片间以及背板互联的主要编码技术【3現
11
目前，64b.66b编码技术主要应用于10G光纤通道(Fiber Channel)、10G以太 网［34-35］、40G以太网［叭1OOG以太网［37］和Xilinx的Aurora协议〔砌。在对64b/66b编 码技术进行设计实现时，不同于8b/10编码技术，主要体现在以下方面：
(1) 编解码规则复杂
64b/66b的编码规则需要根据输入的64bit数据块来产生相应的同步头(Sync Header块类型区(BlockType Field)以及块有效载荷(Block Payload)。64bit 的数 据块由8个字符表示，每个字符都有相应的意义。如果8bit为用户数据，则使用D 字符进行表示；如果8bit为控制数据，需要按照编码规则用不同的字符(S、T、0) 进行表示。当用正确的字符表示完成后，还需要按照字符的排列添加块类型区，不同 块类型区也代表着不同的含义。解码需要进行编码的一系列逆向操作［迢。
(2) 需要进行扰码/解码
对于64b/66b编码技术来说，其无法像8b/10b编码技术保证直流平衡。8b/10b 可以在8bit中插入2bit使长0或长1的位数不超过5位。但64b/66b从64bit中插入 2bit无法保证直流平衡。因此在64b/66b编码技术中需要采用扰码(ScamblingCode) 进行直流平衡［39］,即对64bit的数据块进行比特级的随即处理，减少长0和长1的岀 现，从而减少码间干扰和抖动，方便接收端的时钟提取。在发送端需要特殊的扰码机 制进行扰码，并且在接收端需要进行解扰。
(3) 位同步对齐
在8b/10b编码技术中，有用于接收端同步的K字符。而在64b/66b编码中只有 2bit的同步头用于同步，需要在lOGbps传输速率下在66bit中找到2bit的同步头， 从而进行同步对齐，因此在接收端需要一种快速的同步机制，且不会做重复判断。目 前对于这部分内容普遍采用滑动窗口机制对同步头的进行锁定〔*35,40］,即以66bit为 窗口进行滑动，每次对前2bit进行判断，如果判断为有效头，则继续判断，直到判 断次数到达设定值；如果判断为无效头，需要移位重新选取新的66bit进行滑动。

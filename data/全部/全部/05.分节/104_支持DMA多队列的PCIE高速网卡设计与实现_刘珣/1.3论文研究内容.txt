1.3论文研究内容
无论从学术角度还是产业发展的角度，对于高速智能网卡的实现依然需要做很 多细致的工作，这对国内关于高速智能网卡的发展将产生重要的指导作用，同时为 了满足数据中心以及金融领域等场景对于高吞吐量低时延需求，本文将基于千兆以 太网卡架构进行改进和优化。不直接使用国外的IP核进行实现主要由于：第一，支 持国内关于高速智能网卡研究和实现的发展，提升自主设计能力。第二，对于数据安 全非常重视的金融交易和军事等领域，避免造成数据泄露。
本文基于现有千兆以太网卡架构重新设计成万兆以太网卡，并且对其中的关键 模块进行改进和优化。具体改进优化如下：设计实现基于64b/66b编码技术的物理编 码子层(Physical Coding Sublayer, PCS)；采用内容可寻址存储器(Content Addressed Memory, CAM)技术在介质访问控制层(MediaAccess Control, MAC)中对 MAC 地址的匹配查找进行设计，增加基于MAC地址卸载加速模块；设计实现支持基于 PCI-Express的直接内存访问(Direct Memory Access, DMA)工作方式，并采用基于 描述符(Buffer Descriptor, BD)的方式对PCIE事务层以及DMA控制器进行设计 实现。本文通过VHDL硬件描述语言通过Vivado平台对各部分进行RTL级的代码 设计，并且使用Vivado+Modelsim进行联合仿真。下面对各部分内容进行介绍。
第一，网络数据流量的增多主要由于高速带宽的升级，从过去的千兆以太网到 现在的万兆以太网普及，用户对于线路速率的需求越来越大，千兆以太网接口速率 难以满足目前带宽的需求。本文基于64b/66b编码设计实现PCS模块，根据 IEEE802.3ae中PCS模块的规范设计出64b/66b编解码器、加解扰器、收发变速箱等 模块，其中采用一种滑动机制重点设计实现了接收通道中的Sync_Block同步头模块, 解决了高传输速率下数据快速同步的问题，满足了 lOGbps带宽的需求并且降低了传 输时延。
第二，传统的协议栈工作方式成为网络加速的瓶颈，目前业界将网络功能或网 络协议下放到硬件网卡中，从而减轻处理器的负载，释放CPU的资源，加快网络处 理速率。本文在MAC层对基于CAM存储器的MAC地址的配置、解析、匹配查找 和动作模块进行设计。
第三，用户对于多业务类型以及超低时延的处理需求日益增多，网络虚拟化技 术的出现虽然可以支持多业务类型，但随着业务类型的升级，数据流量快速增长，在 数据转发到主机侧这一过程中同样占用大量的CPU资源。本文设计基于PCIE的 DMA技术降低转发时延。其中基于描述符的DMA工作方式对PCIE事务层逻辑以 及DMA控制器进行重点设计和实现。

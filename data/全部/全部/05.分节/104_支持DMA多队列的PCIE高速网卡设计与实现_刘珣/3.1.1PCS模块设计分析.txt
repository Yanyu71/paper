3.1.1PCS模块设计分析
PCS模块的功能是完成编解码操作，主要围绕64b/66b编码技术进行设计。以发 送过程为例，由于采用了 64b/66b的编码方式，万兆以太网线路速率为10.3125Gbps, 即PCS模块发送到PMA的速率为10.3125Gbps,考虑到FPGA要求低时钟频率，需 要提高发送数据位宽，本文采用64bits数据位宽，PMA发送时钟为 10.3125Gbps-646/75 »161.13MHz □同时为了保证时钟同步，MAC的发送时钟同样 设计为161.13M血。
在64b/66b编码方式中，不能保证直流平衡，即不能避免1和0连续的出现。因 此需要对64bits数据进行扰码，需要扰码器做伪随机处理。在经过编码后，采用多 项式进行扰码器的设计。在进行发送之前，还需要将66bits的数据位宽转为64bits数 据位宽，因此再经过扰码后，本文加入变速箱机制做位宽转换。接收过程为发送过程 的逆过程，需要完成接收时的位宽转换，解码以及解扰操作。并且，接收过程中需要 做同步头锁定的操作，即找到66bits中的2bits的同步头,是本文设计的重点和难点， 经过上述分析，本文的PCS模块设计如图3-1所示。
MAC层发送时钟	MAC层接收时钟
图3-1 PCS模块设计框图
22
在PCS模块中将数据通道分为两部分：发送通道和接收通道，分别记为TX通 道和RX通道，两条通道互逆。在TX通道中设计了 64b/66b编码器、扰码器、TX 变速箱。在RX通道中设计了 64b/66b解码器、解扰器、RX变速箱以及Sync_Block 同步模块。第四章将对收发过程以及各模块的功能进行具体设计。

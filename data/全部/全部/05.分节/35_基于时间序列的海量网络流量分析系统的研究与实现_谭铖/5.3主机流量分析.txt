5.3主机流量分析
在本节中，我们展示了一些实验结果来测试系统的准确性。实验数据是上节 中所展示的复合会话处理后得到的主机流量实时表的一天的数据。探测器以每 10MIN为粒度上报数据，进过整合成每小时粒度后，再对其进行异常检测。原 因是因为企业网主机乃至企业网整体的样本容量太小，样本随机性太大，若再按 照10MIN的粒度进行计算，则误差可能会很大。但是将数据整合到小时粒度后, 整体随机性大大下降，实验结果较符合预期。实验结果图如下：
某主机某天的数据流量和检测图
图5?3某主机某天的数据流量检测图
从图中可以看到，在该用户（主机即可认为是一个用户）的流量记录中，共 存在三个异常值点。从0点到8点，该用户的整体流量偏低，从实际生活角度看, 这种情况也较符合预期，因为0点到8点为非上班时间，该用户的流量数据较少 符合实际。另一方面，数据流量并不为0,可能由于该用户未关机的，而电脑上 的一些软件自动安装更新或者缓冲等产生。在此期间，3点至4点，有两个明显的数据流量高峰，甚至超越了平时14-17点的数据高峰，与之前十天的数据预期 不符，因此极有可能为异常值，与检验结果相一致。从8点开始，数据量渐渐增 加，可能是8点至9点为上班时间，用户回归工位且开始正常使用。到11点时， 可以发现用户流量出现了一个小高峰，此时刚好为午休时间，因此该用户可能去 吃饭或者开始缓冲一些视频来观看。从下午1点开始到17点，该用户流量保持 高流量运行，说明开始了下午的工作且持续到下班。从19点开始到23点，可以 发现流量由高峰逐渐降低到趋近0,此时用户应该已经下班，不再进行高流量的 网络使用。在19点时候出现了异常，说明此时用户的流量应该已经趋于0,但 是此时流量仍旧很高，与平常的行为有异，因此判定为异常。产生这种情况的原 因有可能是数据异常，也有可能是用户平时不加班，当时加班到较晚。因为用户 主机的随意性，因此属于哪种行为并不好判断，但是可以看出，检测算法还是很 有效的。

2.2.2实时流处理技术概述
Hadoop等大数据处理技术发展到现在，优势渐渐明朗，即处理离线非实时 数据。而对于实时的海量数据处理，Hadoop则显得力不从心。随着大数据的发 展，对于实时海量数据的处理的需求也变得越来越迫切，实时的流计算也继 Hadoop批处理后成为下一个大数据领域的技术热点。迄今为止，比较热门的实 时流处理技术有Twitter Stonn, Yahoo! S4[11]o其中最成熟使用最多的当属Storm, 而S4和Storm在各方面都很相似，最明显的区别在于S4没有像Storni那样可靠 的消息保障机制。
Storm
Storm是由尼森马拉斯设计提出的、专门用来处理实时大数据流的计算框架。
Strom的处理数据的机制很特别，这使得其与其他的大数据技术框架都不同。 Hadoop的本质是批处理，数据首先被存入HDFS上后，Hadoop才会对其进行切 分、计算，最后将结果返回到HDFS进行存储，这样做虽然可以处理的数据量变 大了，但是牺牲了实时性。而Storm则不同。Storm通过建立拓扑(Topology) 结构，当数据产生时，即被传输、处理、入库，这种机制就保证了在计算资源充 足的情况下，延时降到最低。此外，这种拓扑结构一经开始，除了人为终止或者 集群宕掉，将一直运行下去。
Storm的拓扑结构包括：源源不断的流数据Stream；消息的生产者，负责从 外部数据源获取数据并发射数据的Spout；消息的处理单元，负责接收数据并对 数据进行计算，最后再将数据发射的逻辑单元的Bolt；负责具体任务的处理的工 作线程,Spout和Bolt最终通过Task实现工作;负责启动Task的工作进程Worker 等洛个Bolt组件及Spout与Bolt之间的数据分发方式由Stream Grouping定义， 共七种,常用的一般为Shuffle Grouping。
S4
S4是Yahoo!提出的分布式流计算模型，旨在提供接口简单、可扩展、低延 时、易于维护、可插拔的、易于编程的大规模分布式流计算服务，设计之初是为 了解决搜索所推送广告的精准度，预测用户对广告的喜好，使广告有效点击率上 升的需求。
S4中定义的流数据为(Key,Attribute)形式的键值对，另外还有EventType 来表征每个流的类型。S4由一^个的数据处理单元(Process Element)组成，每 个Process Element只处理其对应的EventType, Key, Attribute都符合的流数据, 计算完后将结果反馈给下一个PE。若是本次流数据没找到相对应的PE进行计算 时，则S4会自动创建一个新的PE,因此每条数据都基本能被处理。但是这就导 致了 PE过多可能形成冗余，占用资源。因此S4会定期清理使用率较低的PE,
防止资源被占用。在进行PE的清理之前，由于数据保存于节点的内存中，因此 S4会对数据进行持久化处理，防止清理PE的过程中造成数据的丢失。
S4是一款很优秀的实时流处理平台，对于一些特定的实时作业，S4展现了 很好的效率和可操作性，速度也很快。但是S4的不足在于传输机制不够稳定， 在数据传输过程中可能发生丢失，没有类似Storm一样可靠的ACK机制。另外， 由于S4的数据保存于节点的内存中，一旦发生宕机，数据就会永久丢失，这一 点同样有待改进。

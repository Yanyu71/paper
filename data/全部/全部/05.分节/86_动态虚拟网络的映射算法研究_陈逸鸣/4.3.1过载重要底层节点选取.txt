4.3.1过载重要底层节点选取
由上文所述，高负载的非重要底层节点对于底层网络连通性的影响较小，对 这些节点上的虚拟节点进行重映射操作无法有效地改善底层网络的资源碎片化 问题，而且会造成重映射开销增加，甚至会导致“跷跷板问题”的出现。因此, 本文设计的虚拟网络重映射算法只对高负载的重要底层节点上承载的虚拟节点 进行重映射操作。
首先设定重要节点占全部底层节点的比例a,随后按照本文4.2节所设计的 综合多维度属性的节点重要性评价指标选取重要性最高的一部分底层节点作为 重要节点。重要节点的数量可以通过公式（4-25）进行计算，其中|皿|为底层网 络中的节点总数：
“”护=0寸弘|	（4-25）
对于底层网络中的节点心，其负载率可以通过公式（4-26）进行计算:
E CPU(nv)
nv—>MS
CPUing
其中分子部分表示被映射到底层节点"s上的所有虚拟节点的计算资源总和, 分母部分表示底层节点心所携带的初始计算资源量。
对于整个底层网络，底层节点的平均负载率可以通过公式（4-27）进行计算：
工 LRg
LR（N}= 一	（4-27）
在传统的虚拟网络重映射算法中，节点的负载率阈值是固定的常数，然而在 实际应用中，当底层网络中的节点负载率普遍较高时，固定的负载率阈值会导致 重映射算法判定大部分底层节点都处于过载状态，需要进行迁移的虚拟节点数量 过多，重映射开销会大幅度增加。除此之外，底层网络中的节点普遍处于高负载 状态会使得重映射算法难以找到合适的目标底层节点，导致重映射算法对于底层 资源碎片化的改善效果十分有限。
本文针对固定负载率阈值的缺陷，设计了一种动态节点负载率阈值，可以通
过公式（4-28）进行计算:
(4-28)
动态阈值的大小由当前底层网络中节点的平均负载率决定，当底层节点的负 载压力普遍处于较低的水平时，只选取负载率大于固定值4的重要底层节点进
52
行重映射操作。当底层节点的负载率普遍较高时，节点的负载率阈值被设置为整 个底层网络中节点的负载率平均值。在重映射机制启动时，选取负载率高于动态 阈值的重要底层节点加入有待执行重映射操作的过载重要节点集合。

4.2.4性能数据采集积累
部署基于Flume的性能数据釆集系统，并确定需要釆集的性能数据指标之 后，正式开始性能数据的采集积累工作。
所有性能数据的釆集粒度均为5秒。在整个性能数据釆集过程中，三个标准 应用程序会一直定时运行。期间，我们会人为执行某些操作，改变各子节点的性 能状态。如从某子节点上传大量数据至HDFS,增加HDFS的工作负载；在某子 节点运行非Hadoop应用程序的程序，占用一定CPU、内存等资源；在两个子节 点之间互相传输文件，占用一定网络资源等。通过这些操作，改变各子节点性能 状态，模拟分析系统正常运行时的工作状态。在此需要注意的是，在标准应用程 序开始之前所进行的操作，在标准应用程序开始至结束之前都不能改变，要保证 标准应用程序在整个运行期间，该操作始终保持其所占用的性能资源。因为后续对标准应用程序运行时间的预测，仅能根据应用程序运行之前的分析系统性能状 态为判断依据，如果在标准应用程序运行期间，停止某操作或者开始某操作，这 些改变引起的性能状态改变属于不可预知因素，对最终标准应用程序运行时间的 预测会产生不确定影响，进而影响最终评估结果的准确性。
由于本次测试实践环境所有节点的硬件配置均相同，且主节点相对于子节点 而言，其计算工作较为轻松，故主节点的性能瓶颈并不会有子节点那么突出。另 外，所有的应用程序的具体执行均在子节点进行，主节点仅负责调度工作，机器 负载压力并不大。故主节点的性能状况相对而言并没有子节点那么重要。此外， 本次选取的性能指标除了单纯的性能数据之外，还会有对性能数据的统计指标数 据，这只能针对相同工作负载的子节点而言，无法包括主节点在内。故本次测试 重点考察子节点的性能状况与标准应用程序的关系，暂不考虑主节点的性能状况, 则主节点的性能数据并没有进行采集。如果对主节点的性能研究产生需求，后续 可添加相应采集性能数据，完成进一步研究。
本次实践总共运行三个标准应用程序各25次，釆集积累2万余条历史性能 数据。完成性能数据的采集积累工作之后，需要对性能数据和标准应用程序的运 行时间进行建模分析。

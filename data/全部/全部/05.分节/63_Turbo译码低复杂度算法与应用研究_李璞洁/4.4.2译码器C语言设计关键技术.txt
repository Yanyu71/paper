4.4.2译码器C语言设计关键技术
进行Turbo译码首先要根据生成多项式建立格图，根据建立的格图我们就可 以知道编码在某一状态下输入为1或0时下一状态的情况和输出的校验比特。根 据CCSDS标准，本论文所设计的译码器状态表如表4-1所示。
通过对表4-1的观察，我们可以看到基于CCSDS标准的Turbo编码的状态 转移图存在如下规律：相邻的两个状态，如S。(0000)和S](0001)，在不同的输入比 特条件下会进入相同的状态，状态S。当输入比特为0时进入S。状态，相反状态显 的输入比特为1时进入S。状态；状态S。当输入比特为1时进入S8状态，相反状 态不在输入比特为0时进入工状态，我们可以用一个蝶形来描述上述状态转移 图。同理可得其他状态的蝶形图，由于CCSDS标准Turbo编码器由4个寄存器 构成，所以这样的蝶形状态转移图共有8个。
表4-1为编码器输出统计表，图4-24展示了编码器16个状态的蝶形转移图。
表4-1 CCSDS标准Turbo码编码器输出情况统计表
输入比特0			输入比特1
起始状态	结束状态	编码器1	编码器2	结束状态	编码器1	编码器2
So	So	000	00	S8	111	11
S1	S8	000	00	So	111	11
s2	S9	010	00		101	11
S3	S.	010	00	S9	101	11
S4	S2	on	01	Sio	100	10
S5	S,o	on	01	S2	100	10
S6	S„	001	01	S3	110	10
S7	s3	001	01	S„	110	10
S8	S4	101	11	S12	010	00
S9	S12	101	11	S4	010	00
S1O	S13	111	11	S5	000	00
Sn	S5	111	11	S,3	000	00
S12	S6	110	10	Si4	001	01
S.3	S14	110	10	S6	001	01
S14	S15	100	10		Oil	01
S15	S7	100	10	S15	Oil	01
CCSDS标准8蝶形状态转移图如图4-24所示。
75
图4-24 CCSDS标准8蝶形状态转移图
对图4-24和表4-1进一步观察可以看到，对于蝶形图中的每一个状态，在 输入为0和1时，编码器的输出比特刚好相反。例如状态 在输入0时，分量编 码器1输出为000,分量编码器2输出为00,在输入为1时，分量编码器输出为 11b分量编码器2输出为11,两者的输出比特相反。
T-SOVA.算法的Turbo码译码器定点设计还有一个关键技术即为分支度量的 计算。随着迭代的进行，路径度量值会不断增大，在定点算法中一定会造成溢出 问题，将影响译码的准确度，所以对于T-SOVA算法定点实现来讲需要对路径度 量值进行归一化处理。
所谓归一化处理，一般的方法是需要在每个时刻从计算出的分支度量中选取 最小值，将该最小值置为0,其他各值以此为基准减掉该值。但是这种方法要求 巨大的操作数量，对T-SOVA算法而言，由于基于CCSDS标准的Turbo译码器 存在16个状态，所以最坏情况下同一时刻会有16个扩展节点。首先需要从16 个状态值中找出最小值，需要15次的比较操作。找出最小值后再将每个状态值 和最小值进行减法运算，这又需要16次的减法运算。这种算法会大大降低运算 速度，在定点实现中并不能实现低复杂度译码的需求。由于T-SOVA算法的分支 路径度量用欧式距离表示，所以该值恒为正数，所以本方案采取了一种新的方法 防止度量值溢出，即触发门限防止溢出的方案。
该方案的设计思路是对路径的累积度量设置一个最大的触发门限，当一定数 量的累积度量值超过该门限时，对所有累积值减去一个常数，防止度量值溢出造 成译码错误。门限的大小选择和防止溢出超过门限的数量选择也非常关键，若门 限过低，则防止溢出操作应用太过频繁，影响译码效率；若门限过高，此时很多 度量值已经发生溢出，造成的译码错误也就无法再次纠正。所以需要在译码精度 和工程实现复杂度两者之间做出取舍。
本论文中我们将译码器输入信息定标为Q(16,l),即16位正数的一位代表整 数位，其余15位代表小数位。将分支度量值定标为Q(32,3),相应的路径度量值 76
定标为Q(32,16)o由于T-SOVA译码算法我们主要关心的是那些累积路径度量值 较小的分支，所以对于度量值较大的分支的溢出并不需要过多考虑，利用门限触 发相减法进行溢出控制，当被扩展节点的矩阵中，累积的路径度量值中一半以上 的数据除符号位的最高位为1时，将当前度量值除符号位以外的最高位置0,对 本方案而言即相当于对定点表示的该路径度量值减去23，
利用以上方法本论文提出的基于T-SOVA算法的Turbo码译码器进行C语 言定点实现，其定点性能仿真图如图4-25所示。
图4-25码长256基于T-SOVA的Turbo译码器定点性能仿真图
由图4-25对该算法的定点仿真曲线可以看出，利用以上定标方法和基于门 限触发的防止溢出方法，本论文所提出的低复杂度Turbo译码方案相较于浮点仿 真性能相差约为0.3dB,满足传输距离较远、传输时延较大的MIMO-SCFDE通 信系统对Turbo译码模块的性能需求。
本论文提出的基于T-SOVA算法的Turbo码译码器，相较于MAP算法、Log-MAP 算法和Max-Log-MAP算法译码复杂度大大降低，相应地对软件平台的要 求也大大降低。通过对本算法的定点设计可以发现，这一通过简化SOVA算法进 行Turbo译码的思路为该低复杂度Turbo译码算法应用到诸如DSP芯片、ARM 芯片及ZYNQ系列的FPGA芯片上进行信道译码提供了更加广阔的思路。
77

4.3.1基于RRT
在场景中，无人机在执行任务前已经对规划空间的地图有一定的了解并且规 划好了一条从起点飞往目标点的路径，但是飞行的过程中可能会遇到动态障碍物 和其它无人机。假设起始点为ps(X.w”,儿如,)，目标点为4 (xgoa/,yg<>al,zgoal), 无人机的飞行轨迹可以由一连串时刻的点表示，第i个轨迹点可以表示为
,则从起点到终点的轨迹可以表示为：
54
Path = {(x,j, z J,心 start, start +1,…,goal}	(他］)
假设无人机的等效半径为&“，无人机在飞行过程中通过一体化探测可以识 别周边环境中的障碍物和无人机，并且根据探测的环境信息预测冲突。无人机在 感知过程建立动态障碍物球体模型，得到动态障碍物的等效半径为利用扩 展卡尔曼滤波器融合观测信息和障碍物的运动方程测的信息，估计动态障碍物在 t时刻的位置为：
= (xo4.t (0) (4-22)
无人机通过扩展卡尔曼滤波器预测的动态障碍物轨迹信息，并将动态障碍物 更新到在规划空间的地图中。通过判断无人机飞行轨迹点和轨迹点上的任意一点 P川Path与动态障碍物的最小距离是否大于最小安全距离，预测是否会与之发 生碰撞。如果预测t时刻与动态障碍物的距离小于最小安全距离，判断为将发生 碰撞，存在路径冲突时有：
(4-23)
其中D咏为最小安全距离。
将扩展卡尔曼滤波器预测的动态障碍物轨迹加入规划区域的地图中，假设预 测到冲突的路径区域为加呢碗” ={(x,^„z,),/ = v,v + l,---w}，修剪去除冲突的 路径部分。无人机在到达最小反应距离之前必须执行碰撞避免策略，碰撞避免后 的位置为0 (wj,则以O(xc,yc,zc)为起点，寻找到达终点的路径，对路径 进行重新规划。在路径重新规划过程中充分利用上一次路径规划的搜索结果和扩 展卡尔曼滤波器预测的障碍物轨迹信息辅助生成新路径。用集合START = { }和 End = { }分别装起点和终点相关的点集。路径重新搜索开始的时候往集合 中装入起始点0,即START = {{xc,yc,Zc)},往集合E加中装入删剪后仍 然和终点连通的路径点，EP End = ^xJ,yJ,zJ^j = w+\,w+2,---,goal^。根据 RRT* 算法生成新节点加入集合START中，循环这个过程。当存在P;START , P^EEND,使得隊”-爲』＜•认为完成一次路径重新规划，重新规划后的路 径能躲避普通障碍物和动态障碍物。路径重新规划的简单示意图如下：
(e)重置起点，借助历史信息路径重新规划
图4-10路径重新规划
56
无人机集群在动态障碍物环境中的碰撞避免和路径规划算法分为雷达探测 范围之外无人机路径共享和雷达探测范围之内的防碰撞，没有成功握手的无人机 间可以把对方当作是特殊的动态障碍物处理。假设无人机从各自的起点开始朝着 目标点飞行执行任务，无人机在飞行的过程中利用RRT*算法找到起点到终点的 路径。无人机的一体化探测根据目标的响应，可以识别对方是无人机还是普通障 碍物，如果对方是无人机，在一体化探测的过程中也完成了握手通信。
在雷达探测范围之外，无人机间可以通过通信信号共享飞行路径信息，在生 成路径的过程中将参考其它无人机的飞行路径信息，躲避障碍物的同时也需要保 障无人机间的路径没有冲突。如果发现已经规划好的路径和其它无人机存在路径 冲突，预测冲突的区域，修剪RRT树，在完成删减的路径上重新规划路径，保 留原来有效的探测信息。对于动态障碍物或者尚未成功通信的无人机，无人机不 能通过远距离通信共享轨迹信息，无人机在飞行过程中可以通过一体化信号进行 感知，利用扩展卡尔曼滤波器对动态障碍物进行预测，为了避免路径重新规划不 及时而造成的碰撞避免失败问题，首先对动态障碍物进行碰撞避免再进行路径重 新规划。
具体流程如下：
图4-11无人机集群信息共享的方式
57

4.3.3虚拟身份合并
我们认为多个虚拟身份在很小的一段时间内同时出现在同-MAC地址上即属于同一使用人。所以我们设置一个跨度为一小时的时间窗口，然后出现在同时间窗口内的所有虚拟身份很可能属于同--使用人。但是,也会出现特殊的情况如图 4-2(a)。很有可能属于同一使用人的两个虚拟身份 A 和 B 被划到两个不同的时间窗口，造成的结果就是该属于同一使用人的虚拟身份没有合并到一起为了解决这个问题，我们可以将时间窗口移动半个小时，如图 4-2(b)。这样就不会漏掉恰好在时间窗口两边缘的虚拟身份组。最后，我们会在后面的步骤中将这两种情况进行合并。
时间口的确定
首先，对 first time 和last time 取平均值 avgTime=(first time+last time)/2然后将 avgTime 分别转换成半点时刻和整点时刻。
1.半点时刻的时间窗口(getHourHalfO)小时数:nHour=((avgTime-60x30)/(60x60))X(60x60)分钟数:nMinute=avgTime%(60x60)。如果nMinute小于等于30，返回nHour+60x30否则返回(nHour+1)+60x30
2.整点时刻的时间窗口(getHourTime0)小时数:nHour=((avgTime)/(60x60))X(60x60)分钟数:nMinute=avgTime%(60x60)。如果nMinute小于等于30，返回nHour，否则返回(nHour+1)

2.2.2基于时间的定位技术
信号在介质中从发射端传播至接收端需要经过一定的时间间隔，该时间间隔称为信 号的到达时间（TOA）。一般无线电磁波在空气中是以光速C = 3X108^/$的速度传播，
11 因此可由TOA得到收发两端的距离，进而用于定位解算。TOA定位的基本原理如图2-4所
示：
图2-4 TOA定位原理
通过上图可知，要想利用到达时间进行终端位置坐标的解算，需要保证终端能同时 接收到三个及三个以上的基站信号，并且还要求基站和基站之间、基站和终端之间保持 时钟的同步。
在三个基站都处于视距的情况下，假设第/个基站的位置坐标为(兀,必坷)，待估计 终端的坐标为(x,y,z),第Z个基站和终端之间的传输时延为因此可以联立方程组， 得到：
J(x _	+(y-x )2 +(z_zj2 = c * 巧	(2-2)
然而，上述求解过程是在时钟保持严格同步，且没有非视距多径信号的干扰下得到 的。在实际定位过程中，由于设备精度因素的影响，不可避免的会受到时钟同步误差； 同时，由于某些定位场景的复杂性，例如在地下停车场、写字楼等环境下，出现信号的 折射、反射、投射等现象，非视距多径效应较为严重。在这种情况下，多个基站的传输 距离所交出来的不再是一个点，而是一个区域，一般通过取该区域的质心的方法得到最 终的定位结果，但定位误差仍较大。
为了尽可能消除终端和基站之间的时间同步误差，基于到达时间差(TDOA)的方 法被提出。该方法在估计得出终端到多个基站TOA的基础上，相互作差得到TDOA值， 这就将基站与终端之间的同步误差一一抵消。同样的，基于TDOA的位置解算方法仍需 要终端接收到三个及三个以上的基站信号。TDOA的基本原理如图2-5所示：
12
图2-5 TDOA定位原理
将终端和三个基站之间估计得到的TOA值两两作差得到三个TDOA值，根据双曲线 的特点，求解双曲线的交点即为接收端的位置坐标：
TDOA^TOA^TOA,
-TDOA2 = TOA,-TOAX	(2-3)
TDOA^TOA^-TOA^
其中，T04由式(2-2)表示。因此可以求解上述方程组得到待估计终端的位置坐 标。基于TDOA的定位解算方法一定程度上抑制终端和基站之间的时钟误差带来的测距 误差，对非视距多径的处理方法也更加多样，应用范围更加广泛。

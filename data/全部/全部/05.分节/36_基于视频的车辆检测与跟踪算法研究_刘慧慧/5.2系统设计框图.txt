5.2系统设计框图
下面框图是整个系统流程框图：
图5-1系统流程图
首先读取视频每一帧，对其通过图像预处理，包括图像灰度化和图像中值滤 波去噪，预处理之后的图像更有利于背景建模。然后基于帧差计数法进行背景图 建立，当建立完成时，用这个背景图去初始化ViBe算法，抑制了鬼影的产生， 从而二值的前景检测图像，并且更新背景模型。
前景二值图中不仅包含车辆区域还会包括阴影区域，通过无参化HSV与LBP 融合算法检测出阴影区域并去除,算法不需要参数调整的过程，具有广泛适用性。 最终检测的车辆前景区域是去除阴影的车辆目标区域。
对车辆的跟踪是基于粒子滤波框架的，在跟踪过程中可能存在车辆遮挡现象,
因此还需要遮挡处理，遮挡处理主要分为遮挡检测与遮挡分割，通过基于轮廓的 遮挡检测算法检测出遮挡区域，对于遮挡区域，首先通过直方图均衡化和灰度变 换增强图像块对比度，然后利用一维最大嫡进行分割，再利用椭圆拟合分割后的 遮挡车辆，并找到分割线，实现对遮挡区域进行分割。车辆跟踪釆用一种基于差 异HOG特征与3D HSV特征融合的观测模型，通过粒子滤波的状态转移方程以 及观测方程匹配出车辆，如果检测出是新出现的车辆，则分配一个新的车辆ID 号，已经出现过的车辆，釆用匹配的上一帧的车辆ID号。

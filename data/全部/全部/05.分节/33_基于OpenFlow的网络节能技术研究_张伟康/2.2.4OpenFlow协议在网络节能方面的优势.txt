2.2.4OpenFlow协议在网络节能方面的优势
前一节详细的介绍了 OpenFlow协议的具体内容，包括流表、匹配流程，以 及OpenFlow协议规定的三类信令，其中流表是OpenFlow网络中控制和数据转 发分离的重要部分。由于OpenFlow网络中控制和数据转发功能相分离，网络的控制信令通过安全通道发送到交换机，所以在OpenFlow网络中控制信令产生的 网络开销相对较小。根据前文介绍的OpenFlow三类消息的具体内容，本节具体 分析OpenFlow协议具有若干特性，可以有效解决传统网络中进行网络节能遇到 的实时流量统计困难，网络信令开销大等问题。
1.控制器可以方便地周期性获取OpenFlow交换机端口的流量
在OpenFlow协议中，控制器可以通过Read-State消息来获取交换机每个端 口的流量，也就是网络中每条链路的流量。
为了能够精确的获取到各个交换机的流量统计信息，控制器周期性的去查询 各个交换机端口中的流量（以字节为单位），然后利用两次查询之间的差值作为该 端口有关链路的流量信息，通过该值与链路容量的比值，就可以计算出包含该端 口的链路利用率。
首先定义一个获取流量的周期T,在本论文中设定的査询周期是T=5s,控 制器通过向每一个交换机发送一个STATS_REQUEST消息，去请求各个交换机 的端口的流量信息，然后各个交换机会向控制器发送一个STATS_REPLY消息， 该消息中包含了该交换机各个端口当前接受和发送的字节总数，然后控制器会保 留该字节信息，当下一个周期到达时，控制器继续向交换机发送获取流量统计信 息的请求消息，通过两次査询到的字节信息，求差值，可以计算出当前的交换机 端口的流量速率。
每次査询交换机上流量信息的网络开销是非常小的，请求消息和响应消息的 包的大小分别是8字节和104字节（根据OpenFlow协议具体定义得到）。
2.控制器能够控制OpenFlow网络中链路的开启和关闭
在OpenFlow协议中，支持通过Modify-State消息去控制网络中网络链路的 开启（up）和关闭（down）操作，通过网络链路的开启和关闭，可以将原有的 网络拓扑进行一部分的裁剪，然后对网络中的数据流进行重新的规划路径，从而 可以到达网络节能的目的，这是在OpenFlow网络中能够进行网络节能的基础。
3.控制器能够方便实时获取全网拓扑
链路发现技术是软件定义网络获取全网信息的基础，OpenFlow控制器通过 使用链路发现协议（Link Layer Discovery Protocol, LLDP）作为链路发现协议。 控制器执行链路发现的过程中，控制器会以PacketOut消息来想与之相连的交换 机发送LLDP的数据包,该消息会使交换机将LLDP的数据包发送给所有的端口 o 控制器通过接下来收到了的Packetin的消息，建立整个网络的拓扑视图，拓扑发 现的机制在控制器中是周期性执行的。
根据OpenFlow协议的规定，当交换机的网络端口状态发生变化时，会向控 制器发送一个Port_Status消息，该消息表示底层网络拓扑发生变化，通过该消息控制器得以感知网络的变化，从而可以实时掌握网络拓扑的状态。
4.控制器能够随时更新数据流的传输路径
当达到交换机的数据包没有匹配的流表项时，交换机会向控制器发送一个 Packetin消息，控制器会为该数据包计算传输路径。当网络的拓扑和负载状态发 生变化时，控制器也可以通过Modifystate消息对流表项修改，从而可以实时的 更改数据流的传输路径。

2.2.3OpenFlow消息类型
OpenFlow交换机通过安全通道利用OpenFlow消息与控制器进行通信，如 图2-2所示。在OpenFlow协议中，定义了三种类型的消息：控制器到交换机的 消息、异步消息、对称消息。
1.控制器到交换机消息(Controller-to-Switch Message)
顾名思义，该类型消息是由控制器发送到交换机的消息，主要用于管理和 获取当前交换机的状态信息，包括Features消M. Configuration消息、Modify-State 消息、Read-State 消息、Send-Packet 消息、Barrier 消息。
1)Features消息：控制器通过Features消息可以获取交换机的特征描述信 息，当控制器和交换机建立连接后，控制器就可以通过该消息获取交换机的特征 描述信息；
2)Configuration消息：控制器通过Configuration消息配置交换机的一些参 数；
3)Modify-State消息：控制器通过该消息可以修改交换机的状态，可修改的 状态包括流表信息和端口状态信息等；
4)Read-State消息：通过该消息可以获取交换机的状态信息，控制器可获 取交换机的状态信息包括流表的查询、端口信息的查询以及其他的统计查询；
5)Send-Packet消息：控制器可以通过把该消息通过交换机的某个端口发 到数据平面中，用于转发数据包；
6)Barrier消息：控制器通过该消息来确保之前下发的消息已经被交换机执 行完毕；
2.异步消息(Asynchronous Message)
异步消息主要是由交换机发送到控制器的消息，主要用于交换机通知控制器 网络和交换机状态的变化，该类型的消息包括：Packet-In消息、Flow-Removed 消息、Port-Status 消息、Error 消息。
1)Packet-In消息：当到达交换机的数据包没有匹配的流表表项时，就会向 控制器发送Packet-In消息。如果交换机有足够的缓冲区时，首先将该数据包放 入缓冲区，然后数据包的包头信息和缓冲区编号以packet-in的方式发送到控制 器。如果交换机没有足够的缓冲区空间，就把该数据包全部发送到控制器；
2)Flow-Removed消息：当交换机中的流表项因超时被删除或者被控制器下 发信令删除时，都会向控制器发送该消息，用于标识该流表项发生了变化；
3)Port-Status消息：当交换机的端口状态发生变化时，交换机就会向控制 器发送该消息，比如交换机端口被置为down或者up时，就会向交换机发送该 消息；
4)Error消息：交换机通过Error消息来通知控制器发生的错误消息；
3.对称消息(Symmetric Message)
该类型的消息可由控制器或者交换机的任意一方进行发起，并且该消息类型 一般是成对出现的，包括Hello消息、Echo消息、Vendor消息：
1)Hello消息：当交换机和控制器建立连接后，就通过该消息进行握手并且 协商使用OpenFlow协议的版本信息；
2)Echo消息：该消息主要用于指示交换机和控制器之间的连接的是否处于 活动状态、延迟和带宽等信息；
3)Vendor消息：该消息属于厂商的自定义消息，厂商可以提供额外的非标 准控制功能。

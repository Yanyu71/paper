4.1系统架构设计
本论文在前面章节介绍的相关背景以及相关技术基础之上，提出了可行性的需求分 析。针对上章所述的系统提供的主要功能，本章对各个模块进行概要设计。
物联网知识子系统搭建在物联网平台之上，结合发布订阅子系统进行事件接入，并 基于已有的物联网资源框架进行建模。通过对资源模型进行分门别类的管理，提供方便 的查询功能，同时结合一阶逻辑推理提供事件处理功能。
用户使用本系统的基本流程为：用户使用用户界面定义目标，然后后台会解析用户 定义的目标。解析用户目标会首先根据事件主题信息订阅事件，然后根据用户定义的推 理范围查询知识库获取与范围相关的本体知识，利用这些本体知识转化生成相应的一阶 逻辑表达式，并生成相应的范围推理器对象，范围推理器对象利用这些 阶表达式来进 行范围推理，最后利用目标中的约束信息生成目标一阶逻辑表达式，并生成相应的目标 推理器对象，用于验证目标是否成立。目标解析完成之后开始接收事件，每当订阅的事 件到来时，依据事件的领域信息获取事件模型并解析事件，然后生成事件对象。利用范 围推理判断事件是否是在推理的范围之内，如果属于推理范围之内则将事件和与之相关 的知识处理成一阶逻辑表达式，反之则不予处理并销毁对象。最后，将此一阶逻辑表达 式与目标…阶逻辑表达式一起利用目标推理器进行推理证明，根据目标能否被证明来对 事件进行相应的反馈，并进行结果的存储。推理完成之后，再将结果渲染呈现给用户。
是于以上流程，本论文将知识子系统分为用户接1丨、知识管理、卵:件接入、推理四 个模块。图4-1是系统架构图。
图4-1系统结构图
从功能角度分析，此系统各模块需要实现以下功能：
1）	用户接口，用户接口主要提供用户一个直观的使用界面。主要包括知识的基本 管理和目标事件定义两个功能，提供面向用户的知识增、删、改、查，通过增加中间索 引层，完成用户可视化知识与底层存储的本体知识关联。
2）	知识管理模块，知识管理模块包括物联网资源模型与实例的管理、事件的知识 定义、事件与资源的知识映射管理、以及抽取的复杂事件知识管理，其功能包括图形化 知识建模、知识存储、基于图的知识查询。
3）	事件接入模块，需要实现数据的接入功能，在已有的发布订阅消息中间件的基 础上实现事件的主题订阅、主题取消、事件转发、事件对象生成等功能。为了获取事件， 需要和发布订阅系统连接，从WSN获取主题树信息，判断订阅者订阅主题是否存在， 如果不存在可以及时建立主题以待订阅，获取主题之后根据订阅的主题列表获取事件。
4）	推理模块,实现知识发现和知识抽取等动态知识管理，即基于物联网资源模型， 对实时事件流进行处理，计算隐藏在资源模型和事件背后有价值的复杂事件。这包括目 标事件的解析、事件的知识转化、事件与推理单元的映射、资源实例与推理单元的映射、 资源实例工作范围推理、多推理单元的调度以及基于SMT证明的目标事件发现。
下面进行各功能模块的概要设计。

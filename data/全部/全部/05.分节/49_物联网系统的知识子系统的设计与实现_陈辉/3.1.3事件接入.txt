3.1.3事件接入
物联网平台最重要的特点就是事件，在前面提出了基于模型的事件推理机制，使得 推理功能具有了事件驱动的特性。但是推理本身是不具有所要订阅的一些事件和主题的, 因此这就需要一个可以提供获取主题和事件的模块。已有的基于主题实现的发布订阅系 统内部就已经定义了许多的主题。这些主题在发布系统之中都是以主题树的形式存储的， 主题与主题之间是父子关系，如果向发布订阅系统订阅了一个父主题时就会默认的不处 理此父主题对应的所有子主题。发布订阅系统能够基于事件收发消息，具有非常好的耦 合特性，是大规模分布式系统建立的有效方式，所以需要将基于模型的事件推理模块与 发布订阅相连。
在实现推理功能模块与发布订阅系统相连的时候，使用开发的事件接入模块来实现, 也即先使推理功能模块与事件接入模块相连，然后事件接入模块将订阅消息、发布和取 消订阅等消息中转，通过消息发送给发布订阅系统。虽然目前推理功能模块中Client 的数量比较少，理论上他们直接与发布订阅系统相连实现，实现订阅、收发消息是可以 的，但是当Client数量很多，多个事件处理服务同时向发布订阅系统订阅或者发消息的 时候就可能因为吞吐量不够，导致系统性能降低，所以釆用事件接入模块中转是有必要 的。除此之外事件接入模块还可以管理订阅者的地址，端口号，这主要是为客户端查询 订阅者地址提供方便，还可以实现对订阅主题进行管理，它可以从WSN发布订阅系统 那边获取主题树，如果事件接入模块服务所订阅的主题在发布订阅中不存在，那么事件接入模块会创建相应的主题，并且发布订阅系统那边也会添加相应的主题满足订阅者的 需求。图3-3为系统对推理功能模块与发布订阅系统相连的用例图。
图3-3数据接入用例图

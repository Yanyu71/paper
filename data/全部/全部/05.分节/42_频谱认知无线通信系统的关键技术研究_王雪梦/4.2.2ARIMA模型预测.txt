4.2.2ARIMA模型预测
平稳性判断
伍德里奇《计量经济学导论》里说：如果允许两个变量之间的关系在不同时 期随意变化，那么，在只能得到时间序列的单个实现的情况下，我们就无法知道 一个变量的变化如何影响另一个变量"I。这句话的意思是说在时间序列具有非 平稳性时，我们无法对其进行建模，所以对时间序列进行平稳性的判断是建立模 型的首要步骤。在时间序列呈现非平稳性时，要先利用差分法或其它方法去除时 间序列的非平稳性。判断时间序列的平稳性有几种常用的方法HA：
数据图直接检验法
自相关、偏相关检验法
特征根检验法
R*检验
其中自相关、偏相关检验法的原理是：对于平稳序列来说，由4.2.1小节的 理论基础可知，其自相关函数和偏相关函数要么具有截尾性，要么具有拖尾性， 不可能具有第三种形态。所以如果一个序列的自相关函数和偏相关函数既不截尾 也不拖尾，就认为序列非平稳，此时要通过差分或其它方法去除其非平稳性。
平稳性判断的第一步是得到零均值序列，所以要首先求取时间序列的均值， 然后将序列中的各个数据减去均值，然后画出此零均值序列的自相关和偏相关函 数图。如果函数图截尾或者拖尾，则证明时间序列是平稳的，直接进行下一步操 作，而如果函数图既不截尾也不拖尾，证明时间序列具有非平稳性，则要先去除 其非平稳性。
去除非平稳性
ARMA模型只能用来预测平稳性数据，而实际数据往往是非平稳的，所以 如果在利用自相关和偏相关函数图发现时间序列非平稳性之后，要先去除其非平 稳性，才能继续进行下一步操作。去除非平稳性的方法主要有：
小波分析法
小波分析法由于其优良的性能得到快速的发展，被广泛应用在信号分析、图 像处理等领域。在去除非平稳性时是利用小波分析将非平稳性的时间序列进行分 解，分解为多个平稳或近似平稳时间序列之和，然后再分别对各个平稳时间序列 进行建模，最后将预测模型进行非线性组合，得到非平稳时间序列的预测模型。
差分法
如果时间序列的非平稳性是由周期性带来的，那么差分法是一种有效的去除 非平稳性的方法。在实际应用中，可以先对非平稳时间序列进行一次差分，然后 对差分后的序列进行平稳性判断，如果非平稳，则进行二次差分。如果二次差分 后序列仍然具有非平稳性，证明差分法可能不适应于此时间序列，可以改用分解 法等别的方法。
模型阶数确立
由上…小节对ARIMA模型的分析可知，自相关函数和偏相关函数在模型阶 数的确定中占据重要地位。对于移动平均模型来说，超过g阶滞后的自相关函数 为零，而対于自回归模型来说，超过p阶的偏相关函数为零。但是在实际中，样 本的相关函数往往不会在理论截尾之后立马衰减为0,会有小幅度的震荡。
一般有两种方法来判断ARMA(p,q)的阶：
第一种是试验法，任取一组p和q的值，建立ARMA (p,q)模型，利用此 模型对时间序列进行拟合。为了验证取值是否合适，需要求得,原序列和拟合序列 的差值，如果差值是白噪声，那么证明此次试验得到了正确的结果，而如果差值 不是白噪声，那么要重新换一组值。试验法盲目性较大，所以一般会釆取第二种 方法。
第二种方法是首先固定ARMA混合模型中其中一个模型的阶数，然后利用 这个单独的模型进行拟合后，求取拟合序列和原序列的差值，再分析差值的相关 函数得到另一个模型的阶数。例如，可以先固定AR(p)模型的p值，利用AR(p) 模型对序列进行拟合，如果差值的自相关函数截尾，那么证明p值的选取合适， 并且将此截尾阶数作为MA的q值，而如果差值的自相关函数不截尾，证明p 值选取不合适，要重新进行p值的设置。
模型的训练和预测
在去除时间序列的非平稳性步骤中，如果利用的是差分法，则得到一个差分 后的平稳时间序列，在确定ARMA模型阶数之后，利用差分后的平稳时间序列 进行模型的训练，训练出预测模型之后，对未来值进行预测。而由于建模使用的 是差分后的序列，所以应该对预测值进行反差分，才能得到正确的预测值。
综上，利用ARIMA模型对数据进行预测时，基本流程如下图所示：
模型训练
*
预测
〔结束丿
图4-1 ARIMA模型预测流程

3.3网格模型和纹理图片的联合优化
Liang等人在文献［22］中经过研究表示大型MMORPG游戏Second Life中， 纹理图片贡献了网络传输数据量的61%-88%o这一结果非常符合开发者的习惯， 因为开发者会大量复用网格模型素材，通过替换纹理图片实现场景的搭建以及内 容的更新。面对庞大数据量的纹理图片，三维场景渐进式系统中对纹理图片的优 化是必不可少的。
本节提出了一个联合优化网格模型和纹理图片的算法，将两者之间的简化过 程联合进行，通过网格模型的简化信息指导纹理图片的简化。该算法的核心思想 是通过纹理图片本身的特性和简化的网格信息，在额定总采样像素数下，对纹理 图片的不同区域计算出该区域最优的降采样系数。基于前文研究的当前用于纹理 图片的压缩编码标准，本节设计的纹理图片渐进式压缩编码符合纹理压缩编码标 准。
本文通过纹理映射到三维模型表面后的采样点的比较衡量简化纹理与原纹 理之间的差异。假设两个有纹理映射的模型为S =< M,I >和5' =< M\T >,其中 M和M，分别是网格模型，I和I'分别是对应的纹理图片，那么两个模型之间的纹理 差异可以表不为：
d(S,S‘)=易“刘“川⑹)-『(P')ll	(3-31)
其中p和p'分别是网格上的顶点，1(?)表示模型顶点与纹理图片之间的映射关系， 这个函数没有具体的表达式，要从网格模型的属性信息中查表得到。
对上式继续优化，因为相同尺寸的图片区域映射到网格模型时，由于网格模 型在场景中位置的差异，显示时的屏幕屏变率有很大的差异，这一点与前文介绍 的Mipmap技术类似，参考Mipmap链的实现方式，在误差计算中引入权重W(), 该权重系数可以使用前文公式3-30计算的模型视觉重要程度表示，公式3-32改
32
进为:
d(S,S? =》w(p) X ||/(卩)一/'(矿)||	(3-32)
公式3-30就是简化模型M，与原始模型M的外观误差。
本节使用比率-失真度计算纹理图片不同块的最佳降采样率。假设有K个纹理 块，对第i(i = 1,2，…,K)个纹理块，计算降采样率为琉X咅时剩余像素数Gg和误 差口珥。目标是找到一组采样点以最小化总误差丫釘。®,并且满足iXiGg < Gtotalo可以通过最小化拉格朗日代价函数解决这个带约束的最小化问题：
厶U) = 丫角囚伽+祐伽]	(3-33)
通过对比取不同的值，以获得第i个纹理块的比特率-失真度(R-D)曲线。

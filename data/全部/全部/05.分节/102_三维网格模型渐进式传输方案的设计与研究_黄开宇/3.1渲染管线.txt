3.1渲染管线
由于三维虚拟场景的复杂程度很高，直接面向三维虚拟场景的处理较为困难。 为了能够更加简单有效地处理三维虚拟场景渐进式传输中相关场景的拾取的问 题，提出了预处理器算法。预处理器主要包含“场景描述”、“三维模型渐进式压 缩”和“兴趣区域算法”三个部分。通过预处理器中的场景描述和兴趣区域算法， 可以非常快速高效的完成相关场景的拾取。并且在该模块中完成了三维虚拟场景 内三维模型的渐进式编码。该部分在用户和场景交互之前完成，不会占用用户浏 览场景的时间开销。
渲染管线是图形处理器将三维场景转换成2D图像，并最终在显示器上显示 的过程，可以总结为应用阶段、几何阶段和光栅阶段。本文的重点不在对顶点着 色器和片元着色器的编程过程，而是希望通过渲染管线理解渲染过程，因此本文 不考虑光照计算、着色处理和纹理映射等流程，只考虑几何变换的情况， 3D渲染管线中的坐标变换的流程如下：
局部坐标系也称模型空间坐标系，渲染管线中的第一步是进行局部坐标到世 界坐标的变换。世界坐标系是虚拟空间的参考系，可以假定物体默认在世界坐标 原点，3D模型上的点相对于模型锚点的位置即是世界坐标系下的(Xw, yw, zw)o 当拿到3D模型在世界坐标系下的坐标后，会有两步可选操作，分别是物体消除 和背面消除。在可选的物体消除跟背面消除后，进行了世界坐标到相机坐标的变 换、透视变换、空间剪裁、屏幕投影这几个主要过程。简单的可以理解为物体坐 标在三个坐标系间的转换。世界坐标系是虚拟空间的参考系，可以假定物体默认 在世界坐标原点，3D模型上的点相对于模型锚点的位置即是世界坐标系下的 (Xw, yw, Zw)。相机坐标系是从虚拟相机中看到的参考系，相机坐标系(Xc, Yc, Zc)
17
中，原点为相机透镜的中心，坐标轴Xc轴与X轴平行，Yc轴与Y轴平行，Zc轴与相 机光轴重合，一般来说为了方便计算，常将相机放置在世界坐标系的原点或者Z 轴上。图像坐标系是在成像平面内，以二维图像为基准所建立的坐标系。一般可 以理解为（U,v）,原点为图像左上角点，坐标轴为U轴和V轴，表示物体所在的行 数和列数。屏幕投影就是模型的三维坐标到平面二维坐标的转换过程。

3.2.4网格重要程度
前文对本文涉及到的模型视觉重要程度计算方式进行了说明，本节将结合上 述的方法，为仿真场景应用做准备。为了能够确定不同视点下的模型显著性级别, 新增一个模型描述文件(MPD),有三个描述变量，分别是ID、Az和El。其中ID 为0到25,是根据视点集合观察模型得到的显著值的降序排列，Az和E1分别代 表对应的方位角和仰角。
通过用户在三维场景中的位置坐标(默认为相机坐标系)，需要计算出当前位 置与模型之间的方向向量与集合views中26个方向向量最接近的一个，从而计 算当前视角的视觉重要程度。因为集合views中是方位角和仰角坐标,通过式(14) 将这些坐标变换成笛卡尔坐标。
Xi = cos^elj) * cos (azi)	(3-26)
= cos(elQ * sin^azi)	(3-27)
Zi = sin(eZi)	(3-28)
集合views中的方向向量可以表示为$ = (Xj.ypZj),通过世界坐标系中的相 机坐标Pc以及模型坐标Pm，可以得到从相机位置看向模型位置的方向向量3：
C = Pm - Pc	(3-29)
假设方向向量3 = (xv,yv,zv),il过向量的点积公式，可以求出两个方向向量 的夹角cos 8严爺,筛选出集合views中所有方向话与3的最小夹角所对应的ID no
在3.2节中我们用VI表示网格的视觉重要程度，在3.3、3.4节中对基于集 合views的观察视点的显著性进行排序，场景中模型的重要程度MI可以表示为式
31
(3-30) o
M/(Q = (1 - 7/(0) * (s() + a)	(3-30)
VI表示当前LOD模型基于屏幕分辨率的视觉感知程度，s'为用户视角下归 一化到的网格显著性，为了网格显著性信息对视觉重要程度贡献的比重，a的取 值为｛0.05,0.25,0.5,0.&1｝。
在实际传渐进式传输的过程中，我们会先将模型文件进行多分辨率编码，生 成一个基础层和若干个增强层。计算当前视角下场景内所有模型的重要程度MI, 根据场景内所有模型MI的大小可以确定当前情形下的模型传输顺序，每次更新 当前场景中MI最大模型的一个增强层，完成后更新场景MI»

3.2.1基于视觉感知的模型重要程度计算
目前绝大多数应用中使用的三维模型都是基于三角形网格表示的，其表示精 度取决于三角面和顶点的数目。类似于纹理贴图的MipMap技术［殉，Y.Pan和 I. Cheng等人的视觉感知实验表明【42】［43］,由于人类视觉系统(Human Visual System, HVS)视觉分辨率的限制，当其顶点数超过一定的数目后，这些多余
24
的三角形顶点所表示的模型的几何信息对于HVS是不可感知的。
当观察不同简化率下的网格模型在不同视距时，其对应的关系结果如图3-7 所示，表示在不同视点距离处简化的3D对象的视觉退化情况，其中§是模型的 边界框的对角线长度。
三维网格模型简化引起的视觉质量的下降是视距、简化率的函数。设VI丘 [0,1)表示三维网格的视觉重要程度，则可用式(3-12)来表示：
VI=f(D,R)	(3-12)
D e [0,+8)表示视点与观测三维模型包围盒中心之间的距离，R G [0,1] 表示三维网格简化模型的简化率。VI - 1表示模型的视觉质量不断的增加，当 VI=1时，此模型达到最佳的视觉质量，可以认为不在需要对这个模型继续进行 更新。
可以用下面的公式来计算LOD模型的视觉质量：
其中，area表示在屏幕上模型边缘盒的像素面积。F代表未简化的模型的三角面 的个数。f代表LOD模型的三角面的个数。通过模型的简化率可以计算f：
f = R*F
精度由完整模型中的平均面部大小与LOD中的平均面部大小之闻的比率确 定，其中F和f是这些的估计值。忽略一个像素以下的面的大小，而是将其视为 一个像素，因为这种高精度将不再提升视觉质量，如图3-7所示，随着对象在屏 幕上变小，整个模型的面的精确度在减小，当LOD的面部区域的精确度低于1 像素时，该模型就会被认为具有完整的质量。
相机的投影过程分为透视投影和正交投影。透视投影常用于模拟人类的视觉 系统，在3D渲染中被普遍使用。透视投影的效果非常依赖相机内参，包括相机 的焦距、成像平面的宽高比、相机中心轴向偏移等。
25
1	3	5	7	9
视距⑻
图3-7不同简化率下的网格模型在不同视距下的关系
为了将三维模型在2D屏幕上显示，需要经历世界坐标系、相机坐标系、投 影坐标系到屏幕坐标系的一系列变化，这里仅为了计算投影后模型在屏幕上的像 素数，将问题简化成从相机坐标系到投影坐标系以及从投影坐标系到屏幕坐标系 这两个过程。OpenGL以及D3D等3D APIs都提供了函数为用户提供快捷的透 视矩阵生成方法，可以实现从相机坐标系到投影坐标系这一过程。本文以OpenGL 中的方法gluPerspective(fov, aspect, near, far)为例，该方法中有四个参数，其中fov 为视场角，是视锥体在yz平面的开角角度，aspect为投影平面的宽高比，near是 视点到近裁剪平面的距离，far是视点到远裁剪平面的距离。area的计算公式如 (3-15):
26
其中Pscr代表显示屏幕的像素数，area°bj表示对象在近裁剪平面上的面积, areanear表示近裁剪平面的面积。areaobj可以计算为：
(3-16)
areanear可以计算为：
areanear = aspect * (2 tan |£>near)2
假设在相机坐标系中，对象边缘盒顶点坐标分别为(Xi, y13 Dobj), (x1; y2, D°bj),(X2, y13 Dobj), (x2, y2, D°bj),那么在相机坐标系中对象的面积为：
areacamera = |(衍 一 x2) (y1-y2 )1	(3-18)
根据视点与观测三维模型包围盒中心之间的距离D、模型简化率R以及相 机参数和显示设备分辨率等相关参数，能够计算出该LOD模型的视觉感知质量。 3.2.2基于中心-周围机制的网格显著性计算 '
在三维网格模型的视觉感知处理上，视觉注意机制是最广泛使用的一种视觉 感知特征，包括自下而上的视觉注意机制和自上而下的视觉注意机制这两个方面。 ITTi等人〔的提出了最有效的自下而上的显著性计算方法，本文依据他们的中心- 周围机制来提取特征，选择使用Lee等人〔34］的方法计算三维网格的显著性。
曲率是用来描述网格变化情况的一个维度，用C(v)来表示均值'曲率，该计 算方式选择文献［34］中的方法。假设N(v, o)为到顶点v的距离小于o的所有点 的集合，N(v, o)可以表示为公式3-19。o的取值为{2£,3E,4E,5E,6E}, £为模型边缘 盒对角线长度的0.3% ,本文这里o的取值为牡。
N(v, = /x|||x- v|| < o, x is a mesh point}	(3-19)
用G(C(v), o)表示均值曲率C(v)的平均高斯权重，可以通过下面的公式计 算：
中心-周围机制使用不同的尺度分别计算特征，通过中心区域以及周围区域 的差异判断显著值。上面的公式我们选择的距离为6假设截止尺度的距离为26 令S(v)表示在粗细两个尺度上顶点V的平均高斯权重的差值，认为S(v)即该 点的显著性值。
S(u) = |G(C(v),o-) - G(C(v),2(r)|
27
计算模型网格上每个顶点对应的网格的数值S(u),得到Armadillo模型基于 中心-周围机制的显著图如3-8所示。高亮(浅色)区域为高显著性区域，主要部 分为耳朵、手、脚等变化显著部位。深色区域为低显著性区域，主要部分为大腿、 后背等平滑部位，符合人类的视觉机制。
图3-8 Armadillo模型的网格显著性

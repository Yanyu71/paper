3.1.1物体消除
如图3-1所示，在可选操作中首先执行的是物体消除，可以使用包围球或者 包围盒测试是否消除物体，如图3-2所示。为每个对象创建一个球体将其包围, 并判断球体是否位于视锥体内。可以通过计算离物体中心最远的顶点与物体中心 的距离，得到包围球的半径。
视锥体在渲染渲染管线中扮演重要的作用，相机坐标系就是指物体在视锥体 中的坐标，起到承接世界坐标系和屏幕坐标系的作用。由视点相机、近平面、远 平面构成，视线被近平面和远平面剪裁成一个“梯体”，被称为视锥体。
远剪裁平面
图3-3视椎体
在得到包围球半径后，就可以通过平行土X轴，土Y轴，土Z轴的球心连线定 义6个顶点来描述包围球。当y=0时，得到2D包围球的平面俯视图，如下图所 示：
x +y
图3-4视椎体中Y=0平面
其中，Pi是包围球的球心，坐标为（Xi，zj, P2是+Z轴方向的最远端点，坐标为 （Xi，zi + r）, P3是+z轴方向的最近端点，坐标为（Xi，Z]-r）, P4是+x轴方向的最 远端点，坐标为（Xi + r,z） P5是+x轴方向的最近端点，坐标为（X] - r,zj。至
19
此得到了 Y平面内包围球上所有关键点的坐标。物体消除遵循的原则是当关键 点都位于视锥体外时，认为包围球在视锥体外。Z轴方向物体消除的条件为：
(Z］十 r < far_Z)||(Zi — r< near_Z)	(3-1)
X轴方向则需要通过平面方程和P4, P5两个端点的位置来判断，其中视锥体 右平面可以表示为：
a
左平面可以表示为：
w/2
X —	Z
a
其中W为近平面的宽度，d为视点到近平面的距离。
X轴方向物体消除的条件为：
(x1-r>^z1)||(x1+r < -~Zr)
同理，将球心的坐标扩展为(xi,yi,zj), y轴方向物体消除的条件为：
O1 - r > 竽 zJIOi + r< 一竽 Z1)
在判断物体消除时，只要满足任意一轴的消除条件，即可判断包围球在视锥 体外，综上，给定物体包围球球心坐标(x1,y1,z1)>和相机参数(视平面宽度w, 视距d,近平面距离near_z和远平面距离far_z,物体被剔除的条件为：
(3-6)
物体消除的过程跟文献［18］［20］的兴趣区域中判断对象是否剔除的过程完全 相同，然而渲染管线中使用了大量相机的内参作为参数计算，而兴趣区域方案中 使用的均为人为设定的系统参数。比如，在渲染管线中使用近平面和远平面作为 剪裁平面，而文献［18］［20］中则会系统设定一个兴趣区域的半径，该参数如果跟 远平面不匹配，将会造成传输数据的浪费或者显示内容不完整。因此，基于上述 对渲染管线中物体消除计算方式的分析、与兴趣区域方案中物体消除方式对比， 本文提出了一种结合渲染管线物体消除的兴趣区域确定方式，具体实现见本章第 二节。

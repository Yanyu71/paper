3.4更新策略
三维场景中的网格模型和纹理图片经过渐进式压缩编码后，都会被存储成一 个基网格以及一系列的增强层数据,，通过上一节网格模型和纹理图并的映射关 系，将产生一系列一一对应的模型和纹理层次。我们将基础层的编号定义为0, 增强层的编号按照顺序依次递增。因此模型Mi和纹理心都可以通过一个基网格以 及多个增强的集合表示，该模型信息集合可以用£表示：
Si=<M』i>	(3-34)
Mi = {弘°0, RM”I，加：,2,…，加"}	(3-35)
k = {%0,R“,2, •••, R/i，n}	(3-36)
其中BM“O表示模型岡的基础网格，B“,o表示纹理人的最低分辨率，RM〃表示模型 的第丿•个增强层，R如表示网格厶的第丿个分辨率。
用户当前可视区域的三维模型信息集合S =他』2，…,SN}，每个模型都包含 了网格和纹理，所以可以使用一个基网格集合、一个网格增强层集合、一个基纹 理集合以及一个纹理增强层集合来表示：
S = {BM，B[,RM，RI}	(3-37)
其中B表示当前兴趣区域内所有三维模型的集合，其中BM和E分别代表模型的网 格信息和纹理信息。同样，R表示当前可兴趣区域内所有三维模型的增强层的集 合，RM和&分别是模型网格和纹理的增强层信息。
通过渐进式网格编码，网格数据和纹理数据之间存在很强的相关性，基网格 与增强层又存在的极强的依赖性。一旦某一部分数据在传输中丢失，将导致与其 相关的网格或纹理信息数据的无效，并且由于依赖关系，无法正确解码在错误接 受编号后面的所有信息。考虑到实时性要求，无法正常解码的数据将被丢弃，这 将浪费带宽资源。因此，为了在实时性和可靠性之间取得平衡，我们使用传输控
33
制协议TCP传输更重要的数据，而通过用户数据报协议UDP传输的次要数据则 可以最大程度地减少延迟。
通常，三维模型的基础网格和最低分辨率纹理图片的数据都很小（通常小于 原始质量的5%）,而增强层占据了大多数数据大小。但是，基础层是所有后续 细化层的基础，因此基础网格和基础纹理是3D模型中最重要的部分，应使用可 靠传输（TCP）进行传输。这样，客户端在接受到数据后，可以的渲染模型和绘 制纹理。增强层则可以通过不可靠通道（UDP）传输以减少传输延迟，提升传输 效率。
经过第二节网格重要程度计算后，得到了当前视点下用户兴趣区域中每个三 维模型的视觉重要程度，以及当前的网格层次和纹理层次编号，并对模型按照视 觉重要程度降序排列。本文的核心思想是保证用户的视觉质量最佳，因此将会优 先更新对画面视觉提升更多的模型。当视觉重要程度等于0时，意味着当前模型 网格和纹理质量的提升不会对画面质量有所贡献，在用户视点信息下一次改变前, 将不再考虑视觉重要程度等于0的模型。视觉重要程度高的模型往往意味着当前 网格和纹理的LOD低，使用较少的数据量将会给场景的画面质量带来较大的提 升。在完成一次数据请求后，等待用户输入以及数据下载，这两点都将触发场景 视觉排序描述的更新。
34

5.2性能测试
本系统主要针对后端Rasa NLU模块后端服务部分以及语音合成后端服务部 做性能测试，这两块都是利用深度学习模型构建的模块，也是主要耗时耗资源的 部分，本文对于性能更重要的要求是稳定性，需要保证系统运行中服务器消息的 成功交互。其中关于Rasa NLU模块后端服务的压力测试结果如下表5-5所示。
表5-5 Rasa NLU后端服务压力测试表
测试数据\测试机型
本地电脑
深度学习服务器
并发数
10
10
请求总数
100
100
总计耗时
每秒处理请求数量
返回消息大小
13433 bytes
13433 bytes
成功消息数量
100
100
失败消息数量
0
0
从表中不难看出，该系统服务对于配置相对较低的电脑效果不够理想，在耗 时上比较处于劣势，在稳定性方面两种电脑配置没有明显区别。
接下来对于语音合成模块进行后端服务的压力测试，使用语音周星驰合成模 型及由周星驰数据训练的MelGAN声码器模型作为整个模块的模型，同时均釆 用了单个即U的方式启动模型推理，测试结果如下表5-6所示。
表5-6语音合成后端服务压力测试表
测试数据\测试机型
本地电脑
深度学习服务器
并发数
10
10
请求总数
100
100
总计耗时
每秒处理请求数量
返回消息大小
30200 bytes
30200 bytes
成功消息数量
100
100
失败消息数量
0
0
79
从表中可以看出生成语音服务的耗时相对更长，且和电脑配置关联不大，由 于上述测试均采用gpu来进行模型推理，后续我又强制进行了 cpu的推理测试, 发现结果和卯U推理的差别不大，基于第四章声码器模型比较时更U推理明显快 于cpu,为找到性能的瓶颈再次进行了一轮测试使用，这次只使用深度学习服务 器，分别测试在网络连接、语音合成模型和文件存储生成三个方面控制变量的耗 时结果，测试结果如下表5-7所示。
表5-7语音合成后端服务性能瓶颈排查表
保留所有步骤
缺少文件存储
缺少语音合成模型
缺少网络连接
并发数
10
10
10
1
请求总数
100
100
100
1
总计耗时
每秒处理请求数
量
1
返回消息大小
30200 bytes
30200 bytes
30200 bytes
30200 bytes
成功消息数量
100
100
100
100
失败消息数量
0
0
0
0
由上表可以发现性能的瓶颈存在于语音合成器上，该合成器的实时性与声码 器的实时性不匹配拖延了整体的响应速度。后续需要对语音合成模型的及时生成 速度进一步优化。目前只能达到低并发的要求。不过从消息的成功率上看，本文 的最重要的稳定性要求得到了满足。

4.5后端中转请求处理模块实现
后端请求模块是接收前端请求的主要处理模块，其基本使用python语言和 aioHttp库来完成服务器部分的搭建，其中包含的请求如下表4-8所示。
表4-8报表模块的架构
请求名
请求url
请求方向
请求参数
请求说明
音色改变
/options
网页前端-后端
无参数
请求后端得 到可以使用 的音色输出 人列表
用户文本输 入
/text
网页前端-后端
Info字符串表示用 户输入
请求后端接 收前端的文 本输入
文本回复生 成
/webhooks/re st/webhook
后端-Rasa NLU模块
{
Sender:用户名 Message:文本值 }
后端将前端 的文本信息 传递给Rasa
NLU模块
语音回复生 成
/voice
后端-语音合成模块
info字符串表示回 复的文本信息
后端将Rasa 对话管理模 块生成的文 本回复传递 给语音生成 模块
68
由表格不难看出后端请求处理模块不只是负责作为一个服务器同时也会作 为一个客户端去请求Rasa模块和语音生成的模块，然后将生成的回复信息再返 回给前端让前端能够将文本信息和语音回复的静态链接url取得从而进行页面的 渲染。
在实现上采用了基本的服务器分层思想，分为控制层、业务处理层、持久层 （由于本文实现中未使用到后端数据库结构信息故该服务器只包含前两层），其 中控制层用于接收前端传来的请求信息，然后调用具体的服务层代码去执行相应 的业务逻辑，这里主要就是作为客户端去再次请求RasaNLU模块和语音合成服 务器模块。

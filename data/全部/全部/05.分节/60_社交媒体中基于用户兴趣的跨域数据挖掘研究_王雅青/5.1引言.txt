5.1引言
在许多推荐系统中，用户的行为记录都是带有时间属性的序列化数据口⑵，并且 用户兴趣也是动态变化的。例如，在音乐网站中用户工作时喜欢收听安静的轻音乐, 而平常时间更喜欢听一些当下的流行歌曲。不同时间段的序列化行为常常被组织成 不同的会话。关注用户兴趣中的动态变化信息能够更好地帮助模型挖掘用户的真实 行为意图9-5]。另外，用户行为具有跨域分布的特点，通过同时与不同域进行交互以 共享各种信息，如购物、音乐、视频和评论等。例如，如图5-1所示，用户在电影域X 中观看某一系列的电影（项目1和项目2）后，往往会在音乐域y收听一些电影相关 主题的歌曲（项目3、项目4和项目5）, 一段时间后可能在电影域x继续观看与项目 1和2主题相似的其他电影（项目6）。从以上例子中可以很容易发现，用户在不同 域中的行为之间存在着复杂的动态相关性。因此，在挖掘用户兴趣动态变化的同时, 需要进一步考虑跨域动态行为特点，才能全面完整地描述用户兴趣的变化。
然而，现有的基于用户动态兴趣的方法大多数关注单域场景，如图5-2所示。它们 将跨域数据分为不同的独立域分别对待，针对不同的域相应地训练不同的模型然后 进行对应的推荐。图5-3为针对实际的跨域数据集和单域数据集的研究。统计豆瓣网 站的Music-Movie跨域数据集中与该网站交互次数少于20次的用户比例为30.35%, 而在Music单域数据集中，由于信息缺失的问题这个比例数升高到54.65%,进一步 加重了数据稀疏性的问题。由此可以得出结论，只用部分的单域动态信息来预测用 户的未来行为是远远不够的，由于忽略了跨域关联，信息不完整甚至是错误的，导 致单域的推荐方法的性能变差。因此，本章旨在通过有效融合用户跨域时序行为来 捕捉用户的跨域动态兴趣，以提高推荐性能。另外，现有的跨域推荐方法大部分忽 略了用户行为中的时间属性信息如响，因此难以将它们直接应用于动态跨域场景中。 尽管一些基于时序信息的跨域方法考虑了不同行为之间的先后顺序关系，但大多数 方法要么使用固定的上下文窗口来简化对于时序信息的处理W[2],要么在没有用户 信息的情况下对时序信息进行动态建模难以全面捕捉到用户的跨域动态变化 规律。
综上所述，挖掘跨域用户的动态信息间的复杂关联，实际上是一项具有挑战性
89
图5-1 用户的跨域序列化行为示意图
音乐域y的模型
_________7
音乐
^=>
图5-2 单域推荐场景示意图
的任务，主要原因有两方面。一方面，用户在不同域中的动态行为不一致，使得跨域 信息的全局动态变化和域内动态变化存在差异性。尽管不同域之间有一些重叠信息, 例如相同的用户或项目信息。然而，由于服务的多样性，即使面对相同的项目，相 同的用户在不同的域中也会产生不同的动作。例如，一个想买电脑的用户在eBay网 站上会浏览不同的电脑信息，而他/她在亚马逊网站上可能会同时浏览电脑和键盘相 关的信息，因为这两者是捆绑促销的。只是简单地将跨域信息进行简单组合可能会 由于引入噪声而使性能下降。另外，在不同域中的行为信息也是时间异步性的。即 使是同一用户的相似行为也常常表现出显著的时间差异性。例如，一个用户在IMDb 网站上对刚刚观看的电影进行了评分，但往往在其他时间才会在豆瓣网站上对同一 部电影进行评分。如果将来自不同域的数据只是按时间顺序简单地划分为片段进行 单独处理，将会丢失跨域相关性。因此，如何在捕捉跨域信息的动态变化规律的同 时保护各个域中信息动态变化的独立性是一个挑战。另一方面，用户跨域切换行为 的存在使得部分单域行为间链接与跨域行为间链接难以共存。当用户只是与同一个 域进行交互时，不同的行为之间由单域行为间的链接关联到一起。当用户从一个域 切换到另一个域时，不同域的行为之间会形成跨域行为间链接，但在实际上捕捉跨 域行为间链接时会造成部分单域行为之间链接的损失。例如，图5-4中由于用户的行 为从电影域的项目2切换到音乐域的项目3,使得电影域的项目2和项目5之间的链 接丢失。如何在捕捉跨域信息的全局动态变化的同时避免单域行为间链接的损失也 是一个亟待解决的挑战。
本章针对跨域数据动态性导致跨域信息间具有复杂动态关联的问题，分别提出
90
gm 不
评分数（条）
©jo.m gksr巨
IW 150 OT ^>0
评分数（条）
（a） Music-Movie跨域数据集	（b） Music域数据集
图5-3 豆瓣上跨域和单域数据集的稀疏性比较。（a）和（b）分别统计的是Music-Movie数据集 和Music数据集中不同数量交互行为的用户的比例。
/电影班额f巨 ―单域行为早三 间箧接° ?
I音乐域y
.里.咏的矍域互为回链接.分 'W->,：*W I
跨域行为间链接
O
跨域行为间锥接
[0\
图5-4	用户的单域行为间链接和跨域行为间链接示意图
急一急.仗-
I O O
了基于多层循环神经网络的跨域推荐方法和基于循环-门控神经网络的跨域推荐方 法来有效融合不同域的动态信息。针对跨域信息的全局动态变化和域内动态变化存 在差异性特点，设计了一个跨域多层循环神经兴趣模型（Cross-DomainHierarchical Recurrent Neural Interest Model, CDHRM）,联合建模用户兴趣的用户级全局动态变 化和在单域中的会话级局部动态变化，以全面捕捉跨域信息间的复杂动态关联。 CDHRM设计了跨域用户级循环神经兴趣模型来建模隐藏在跨域会话间的兴趣动态 演化模式，利用针对不同域设计的域感知会话级循环神经兴趣模型来分别建模隐藏 在不同域会话内的兴趣动态变化模式。同时通过引入融合机制来进一步捕捉不同信 息的跨域差异性。最后联合用户级和会话级兴趣信息来对用户进行个性化推荐。其 次，为了解决CDHRM在捕捉用户级和会话级动态变化时引起部分单域行为间链接 损失的问题，设计了一个跨域循环-门控神经兴趣模型（Cross-DomainRecurrent-Gated Neural Interest Model, CDRGM）,通过建模跨域用户的长期和短期兴趣，能够在捕捉 用户兴趣的用户级演化模式和会话级动态模式的同时，有效重建断开的单域行为间 的链接。CDRGM设计基于循环神经网络的跨域短期兴趣模型来建模会话内的短期 兴趣动态模式，并通过增加一个融合层来有效恢复损失的域内行为间链接。然后利
91
用基于门控神经网络的跨域长期兴趣模型通过自适应地选择短期兴趣中的重要信息 来建模会话间的长期兴趣演化模式，并通过引入跨域兴趣正则化函数进一步恢复损 失的单域行为间链接。最后联合用户的短期兴趣信息和长期兴趣信息完成跨域推荐。
本章共分为4个小节。5.2节首先定义了本章用到的符号和问题，并介绍了相关 知识。5.3提出了基于多层循环神经网络的跨域推荐方法，并验证了所提方法的性能 优势。5.4节设计了基于循环-门控神经网络的跨域推荐方法，并通过实验验证了本方 法的有效性。最后，在5.5节总结了本章的研究内容。

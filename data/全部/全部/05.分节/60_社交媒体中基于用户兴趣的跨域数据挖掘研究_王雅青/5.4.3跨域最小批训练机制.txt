5.4.3跨域最小批训练机制
为了提升模型的训练效率，本节设计了可以并行训练的跨域最小批训练机制，如 图5-15所示。为了方便起见图中设定的最小批为2,斜线框表示域x中的会话，纯色 框表示域y中的会话。每个用户的会话按时间顺序排列作为输入，对应会话中输入 的后一个项目作为输出。与5.3.3节不同的是，本节所提方法为了弥补被CDHRM方 法忽略的单域行为间链接损失的问题，需要检测用户行为的跨域切换位置。通过对 比每个用户的每个会话开始位置与上一个会话结束位置的所属域是否相同，以标记 切换位置。当检测到跨域切换位置，就可以基于公式（5-12）来恢复丢失的短期兴趣 信息和基于跨域兴趣正则化函数（5-19）来引入丢失的长期兴趣信息。另外，为了保 证不同域中项目被选中的公平性，本节将统一从所有域的项目中选择负样本。
-HA
图5-15 跨域最小批训练机制示意图
q文		*	Z,1.2

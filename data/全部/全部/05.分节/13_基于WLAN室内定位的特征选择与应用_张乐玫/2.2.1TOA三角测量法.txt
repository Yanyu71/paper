2.2.1TOA三角测量法
TOA, Time of Arrival方法通过测量信号的传播时间来计算出距离。具体来 说，TOA需要知道信号有发射端传播到接收端的传播时间，再根据公式：
d c^toa	'	(2-1)
其中，d代表最终移动端距发送端的距离，c代表光速,虽然在不同介质中 信号传播的速率不通过，在室内定位信号大多情况下在空气中传播，因此这里用 光速表示信号的传播速率，琨表示信号从发送端到接收端经过的时间。
TOA定位方法依靠发射端之间精确的时针同步，对于射频信号而言，1纳秒 的时针同步误差会导致最终结果差距30cm。对于基站定位来说，下行链路的定 位如果采用TOA算法，基站向手机发送的是方波脉冲，不统计站的脉冲信号不 同，不同脉冲信号之间相关性为0,在接收端，手机端存储不同基站的脉冲信号, 并用存储的脉冲信号与接收的脉冲信号做相关，当信号到达时，手机会检测到相 关结果为1的脉冲信号。当遇到非视距传播(NLOS)的情况，由于经过折射，计 算出的预测距离会远于实际距离，当遇到多径传播的情况，.手机会检测到多个相 关结果接近1的脉冲信号，因此很难判断出哪个峰值对应鬲信号是主信号，那些 是经过折射、衍射过后的信号。
12
图2-1 TOA三角定位法
根据上述描述，TOA算法的优点是算法简单，容易理解；缺点首先需要发 送端与接收端严格的时针同步，这需要极大的成本开销，而实际上这种精确同步 也很难做到；另外？ TOA计算所需要的视距传播条件在真实场景下也无法达到。 因此，该算法并不适用于室内定位系统。

3.4朴素贝叶斯算法
要说明朴素贝叶斯算法（Naive Bayes Algorithm）,首先我们需要了解贝叶斯准 则（Bayes5Theorem）0贝叶斯准则表示事物发生的可能性，准则的公式定义如下:
P(B\A)P(A)
P(B)
其中，尸（3*0	地4）表示集合蓝的先验概率，P㈤表示集合B的先验概率,
PQIIB）表示发生8出现的情况下发生4的后验概率，P（BIA）表示条件概率。通常情 况下，集合B的先验概率不能直接得到，但可以根据全概率公式获得：
P(B)= P(B\A)P(A)+ P(B I A)P(A)	(3-16)
其中，月表示集合A的补集。
在室内定位系统中，公式应表示如下:
其中，X = {xl,xi,...,xu},xi^R表示接收端接收到的特征向量。贝叶斯定理 将原来根据获得的特征向量对应参考点后验概率的过程转化为根据已有的参考
点信息求解最大后验概率的过程，用数学语言描述为:
由于当样本确定时，分母为确定值，因此，原方程等价于求解 argmaxp, P（X | Pj）P（p» ,符合其条件的参数点0为输岀参考点。
在亀际情况下，高维的特征分布的联合概率求解较为复杂，因此贝叶斯定理 涉及大量计算而使实际求解无法达到。朴素贝叶斯算法在此基础上假设各个特征 互相独立，因此，特征的条件概率可写为特征相乘的形式，即
P（X\pJ） = Y]P（xk\pJ）P（pJ）	（3-19）
k
其中，k = l,2,...,M,x3R。此时，朴素贝叶斯算法的完整形式为:
26
(3-20)
(3-21)
在建立训练模型的时候，每个训练数据的后验概率均会提前计算好存放在数 据库库中，在进入预测过程时，当手机移动端收集到周围环境的WiFi接入点接 收信号强度并形成特征向量后，手机端或服务器会将根据朴素贝叶斯公式计算出 符合相应规则的参考点坐标。有时为了解决分母为零的情况，会引入极小实数兀 尸(职)=理繇麥，心	(3-)
来防止被除数为零的情况。3的求解可以根据贝叶斯估计获得。
朴素贝叶斯定位算法的算法实现具体步骤如图3-4所示。
初始化生成样本训练数据集买
离线阶段：
1.根据某一接入点出现与否计算某一参考点下该接入点出现的条件概率
P (xk | pj),并将计算结果存入数据库；	.
2.计算样本中参考点出现的先验概率P；
3.根据步骤1和2得到的结果计算特征出现的条件概率P(X|pj),并将结果存入 数据库；
在线阶段：
1.将移动端接收的数据生成特征向量形式，根据离线阶段步骤1得到的结果获 得每一接入点出现的条件概率；
2.将计算好的接入点条件概率计算特征向量的条件概率；
3.将步骤2的计算结果与离线阶段步骤3的结果比对，找出相差最小的条件概 率对应的参考点作为定位参考点。
图3~4室内定位朴素贝叶斯算法实现步骤
朴素贝叶斯算法的优点是易于实现且在大多数情况下可以达到较好的性能。 但朴素贝叶斯算法是基于强假设得到的，在实际运算中大部分情况下特征之间不 可能会绝对的独立。
27

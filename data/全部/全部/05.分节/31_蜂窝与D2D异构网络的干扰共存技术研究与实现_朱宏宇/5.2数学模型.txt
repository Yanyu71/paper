5.2数学模型
记蜂窝上行链路集合为Kc= {1,2, .D2D链路集合为Kd = [Kc+1,Kc + Z ...,Kc+Kd},记各CUE的占用哪些RB及其发送功率是已知的， 作为模型的输入。在确定了 CUE的占用情况后，整个频带被分成N个连续的RB 段,每个连续RB段的频谱宽度为Hz,这些连续RB段有些被CUE 占用，称为复用资源段，有些是空闲的，这些空闲的RB块就是“频谱空洞”， 也称为正交资源段。图5-4展示出从某个DUE处测量到的一个子帧的频域资源 占用情况，此子帧中有3个CUE各占用了一段频域资源，分别用一个实心柱形 表示，柱的高度代表CUE在此DUE处C2D干扰的大小，整个频域资源被分为 了 7段,其中第2段、第4段和第6段都被CUE占用，其余段暂时空闲。用”小弥 用于表示第"块连续RB段被第斤条链路占用的情况，且成】=1,心 表示第〃块 连续RB段被第A:条链路占用，否则巨”]同一个RB只能被一个CUE 占用，但可以同时被多个D2D用户占用。
CUE2
RB段4	RB段6
图5-4 DUE资源分段示意图
根据5.1节中对于DUE的约束，在一个子帧中各DUE在自己占用的RB上 使用同一功率发送，所以记第k条D2D链路单位带宽上的发送功率为pk<P^， 其中kf,暧宓为due单位带宽上的最大发送功率。记所有链路的发送功率 集合为「={日,...按时}。记垢为第《条链路的发送端到第/条链路接收端之间的信 道增益，久为第左条链路发送端到基站接收端的信道增益，其中k」WK。
1）未引入D2D通信时蜂窝用户的吞吐
实际LTE系统中上行发送功率由功率静态工作点、路损补偿项、码率补偿项、 闭环TPC命令字补偿项共同决定，本模型对实际LTE系统上行功控策略作适当 简化，只采用功率静态工作点加完全路损补偿的方法决定每个CUE的发送功率, 如式5-1所示：
3	（5-1）
其中R是蜂窝用户的功率静态工作点，是蜂窝用户的发送功率，keg 由 于各CUE的发送功率静态工作点相同，且进行了完全路损补偿，因此各CUE在 基站接收端的接收功率相同，为化)。
在蜂窝网络中引入D2D的一个前提是D2D通信对于原有的蜂窝通信的干扰 必须在一个可控的范围内，具体体现为加入D2D通信后各蜂窝用户通信速率下 降百分比要小于某个设定的值a。在未加入D2D通信时蜂窝第Er条蜂窝上 行链路在第neN块连续RB段上的SNR为：
「笋=	(5-2)
其中寸】表示噪声功率。
未加入D2D通信时的蜂窝单位带宽上的速率是：
，户= log(l +	e R	( 5-3)
2) D2D复用功率及吞吐
加入D2D通信后，第Ek(.条蜂窝上行链路在第neN块连续RB段上的 SINR 为：
您由	34)
I，
其中表示噪声功率，Z冲"户代表了 D2C干扰。
加入D2D通信后蜂窝'簞位带宽上的最小速率是：
《/，，，［〃］=(1 _ ay^f［"\k^Kc,Q<a<\	(5-5)
根据啪& 以及香农容量公式可以计算出加入D2D通信后各蜂窝用户允许的最 小SINR为叶侦,D2C干扰控制要求：
啤3/)2以枷］,独次］=1	(5-6)
对蜂窝用户最低速率的限制等同于对复用资源段上的D2C累积干扰功率的 限制，在实际的蜂窝通信系统中，由于基站接收端的存在非线性以及截止特性, 因此即使在正交资源段上对D2C累积干扰功率也有限制，在本模型中指定在正 交资源段上的限制是：正交资源上DUE的在基站接收端的干扰功率不能高于同 一子帧中CUE在基站接收端的平均功率。此约束可以描述为：
E財"k
￡ p［^pkhk V		,V% eNORTH (5-7)
5	\Kc\
其中North为正交资源段的下标集合，即= ｛〃 |c j｝。
Ng%为正交资源段的下标集合，即N皿隆=(n|次】=1,盗e片｝以上约束不等 式的左边表示在第〃块资源段上基站接收到的DUE累积功率，不等式的右边表 示第〃块资源段上基站接收到的CUE平均功率。
第腥r条D2D链路在第neN块连续RB段上的SINR为：
f =寸］+ z黯化￡恥术	(5-8)
f	I臨
其中Z	表示C2D干扰值，￡ W?"尸表示其他D2D链路对此D2D
链路辭扰。	渗
可以得到第旌勺条D2D链路在第昨N块连续RB段上的吞吐率为： ^(AP)=41og2(l+lf(Ap))	(5-9)
单位是bit/s o
第上e弓条D2D链路的吞吐速率为：4(W)=Z*&Q)	(5-10)
neN
即一条D2D链路可能同时占用多个连续的RB段，这条D2D链路的速率是其所 占用的所有RB块上的速率之和。
由于DUE只能占用连续的RB,所以若记q=｛〃|*］=l,〃eN｝,作勺为第 传勺条D2D链路所占用的连续RB段的下标集合，则要求O,中的元素是［1,N］范 围内的连续正整数。满足上述条件的资源段称为DUE的可选资源段。例如在图 5-4中DUE1复用了 CUE1的资源，同时还占用了 CUE1资源旁边的两段空闲资 源，即连续占用了第1、2、3段资源，Q =｛1,2,3｝。
3)模型综述
综上所述，模型的目标是最大化所有D2D链路的总速率，艮卩：
max V r (p,/?)	(5-11)
p，p 念d
约束是：
52
C1:「丫 3/) 2「笋叫栃 G	= 1
C2: pk <P^yk&KD
C3: ￡ p^]<\y\<n<N
ke-c
C4: p^} g(0,1},VA： e k
C5:Ok中的元素是连续的正整数，VkeKD
E E衣孚也
C6 .咨谴。七血 <		,V"°cNorth	(5_[2)
约束Cl限制了 D2D对于每个蜂窝用户上行链路的干扰值。C2限制了每条 D2D链路的最大发送功率。C3限制了同 '个RB最多只能被一个蜂窝用户占用。 C4表示域勿是…个取值只能为0或1的指示变量。C5限制了 D2D只能占用连 续的频域资源。C6限制了正交资源段上的累积干,扰功率值。
在给定了 CUE的资源占用及C2D干扰值的前提下，DUE资源分配问题可以 看成两个子问题：每个DUE使用哪些RB段，以及每个DUE单位带宽发送功率 的大小。
观察所提出的模型，可以得到DUE的资源分配有如下特点m若每个资源段 只允许被一个DUE所使用，则确定了每块资源归哪个DUE使用后，根据约束 Cl、C2和C6可以随之确定DUE的发送功率；若允许多个DUE复用同一段资 源段，如何将此资源段E的干扰总量分配给这些DUE是整个算法中最复杂的部 分。采用由简入繁的思路，本章之后的部分先讨论在…个资源段只能被一个DUE 复用的前提下的资源分配算法，再讨论…个资源段可被多个DUE复用的资源分 配算法。

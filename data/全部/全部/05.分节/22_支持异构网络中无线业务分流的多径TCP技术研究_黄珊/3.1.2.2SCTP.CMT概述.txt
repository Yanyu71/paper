3.1.2.2SCTP.CMT概述
在流传输控制协议 SCTP(Stream control Transmission Protocol)最早于 2000 年 由IETF在RFC2960提出，SCTP最初是用于传输IP网络中PSTN信令消息，也 可以延伸至更广泛的应用。SCTP协议的初衷是为了弥补TCP协议在SYN袭击 或其他业务袭击时的缺陷及实时性差等缺点。SCTP是一种可靠的传输协议，并 运作于无连接分组网络例如IP网络的顶层，它为用户提供以下服务：确认的、 无差错和不重复的数据传输；依照路径的MTU大小进行数据分片；有一个选项 用于单个用户消息的有序交付，并使得多流传输的用户消息有序达到；多用户消 息可选的绑定为单一 SCTP数据包；支持多宿主在单一或者关联两端的网络层 容。相比较于TCP, SCTP主要进行了 2种扩展：第一是支持多宿主 (Multi-homeing)并支持单个SCTP关联中使用多个流(Stream)来进行传输。
SCTP中的关联表示两个节点间的连接关系，关联的运作机制是选择一条路径进 行数据的传输，另一条关联路径则不断地发送心跳包(HEARTBEAT)以监测传 输路径是否可用。心跳包的作用是是持续不断地检测备用路径是否可用，以保证 一旦主路径失效，则立即选用一条备用路径继续原来应传输于主路径的数据包， 用于避免传输的中断。SCTP本质上是面向连接的，而SCTP关联是一个比TCP 连接更广泛的概念。SCTP提供了用于每个SCTP端点(在关联启动时)来提供 其他端点具有传输地址列表(例如一个SCTP端口联合的多个IP地址)，通过这 些地址，端点可以到达或者从这些地址找到SCTP数据包。SCTP关联跨越传输 对所有这些可从各端点的列表中产生的可能的源/目的地的组合。
24
SCTP用尸应用
图3-2 SCTP传输功能图
SCTP传输服务可以分解为以下功能：
1.SCTP关联的建立与释放。在SCTP发起请求时，启动关联的建立并釆用 了 COOKIE机制来保障其安全性。SCTP对激活了的关联需要用户的请求才能 正常关闭，对于启动非正常关闭如中止程序等，同样需要用户来发送请求。另外, SCTP的非正常关闭程序也可以由SCTP检测出差错来进行中止。SCTP协议不 支持类似于TCP协议的半打开状态，所以只要其中一个端点执行了关闭程序的 请求，关联的两端都止传输队列中的数据，停止传输用户发来的新的数据包。
2.流消息的顺序递交。流（Stream）在SCTP中，表示需要顺序交付到高层 协议的用户的消息序列，在同一个数据流中的消息需要按顺序进行交付。在关联 建立时，SCTP用户对一个关联中所支持的流的数目进行规定。
3.数据分段，和TCP类似，SCTP也支持对数据进行分段处理来保证分组 长度符合最大传输单元（MTU）的要求，在接收端再把各分段进行重组。
4.确认机制和拥塞避免。SCTP中的确认机制和顺序交付是分离的，首先在 发送端为每个数据段分配TSN,接收端对收到的TSN进行确认，确认和拥塞控 制机制支持对丢包进行重传。
5.数据块捆绑。一个SCTP分组通常包含一个公共的分组报头，之后是一 个或多个数据块。每个数据块包含着SCTP的控制信息或者用户数据。SCTP用 户可以通过可选项来进行设定，把多于一个的用户消息序列绑定一个SCTP分
25
组中发送。
6.SCTP分组校验。SCTP公共分组头中包含：32比特长度的校验字段以及 必备的验证标签字段。验证标签于关联启动过程中每个关联关闭的时候关闭当数 据分组在没有验证标签值的时候，数据分组会被自动丢弃，以避免伪装的攻击和 以前使用过的关联。
7.路径管理。SCTP的发送用户可以使用一组地址作为目的地址用于SCTP 的传输。SCTP路径管理功能基于SCTP用户的指令和当前符合条件的子集中可 达地址的为每一个输出的SCTP分组选择目的传输地址。当其他数据包的流量是 不足以提供该信息时，SCTP路径管理功能通过监控心跳包来确定可达性，当任 何远端传送地址变更可达性时，通知给SCTP用户。当关联建立时，路径管理功 能也负责通知本地传输地址的可用子集到远端，并报告从远端向SCTP用户返回 的传输地址。
由于SCTP在同一时间只能在一条路径上传输，研究人员进行了各项改进研 究，比较典型的解决方案是提出了 SCTP-CMT协议。CMT(Concurrent Multipath Transfer)在2007年修订版RFC 4960［23］和文［24］中被提出，以支持多路径同时传 输。CMT的特点包括：
1)提高连接的容错力和可靠性，当一条传输路径出现故障，利用其它可用 路径进行传输以保证业务的不间断性和容错性。
2)SCTP-CMT支持multi-homing,当终端在移动过程中，网络可以进行切 换并保证连接是连续的。3) SCTP-CMT支持多路径同时传输，在某一个路径故 障或者性能较差时，CMT利用其它路径传输，提高网络利用率和吞吐量o4)CMT 由于把数据在多条路径传输而具有即使被监听也无法获取所有信息的特点，保障 了服务的安全性。
CMT在有如此多好的特性的同时也存在数据乱序、缓存阻塞以至于实际传 输性能并不比单条路径吞吐量高等问题

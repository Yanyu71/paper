3.1.2.1MPTCP概述
MPTCP(Multipath TCP)工作小组由 IETF 于 2009 成立。MPTCP 也是 TCP 协 议的修正版本之一，目标是部署多路径传输并达到对应用透明，通过一个传输连 接汇总多条路径进行传输。与SCTP不同，MPTCP认识到对应用和网络兼容性 十分重要，并致力于大规模部署，另-方面，由于现在的无线网络使用的主要传 输协议为TCP协议，MPTCP的设计需要兼顾对TCP协议的公平性，在设计时
22
也是TCP兼容的。这使得MPTCP可以米用现存的TCP网络设备，减少升级基 础设置和设备的巨大花销。同时，MPTCP在建立连接前，会对通信两端是否都 支持MPTCP进行检测，只要有一方不支持，则仍旧釆用标准TCP进行传输。
对于兼容性问题，MPTCP从应用兼容性和网络兼容性两个方面进行。对于 应用兼容性，MPTCP要求所有应用的接口和服务模型都需要后向兼容TCP的接 口和服务。同时，在网络层，MPTCP能够保证传输层端到端透明传输的特性， 跨过中间件(Midbox)对于传输层的影响。
MPTCP路径(Path)的概念定义为在收端和发端之间链路的序列，基于源和目 的地址对。主机(Host)定义为一个初始化或者终止一个MPTCP连接的终端主 机。子流(Subflow)定义为在独立路径下的一组TCP数据流。MPTCP连接定 义为一系列的一个或多个子流的联合，为应用提供一个MPTCP服务。
MPTCP的协议栈结构如下：
图3-1标准TCP和MPTCP协议栈
MPTCP对应用层展示的结构和标准TCP 一致，但在传输层分为MPTCP层 和TCP子流层，每一个TCP子流下对应一个IP。为了实现对TCP的兼容,MPTCP 通过以下的功能来实现：
1.路径管理：用于检测和使用两个主机间的多路径。MPTCP使用当前端或 两端主机间的多个IP地址作为路径管理的标识。
2.分组调度：通过分组调度打破从应用接收到的字节流为数据分段，并通 过某个可用子流传输。MPTCP利用数据序列映射，通过将不同子流上的数据段 与一个连接级的队列序号关联以保障在不同子流传输的数据按序到达接收端。
3.子流接口： 一个子流组件从分组调度组件把数据分组调出并在特定的路 径上传输，以保证被主机检测并交付。MPTCP保证数据按序可靠的交付。为了 检测和重传丢包，TCP为每个数据段加入序列号。一旦接收，子流将自己收集的 数据传送给分组调度部件来进行消息重组。从发端的分组调度组件中映射的的 数据序列允许在整个字节流进行重新排序
4.拥塞控制：此功能协调子流间的拥塞控制。为了保证公平性，拥塞控制 算法必须保证在一个共享的瓶颈下，一个MPTCP连接不会不公平的比单一路径 TCP流的占用更多带宽。MPTCP的各个子流具有各自的拥塞窗口，为了避免死 锁，在接收端MPTCP的多个子流共用•个缓冲区，通过不同的子流间耦合的 CWND进行拥塞控制。

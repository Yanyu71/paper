4.5性能分析和验证
本节我们分析多级网络密钥更新机制的相关性能。在现有的网络密钥更新过程中， 信任中心将周期性广播携带新的网络密钥的密钥传输帧。半功能节点将直接切换成新的 网络密钥。全功能节点将存储该网络密钥，待收到信任中心广播的密钥切换帧之后再将 该网络密钥置为活动网络密钥。然后我们的分级网络密钥更新机制的帧数量只和簇大小 和簇头节点数量相关。
为了简化评估过程，将离网节点占整个网络节点的比例设为0.1。假设每个网纟各密
28
钥更新相关帧的开销一定。帧数量将能从一定成程度上反映网络资源的消耗。
图4-6中，我们比较了两种网络密钥更新机制。一种是现有的全网更新机制，另一 种是本文提出的分级网络密钥更新机制。假设每个簇大小一定，簇比例为0.05,即每个 簇的节点数为20o通过图像可以看出，分级网络密钥更新所需帧数量少于传统网络密钥 更新机制。随着网络数量的不断增大，差距将越来越明显。
. hierarchical update
—■B— tradition update
下图比较了离网节点中，簇头节点和非簇头节点占比不同的情况下，该算法的性能。 从图中我们可以看出，虽然在一开始资源消耗是和非簇头节点占离网节点比例成正比, 但是随着网络规模的不断增大，两者关系变为反比。这是因为，每个簇的规模一定，每 个非簇头节点的离开都会触发内部网络密钥的更新。在小规模网络里，内部网络密钥更 新的影响要大于公共网络密钥更新。而随着网络规模的增大，簇头节点增多，公共网络 密钥的更新将带来更多网络资源的消耗，相应簇头节点的离开会带来更大的影响。
29
从以上的分析结果可以看出，相比于Zigbee协议现有的网络密钥更新机制，分级 网络密钥更新机制大幅减少了密钥更新所需的网络开销。同时簇规模大小、网络规模大 小、簇头节点变动情况都是影响分级网络密钥更新的因素。在实际使用中，应根据不同 的应用场合和实际网络环境，调整簇和簇头比例，使网络开销尽量减少。
30

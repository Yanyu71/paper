4.3全局坐标系与接收器坐标系
在一般情况下，为了确定和描述定位空间中位置、方向等，会以实际空间为 参考系建立一个确定的坐标系(例如，以房间某一角为原点，位于该角的相邻两 个墙面的水平延伸方向为x轴正方向与y轴正方向，以反重力方向为2轴正方向， 建立一个直角坐标系)，该坐标系可以称为全局坐标系。对于定位而言，定位的 目的就是获得待定位目标在全局坐标系中的位置坐标。
在本章所提算法中，为了估计入射角，需要利用MDPA中各PD的不同方向 之间的关系。但是，接收器MDPA在定位空间中是可以随意旋转的，即MDPA 的方向是任意且未知的，因而位于MDPA上的各PD的方向也是任意且未知的。 所以，在全局坐标系中，表示PD方向的PD单位法向量的坐标无法确定。然而， 值得注意的是，各PD相对于其所属的MDPA是固定的，因而当MDPA的结构 确定之后，PD相对于MDPA的相对位置和相对方向也可以确定。因此，本文引 入接收器坐标系用于描述PD相对于MDPA的相对位置和相对方向。
接收器坐标系是一个以接收器为参考系的直角坐标系。如图4-3所示，接收
48
器坐标系的原点。⑶为MDPA的球心，x⑻-y⑻平面为MDPA底面所在平面, z⑻轴正方向为MDPA的法线方向。令PD的方位角从零开始计，即MDPA中第 一个PD的法向量在针）-y⑻平面的投影落在小）轴正半轴上。
a -
图4-3接收器坐标系。⑻--»段2⑻和全局坐标系。-孙z
为了区别同一点或同一向量在全局坐标系和接收器坐标系中的不同坐标，以 右上角标“⑻”标记点或向量在接收器坐标系中的坐标，无特殊标记的则为点或 向量在全局坐标系中的坐标，即接收器坐标系中的U,、V\R）、v（R）、或治、 碉J、崂和d产等分别对应于全局坐标系中的U,、丫、V、n皿.、n皿,、九 和d,等。显然，V（R）=[O,O,O]" MDPA的结构一旦确定（即及，。和J确定）, Vf）和n以,也能够被分别确定为
V『=Rn^	（4-11）
n
PDJ
(4-12)
如图4-3所示，全局坐标系和接收器坐标系是互相等价的，但是由于接收器 在定位空间中的移动和旋转，全局坐标系和接收器坐标系通常是不重合的。假设 初始时刻接收器坐标系和全局坐标系重合，接收器坐标系可以看作是全局坐标系 经过平移和旋转变换后得到的坐标系，坐标转换公式可以表达为
1）从全局坐标系变换到接收器坐标系
49
[X ⑻，严力力，=R[”zF +T	(4-13)
2)从接收器坐标系变换到全局坐标系
[x,y,zY =葭3?*/⑻ 了-T	(4-14)
其中[”,zF和3?歹⑻,z(，『分别表示全局坐标系和接收器坐标系中的坐标；T 代表平移向量，用于计算平移变换，在本文中丁 = -V； R代表旋转矩阵，用于计 算旋转变换。
接收器坐标系固定于接收器，随着接收器的旋转而旋转。接收器为刚体，刚 体的旋转可以分解成三个互相独立的定轴旋转，对应的三个独立的旋转角被称为 欧拉角16纥取全局坐标系的三个坐标轴为定轴，以逆时针旋转为正，则接收器坐 标系的旋转变换可以通过接收器绕x轴、y轴和z轴的旋转角%、％和%所确定， 对应的旋转矩阵分别为
-1	0	0 ■
&a)=	0 cos%	sin%	(4-15)
0 -sin 片	COS/j
cos /2 0	-sin/2
Rg =	0	1	0	(4-16)
sin y2 0	cos/7
cos/3 sin 为 0
风仇)=	一 sin % cos% 0		(4-17)
0	0	1
接收器绕各坐标轴的旋转顺序有多种组合，本文中使用的顺序为先绕Z轴旋 转八角，然后绕X轴旋转九角，最后绕y轴旋转右角。则接收器坐标系和全局坐 标系之间的旋转矩阵可以表示为
R = Rv(72)Rx(71)Rr(73)	(4-18)
R为正交矩阵，RrR = I3, h为3x3的单位矩阵。

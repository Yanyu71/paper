3.2.1视频数据的采样策略
视频数据是由连续帧的图像数据组成，对于长视频，往往包含大量的图像帧， 而短视频或者小视频中，所含帧数不及长视频。在长视频中，如果进行动作识别 任务，往往需要部分关键帧所提供的信息便可完成任务，若是将长视频的大部分 的图像数据都送入到神经网络模型中进行计算，计算成本将会达到在常规的智能 设备无法完成的量级，使用以往的视频深度学习算法在本文研究的智能设备中无 法适用，所以为了在智能设备的构建高效型行为识别，动作分类算法，需要制定 一些合理的视频采样策略，使计算成本和算法精度都实现可用。
•采样图像大小
29
在卷积神经网络算法模型中，输入的图像大小和神经网络模型的计算量息息 相关，在常见的二维图像分类中，往往使用更大的图像分辨率会取得更好的精度, 但是二者的相关性并不是线性增长的，如图3-1所示，在尸1.0的时候代表常见 的3*224*224的二维图像分辨率，随着r系数的增长，纵轴代表的top-1精度也 会逐步增长，但是top-1精度的增长是由代价的，横坐标轴代表着计算量的大小, 可见当取得最高的top-1精度的情况下，此时的计算量Flops将是取得76% top- 1精度的计算量Flops的大约4倍，但是精度只提高了约3个百分点，因此，制 定适合的视频图像分辨率对于本文的研究内容的意义尤为重要。
图3-1 Effcinentnet论文中对输入图像分辨率的研究，横坐标为图像大小的系数,
纵坐标为精度［42】
女口图3・2所示，在著名的ResNet卷积神经网络中，随着图像的大小的倍增， 神经网络模型的计算量将会呈现指数级别的增长，因此不能够盲目的增大图像分 辨率，尤其是在算力受限智能设备中［叫 图3-3列举出来了常见的卷积神经网络 输入图像分辨率和模型计算量的大小。
30
3-112*112	3*224-224	3«443-4^8
图3-2 ResNet系列神经网络输入图像分辨率和计算量Flops的关系
5luifHarh：v2«15	Mobtlcretv/-1.0	Rc-^^50
图3-3常见的2D卷积神经网络在不同的输入分辨率下的计算量Flops的大小 经过在实验研究尝试下，本课题采用单帧的图像分辨率为3*160*160,在 3*160*160的情况下，兼顾了模型的计算量和精度，具体实验结果将在后续实验 章节说明。下图3-4分析了常见的3D卷积神经网络的在不同的输入分辨率的情 况下，模型的计算量大小。
•关键帧的采集
视频相比于图像数据信息更加丰富，但是连续图像序列中，无用的数据过多, 所以以一种低计算成本的无监督方法去提取关键帧信息在研究内容中尤为重要, 本文采用基于帧间差分的关键帧提取方法，这种方法具有计算成本较低，方便部 署的特点。算法的大致思想如下：将相邻的两帧的图像进行差分计算，得到的差 值图像可以反映出图像变化的大小，如果前一帧和后一帧产生了较大的变化，则 认为是关键帧，这种方法在场景的变化差异大，或者是人物的动作变化大的情况 下，可以较好的提取出关键帧，去除冗余帧。在下图3-5中，出现在较高的波峰 处的为关键帧，由此可见，在一段视频中，虽然存在大量的图像帧，但是若是提 取出比较有用的关键帧，将会减少信息的冗余，对算法模型的精度帮助较大。
•视频帧采样数
在常见的以视频数据作为输入的神经网络中，采样帧数目是一个不可避免的 问题，常见的采样方法有密集采样和稀疏采样，密集采样对于短暂快速的动作行 为信息具有较好的提取效果，稀疏采样的方法通过减少神经网络的输入大小，这 样可以减少模型的计算量，由于本文研究内容主要面向于智能设备，由于密集采 样的方法将会造成算法模型的计算量大量增加，所以本文采样稀疏采样结合关键 帧采集的方法，在保证一定精度的情况下，对模型的计算量进行均衡。
图3-6轻量型卷积神经网络-3D网络输入帧数和计算量Flops的关系

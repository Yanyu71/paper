4.5基于Matlab的能量检测与实时演示系统设计
MATLAB作为当今世界上应用最为广泛的数学软件，具有非常强大的数值计 算、数据分析处理、系统分析、图形显示甚至符号运算的功能。本文的频谱感知 系统的宽带频谱能量检测算法部分的实现以及与频谱数据的通信功能和最终的 感知效果实时展示系统的实现均是在MATLAB上完成。
MATLAB提供了强大的工具包，在MATLAB上调用MinGW或Cygwin编译C 和C++程序，使得我们可以在Linux ±使用MATLAB编译C/C++程序代码，编译完 成的Mex程序可以在MATLAB中直接调用。
59
图4-27能量检测与实时演示模块实现框图
能量检测与实时演示实现框图如图4-27所示，此部分首先编写一个简单的 Socket程序，每次调用会与Host Server建立一次Socket连接，接收一个帧的数 据，一个帧数据包含6000点60MHz信号的频谱能量值和帧头信息。接收的以太 网帧包解包处理之后，获得帧头信息和频谱能量信息，频谱能量数据的排布需要 经过一定的频谱搬移获得与实际频谱匹配的频域信息，通过帧头信息的分析判断 当前帧是否为首帧数据，每次遇到首帧数据需要初始化整个频带的频域数据。 MATLAB中通过循环调用Socket程序持续获得频谱感知数据，对每一帧的数据拼 接组成整个频带内的频谱能量数据。得到均值后的宽带频谱能量数据之后，在 MATLAB中调用能量检测算法代码对频谱能量数据进行能量检测的判决，迭代完 成之后输出的判决结果和各个频段的频谱能量数据都会通过MATLAB的画图工 具实时显示出来。

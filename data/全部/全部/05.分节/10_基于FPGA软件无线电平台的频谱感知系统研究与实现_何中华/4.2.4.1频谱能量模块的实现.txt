4.2.4.1频谱能量模块的实现
频谱能量值的求取主要是计算实部和虚部的平方和，MULT18X18S乘法器可 以方便的完成乘法操作，FPGA的逻辑资源也可以在一个时钟节拍内完成平方后 求和的计算。整个基带信号处理的实现和高吞吐率的保证都是建立在流水线型处 理的基础之上，对应复频谱数据求能量模块的数据处理依然是流式的数据处理形 式，这种形式的处理重点在于保证各个信号通路时序的正确性和计算过程中保持 数据之间的对应关系。复频谱数据求能量模块的流程图见图4-21o
图4-21复频谱数据求能量模块的流程图
输入IQ数据首先进行IQ分离，IQ两路的处理过程完全一致，保证了两路信 号到求和模块时的时序和延迟保持一致，不会发生数据错位。每一路信号首先进 行有符号位的扩展，从16bit有符号数变为18bit有符号数，然后相同数据输入 乘法器的两个输入接口 A和B, 一个时钟节拍的延退之后，得到的36bit有符号 数进行位宽截取操作，再次回归数据到16bit； IQ两路均完成平方取值操作后， 同时送入求和模块计算复频谱数据的实部和虚部平方和，即为该频点的频谱能量 值。最后计算出的数据经过FIFO缓冲之后送至下一级。
51

4.5IQ不平衡补偿技术的实现
本节基于MIMO SC-FDE的常规速率32k的硬件平台，对DQ不平衡补偿算法进 行实现。实验室系统设计的目的是能在-2OJB和-4OdB低信噪比环境下稳定工作，故 设计了两种帧结构。对于-2OdB低信噪比条件下的系统，基于本实验平台我们能得到 没有I/Q不平衡时的系统性能曲线，在系统中引入I/Q不平衡，可以得到系统在非理 想特性I/Q不平衡影响下的性能曲线。
对于-20dB低信噪比条件下的系统设计，由于信噪比较低，需要重复发送多组同 步序列通过时隙累加来提高增益。I/Q不平衡的预补偿技术是基于帧头导频的数据进 行参数估计，帧头由12*64共768个时隙组成，其中每个时隙是长度4096的格雷序 列，导频部分共有64个时隙，每个时隙为与帧头处起始相位不同的格雷序列，在发 端成帧时将导频处的格雷序列通过长度为64的m序列进行时隙映射。
实际FPGA实现时，我们依赖同步技术定位到帧结构的帧头，SC-FDE中的同步 原理具体可见下图4-17。
图4-17系统同步原理框图
对于I/Q不平衡在发端的预补偿技术，通过网口采数采得收端的帧头数据，以 4096为单位进行累加，提高收端信号的信噪比，结合发端的帧头数据，我们通过二 阶统计法和WL-LS法能估计得到I/Q不平衡的参数估计,估计长度设定为最佳长度, 即3个抽头系数。在发射机中增加预补偿滤波器，使信号在发射之前先进行信号预 畸变，通过误码仪记录对应信噪比的误码率数据参数，我们能得到二阶统计补偿和 WL-LS补偿算法的性能曲线。
64
图4-18 I/Q不平衡预补偿前后的BER图
对上图4-18进行分析，二阶统计法和WL-LS的预补偿滤波器长度均为最佳长 度3个抽头系数，两者的补偿特性基本相同，系统的性能曲线没有太大的差别，上 图中的补偿曲线接近于I/Q理想平衡的系统性能曲线，说明二阶统计法和WL-LS的 预补偿技术对I/Q不平衡的系统起到很好地校正效果。通过硬件实现，我们能发现本 文采用的预补偿方案，能抵消反馈路径中的非理想频率响应。二阶统计算法建立在 发射信号和反馈信号之间的互相关关系上，此算法明确假设了发射信号是正则信号, 因此该算法最适合于低中频型移动发射机。第二种算法是基于WL-LS模型拟合原理, 没有对发送数据做二阶统计特性的假设，因此，WL-LS算法普遍适用于任意结构的 信号或任意调制方式的信号。通过对两种算法的硬件实现来评估其性能，我们证明 两种算法在低信噪比系统中有非常好的I/Q不平衡补偿校准性能。
另外，在系统的接收端对信号进行I/Q不平衡的盲补偿，由于信噪比较低，我们 通过时隙叠加提高提高信噪比，对于算法(3-42)在实际实现过程中的计算复杂度很 低，故特别适合应用于自适应解决方案中。对于长度为N的补偿滤波器，该迭代算法 的自适应部分需要4N + 1次实数乘法运算和4N-1次实数加法运算，而补偿器 y(t) = x(t) + w『x*(t)本身需要4N次实数乘法运算和2N + 2次实数加法运算。总之，
65
在自适应模式下，每个输出样本信号需要经过8N + 1次实数乘法运算和6N + 1次实 数加法运算。当系数收敛后，停止系数的更新操作，每个输出样本信号需要4N次实 数乘法运算和2N +2次实数加法运算。因此，从算法实现的角度看，本文采用的自 适应解决方案是相关文献中提到的所有针对I/Q不平衡补偿技术中最简单的解决方 案之一。通过误码仪记录对应信噪比的误码率数据参数，我们能得到基于自适应滤 波器的盲补偿算法性能曲线。
图4-19 I/Q不平衡盲补偿前后的BER图
分析图4-19,该图显示了理想I/Q不平衡、I/Q不平衡补偿前后的系统性能曲线, 从中能看出，本文采用的盲补偿技术能有效地去除镜像频率干扰。另外，与单抽头 算法相比，多抽头算法表现出更好的性能，表明模拟前端的镜像频率衰减确实存在 一定的频率选择性。由于镜像频率干扰主要来源的窄带特性，单抽头补偿器能提供 良好的性能，并且单抽头算法和三抽头算法在所获得的误差率之间的差异相对较小。 该算法建立在复杂随机信号的二阶统计特性正则特性上，在相互独立和各自符合正 则特性的信号条件下，由多个调制频率组成的宽带复合中频信号符合正则特性，由 于I/Q不平衡的非理想特性的存在，源信号的正则特性被破坏，通过恢复观测信号的 正则特性来对信号进行I/Q不平衡盲补偿。根据共聊信号去相关的相关解释，自适应
66
算法计算简单，能处理频率选择性的I/Q不平衡的复杂情况，可以有效地应用于低信 噪比系统的补偿器实现中。对自适应盲补偿算法的性能进行分析，在静态不平衡场 景中，自适应算法通过设计能遵循不平衡属性的时变性。
总之，通过硬件实现可知，即使在低信噪比的系统条件下，通过接收端的码块 累加提高信噪比，自适应盲补偿算法能有效地消除I/Q不平衡效应带来的镜像频率干 扰。在算法的推导过程中，我们没有设定特定的信号调制条件（除了信号二阶特性, 循环特性和信号正则特性），因此所采用的方案非常通用，能广泛适用于大多数通 信系统信号。另外，通过分析显示，自适应盲补偿方案在设计上独立于基础通信信 道（时间选择性衰落或频率选择性衰落等）以及载波同步误差，这一突出优点使我 们采用的补偿结构，在实际系统和接收器实现场景下可行性较高。
67
68

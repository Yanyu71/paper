4.2.5控制设备黑屏
在对搭建的智能家居系统进行测试的过程中，发现当控制设备所处网络存在过 多设备时，控制设备就会存在黑屏现象。这严重影响了系统的稳定性。对此，利用 Eclipse工具仔细检测控制设备的硬件资源损耗，发现当所处网络中设备增多的时候, 控制应用中用于检测设备心跳机制和下载设备图标的线程也相应增加。尤其在设备 图标下载不成功的时候，设备中的线程数量会急剧增加。这会过多损耗控制设备的 硬件资源。由于本智能家居系统中选定安卓智能手机充当控制设备，所以控制应用 为运行在安卓系统的安卓应用，由于安卓应用在运行过程中当设备的硬件资源己经 过度损耗不能满足需求时，安卓应用后台便会自动杀掉应用的某些线程来释放资源, 如果释放的线程为控制应用的基础线程设备就会出现黑屏现象。为了解决这一问题, 就需要对控制应用中的线程进行管理和优化，本文提出的具体解决方案是将应用中 简短而繁琐的任务放在一个新开的线程池中而不是每次都针对具体的任务来创建新 的线程以避免重复创建和销毁线程的开销。然后，将已联网设备的发现机制和未入 网设备的发现机制与应用的相关交互界面联系起来，从而减小不必要的资源损耗。 此外，将心跳机制和设备图标下载线程都开启为后台线程，降低这两类线程的优先 级，在发生资源紧缺问题时，让系统优先考虑释放这两类线程，其中设备图标下载 线程的优先级比心跳机制的线程优先级更低。

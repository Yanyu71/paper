2.2.1整体框图
本文提出方法的整体框图如图2-2所示，其中离线训练模块负责训练模糊决 策树模型，训练好的模型放在无人机内存中在路由时直接使用。路由更新模块负 责逐跳广播更新节点信息，节点信息以邻居表的形式存储在无人机内存中。路由 决策模块负责做出下一跳决策，模糊决策树通过邻居表信息预测跳数，指数加权 移动平均法预测下一跳传输的成功率，以此做出最优的下一跳决策。数据发送模 块负责传输数据包并返回ACK包，ACK包中是单跳传输的信息反馈，用来更新
图2-3周期性广播示意图
每个无人机为了探测周围无人机的信息，采用从基站开始周期性逐跳广播的 方式更新邻居表信息。广播Hello包结构如表2-1所示，Hello包中包含了广播包 的ID、发送广播节点的ID、IP地址、节点速度、节点位置、广播发送时间、跳 数信息以及加权指数平均窗口的当前更新值。如图2-3所示，当节点第一次收到 Hello包时，首先提取广播包ID信息，如果该节点第一次收到此广播包ID的广 播包，则生成一个新的包ID,其余内容为本节点信息的Hellob包并继续广播， 这样即可实现从BS发出并逐跳广播到全网连通节点的一次路由信息更新。
表2-1广播包内容
包1D
节点1D
节点速度
节点位置
发包时间
跳数
邻居表的结构如下所示，当无人机收到广播Hello包时，都会解析包信息得 到发送广播包的节点，然后将信息更新到邻居表中，邻居表结构如表2-2所示, 其中该更新时间等于广播包中的发包时间。
表2-2邻居表结构
邻居1D
邻居速度
邻居位置
更新时间
跳数
在高速移动的无人机自组网中，过期的邻居信息会造成不必要的丢包，因此 邻居表每隔一段时间就要清空,清空时间为基站广播周期加上0」s,多出来的OJs 是为了等待广播包从基站发到全网节点的时延。

2.2.5指数加权移动平均
指数加权移动平均通过采取历史信息来预测未来可能出现的情况，指数加权 平均是过去历史信息做均值处理的时候加上指数相关的权重，这样可以得到随着 时间增加而淡化历史信息样本的重要程度，离当前时间越近的历史信息数据权重 越大，离当前时间越远的历史信息数据权重越小，这一思想非常符合无人机自组 网快速移动场景的实际情况。
20
在大部分网络实际应用场景中对数据包生命周期(TimeToLive:TTL)凹都 有限制条件，无论何时在网络中生存时间超过TTL的数据包被认为失去转发到 目的地的意义，因此在转发过程中会被丢弃。为了降低端到端时延，本文在转发 过程中采用指数加权平均移动的方法预测单跳转发成功率，单跳转发成功率与单 跳时延和传输成功率相关［切。为了得到单跳时延，采用ACK反馈机制，每个成 功接收的数据包都会由接收节点j反馈ACK包到发送节点i, ACK包中带有接 收时间戳信息，因此发送节点i通过接收时间减去发送时间可以得到本次传输的 单跳时延delayijo
如果数据包由于某些原因丢失则不会产生ACK包，因此发送节点会有一个 接受ACK包的最大时间限制，超过了 ACK包的接收时间限制可以认为发包失 败。由于数据包生命周期TTL的限制，端到端时延超过TTL的数据包都会被丢 弃，因此ACK包的最大等待时间即为TTL。
在大规模网络场景中，存在节点密度较大的情况，路由协议底层MAC采用 802.11b,是最典型的竞争型接入方式，在节点密度较大的情况容易出现传输冲突 从而导致数据包传输延迟避让的情况，当节点发包出现了回退避让的情况时单跳 传输时延较大。因此转发成功率的定义应该要与传输单跳时延相关，这样保证了 预测目标是在转发成功率高的同时保证了单跳时延较低，如下所示是本次传输转 发成功率坷的定义：
0	转发失败或者超时
/? (2-11 )
IJ delay# TTL 其他情况
本文通过指数加权平均移动法进行转发成功率预测，指数加权平均移动公式 定义如下：
叫(")=(1一0)%(”-1) + 0 鸟(”―1)	(2-12)
其中，0表示可调权重系数，“0心丿表示第"次传输转发成功率的预测值， Rij (n-l)表示上一次传输转发成功率的反馈值。
本文的目标是通过模糊决策树和指数加权移动平均的分布式下一跳转发节 点在保证传输成功率不下降的情况下降低端到端时延。
由于大规模网络存在节点密度较大的场景，并且由于节点发包速率恒定，节 点密度越大越容易出现传输冲突，传输冲突会造成节点单跳时延增加，传输成功 率下降，本文通过指数加权移动平均算法通过累计的转发成功率信息预测候选转
发节点的转发成功率，从候选转发节点集中选出传出成功率期望最高的节点作为 最优节点决策。
通过模糊决策树可以得到通过每个邻居传递数据包到基站所经过链路的预 期跳数，将具有当前最小预期跳数的节点加入候选转发节点集合，当集合中有多 个节点时需要从中选择出一个最优的邻居来传输文采用指数加权移动平均以历 史转发成功率作为度量，从预估跳数最小的邻居集合中选出预测传输成功率最高 的节点作为最优转发决策，算法伪码如算法2所示：
籟入：
指数加权移动平均表(WTable)
候选转发节点集
输出：
最优转发节点ID Cgetwayld)
算法步骤：
1. 定义 Wmax^O, getwoyld=1024
2. 遍历候选转发节点集，对于发送节点i寻找转发成功率最高的候选节点
3. 如果 Wij (n) >Wmax,则 Wmax= Wv (n) , getyayld =j
4. 完成循环，得到getwayld

3.2.3基于度童学习的概率路标路径规划
静态传感器网络与移动传感器网络的主要区别是:无人机覆盖范围内节点的 传输机会不同。在静态情况下，所有被覆盖节点都是静态的，节点与无人机之间
36 的相对速度〃相同，因此，它们与无人机之间的接触时间CD取决于二者之间 的相对接触距离Dr。
CD=Dr/Vr	(3-6)
但是当地面传感器节点以不同的速度运动时，CD会有很大的差异。直观上 说当两者的CD越短，移动传感器节点与无人机通信的机会就越小。从上式可以 看出影响无人机和移动传感器节点之间CD的因素主要有两个:两者之间的相对 速度和两者之间的相对距离。传统无人机辅助网络信道接入方法的思想都是在固 定的接触时间CD内优化接入算法来提高传输效率，或者通过优化无人机的飞行 速度来提高接触时间［旳。但是本文考虑通过规划飞行路径的方式增大接触距离 Dr,以此来提高接触时间CD,并在提高接触时间CD的情况下提高信道接入算 法的性能。
•	无人机预定义飞行路径点
©	无人机调整后飞行路径点
如图3-6所示，为了优化网络吞吐量本文采用度量学习的概率路标路径规划 的方式调整无人机飞行路径点，通过优化无人机飞行路径来增大无人机与传感器 节点的接触距离来增大无人机与地面移动传感器节点之间的接触时间。
本文假设无人机无法得知全局节点信息，因此在路径规划中无法利用全局信 息进行整体规划。传统的TSP算法不再适用，概率路标发通过局部信息即可进 行路径规划，因此本文采用概率路标法进行路径规划的基本算法。概率路标法首 先需要构造概率地图，在概率地图上通过递归搜索最短路径来进行路径规划。
概率地图可以用无向循环图来表示，假设G”表示空间中的节点集，Ge表示 节点间构成的局部路径边集，则概率地图可表示为G= (Gn,Ge)。构造好概率地 图之后再利用度量学习预测目标位置数据收集的吞吐量信息，将最大化吞吐量代 替最短路径度量来递归搜索最大吞吐量路径，以此完成路径规划。
37
本文通过无人机广播收集全网连通节点信息的方式构造概率地图，收到无人 机广播包的节点将自身信息发送给无人机，并以逐跳的方式继续广播。
传统的路径规划方法存在度量不准确的现象，并且路径规划的目标通常是最 短路径或最小任务完成时间，而无人机的飞行规划会大大影响无人机辅助网络的 数据收集性能，因此需要通过度量网络性能来规划路径。在本文中通过度量学习 预测吞吐量，度量学习离线训练模型来近似得到目标预测值，再利用吞吐量度量 代替最小路径度量的方式规划路径，采用概率路标法构造概率地图规划无人机飞 行路径。
本文假设无人机有预定义的飞行路径，但是由于地面传感器节点的移动性, 这种预定义的飞行路径点并不是最优的飞行路径，因此无人机根据路径点上传感 器节点的位置和速度信息利用度量学习方法进行飞行路径的优化调整，周期性的 输出下一调整路径点，当然并不是每一次都能进行有效的调整，因为不能保证飞 行路径上的传感器节点信息都能通过多跳的方式传给无人机，当不具备这些信息 的时候，无人机按照预定义的路径飞行。
将无人机周期性广播包收集到的地面节点回传信息放入邻居表中，将邻居表 中的信息作为一跳测试数据输入到度量矩阵，输出即为邻居位置方向的预测吞吐 量，度量学习离线训练的主要参数定义如表3-2所示。
表3-2度量学习输入输出定义
输入属性符号
说明
Thr 0QS update
当前无人机收集数据的实时吞吐量
POSX
地面机器人节点横坐标
POSy
地面机器人节点纵坐标
Speedgboi
机器人节点速度
SpeeduAV
无人机基站速度
Degree
邻居节点度
输出
说明
Threaspre
预测邻居位置方向吞吐量值
Ai-Threasupdatet T防是当前无人机收集数据的实时吞吐量，预测下一位 置吞吐量时跟当前时刻吞吐量相关，如果当前吞吐量较大，则无人机需要在周围 区域多进行数据收集，相距较近的邻居节点会获得更大的吞吐量预测值，相距较 远的节点将会获得较小的吞吐量预测值。如果当前吞吐量较小，则无人机周围移 动机器人数量较少，无人机需要飞到更远的区域进行数据收集。
38
A2-POSX, Posx是地面机器人节点的横坐标。
A3-POSy, POSy是地面机器人节点的纵坐标。
A4-Speedr0b0„ Speedrobot是移动机器人的移动速度，由于预测的吞吐量代表的 是无人机基站飞到移动机器人通信范围后进行数据收集的吞吐量性能，因此机器 人的移动性越小代表无人机飞到目标位置时机器人位置偏离越小。
A5-SpeeduAV>	是无人机基站的移动速度，无人机基站的移动速度代
表影响移动到目标位置的时间，无人机移动速度越大代表无人机移动到目标位置 时机器人位置偏离越小。
A6-Degree, Degree是机器人节点的邻居节点密度，目标机器人邻居节点密 度越大代表目标位置机器人越密集，预测吞吐量越大。
输出T防easp“是无人机飞往机器人节点目标位置时的预测吞吐量，通过 如〜&6的输入属性参考，可以得到目标位置的预测吞吐量，该值再经由概率路标 路径规划算法的递归搜索，即可得到无人机飞行轨迹，无人机飞行轨迹会周期性 调整更新以适应地面机器人的移动性。
度量学习的目的是通过寻找一个合适的度量矩阵M,计算样本之间的马氏 距离度量，通过排斥异类拉进同类的方法对数据集进行分类，算法具体过程如下：
2(d“©)2©)	(3-7)
M是半正定对称矩阵可以表示为M=LTL,目的是通过矩阵M来完成对输入 属性到输出目标之间的映射，原始数据d映射到一个新的分类空间Z。度量学习 最终就是通过生成的矩阵M存储到无人机内存中，在路径规划时输入邻居属性 来映射到预测吞吐量。
首先在训练场景中运行基于LMNN算法的训练网络，来离线训练特征度量 矩阵。其中，Z为距离度量矩阵。根据同类别距离相互拉进不同类别距离相互推 远的思想，定义非等价性约束，非等价性约束的作用是把不同类别的数据相互推 远：
工工(1—几)[1 + 2(兀宀)一2(兀,切]	(3-8)
i,jwKNN /
其中皿在样本同类时为1,异类时为o, K入W代表K个样本在同一个类别 域，在本文中K取值为10,竝代表任意输入样本，砂代表和鋪同在一个域中的同 类样本，血代表入侵样本。等价性约束的作用是把相同类别的数据相互拉进，定 义等价性约束为：
%(厶)=X	(3-9)
最终结合非等价性约束和等价性约束可构造如下损失函数：
£ (Q = (1 -	(Q+(Q	(3-10)
39
其中，“为权重系数一般取0.5。
度量学习的目的是通过离线训练得到的度量矩阵来进行吞吐量预测，将邻居 信息作为输入，映射为预测的吞吐量值，然后利用预测的吞吐量值来优化无人机 的运动轨迹。
路径规划算法首先通过周期性广播收集到全网部分节点的信息，利用这些信 息构造概率地图，再将节点信息通过度量矩阵输出为目标位置的预测吞吐量值。 通过修改最短路径算法中的最短路径度量为预测吞吐量值最大度量来规划无人 机飞行轨迹，由于地面机器人具有移动性，网络性能具有动态变化的特性。为了 适应机器人位置的变化和网络性能的波动，周期性的进行路径规划来保持髙吞吐 量性能。具体算法伪码如算法3所示：
予法3在线路径规划算法	_
输入：
度量矩阵(M)
概率地图&= (G",Ge)
输出：
路径点(wayPointLisf)
算法步骤：
1. 将地图节点信息打包成测试数据data<n>
2. 将所有地图节点Gn信息输入度量矩阵M转换为每个节点位置的预测吞吐量Threspre
3. 通过递归搜索所有地图节点，利用最短路径算法生成路径点wayPointList.
4. 周期性执行上述3步，更新飞行路径。

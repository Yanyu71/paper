3.5.5启动实时信号处理D2D进程模块
当主控程序通过ZMQ传输机制接收到迁移发起端发送的“start_d2d”控制 指令之后，程序会跳转到启动实时信号处理程序的处理模块，并进行而应的启动 处理工作。
首先根据迁移目的端动态迁移系统主控程序通过ZMQ机制接收到的 control flag的值来决定下一步操作。
48
当接收到的control flag的值为0时，主控程序调用cmdProcess函数启动实 时信号处理的D2D进麻。在启动结束后，检测D2D进程启动是否成功。如果启 动成功，将会继续后续操作；如果启动失败，则向迁移发起端发送D2D进程启 动失败的消息，同时结束本次处理过程。
当接收到的control_flag的值为1时，主控程序接收迁移发起端发送过来的 包含D2D程序相关控面信息，并保存在迁移目的端动态迁移系统的Control变量 中。随后调用cmdProcess函数启动D2D进程，并将相关控制信息以参数传递的 形式传入到D2D程序中，以供D2D程序使用。在启动操作完成之后，检测D2D 进程是否启动成功。如果启动成功，则继续进行后续操作；如果启动失败，则向 迁移发起端发送D2D进程启动失败的消息，同时结束本次处理过程。
当D2D进程启动成功，主控程序会向迁移发起端发送D2D进程启动成功消 息，并结束本次启动进程操作。同时系统也会创建新线程用于釆集启动的D2D 程序的相关控制信息，保存在变量Control中，并且该线程每个10s就会启动一 次采集信息操作，用于不断更新系统中Control变量的值。
迁移目的端中实时信号处理D2D进程启动操作流程如图3-21所示。
图3-21迁移目的端D2D进程启动操作流程

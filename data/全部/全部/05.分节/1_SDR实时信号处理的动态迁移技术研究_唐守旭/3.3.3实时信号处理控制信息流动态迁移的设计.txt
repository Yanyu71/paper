3.3.3实时信号处理控制信息流动态迁移的设计
为了使针对D2D信号处理的程序能够在迁移冃的端(IBM Server2)上尽快 的恢复之前的数据处理业务，所以在D2D程序从IBM Serverl迁移到IBM Server2 的过程中，首先将尽可能多的，短时间内基本不会发生改变的控制信息先发送到 IBM Server?,这样会帮助D2D程序快速地恢复起来，建立起与业务发起端(IBM Server3)之间的业务数据链路链接，缩短IBM Server3上的数据处理业务中断时 间，提高动态迁移的总体效率。
在迁移发起端的动态迁移系统中，创建一个单独的线程定期从D2D信号处 理程序中收集相关的控制信息，并维护更新迁移发起端迁移系统中相应的标志信 息变量。针对该D2D信号处理程序，动态迁移系统需要维护的主要标志信息的 变量如表3-3所示[2珥，当使用其他实时信号处理程序，将根据其特点维护不同的 控制信息变量表。
表3-3动态迁移系统中D2D程序控制信息变量表
标志信息变量	变量描述
workmode	工作模式：0-主机模式，1-从机模式，2-基站模式
phy_cell_ID	物理层小区id,范围：0-503
group ID	小区组id,范围：0〜167
cell ID	小区组内id,范围：0~2
Cplype	CP (循环前缀类型)：0为normal, 1为extended
BW	系统带宽：5,10,20,单位为MHz
RBIdx	系统资源RB个数
duplexMode	通信制式：0-TDD, 1-FDD
numAntennaTX	发送天线个数：1,2,4
numAntennaRX	接收天线个数：1,2,4
DLULAssign	上下行子帧配置
trans_mode	传输模式
lype_mode	编码方式：1-QPSK, 2-16QAM, 3-64QAM
RNTI	RNTI类型
表3-3中描述的参数变量及;	圭值，在动态迁移系统中被保存在Python的字典结
构变量Control中，其保存形式如下：
Control [ucontrol_val_name,^] = control_val_value
当动态迁移发起时，动态迁iW会首先将系统矫维弟的这些与D2D实时 信号处理程序控制信息相关的标志变量从迁移发起端IBM Serverl发送到迁移目 的端IBM Server2, IBM Server2上也会有相应的变量来存储这些信息，然后在启 动D2D实时信号处理程序进程的时候,将这些控制信息变量传送到D2D程序中， 使D2D程序可以直接利用这些已有的控制信息来更快地恢复数据业务处理能力,
29
避免D2D实时信号处理程序重新在接收数据中检测和计算这些控制信息所耗费 的时间，从而缩短业务发起终端(IBM Server3)的数据业务中断的时间，提高 整个动态迁移过程的实时性和迁移效率。
在向迁移目的端发送控制信息的同时，也将发送控制信息标志位，用来表征 此次启动的D2D进程是否包含控制信息。标志位表示如下：
control_flag=0 表示启动不包含控制信息D2D进程 control_flag=l表示启动包含控制信息的D2D进程 在动态迁移系统设计二苇中将会详细介绍控制信息的迁移流程。

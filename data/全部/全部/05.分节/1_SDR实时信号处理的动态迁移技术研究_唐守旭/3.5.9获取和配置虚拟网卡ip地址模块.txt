3.5.9获取和配置虚拟网卡ip地址模块
当主控程序通过ZMQ机制接收到由迁移发起端发送过来的“get_tun_ip”控 制指令之后，主控程序将通过调用“ifbonfig”指令，获取迁移目的端羸虚拟网 卡ip地址，并将其保存在tun_ip变量中。如果获取ip地址成功，则通过ZMQ 机制将该ip地址发送到迁移宏起端，如果获取失败，则向迁移发起端发送获取 失败消息。
当主控程序通过ZMQ机制接收到由迁移发起端发送过来的“set_tun_ip”控 制指令之后，迁移系统将接收到迁移发起端发送过来的ip地址值，异蒋液地址 保存在tun_ip变量中，然后调用“ifconfig”指令配置迁移目的端的虚拟网卡地 址为tun_ip的值，并通过ZMQ机制向迁移发起端发送虚拟网卡ip配置结果。
动縁移系统中，获取和配置迁移目的端的虚拟网卡ip地址的操作流程如图 3-25所示。
52
接收迁移发送端发 送的ip地址，并保 存在tun ip变量中
调用 ifconfigSE置
虚拟网卡ip地址一配置失败
向迁移发起 端发送配置 ipife址央败
图3-25获取和配置虚拟网卡ip地址的操作流在

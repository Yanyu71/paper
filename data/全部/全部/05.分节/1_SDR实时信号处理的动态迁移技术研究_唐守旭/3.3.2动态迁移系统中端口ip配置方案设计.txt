3.3.2动态迁移系统中端口ip配置方案设计
由于USRP只能识别与之相连的端口 ip为192.168.10.1的IBM Server,所以 要保证多个通过千兆交换机与USRP设备进行物理相连的端口（即图3-8中的 eth3端口）中，只能有一个端口的ip为192.168.10.1,否则会产生ip冲突，导致 出现多个eth3端口 ip都为192.168.10.1的不同IBM Server中的USRP实体请求 与USRP设备进行数据连接的情况，这样USRP将无法决定到底跟哪一个IBM Server中的USRP实体进行连接，进而就会导致IBM Server中的USRP实体连 接失败，导致整个USRP进程失败。所以在同一时间只能有一个eth3端口 ip为 192.168.10.1的IBM Server中的USRP实体请求与USRP设备进行数据连接，这 时USRP设备才会确定与唯一的USRP实体建立起数据链路连接。
由于USRP设备的这个特性，所以在动态迁移系统中，就需要动态的修改与 IBM Server的eth3端口的ip,以实现USRP实体与USRP设备之间数据链路的 建立与断开来满足迁移的需要。
在动态迁移过程中，动态迁移系统首先会将迁移发起端的IBM Server 1中通 过千兆交换机与USRP设备相连的eth3端口的ip配置为192.168.10.1,其他暂时 不希望与USRP设备建立数据链路链接的IBM Server （即迁移目的端的IBM Server2）的eth3端口 ip配置为其他子网字段（本系统采用192.168.20.*子网字 段）。
当迁移发生时，动态迁移系统会将当前与USRP设备进行连接的IBM Serverl
28
的eth3端口 ip修改为其他子网字段(192.168.20.*),然后把迁移目的端IBM Server2的eth3端口 ip修改为192.168.10.1,这样可以避免在与USRP设备有物 理连接的端口中同时出现多个ip为192.168.10.1的情况，而解决了由于ip冲突 的导致USRP设备错乱的问题。具体的修改ip逻辑顺序等细节问题将会在动态 迁移系统的设计一节进行详细的介绍。

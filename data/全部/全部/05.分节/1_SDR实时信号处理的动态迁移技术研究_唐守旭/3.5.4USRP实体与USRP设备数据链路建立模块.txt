3.5.4USRP实体与USRP设备数据链路建立模块
当主控程序通过ZMQ机制接收到迁移发起端发送的“link_usrp”控制指令 之后，程序会跳转到建立USRP实体与USRP设备之间数据链冨的处理模块，并 进行相应的链接处理操作。
47
迁移目的端主控程序首先将与千兆交换机相连的eth3端口的• ip地址配置成 192.168.10.1,使满足USRP设备的通信要求。如果端口 ip配置成功，则通过 “uhd_find_devices”指令不断检测USRP设备；如果端口 ip配置失败，则终止 本次蘿接曲建立操作，并向迁移发起端发送操作失败的消息。
如果在规定次数内检测到了 USRP设备的存在，则将会继续进行下一步，调 用uhd::usrp::multiusrp::get_device建立起已创建的USRP实体与USRP设备之间 的数据链路连接;果超囱定次数仍没有检测到USRP设备的存在，则将会终 止此次链接操作，并将eth3端口的ip修改回192.168.20.2,并向迁移发起端发送 USRP进程启动失败的消息。
迁移目的端中，建立USRP实体与USRP设备之间数据链路链接的操作流程 如图3-20所示。
图3-20建立USRP实体与USRP设备之间数据链路链接的操作流程

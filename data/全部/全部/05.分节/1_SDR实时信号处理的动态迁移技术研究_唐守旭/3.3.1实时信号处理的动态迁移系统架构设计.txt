3.3.1实时信号处理的动态迁移系统架构设计
针对通信业务中具有高实时性要求的实时信号处理业务，设计的动态迁移方 案架构图如图3-8所示。
端口 eth3|C^]
IBM Server2
数据业务接收端
图3-8实时信号处理的动态迁移系统方案示意图
针对动态迁移系统方案有以下几点需要说明：
•本系统设计中的实时信号处理程序使用的是基于LTE通信协议的D2D 信号处理程序【削。该实时信号处理程序既能够在基站覆盖下，与基站进 行同步，使不同D2D终端以基站为同步源，实现不同终端之间的数据业 务通信；又能够在非基站覆盖下，在不同D2D终端之间自主分配主从关 系，建立局部通信网，实现不同D2D终端之间的数据业务通信。
• 将IBM Server与USRP设备进行物理连接的端口都配置为eth3,如图3-8 所示。由于USRP设备的特殊要求，只能够识别与其相连，且端口 ip为 192.168.10.1的IBM Server建立链接和进行数据通信。在迁移系统中需 要针对USRP设备的这个特性进行专门的设计。
27
•数据业务接收端（IBM Server 1或者IBM Server2）利用虚拟网卡ip地址 作为与其他终端进行通信的地址。因此，在迁移过程中，需要将迁移发 起端的虚拟网卡ip地址发送到迁移目的端，以保证迁移前后，数据业务 接收端具有相同的地址配置，使数据业务处理能够继续进行。在动态迁 移系统中，虚拟网卡的ip地址获取与配置利用“ifconfig”指令来完成， 并将获取的ip地址保存在变量“tun_ip”中。
获取虚拟网卡ip指令：ifconfig tun 配置虚拟网卡ip指令：ifconfig tun tun ip
•数据业务发起端（IBM Server3）通过ping数据业寡与数据业务接收端进 行通信，以验证动态迁移的性能。
•整个动态迁移系统控制架构是通过Python脚本编写而成卩％,由迁移发起 端和迁移目的端两部分控制程序组成。下两节将会进行详细的介绍。
•动态迁移系统中，不同Server之间通过ZMQ通信机制在局域网内进行 通信与控制信令传输㈤〕。
本系统首先建立起两个D2D终端（即IBM Server3与IBM Serverl两个计算 处理单元）之间的数据通信业务链路的链接，并利用IBM Server3发起ping数据 业务，与IBM Serverl进行数据业务通信。在ping数据业务通信进行中，利用该 动态迁移系统将D2D实时信号处理程序从IBM Serverl迁移到IBM Server2上， 并继续进行与IBM Server3之间的ping数据业务通信。在迁移过程中，IBM Server3上的业务会出现不影响用户体验的短暂的暂停现象，随之马上又恢复正 常业务通信。对于IBM Server3并不会觉察到与自身进行数据业务通信IBM Server已经发生变化。

4.2.2.1路由表信息的建立
中继终端为了实现将接收到的数据信息通过自身的处理转发到目的终端，需 要知道数据信息所要到达的最终目的终端的ip地址，同时还需要知道要将数据 信息转发到该目的终端所需要经过的下一个中继终端（也可以直接是目的终端） 的ip地址，也就是下一跳ip地址。
针对本章的具有中继转发业务处理能力的实时信号处程序中的，通过维护一 个结构体来保存相应的路由信息，结构体的元素变量内容如表4-1所示。其中， destID保存着数据信息所要到达的最终的目的终端的ip地址，nexthop保存着数 据信息要到达最终目的终端所要经历的下一跳终端的ip地址。ip地址以索引代 号的形式，这样利用节省保存空间与查找，每个索引对应着唯一的ip地址，所 以通过索引就可以找到相应的ip地址。
表4-1纟吉构体route_t中元素变量内容
destID	目的终端ip地址
nexthop	下一跳终端ip地址
启动D2D程序后，中继终端系统通过不断的对外探测，发现该终端所能够 到达的所有终端的ip地址⑶】，这些终端既包括该中继终端有直连路径能够直接 到达的，也包括可以通过一个或多个中继终端的转发可以到达的。中继终端将这 些探测到的可以到达的终端的ip地址和到达这些终端所要经历的下一跳终端的 ip分别保存在route t结构体的成员变量destID和nexthop中。至此，建立起中 继终端中实时信号虹理进行数据转发所需要的路由表信息。当中继终端D2D程 序接收到通信业务数据信息时，会从中解读出该通信业务数据所要到达的最终目 的终端的ip地址，然后通过路由表信息找到相应的下一跳终端ip地址，并将该 通信业务数据转发到该下一跳终端。
整个路由表的建立过程将会花费可能高达数秒甚至十几秒的时间，但是保存 在route_t结构体中的信息只会随着中继终端可到达的终端的变化而添加或者删 除相应而ip地址信息，这个过程的变化将会是缓慢和不频繁的。因此，在迁移 过程中，需要将该路由表信息从迁移发起端迁移到迁移目的端，而避免在迁移目 的端重新建立该路由表，这将会大大缩减中继终端中转业务的恢复建立，提高迁 移的效率和实时性。

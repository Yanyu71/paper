3.2.1.1USRPN210母板
如图3-2所示，整个USRPN210系列的母板被分成几个主要的功能模块
RAM
Clock
generat
——Gtf
图3-2USRPN210母板架构图
•FPGA模块：FPGA模块在USRP系统中的作用是非常关键的，其能够 完成高速的运算。FPGA模块所完成主要工作是执行高速的数学运算， 并利用DDC模块把信号从中频频段搬移到基带上，然后对信号进行采 样以降低数据的传输速率，使其可以在千兆以太网上进行传送，并适应 于计算处理服务器端的计算能力。在发送路径行，FPGA模块的情况几 乎与接收路径上的一样，除了其中利用DUC （数字上变频器）来实现。
•DAC/ADC模块：USRP有4个高速的12位模拟数字转换器，采样速率 为64M/s,因此USRP可以数字化的带宽为32MHz；在带通滤波上，A/D 转换器可以完成大约200MHz的采样信号。在传输路径上有4路高速的 14位数模转换器，它们的时钟频率为128MHz,因此可以计算岀来奈奎 斯特频率为64MHz。为了让滤波容易一些，使用低于该数值的频率，因 此提供了直流到44MHz的输出频率。
•片外存储器模块：USRP的片外存储器分为三种，一种是FLASH芯片, 用来存数FPGA的相关配置文件和ZPU的firmware程序；另外一种是 EEPROM,用来母板的一些基本信息；最后一种是SDRAM,用来作为 发送链路I/O数据的缓冲FIFOo
18
•以太网物理层模块：以太网物理层模块使用ET1011C2千兆以太网芯片， 这样就要求必须使用千兆以上带宽的链路与USRP N210母板进行连接。 和FPGA模块连接的接口是GMII接口。
•辅助I/O数据接口： USRP母板上有一个高速的64位的数字I/O接口， 其中32位被用于IO_TX, 32位被用于IO_RXo
USRPN210母板的整个工作流程为：USRP上点之后，FPGA会从外部的 FLASH存储器中读取相应的配置文件和ZPU的firmware相关程序，然后进行初始 化操作，完成对母板和子板上的其他相关芯片的配置，接下来通过千兆以太网和 IBM Server建立起I/O数据传输链路。当USRP母板通过千兆以太网接收到从IBM Server端发送过来的I/Q数据后，对其进行DUC操作和滤波处理，再传送到DAC 进行相应的数模变换，然后利用射频子板模块对DAC输出的模拟信号进行混频、 放大等处理操作，最后从空口天线端发射出去。反过来，当USRP接收到IBM Server发起的接收操作请求，从ADC模块得到射频子板模块传送过来的中频信号, 然后再进行DDC操作和滤波处理，接下来进行打包组帧，然后将该数字信号通 过千兆以太网发送到IBM Server端。另外，FPGA还需要不断的维护相应的发送 接收的定时器，以便于IBM Server能够通过相应的时间戳的机制来实现空口同步。
USRPN210的具体工作流程示意图如图3-3所示。
19
USRP设备上电
▼
FPGA定时器 打时间戳		USRP设备 与IBM Server•进 行数据链路链接	V千兆以太网A	IBM Server
w
DUC操作与
滤波处理
子板模块处理
和ADC转换
天线发射与
接收
((?))
图3-3USRPN210母板工作流程示意图
FPGA子系统是USRP设备中最重要，也是完成主要功能的模块。FPGA模块内 部包含了一个SOPC系统，该系统内部包含了不同的功能模块来完成各自的功能, 其中主要的子模块有以太网子模块，ZPU子模块，DSP链路子模块和VITA控制
20
子模块等，各个子模块之间的通信是通过wishbone来完成的。通过各个不同子 模块之间的相互协作，FPGA子系统完成了整个系统的主要配置工作和收发数据 工作。USRPN210 FPGA子系统数据链路架构如图3-4所示。
图3-4USRPN210 FPGA子系统数据链路图

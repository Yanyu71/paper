4.2.3.1迁移发起端的中继处理迁移流程
为了实现中继处理业务所需的路由表信息迁移，需要在迁移发起端动态迁移 系统中再创建一个新线程用于釆集D2D程序中的route_t结构体信息，保存在动 态迁移系统中。
在动态迁移系统主控程序接收到启动实时信号处理相关进程指令DS之后， 首先启动相关D2D进程和USRP进程，启动过程参见上一章。在进程启动完毕 之后,主控程序会创建一个新线程，该线程用来定期从D2D程序中获取路由表 信息，并更新迁移系统中的routeJist变量信息，保证迁移系统维护一套最新的 路由表信息，图4-3中绿色方框内描述了该线程的操作流程。
当主控程序接收到迁移指令M或者Migration时，首先通过ZMQ机制向迁 移目的端发送配置迁移系统路由表变量的控制指令一一set_route,同时将变量 routejist也发送到迁移目的端以供使用。如果迁移目的端返百配置路由表变量失 败的宿息，则停止本次中继处理迁移操作，退出迁移模块。如果返回配置成功的 消息，则主控程序将会进行迁移操作的其他流程，直到迁移处理完毕为止，具体 流程参加上一章相关内容，完成迁移操作之后，主控程序结束用于更新系统路由 表信息的线程，然后退出。
迁移发起端动态迁移系统中，将中继处理业务迁移到迁移目的端的处理流程 如图4-3所小o
61
图4-3中继处理业务动态迂移过程中迁移发起端处理流程

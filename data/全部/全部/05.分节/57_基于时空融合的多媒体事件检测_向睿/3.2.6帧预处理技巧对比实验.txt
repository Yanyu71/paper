3.2.6帧预处理技巧对比实验
由于从视频中采样的视频帧尺寸不一定与原网络适配，本文测试了三种图像与网 络适配的方式对最终事件检测准确率的影响。
该试验采用VGG19网络作为视频帧的特征提取模型，视频帧采样间隔为每5帧 取一帧，VGG19网络的原始输入默认为224X224的正方形图片，本文通过以下三种 方法进行处理：
(1)	resize
对于一张长宽不等的矩形视频帧图片，该方法将图像以线性内插的方式放缩到 224X224。在最后一个卷积层均按照密集局部特征提取的方式提取IX 1,2义2,3X3,6 X6四种尺度特征图的响应，每帧得到50个局部特征。
(2)	crop
对于一张长宽不等的矩形视频帧图片，该方法先将图像在保持长宽比不变的情况 下放缩到短边为224的尺寸，再居中截取出丁个224X224的正方形图片作为网络输
20
入。在最后一个卷积层均按照密集局部特征提取的方式提取IX 1,2X2,3X3,6X6四 种尺度特征图的响应，每帧得到50个局部特征。
(3)	Whole
该方法先需要对网络参数进行一定转换，由于VGG19网络中含有全连接层，而 全连接层限制了前一层特征图的尺寸，所以无法支持变尺度的图像输入，这种情况可 以考虑将全连接层转换为卷积层，但由于我们只提取网络最后一层卷积层的输出，所 以实验中去掉了全连接层和softmax层，并在最后一层卷积层之后接上了高度为3的 SPP层。对于一张长宽不等的矩形视频帧图片，该方法先将图像在保持长宽比不变的 情况下放缩到短边为224的尺寸，再按照该矩形图像尺寸调整网络尺寸。在进行前向 传播之后，对SPP层的输出进行切分，每帧得到21个局部特征。
在此基础上不同的视频帧处理方法在SMALL_10EX数据集上得到的mAP如表 3-3所示：
表3-3视频帧处理方法对比实验结果
视频帧处理方法	mAP
resize	0.423
Crop	0.451
Whole	0.446
结果分析
上述表格可以看出，crop方法为最优方案。
resize方法会对原图的形状比例由一定程度的拉伸，一定程度上影响了局部特征 的准确性，使得最终事件检测准确率较低。
crop方法不会对原图的形状产生扭曲，但会舍弃图像边缘的一部分信息，然而由 于视频本身的主要目标往往集中出现在视频中央，所以crop方法舍弃的信息对最终 事件检测结果影响较小，其准确率较resize较高。
而whole方法既没有对原图进行拉伸也没有丢弃边缘信息，但是由于网络最后一 个卷积层的输出尺寸短边长为7,而长边长不确定，可能存在进行pooling运算时对 其边缘补零的情况的情况，这种边缘效应使得图像边缘产生的局部特征缺乏一定准确 性，从而降低最终准确率。而crop方法由于输入尺寸固定，可以人为设计pooling核 大小和步幅，例如实验中采用(大小，步幅尸(7,6),(4,3),(3,2),(2,1)四种pooling核来获取 1X1,2X2,3X3,6X6三种尺度的特征图，避免了最后一层特征图上补零的情况。但比 较crop方法和whole方法，两者在最终结果上相差不大。

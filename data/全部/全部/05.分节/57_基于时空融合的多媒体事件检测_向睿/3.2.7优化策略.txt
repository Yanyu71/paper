3.2.7优化策略
视频帧特征提取是整个框架耗时最多的一部分，本文同时采取了多种简化优化策 略来对特征提取过程进行加速和减少开销，但由于优化策略根据实际运用时硬件配置 的不同也将不同，所以每本没有给出对于每种策略不同参数下的实验结果，仅仅列出 整体的优化结果并根据理论上的依据对其进行分析。
1	.加大帧的取样间隔
对于帧的取样间隔取舍，一般认为小的取样间隔将会使总的局部特征数量增加， 使整个视频被描述得更加详细，从而使最终的事件检测准确率提高，而大的取样间隔 会使总的局部特征数量减少，对视频整体的描述更加粗略，从而使最终的事件检测准 确率降低。而过小的视频间隔会使相邻的视频帧提取出的局部特征缺少变化，过于相 似的特征可以认为是冗余的。另一方面，由于MED视频长度从10秒到10分钟不等, 长视频将产生远多于小视频的局部特征，对于长视频可以采取加大采样间隔的策略。
在本文其他的实验中，采用了 5帧一次的固定取样间隔的方式，之后对其进行了 优化，改为了 8帧一次的采样间隔，于多余3000帧的视频，本文加大了视频帧采样 间隔，使其采样的总帧数接近3000帧。本文就改进后的准确率和耗时跟之前的方式 进行了对比，网络采用了 GoogleNetl2988c模型作密集局部特征提取，其在 SMALL」0EX数据集上的mAP与耗时如表3-4所示：
表3-4取样间隔优化实验结果
方法	mAP	特征提取耗时
改进前	0.504	34h
改进后	0.506	22h
2	.并行处理
并行处理可以大幅度提高视频解码速度和特征提取速度，本文从工程方面优化了 特征提取的过程，对于视频解码出的需要进行特征提取的帧，本文采用Mini-batch的 形式对其进行合并作为网络进行前向传播。由于卷积神经网络进行计算时均以矩阵乘 法作为基本运算，mini-batch的形式将多个小矩阵的相乘的形式合并成了大矩阵的相 乘的形式，这使得计算效率大大提高。同时由于视频解码主要依靠CPU,特征提取 依靠GPU,而视频解码和特征提取采用了异步的方式，这意味着两者需要互相等待, 资源不能被同时利用上，所以本文采用了多线程调度的策略来使特征提取过程加速。
22
本文测试了 Mini-batch大小为10、4个线程的情况下的特征提取耗时，测试样本 为SMALL_10EX数据集上8030个视频，由于并行策略并不会改变事件检测准确率, 所以该试验并没有进行特征融合和类别预测的过程，仅在表3-5中列举出了并行情况 下的耗时与非并行情况下的耗时。
表3-5并行优化实验结果
方法	耗时
非并行	22h
并行	5h20min
3	.减少局部特征数量
本文尝试了减少局部特征数量来减少中间存储消耗，由于局部特征数量关系到最 终准确率的结果，本文仅对比了由IX 1,2 X 2,3X3三种Max Pooling尺度产生的14 个局部特征和IX 1,2X 2,3 X 3,6X6四种Max Pooling尺度产生的50个局部特征的准 确率和存储消耗。实验以GoogleNetl2988c为模型进行特征提取，使用VLAD进行特 征融合和SVM进行类别预测，其在SMALL_10EX数据集上的mAP和存储消耗如表 3-6所示：
装3-6减少局部特征数量实验结果
Max Pooling 尺度	存储大小	mAP
1X1,2X2,3X3,6X6	1.2T	0.498
1X1,2X2,3X3	367G	0.497
4	.实验结果分析：
根据实验结果，我们可以观察到，一定程度地加大取样间隔对特征提取速度有较 大地提高,而准确率没有几乎保持不变;并行处理对特征提取速度有着大幅度的提高; 一定程度地较少局部特征数量在保证准确率几乎不变的情况下大幅度地降低了存储 消耗。这三种优化策略可同时使用，能够大幅度提升系统整体的运行效率和节省资源 开销。

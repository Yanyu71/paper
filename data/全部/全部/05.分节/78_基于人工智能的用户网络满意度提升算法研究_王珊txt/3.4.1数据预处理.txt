3.4.1数据预处理
本实验原始数据来源于运营商某地市公司2018年12月的用户投诉数据，包含有效 样本3351条，其中未投诉样本3134条，投诉样本207条。原始数据共316个字段，根 据类别将字段分为基本信息、终端信息、话费信息、通话行为、上网行为、APP使用情 况、打分情况、投诉情况八类。部分用户投诉字段说明见表3-2。
表3-2客户投诉数据字段说明
类别	变量名称
基本信息	性别、年龄、用户在网时长、套餐、是否高星用户、是否学生、用 户级别、是否手厅活跃用户、黑名单标识、停开状态、欠费标识、 出行省内次数、出行国内次数、出行国外次数
终端信息	使用手机总数、使用手机品牌数、最便宜手机价格、最贵手机价 格、使用苹果手机数
话费信息	账单费用合计、减免费用合计、未结清费用合计、拒缴费用合计、 充值卡抵扣费用合计、其他实收费用合计、近半年账单费用最大、 近半年账单费用平均
通话行为	通话总次数、通话总时长、免费通话次数、免费通话时长、主叫通 话次数、主叫通话时长、被叫通话次数、被叫通话时长、2G通话 次数、2G通话时长、3G通话次数、3G通话时长、4G通话次数、 4G通话时长、4G高清语音通话次数、4G高清语音通话时长、长 途通话次数、长途通话时长、接听10086次数、接听10086时长、 拨打10086次数、拨打10086时长
上网行为	总流量、平均月流量、上行流量、下行流量、忙时上行流量、忙时 下行流量、闲时上行流量、忙时下行流量、工作日流量、非工作流 量、2G流量、3G流量、4G流量、移动数据上网收费流量、移动 数据上网闲时流量、移动数据上网忙时流量
APP使用信息	各类型app上行流量、各类型app点击次数
打分情况	打分总体、打分资费、打分服务、打分网络总体、打分网络覆盖、 打分手机上网、打分语音通话
投诉情况	投诉总次数、各类投诉次数
（1）数据清洗
a）重复性检验
根据用户编号（N。）字段，检验原始数据中是否存在重复数据。经检验，3351条原 始数据以用户编号（No）字段作为唯一标识，不存在重复数据。
b）缺失值处理
25
针对数据采集过程中由各种原因导致的记录丢失或不确定的情况，本文将采用两种 方法处理缺失值：
•统计变量缺失比例，剔除高比例缺失变量（缺失比例高于30%）,最终共剔除变 量172个；
•对关键变量，对缺失值进行填补。
对于分类打分这样能体现用户感知并能通过用户的某些行为进行推断的关键变量, 本文采用回归的方法对缺失值进行填补，统计分类打分情况如下：
表3-3关键变量缺失情况统计
变量英文名	变量中文名	缺失比例
score ni	打分总体	0
score_fee	打分资费	0
score_serve	打分服务	33%
score__net	打分网络总体	0
score_call	打分语音通话	0
C）低信息变量处理
当大部分用户在某一变量上分布较为集中时，认为该变量在构建模型时贡献度较小, 本文对变量中属性集中程度大于80%的变量进行剔除，共剔除34个变量，剔除的部分 变量如表3-4所示。
（2）缺失值补全
原始数据共316个变量，经过数据清洗，剔除高比例缺失变量172个，剔除低信息 变量34个，剩余110个变量。
本文使用最可能的值对缺失值进行填补，通过多元线性回归的方法基于推理将变量 “打分服务”补全。与其他方法相比，它使用已有数据的部分信息来预测缺失值，在估 计打分服务的缺失值时，通过考虑其他属性的值，有更大的机会保持“打分服务”与其 他属性之间的联系。通过相关性检验，以皮尔森相关系数为衡量指标，挑选与“打分服 务”相关性最高的10个字段用于构建多元线性回归方程，这10个字段如表3-5所示， 所得回归方程如公式（3-7）所示：
score _ serve = 0.674 * score _ fee + 0.108* score _/h + 0.133* score _ net + 0.005 * totalflue
-0.04 * busytime _ down _ flux - 0.096 * work _ day _ flex+0.041 * rest _day _ flex	（3-7）
-0.012* busytime _up _flux
由公式（3-7）可以看出打分资费、打分网络、打分总体与打分服务均有正向关系。 从回归模型系数的检验来看，参数显著性检验均大于0.1,最终调整后的R方为0.734, 该回归模型预测效果良好。
26
表3-4低信息变量统计
变量英文名	变量中文名	集中程度
os_cnt	停开状态	96%
stude 叫 flag	是否学生	99%
travelguowai	出行国外次数	97%
wlan_dur	WLAN使用时长	99%
camp_wlan_dur	校园WLAN使用时长	99%
pc_wlan_dur	pc端WLAN使用时长	99%
grp_wlan_dur	政企WLAN使用时长	99%
call_10000_cnt	与10000通话次数	95%
call 10000 dur	与10000通话时长	95%
call 10010 ent	与10000通话次数	99%
call 10011 dur	与10000通话时长	99%
call_10088_cnt	与10088通话次数	94%
call 10088 dur	与10088通话时长	94%
call 114 ent	与114通话次数	93%
call 114 dur	与114通话时长	93%
g3_net_flux	3G流量	98%
acct_type	账户类型	98%
pay_family_flag	家庭统一支付标识	99%
fav_fee2	减免费用合计	98%
gene_pay_fee	代付合计	98%
refused_ffee	拒缴费用合计	98%
card_pay_fee	充值卡抵扣费用合计	98%
otherjpay_fee	其他实收费用合计	98%
表3・5与“打分服务最相关的字段”
变量	变量解释	皮尔逊相关性
score_fee	打分费用	.827**
score_net	打分网络	.619**
score_m	打分总体	.592**
age	年龄	.141**
innet_dur	用户在网时长	.124**
totalflue	总流量	-.121**
busytime_down_flux	忙时下行流量	-.114**
work_day_flex	工作日流量	-.113**
rest_day_flex	非工作日流量	-.109**
busytime_up_flux	忙时上行流量	-.103**
27

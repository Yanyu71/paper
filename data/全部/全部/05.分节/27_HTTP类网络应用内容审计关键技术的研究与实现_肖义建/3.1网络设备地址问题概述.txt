3.1网络设备地址问题概述
从十九世纪五十年代开始互联网从概念到雏形,直至现在的深入到人类社会 的各个角落，至今已历经了半个多世纪的历史，其间经历了巨大的变化。其中最 重要的变化之一是网络通信方式的不断变革发展，网络传输层协议也经历了从 NCP(Network Control Protocol)到TCP/IP的演进，最终将存在于世界各个角落各 式各样的具有不同结构、多种类型的计算机网络连接起来。因其简单的实现，高 效的数据传输等优秀的性能，TCP/IP协议族在互联网中逐渐赢得了当下的重要 地位，成为了互联网中的实际标准。如同信息技术的各个领域一样，TCP/IP的 一个重要的特质就是不断的优化、提升，用以应对新挑战，满足新的需求。.
TCP/IP协议族同样面临着相当多的问题，其中一个就是网络设备地址分配 不足。TCP/IP协议族中目前被广泛釆用的网际层协议是IPv4,该协议最早于19 世纪80年代初推行，釆用32位的二进制数字表示地址。因此，IPv4可用于的 互联网地址数为大致为232(43亿)。扣除特殊用途地址，如私有网络地址、本机 回环地址等，实际可用的网络地址仅为约37亿。在互联网的高速发展之下，IPv4 提供的地址数量愈发的捉襟见肘。
全球互联网IP地址由互联网号码分配机构(Internet Assigned Numbers Authority, IANA)管理。IANA将IP地址分配的交由五个大的区域互联网注册 机构(Regional Internet Registries, RIRs)负责，这五个大的区域互联网注册机 构负责将IP地址进行逐级分配。其中，亚太网络信息中心(Asia Pacific Network Information Centre, APNIC)负责亚洲太平洋区域的互联网注册机构，IANA已 于2011年2月3日将最后的未分配IP地址区段平均分配给了全球五个大的区域 互联网注册机构［项。
据 APNIC 的 2014 的年度报告，LACNIC (Latin America and Caribbean Network Infonnation Centre)的IPv4地址资源已不足a/9,即800万个左右。这也意味着，拉美及加勒比地区的IPv4地址几近耗尽。其他各区的情况也大致类 似。
对于情况目前来说,IPv4地址耗尽的最为彻底和有效的应对策略是使用IPv6, 即第六个版本的IP方案的解决方法。IPv6是网际协议的最新版本，它使用128 比特存储网络地址，从而扩展了 IP地址空间。同时，IPv6还简化了 IP报文的报 头格式，增加了新的选项，这些新的变化方便了 IP协议的使用及实现，使得操 作更加高效。但存在设备兼容性问题，设备更新成本等问题,今年虽有迅速发展， 但是仍未得到大面积应用，2014年，全球范围内IPv6的普及率仅为5%。
然而，因为兼容性、成本等问题的原因，目前获得广泛应用的方式是机构自 有网络内部使用私有地址方式组网，在网络的出口通过NAT设备与外部网络相 连，最终连接到互联网。这样就可以使用少量，甚至仅需要一个有效IP地址将 大量的网络设备连接到互联网上。通过NAT方式连接互联网的方式，虽然只能 暂时性的解决IPv4地址耗尽的问题，但是因其部署方便，成本低等特点，获得 了广泛的应用，成为解决IPv4地址即将枯竭问题的主要方案。
目前NAT共有四种实现方式，分别是：
完全圆锥型NAT,也被称为一对一 NAT,这种NAT的实现方式为，只要内 部网络中的一个地址-端口对与外网的地址-端口对完成映射，那么，之后的任意 外网主机都可以通过这一映射实现与内部网络终端的通信。
受限圆锥型NAT有时会被称作地址受限圆锥型NAT,受限圆锥型NAT的实 现方式是，内部网络中的一个地址-端口对与外网的地址-端口对完成映射后，外 网中的主机只要接受到过映射中的内网终端的数据包，就可以通过上述的地址- 端口映射实现与内网终端设备的通信。
端口受限圆锥型NAT同样是完成内部网络中的一个地址-端口对与外网的地 址-端口对完成映射后，通过上述的地址-端口映射实现与内网终端设备的通信。 外网中的主机不同之处在于，外网主机可以通过建立的地址-端口对映射进行通 信的前提是，外网主机必须使用内网终端曾发包到过的端口与内网终端进行通信。
对称NAT的实现方式是，内部网络终端与外网主机通信时，拥有不同地址- 端口对的网络数据包与目的地址-端口对的通信都会使用不同地址-端口对映射， 而且，只有曾经与内网中主机通信过的外部主机才可与同一网络中的终端进行通 信。
因技术成熟，方便易用，NAT技术获得了大范围的应用。除了可以作为使 用私有地址的网络终端与外网中的主机进行通信的方法之外，NAT技术还可以 通过将部分指向特定服务器的连接重定向到其他随机选定的服务器从而实现服 务器负载均衡，通过NAT实现的连接重定向也可以在特定主机出现故障的情况下，将流量负载转移到备份服务器，从而实现高可靠的服务。
NAT的广泛使用虽然带来了诸多的便利，为地址耗尽问题提供了良好的解 决方案，但在网络审计中却成为了一个障碍。正如NAT技术的另一个名称IP掩 蔽(IP masquerading)的字面意思表述的那样，NAT的存在使得NAT设备后的 网络的结构以及终端的组成变得难于获取。然而对网络结构，尤其是网络中终端 的组成情况的掌握是网络审计中的一个重要因素。

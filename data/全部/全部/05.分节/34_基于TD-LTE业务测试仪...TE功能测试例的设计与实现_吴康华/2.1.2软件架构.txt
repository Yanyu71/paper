2.1.2软件架构
运行在TD-LTE业务测试仪本体和控制计算机上的所有软件可分为四个模 块：TD-LTE SS软件、系统管理软件及Log分析软件和TTCN-3可执行测试套 软件，图2-2是TD-LTE业务测试系统的软件架构叫
图2-2 TD-LTE业务测试系统软件架构 下面根据图2-2予以简要说明。
1.TTCN-3可执行测试套
TTCN-3可执行测试套软件有两部分构成：TTCN-3测试套和系统适配层 (SystemAdapter)o其中，TTCN-3测试套由测试例和测试套公共部分构成。
TTCN-3测试套既可以是标准PCT测试套，由3GPP发布，也可以是用户自定义 测试套，但必须符合标准ASP。系统适配层需要研发人员自己实现。
测试套均遵守3GPP协议规定，协议3GPPTS36.523-1规定了测试例的信令 流程、参数配置、初始条件、测试点等。协议3GPPTS36.523-3规定了测试套的 公共部分标准。TTCN-3文件讲过编译后生成C语言文件，将这些C文件与适配 层代码导入Visio Studio后编译链接生成可执行文件。
适配层由以下几个模块组成：适配层控制模块，该模块作用是完成适配层初 始化、接口映射和测试例执行控制。原语编解码模块，该模块作用是将TTCN-3 格式与C语言格式的原语之间相互转换。原语发送模块和原语接收模块，负责 TTCN-3原语的发送和接收。TTCN-3 Timer适配模块，负责测试流程中的始终控 制。TTCN-3外部函数集，为TTCN-3申明的外部函数进行定义。Log模块，该 模块负责执行过程中的log打印输出到log管理软件。
2)系统管理软件作为用户与仪表交互软件，有很友好的用户界面。系统管 理软件的作用是进行系统初始化操作，硬件管理(包括硬件自检等)。同时， TTCN-3可执行测试套、测试例的执行与结束和测试过程中产生的交互信息均由 该模块控制。系统管理软件与TD-LTESS之间的通信方式是socket通信，包括 控制命令、本端参数配置原语和TTCN-3测试例的空口信令(包括上行和下行)。
3)Log分析软件的作用是输出各层产生的日志信息。包括物理层、数据链 路层以及高层logo其中运行在DSP上的物理层和数据链路层的log由通信接口 发送到控制计算机上的log分析软件。L3的控制信令本身就存在于控制计算机 上。Log分析软件能够显示物理层的比特流，数据链路层的码流和RRC层的信 令消息及其内部结构。
4)TD-LTE SS软件即运行在终端协议分析仪本体上的软件集合。主要是运 行在DSP上的物理层和数据链路层协议栈软件，辅以通信接口软件和操作系统 提供的进程管理软件。系统开机后，TD-LTE SS始终处于运行状态，等待控制计 算机发送的原语进行相应的操作。
通信接口软件负责TD-LTE系统模拟器(System Simulator)和控制计算机之 间的通信，其通信方式是socket通信。接收控制计算机发送到物理层和数据链路 层的控制指令和消息原语。并将DSP上软件的消息发送给控制计算机。并且通 信软件模块还可以设置射频参数如频点等。上文提到物理层和数据链路层的log 发送到控制计算机就是由通信接口模块负责的。

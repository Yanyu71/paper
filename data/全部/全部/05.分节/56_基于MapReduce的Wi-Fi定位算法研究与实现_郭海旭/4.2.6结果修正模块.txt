4.2.6结果修正模块
实验结果表明，定位引擎模块获得的定位结果并不总是准确的，定位的坐标 与实际坐标可能发生偏离。主要原因是一些AP的信号发射功率波动较大，对应
40
的RSSI多为无效数据，才导致了错误的结果“刀。为减少误差，提高精度，需要 在实时定位模块之后设置一个结果修正模块。此模块是基于人体在室内环境下移 动的瞬时速度和加速度的原理建立的，通过比较在一段时间内待测节点的位移情 况就能够大致预测到下一次定位的范围区间。若是待测节点超过范围，系统将自 动认定为本次定位无效，申请重新定位；若是没有超过范围，则表示定位结果有 效。结果修正模块流程图如图4-11所示。
开始
扫描当前Wi-Fi 数据
保存定位结果
结束
图4-11结果修正模块流程图
结果修正模块首先接收在实时定位模块的预测结果，然后根据修正后的结果 满足判定与否作出选择。如果定位结果满足要求，则坐标将被存储为新的正确定 位结果；如果定位结果不满足要求，表示发生了定位偏移，则模块自动向系统提 交重定位申请，再次调用定位模块重新定位，重复上述过程。当重复次数超过预 设值，则放弃重定位，直接返回定位结果。

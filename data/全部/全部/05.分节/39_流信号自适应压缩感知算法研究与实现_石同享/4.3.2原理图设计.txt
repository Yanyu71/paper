4.3.2原理图设计
图2-2描述了 MWC采样结构。
参照文献"1的设计方案，将输入信号的带宽设置为105MHz,则总的奈奎斯 特带宽为.饥=210MHz ,将其分为M = 166个子段，每个子段的带宽为 B= 1.265MHz。设置观察的最多非空子段为N = 6,也就是稀疏度最大为6%,降 支路因子q = 3,则伪随机序列的频率为人=/,,g/M = 1.265MHz，则采样的支路数 应该全少为m = 4N/q/2 = 4 ,每支路最后的采样率为九=q/p = 3.8MHz ,混频后 每个低通滤波器的截止频率为./；=/；/2 21.9MHz。其相应的设计参数如表4-1 所示。
表4-1基于MWC的压缩感知设计参数列表
参数	选择
信号模式	N=6	,	B = 1.265 MHz	,
"210MHz
采样支路数秫	4
（续上表）表4-1基于MWC的压缩感知设计参数列表
参数	选择
伪随机序列相对应的波形	周期性方波
fnyq	210MHz
子带个数M	166
方波的频率九	1.265 MHz
混频后低通滤波器截止频率fc	1.9MHz
单支路采样频率X	qfv = 3.8MHz
按照4-1确定好参数后，在具体的电路设计以及元器件选型时首先需要考虑 「些基本的细节：
a）	在系统中考虑利用4.2节中使用的ZC706平台的FMC接口给该压缩感 知硬件系统供电，并用ZC706提供图2-2中的高速伪随机序列（ZC706 FMC接口非常丰富，拥有400pin）o因此需要设计FMC接口作为用户 数字电路接口和ZC706互联。
b）	该系统属于数字电路和模拟电路的混合系统，从模拟信号经过混频，而 后到达ADC的输入点，这部分都是模拟电路，而ADC对数据进行采集 以及通过FMC接口输出数字信号属于数字部分，两部分对应的电路元 器件需要在PCB板上分开放置，因此后续将在PCB设计中采用多面设 计，尽可能将两部分的电路分开，减小数字和模拟电路之间的相互干扰。
c）	完整的电路系统都需要可靠的电源系统，电路板对电源系统要求很高， 一旦电源部分出现故障，系统将完全停止工作，严重时甚至造成烧掉整 个电路板的后果，因此需要一个单独的电源系统来给整个系统的各模块 供电。
d）	本系统中采用4支路的实现方式，为了保证各路模拟输入信号的一致， 考虑使用高性能的功分器，得到完全一致的4路模拟信号，分别进行后 续处理。
e）	混频部分是模拟信号和对应模拟输入信号奈奎斯特速率级别的数字信 号混频，也就是乘法电路。但是在宽带高速电路中不可简单使用乘法电 路，需要专门的芯片来完成，本文将采用mini-Circuit公司的宽带混频器 来完成。
f）	混频输入的信号要求是正负双极性信号，然而ZC706通过MFC电路输 入的电源信号都是高电平和零电平，因此本文将设计单极性转双极性电
路来完成信号极性的转变，以满足混频器对输入的高速伪随机数字信号 的要求。
g)对混频器的输出信号将采用低通滤波器对其进行过滤。
h)ADC部分，考虑使用2个Analog Device公司的高速双通道ADC来完 成对低通滤波器后信号的釆样，同时将其釆样的到的信号通过MFC接 口提供给用户，可以通过ZC706的MFC接口来获取釆集到的数字信号。
根据上述重要的实现思路，可以将硬件电路的实现分为五个部分：电源部分、 模拟射频输入端到低通滤波器输出部分(包含功分、混频、低通滤波)、ADC电 路部分、单极性转双极性电路部分、FMC接口部分，如图4-5所示。接下来按照 这五部分(ABCDE)分别进行介绍，本文釆用Altium Designer来完成原理图和PCB 的设计。
釆用ZC706【4］的FMC^］接口给该系统供电。该宽带信号压缩感知系统需要
+5V.-5V的电源，但ZC706只能提供12V, 2.5V, 3.3V电源电压。考虑利用12V 电源转化得到需要的5V,然后将5V通过特定的芯片转化为-5V电压，转化电路 如4-6所示，这里釆用特定的芯片完成电压的转化是为了保证转化后电压的稳定 性。
? 4-6电源部分
其中，ADP7104ARDZ【38］是一种高性能的带稳压的电源转换芯片，可以完成 3.3-20V至5V的转换。LMR70503【39］则是一款由TI公司生产的可调节输出电压 的微型反向DC/DC转换器，加上一些外围的调整元器件即可完成电压的转换, 得到可靠的电源。
B.模拟射频输入端到低通滤波器输出部分设计
该部分包括将模拟射频输入通过功分器分为四个支路,然后各支路的信号进 入混频器，与输入的四个支路的伪随机序列进行混频，最后通过功率调整器，使 其能满足后续低通滤波器的输入功率要求，低通滤波器输出的四个支路的模拟信 号直接被多路ADC采样。
图4-7a输入限带与功分器部分
该部分主要有两块，其一是如图4-7a所示的，对输入的信号限带和功分。
输入信号的带宽是没有限制的，需要使用一个滤波器滤出感兴趣的信号，这里观 测的是0-105MHz的输入信号，因此使用了一个由Mini-Circuit生产的截止频率 为105MHz的低通滤波器RLP105+,本系统定为釆用四个支路的设计，各支路 的输入模拟信号应该是完全一致的，因此釆用了一个由Mini-circuit生产的1分 4的功分器SCP-4-1来完成这部分的工作。其二是如图4-7b所示的混频部分，这 部分包含了混频部分和低通滤波部分，混频部分釆用了由Mini-Circuit生产的混 频器ADE-R6LH+,而低通滤波器部分则釆用了 Mini-Circuit生产的截止频率为1.9MHz的低通滤波器PLP-1.9+o
C. ADC电路部分设计
图4-8 ADC电路部分
该部分采用了两个能满足采样率要求的双通道ADC,这里的双通道并不是 时分的双通道，而是两个相互独立的采样通道，可以保证同时釆样，这符合本系 统的采样要求。如图4-8,釆用的实际ADC芯片为Analog Device的AD7356, 其最大的釆样率为5MSPS,采样速率可调，能满足系统中3.8MSPS的实际釆样 率的要求。AD7356为保证采样精度，采用了差分输入，而C部分低通滤波器的 输出信号则是单端的，可釆用Analog Device产的AD8136以及OP177将单端输 入信号转变为AD7356能识别的差分信号，这里结合OP177以及AD8136都参 考了 Analog Device公司提供的参考电路设计。最后由AD7356完成信号的釆样 并输出数字信号。
D.单极性转双极性电路部分设计
图4-9单极性转双极性电路设计
本部分主要用来完成对ZC706输出的数字信号从单极性到双极性的转化。 釆用两个ADI公司的宽带运算放大器组合来实现其转化。
E. FMC接口部分设计
。。?卜'。。?卜。?、-c-。ff<" Frc - iaDsnnB3PB8BB0fl Baaaoass eassxss a"
■L典)
■T~RSQ
图 4-10 FMC 接口
如图4-10,采用FMC接口主要是为了利用ZC706的现有资源，包括电源以 及丰富的数字10,通过FMC接口来管理伪随机序列的输出，最终釆样数字信号 的输出等。

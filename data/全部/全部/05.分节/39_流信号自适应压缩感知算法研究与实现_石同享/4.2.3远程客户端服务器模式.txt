4.2.3远程客户端服务器模式
本部分介绍远程宽带数据釆集系统中的客户端/服务器模式。将分为A和B 两个部分，分别介绍从AD9361和ZC706上获取数据和客户端服务器模式。
A.AD9361和ZC706获取数据
首先通过SPI接口来配置AD9361的寄存器。通过读写寄存器就可以完成对 AD9361的基本配置，读取AD9361的状态。在AD9361采集了空中宽带无线数 据后，数据暂存到了 ZC706自带的DDR里，从AD9361的数据传输端口到DDR 的传输过程采用DMA (Direct Memory Access)方式。将数据存储到DDR这种 非易失性的存储器后，可以在ZC706平台上对数据进行处理或者将数据通过 UART或ETHERNET传送给其他的终端来处理。ZC706上的编程可以通过分为 两部分，-是采用Verilog语言，对底层的FPGA部分进行设计，该部分主要完 成根据从ARM处理器来的指令来配置AD9361以及对AD9361返回的数据进行 串并转化等基本操作，这个过程中需要对包含UART,SPI,AD9361-IPCORE在内 的部分进行模块化设计，AD9361部分的操作主要是对SPI读写即可，因此不是 讨论的重点。另外一个大的部分是采用C语言编写嵌入式程序灌入到ARM的处 理器，这部分完成的工作主要是服务器的配置，在B部分介绍。
B.客户端服务器模式
该数据采集系统采用Gigabit级的ETHERNET。】来实现数据的传输。将 ZC706配置为服务器监听来自客户端的请求，并给连接请求分配资源来完成后续 通信。其监听和服务机制如图4-3。
图4-3数据采集系统客户端/服务器流困
在硬件平台上电以后服务器端程序开始运行，进程将创建一个监听的端口监 听来自客户端的请求，服务器端ACCEPT连接后表示客户端和服务器建立可靠 连接。此后服务器接收来自客户端的配置参数，进而配置好硬件，接下来完成客 户端所需要的数据的釆集和交互，该部分均在SDK平台上釆用C语言来编程完 成。
